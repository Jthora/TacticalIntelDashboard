var Tm=Object.defineProperty;var bh=r=>{throw TypeError(r)};var jm=(r,e,t)=>e in r?Tm(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var O=(r,e,t)=>jm(r,typeof e!="symbol"?e+"":e,t),Eu=(r,e,t)=>e.has(r)||bh("Cannot "+t);var I=(r,e,t)=>(Eu(r,e,"read from private field"),t?t.call(r):e.get(r)),re=(r,e,t)=>e.has(r)?bh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),U=(r,e,t,s)=>(Eu(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),me=(r,e,t)=>(Eu(r,e,"access private method"),t);var Vo=(r,e,t,s)=>({set _(i){U(r,e,i,t)},get _(){return I(r,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function R(J){return J===null||typeof J!="object"?null:(J=E&&J[E]||J["@@iterator"],typeof J=="function"?J:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,N={};function k(J,ie,Re){this.props=J,this.context=ie,this.refs=N,this.updater=Re||A}k.prototype.isReactComponent={},k.prototype.setState=function(J,ie){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ie,"setState")},k.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function j(){}j.prototype=k.prototype;function $(J,ie,Re){this.props=J,this.context=ie,this.refs=N,this.updater=Re||A}var D=$.prototype=new j;D.constructor=$,S(D,k.prototype),D.isPureReactComponent=!0;var z=Array.isArray,L=Object.prototype.hasOwnProperty,M={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function W(J,ie,Re){var je,Ie={},$e=null,Be=null;if(ie!=null)for(je in ie.ref!==void 0&&(Be=ie.ref),ie.key!==void 0&&($e=""+ie.key),ie)L.call(ie,je)&&!G.hasOwnProperty(je)&&(Ie[je]=ie[je]);var ke=arguments.length-2;if(ke===1)Ie.children=Re;else if(1<ke){for(var De=Array(ke),Ye=0;Ye<ke;Ye++)De[Ye]=arguments[Ye+2];Ie.children=De}if(J&&J.defaultProps)for(je in ke=J.defaultProps,ke)Ie[je]===void 0&&(Ie[je]=ke[je]);return{$$typeof:r,type:J,key:$e,ref:Be,props:Ie,_owner:M.current}}function q(J,ie){return{$$typeof:r,type:J.type,key:ie,ref:J.ref,props:J.props,_owner:J._owner}}function oe(J){return typeof J=="object"&&J!==null&&J.$$typeof===r}function le(J){var ie={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Re){return ie[Re]})}var Te=/\/+/g;function Ae(J,ie){return typeof J=="object"&&J!==null&&J.key!=null?le(""+J.key):ie.toString(36)}function we(J,ie,Re,je,Ie){var $e=typeof J;($e==="undefined"||$e==="boolean")&&(J=null);var Be=!1;if(J===null)Be=!0;else switch($e){case"string":case"number":Be=!0;break;case"object":switch(J.$$typeof){case r:case e:Be=!0}}if(Be)return Be=J,Ie=Ie(Be),J=je===""?"."+Ae(Be,0):je,z(Ie)?(Re="",J!=null&&(Re=J.replace(Te,"$&/")+"/"),we(Ie,ie,Re,"",function(Ye){return Ye})):Ie!=null&&(oe(Ie)&&(Ie=q(Ie,Re+(!Ie.key||Be&&Be.key===Ie.key?"":(""+Ie.key).replace(Te,"$&/")+"/")+J)),ie.push(Ie)),1;if(Be=0,je=je===""?".":je+":",z(J))for(var ke=0;ke<J.length;ke++){$e=J[ke];var De=je+Ae($e,ke);Be+=we($e,ie,Re,De,Ie)}else if(De=R(J),typeof De=="function")for(J=De.call(J),ke=0;!($e=J.next()).done;)$e=$e.value,De=je+Ae($e,ke++),Be+=we($e,ie,Re,De,Ie);else if($e==="object")throw ie=String(J),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Be}function de(J,ie,Re){if(J==null)return J;var je=[],Ie=0;return we(J,je,"","",function($e){return ie.call(Re,$e,Ie++)}),je}function Z(J){if(J._status===-1){var ie=J._result;ie=ie(),ie.then(function(Re){(J._status===0||J._status===-1)&&(J._status=1,J._result=Re)},function(Re){(J._status===0||J._status===-1)&&(J._status=2,J._result=Re)}),J._status===-1&&(J._status=0,J._result=ie)}if(J._status===1)return J._result.default;throw J._result}var pe={current:null},ae={transition:null},se={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:ae,ReactCurrentOwner:M};function ce(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:de,forEach:function(J,ie,Re){de(J,function(){ie.apply(this,arguments)},Re)},count:function(J){var ie=0;return de(J,function(){ie++}),ie},toArray:function(J){return de(J,function(ie){return ie})||[]},only:function(J){if(!oe(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},react_production_min.Component=k,react_production_min.Fragment=t,react_production_min.Profiler=i,react_production_min.PureComponent=$,react_production_min.StrictMode=s,react_production_min.Suspense=p,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,react_production_min.act=ce,react_production_min.cloneElement=function(J,ie,Re){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var je=S({},J.props),Ie=J.key,$e=J.ref,Be=J._owner;if(ie!=null){if(ie.ref!==void 0&&($e=ie.ref,Be=M.current),ie.key!==void 0&&(Ie=""+ie.key),J.type&&J.type.defaultProps)var ke=J.type.defaultProps;for(De in ie)L.call(ie,De)&&!G.hasOwnProperty(De)&&(je[De]=ie[De]===void 0&&ke!==void 0?ke[De]:ie[De])}var De=arguments.length-2;if(De===1)je.children=Re;else if(1<De){ke=Array(De);for(var Ye=0;Ye<De;Ye++)ke[Ye]=arguments[Ye+2];je.children=ke}return{$$typeof:r,type:J.type,key:Ie,ref:$e,props:je,_owner:Be}},react_production_min.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:a,_context:J},J.Consumer=J},react_production_min.createElement=W,react_production_min.createFactory=function(J){var ie=W.bind(null,J);return ie.type=J,ie},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(J){return{$$typeof:u,render:J}},react_production_min.isValidElement=oe,react_production_min.lazy=function(J){return{$$typeof:w,_payload:{_status:-1,_result:J},_init:Z}},react_production_min.memo=function(J,ie){return{$$typeof:x,type:J,compare:ie===void 0?null:ie}},react_production_min.startTransition=function(J){var ie=ae.transition;ae.transition={};try{J()}finally{ae.transition=ie}},react_production_min.unstable_act=ce,react_production_min.useCallback=function(J,ie){return pe.current.useCallback(J,ie)},react_production_min.useContext=function(J){return pe.current.useContext(J)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(J){return pe.current.useDeferredValue(J)},react_production_min.useEffect=function(J,ie){return pe.current.useEffect(J,ie)},react_production_min.useId=function(){return pe.current.useId()},react_production_min.useImperativeHandle=function(J,ie,Re){return pe.current.useImperativeHandle(J,ie,Re)},react_production_min.useInsertionEffect=function(J,ie){return pe.current.useInsertionEffect(J,ie)},react_production_min.useLayoutEffect=function(J,ie){return pe.current.useLayoutEffect(J,ie)},react_production_min.useMemo=function(J,ie){return pe.current.useMemo(J,ie)},react_production_min.useReducer=function(J,ie,Re){return pe.current.useReducer(J,ie,Re)},react_production_min.useRef=function(J){return pe.current.useRef(J)},react_production_min.useState=function(J){return pe.current.useState(J)},react_production_min.useSyncExternalStore=function(J,ie,Re){return pe.current.useSyncExternalStore(J,ie,Re)},react_production_min.useTransition=function(){return pe.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var r=requireReact(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,p,x){var w,E={},R=null,A=null;x!==void 0&&(R=""+x),p.key!==void 0&&(R=""+p.key),p.ref!==void 0&&(A=p.ref);for(w in p)s.call(p,w)&&!a.hasOwnProperty(w)&&(E[w]=p[w]);if(u&&u.defaultProps)for(w in p=u.defaultProps,p)E[w]===void 0&&(E[w]=p[w]);return{$$typeof:e,type:u,key:R,ref:A,props:E,_owner:i.current}}return reactJsxRuntime_production_min.Fragment=t,reactJsxRuntime_production_min.jsx=l,reactJsxRuntime_production_min.jsxs=l,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(r){function e(ae,se){var ce=ae.length;ae.push(se);e:for(;0<ce;){var J=ce-1>>>1,ie=ae[J];if(0<i(ie,se))ae[J]=se,ae[ce]=ie,ce=J;else break e}}function t(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var se=ae[0],ce=ae.pop();if(ce!==se){ae[0]=ce;e:for(var J=0,ie=ae.length,Re=ie>>>1;J<Re;){var je=2*(J+1)-1,Ie=ae[je],$e=je+1,Be=ae[$e];if(0>i(Ie,ce))$e<ie&&0>i(Be,Ie)?(ae[J]=Be,ae[$e]=ce,J=$e):(ae[J]=Ie,ae[je]=ce,J=je);else if($e<ie&&0>i(Be,ce))ae[J]=Be,ae[$e]=ce,J=$e;else break e}}return se}function i(ae,se){var ce=ae.sortIndex-se.sortIndex;return ce!==0?ce:ae.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var p=[],x=[],w=1,E=null,R=3,A=!1,S=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ae){for(var se=t(x);se!==null;){if(se.callback===null)s(x);else if(se.startTime<=ae)s(x),se.sortIndex=se.expirationTime,e(p,se);else break;se=t(x)}}function z(ae){if(N=!1,D(ae),!S)if(t(p)!==null)S=!0,Z(L);else{var se=t(x);se!==null&&pe(z,se.startTime-ae)}}function L(ae,se){S=!1,N&&(N=!1,j(W),W=-1),A=!0;var ce=R;try{for(D(se),E=t(p);E!==null&&(!(E.expirationTime>se)||ae&&!le());){var J=E.callback;if(typeof J=="function"){E.callback=null,R=E.priorityLevel;var ie=J(E.expirationTime<=se);se=r.unstable_now(),typeof ie=="function"?E.callback=ie:E===t(p)&&s(p),D(se)}else s(p);E=t(p)}if(E!==null)var Re=!0;else{var je=t(x);je!==null&&pe(z,je.startTime-se),Re=!1}return Re}finally{E=null,R=ce,A=!1}}var M=!1,G=null,W=-1,q=5,oe=-1;function le(){return!(r.unstable_now()-oe<q)}function Te(){if(G!==null){var ae=r.unstable_now();oe=ae;var se=!0;try{se=G(!0,ae)}finally{se?Ae():(M=!1,G=null)}}else M=!1}var Ae;if(typeof $=="function")Ae=function(){$(Te)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,de=we.port2;we.port1.onmessage=Te,Ae=function(){de.postMessage(null)}}else Ae=function(){k(Te,0)};function Z(ae){G=ae,M||(M=!0,Ae())}function pe(ae,se){W=k(function(){ae(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){S||A||(S=!0,Z(L))},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(ae){switch(R){case 1:case 2:case 3:var se=3;break;default:se=R}var ce=R;R=se;try{return ae()}finally{R=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,se){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ce=R;R=ae;try{return se()}finally{R=ce}},r.unstable_scheduleCallback=function(ae,se,ce){var J=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?J+ce:J):ce=J,ae){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=ce+ie,ae={id:w++,callback:se,priorityLevel:ae,startTime:ce,expirationTime:ie,sortIndex:-1},ce>J?(ae.sortIndex=ce,e(x,ae),t(p)===null&&ae===t(x)&&(N?(j(W),W=-1):N=!0,pe(z,ce-J))):(ae.sortIndex=ie,e(p,ae),S||A||(S=!0,Z(L))),ae},r.unstable_shouldYield=le,r.unstable_wrapCallback=function(ae){var se=R;return function(){var ce=R;R=se;try{return ae.apply(this,arguments)}finally{R=ce}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var r=requireReact(),e=requireScheduler();function t(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(i[o]=c,o=0;o<c.length;o++)s.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function R(o){return p.call(E,o)?!0:p.call(w,o)?!1:x.test(o)?E[o]=!0:(w[o]=!0,!1)}function A(o,c,f,g){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,f,g){if(c===null||typeof c>"u"||A(o,c,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function N(o,c,f,g,v,C,_){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=f,this.propertyName=o,this.type=c,this.sanitizeURL=C,this.removeEmptyString=_}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){k[o]=new N(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];k[c]=new N(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){k[o]=new N(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){k[o]=new N(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){k[o]=new N(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){k[o]=new N(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){k[o]=new N(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){k[o]=new N(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){k[o]=new N(o,5,!1,o.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function $(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(j,$);k[c]=new N(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(j,$);k[c]=new N(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(j,$);k[c]=new N(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){k[o]=new N(o,1,!1,o.toLowerCase(),null,!1,!1)}),k.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){k[o]=new N(o,1,!1,o.toLowerCase(),null,!0,!0)});function D(o,c,f,g){var v=k.hasOwnProperty(c)?k[c]:null;(v!==null?v.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,f,v,g)&&(f=null),g||v===null?R(c)&&(f===null?o.removeAttribute(c):o.setAttribute(c,""+f)):v.mustUseProperty?o[v.propertyName]=f===null?v.type===3?!1:"":f:(c=v.attributeName,g=v.attributeNamespace,f===null?o.removeAttribute(c):(v=v.type,f=v===3||v===4&&f===!0?"":""+f,g?o.setAttributeNS(g,c,f):o.setAttribute(c,f))))}var z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),M=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),le=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),ae=Symbol.iterator;function se(o){return o===null||typeof o!="object"?null:(o=ae&&o[ae]||o["@@iterator"],typeof o=="function"?o:null)}var ce=Object.assign,J;function ie(o){if(J===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);J=c&&c[1]||""}return`
`+J+o}var Re=!1;function je(o,c){if(!o||Re)return"";Re=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(te){var g=te}Reflect.construct(o,[],c)}else{try{c.call()}catch(te){g=te}o.call(c.prototype)}else{try{throw Error()}catch(te){g=te}o()}}catch(te){if(te&&g&&typeof te.stack=="string"){for(var v=te.stack.split(`
`),C=g.stack.split(`
`),_=v.length-1,H=C.length-1;1<=_&&0<=H&&v[_]!==C[H];)H--;for(;1<=_&&0<=H;_--,H--)if(v[_]!==C[H]){if(_!==1||H!==1)do if(_--,H--,0>H||v[_]!==C[H]){var Q=`
`+v[_].replace(" at new "," at ");return o.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",o.displayName)),Q}while(1<=_&&0<=H);break}}}finally{Re=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?ie(o):""}function Ie(o){switch(o.tag){case 5:return ie(o.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return o=je(o.type,!1),o;case 11:return o=je(o.type.render,!1),o;case 1:return o=je(o.type,!0),o;default:return""}}function $e(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case G:return"Fragment";case M:return"Portal";case q:return"Profiler";case W:return"StrictMode";case Ae:return"Suspense";case we:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case le:return(o.displayName||"Context")+".Consumer";case oe:return(o._context.displayName||"Context")+".Provider";case Te:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case de:return c=o.displayName||null,c!==null?c:$e(o.type)||"Memo";case Z:c=o._payload,o=o._init;try{return $e(o(c))}catch{}}return null}function Be(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(c);case 8:return c===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ke(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function De(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ye(o){var c=De(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,C=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return v.call(this)},set:function(_){g=""+_,C.call(this,_)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(_){g=""+_},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Mr(o){o._valueTracker||(o._valueTracker=Ye(o))}function Qt(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return o&&(g=De(o)?o.checked?"true":"false":o.value),o=g,o!==f?(c.setValue(o),!0):!1}function Ze(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function gt(o,c){var f=c.checked;return ce({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function Qn(o,c){var f=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;f=ke(c.value!=null?c.value:f),o._wrapperState={initialChecked:g,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Kn(o,c){c=c.checked,c!=null&&D(o,"checked",c,!1)}function Xn(o,c){Kn(o,c);var f=ke(c.value),g=c.type;if(f!=null)g==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?oo(o,c.type,f):c.hasOwnProperty("defaultValue")&&oo(o,c.type,ke(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function aa(o,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,f||c===o.value||(o.value=c),o.defaultValue=c}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function oo(o,c,f){(c!=="number"||Ze(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var un=Array.isArray;function lr(o,c,f,g){if(o=o.options,c){c={};for(var v=0;v<f.length;v++)c["$"+f[v]]=!0;for(f=0;f<o.length;f++)v=c.hasOwnProperty("$"+o[f].value),o[f].selected!==v&&(o[f].selected=v),v&&g&&(o[f].defaultSelected=!0)}else{for(f=""+ke(f),c=null,v=0;v<o.length;v++){if(o[v].value===f){o[v].selected=!0,g&&(o[v].defaultSelected=!0);return}c!==null||o[v].disabled||(c=o[v])}c!==null&&(c.selected=!0)}}function $t(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ms(o,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if(un(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}o._wrapperState={initialValue:ke(f)}}function ca(o,c){var f=ke(c.value),g=ke(c.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),c.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),g!=null&&(o.defaultValue=""+g)}function ur(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function la(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?la(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var T,P=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,g,v){MSApp.execUnsafeLocalFunction(function(){return o(c,f,g,v)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(T=T||document.createElement("div"),T.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=T.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function F(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ne=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(o){ne.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),X[c]=X[o]})});function ue(o,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||X.hasOwnProperty(o)&&X[o]?(""+c).trim():c+"px"}function _e(o,c){o=o.style;for(var f in c)if(c.hasOwnProperty(f)){var g=f.indexOf("--")===0,v=ue(f,c[f],g);f==="float"&&(f="cssFloat"),g?o.setProperty(f,v):o[f]=v}}var Qe=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function He(o,c){if(c){if(Qe[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Ge(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ue=null;function _c(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Bc=null,zs=null,Hs=null;function Ou(o){if(o=jo(o)){if(typeof Bc!="function")throw Error(t(280));var c=o.stateNode;c&&(c=$a(c),Bc(o.stateNode,o.type,c))}}function Du(o){zs?Hs?Hs.push(o):Hs=[o]:zs=o}function Fu(){if(zs){var o=zs,c=Hs;if(Hs=zs=null,Ou(o),c)for(o=0;o<c.length;o++)Ou(c[o])}}function Lu(o,c){return o(c)}function Uu(){}var Oc=!1;function Mu(o,c,f){if(Oc)return o(c,f);Oc=!0;try{return Lu(o,c,f)}finally{Oc=!1,(zs!==null||Hs!==null)&&(Uu(),Fu())}}function ao(o,c){var f=o.stateNode;if(f===null)return null;var g=$a(f);if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var Dc=!1;if(u)try{var co={};Object.defineProperty(co,"passive",{get:function(){Dc=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Dc=!1}function kh(o,c,f,g,v,C,_,H,Q){var te=Array.prototype.slice.call(arguments,3);try{c.apply(f,te)}catch(he){this.onError(he)}}var lo=!1,ua=null,da=!1,Fc=null,_h={onError:function(o){lo=!0,ua=o}};function Bh(o,c,f,g,v,C,_,H,Q){lo=!1,ua=null,kh.apply(_h,arguments)}function Oh(o,c,f,g,v,C,_,H,Q){if(Bh.apply(this,arguments),lo){if(lo){var te=ua;lo=!1,ua=null}else throw Error(t(198));da||(da=!0,Fc=te)}}function Yn(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function zu(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Hu(o){if(Yn(o)!==o)throw Error(t(188))}function Dh(o){var c=o.alternate;if(!c){if(c=Yn(o),c===null)throw Error(t(188));return c!==o?null:o}for(var f=o,g=c;;){var v=f.return;if(v===null)break;var C=v.alternate;if(C===null){if(g=v.return,g!==null){f=g;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===f)return Hu(v),o;if(C===g)return Hu(v),c;C=C.sibling}throw Error(t(188))}if(f.return!==g.return)f=v,g=C;else{for(var _=!1,H=v.child;H;){if(H===f){_=!0,f=v,g=C;break}if(H===g){_=!0,g=v,f=C;break}H=H.sibling}if(!_){for(H=C.child;H;){if(H===f){_=!0,f=C,g=v;break}if(H===g){_=!0,g=C,f=v;break}H=H.sibling}if(!_)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?o:c}function Vu(o){return o=Dh(o),o!==null?Gu(o):null}function Gu(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Gu(o);if(c!==null)return c;o=o.sibling}return null}var qu=e.unstable_scheduleCallback,Wu=e.unstable_cancelCallback,Fh=e.unstable_shouldYield,Lh=e.unstable_requestPaint,nt=e.unstable_now,Uh=e.unstable_getCurrentPriorityLevel,Lc=e.unstable_ImmediatePriority,Ju=e.unstable_UserBlockingPriority,fa=e.unstable_NormalPriority,Mh=e.unstable_LowPriority,Qu=e.unstable_IdlePriority,ha=null,Ar=null;function zh(o){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(ha,o,void 0,(o.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:Gh,Hh=Math.log,Vh=Math.LN2;function Gh(o){return o>>>=0,o===0?32:31-(Hh(o)/Vh|0)|0}var pa=64,ma=4194304;function uo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ga(o,c){var f=o.pendingLanes;if(f===0)return 0;var g=0,v=o.suspendedLanes,C=o.pingedLanes,_=f&268435455;if(_!==0){var H=_&~v;H!==0?g=uo(H):(C&=_,C!==0&&(g=uo(C)))}else _=f&~v,_!==0?g=uo(_):C!==0&&(g=uo(C));if(g===0)return 0;if(c!==0&&c!==g&&(c&v)===0&&(v=g&-g,C=c&-c,v>=C||v===16&&(C&4194240)!==0))return c;if((g&4)!==0&&(g|=f&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)f=31-dr(c),v=1<<f,g|=o[f],c&=~v;return g}function qh(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wh(o,c){for(var f=o.suspendedLanes,g=o.pingedLanes,v=o.expirationTimes,C=o.pendingLanes;0<C;){var _=31-dr(C),H=1<<_,Q=v[_];Q===-1?((H&f)===0||(H&g)!==0)&&(v[_]=qh(H,c)):Q<=c&&(o.expiredLanes|=H),C&=~H}}function Uc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Ku(){var o=pa;return pa<<=1,(pa&4194240)===0&&(pa=64),o}function Mc(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function fo(o,c,f){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-dr(c),o[c]=f}function Jh(o,c){var f=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<f;){var v=31-dr(f),C=1<<v;c[v]=0,g[v]=-1,o[v]=-1,f&=~C}}function zc(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var g=31-dr(f),v=1<<g;v&c|o[g]&c&&(o[g]|=c),f&=~v}}var ze=0;function Xu(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Yu,Hc,Zu,ed,td,Vc=!1,ya=[],dn=null,fn=null,hn=null,ho=new Map,po=new Map,pn=[],Qh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rd(o,c){switch(o){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":ho.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(c.pointerId)}}function mo(o,c,f,g,v,C){return o===null||o.nativeEvent!==C?(o={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:C,targetContainers:[v]},c!==null&&(c=jo(c),c!==null&&Hc(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),o)}function Kh(o,c,f,g,v){switch(c){case"focusin":return dn=mo(dn,o,c,f,g,v),!0;case"dragenter":return fn=mo(fn,o,c,f,g,v),!0;case"mouseover":return hn=mo(hn,o,c,f,g,v),!0;case"pointerover":var C=v.pointerId;return ho.set(C,mo(ho.get(C)||null,o,c,f,g,v)),!0;case"gotpointercapture":return C=v.pointerId,po.set(C,mo(po.get(C)||null,o,c,f,g,v)),!0}return!1}function nd(o){var c=Zn(o.target);if(c!==null){var f=Yn(c);if(f!==null){if(c=f.tag,c===13){if(c=zu(f),c!==null){o.blockedOn=c,td(o.priority,function(){Zu(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function xa(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=qc(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);Ue=g,f.target.dispatchEvent(g),Ue=null}else return c=jo(f),c!==null&&Hc(c),o.blockedOn=f,!1;c.shift()}return!0}function sd(o,c,f){xa(o)&&f.delete(c)}function Xh(){Vc=!1,dn!==null&&xa(dn)&&(dn=null),fn!==null&&xa(fn)&&(fn=null),hn!==null&&xa(hn)&&(hn=null),ho.forEach(sd),po.forEach(sd)}function go(o,c){o.blockedOn===c&&(o.blockedOn=null,Vc||(Vc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xh)))}function yo(o){function c(v){return go(v,o)}if(0<ya.length){go(ya[0],o);for(var f=1;f<ya.length;f++){var g=ya[f];g.blockedOn===o&&(g.blockedOn=null)}}for(dn!==null&&go(dn,o),fn!==null&&go(fn,o),hn!==null&&go(hn,o),ho.forEach(c),po.forEach(c),f=0;f<pn.length;f++)g=pn[f],g.blockedOn===o&&(g.blockedOn=null);for(;0<pn.length&&(f=pn[0],f.blockedOn===null);)nd(f),f.blockedOn===null&&pn.shift()}var Vs=z.ReactCurrentBatchConfig,wa=!0;function Yh(o,c,f,g){var v=ze,C=Vs.transition;Vs.transition=null;try{ze=1,Gc(o,c,f,g)}finally{ze=v,Vs.transition=C}}function Zh(o,c,f,g){var v=ze,C=Vs.transition;Vs.transition=null;try{ze=4,Gc(o,c,f,g)}finally{ze=v,Vs.transition=C}}function Gc(o,c,f,g){if(wa){var v=qc(o,c,f,g);if(v===null)ll(o,c,g,Ea,f),rd(o,g);else if(Kh(v,o,c,f,g))g.stopPropagation();else if(rd(o,g),c&4&&-1<Qh.indexOf(o)){for(;v!==null;){var C=jo(v);if(C!==null&&Yu(C),C=qc(o,c,f,g),C===null&&ll(o,c,g,Ea,f),C===v)break;v=C}v!==null&&g.stopPropagation()}else ll(o,c,g,null,f)}}var Ea=null;function qc(o,c,f,g){if(Ea=null,o=_c(g),o=Zn(o),o!==null)if(c=Yn(o),c===null)o=null;else if(f=c.tag,f===13){if(o=zu(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Ea=o,null}function od(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uh()){case Lc:return 1;case Ju:return 4;case fa:case Mh:return 16;case Qu:return 536870912;default:return 16}default:return 16}}var mn=null,Wc=null,ba=null;function ad(){if(ba)return ba;var o,c=Wc,f=c.length,g,v="value"in mn?mn.value:mn.textContent,C=v.length;for(o=0;o<f&&c[o]===v[o];o++);var _=f-o;for(g=1;g<=_&&c[f-g]===v[C-g];g++);return ba=v.slice(o,1<g?1-g:void 0)}function va(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Sa(){return!0}function cd(){return!1}function Ut(o){function c(f,g,v,C,_){this._reactName=f,this._targetInst=v,this.type=g,this.nativeEvent=C,this.target=_,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(f=o[H],this[H]=f?f(C):C[H]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Sa:cd,this.isPropagationStopped=cd,this}return ce(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),c}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jc=Ut(Gs),xo=ce({},Gs,{view:0,detail:0}),ep=Ut(xo),Qc,Kc,wo,Ra=ce({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==wo&&(wo&&o.type==="mousemove"?(Qc=o.screenX-wo.screenX,Kc=o.screenY-wo.screenY):Kc=Qc=0,wo=o),Qc)},movementY:function(o){return"movementY"in o?o.movementY:Kc}}),ld=Ut(Ra),tp=ce({},Ra,{dataTransfer:0}),rp=Ut(tp),np=ce({},xo,{relatedTarget:0}),Xc=Ut(np),sp=ce({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),ip=Ut(sp),op=ce({},Gs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ap=Ut(op),cp=ce({},Gs,{data:0}),ud=Ut(cp),lp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},up={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fp(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=dp[o])?!!c[o]:!1}function Yc(){return fp}var hp=ce({},xo,{key:function(o){if(o.key){var c=lp[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=va(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?up[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(o){return o.type==="keypress"?va(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?va(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),pp=Ut(hp),mp=ce({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=Ut(mp),gp=ce({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),yp=Ut(gp),xp=ce({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),wp=Ut(xp),Ep=ce({},Ra,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),bp=Ut(Ep),vp=[9,13,27,32],Zc=u&&"CompositionEvent"in window,Eo=null;u&&"documentMode"in document&&(Eo=document.documentMode);var Sp=u&&"TextEvent"in window&&!Eo,fd=u&&(!Zc||Eo&&8<Eo&&11>=Eo),hd=" ",pd=!1;function md(o,c){switch(o){case"keyup":return vp.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gd(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var qs=!1;function Rp(o,c){switch(o){case"compositionend":return gd(c);case"keypress":return c.which!==32?null:(pd=!0,hd);case"textInput":return o=c.data,o===hd&&pd?null:o;default:return null}}function Ap(o,c){if(qs)return o==="compositionend"||!Zc&&md(o,c)?(o=ad(),ba=Wc=mn=null,qs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return fd&&c.locale!=="ko"?null:c.data;default:return null}}var Cp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Cp[o.type]:c==="textarea"}function xd(o,c,f,g){Du(g),c=ja(c,"onChange"),0<c.length&&(f=new Jc("onChange","change",null,f,g),o.push({event:f,listeners:c}))}var bo=null,vo=null;function Np(o){Od(o,0)}function Aa(o){var c=Xs(o);if(Qt(c))return o}function Tp(o,c){if(o==="change")return c}var wd=!1;if(u){var el;if(u){var tl="oninput"in document;if(!tl){var Ed=document.createElement("div");Ed.setAttribute("oninput","return;"),tl=typeof Ed.oninput=="function"}el=tl}else el=!1;wd=el&&(!document.documentMode||9<document.documentMode)}function bd(){bo&&(bo.detachEvent("onpropertychange",vd),vo=bo=null)}function vd(o){if(o.propertyName==="value"&&Aa(vo)){var c=[];xd(c,vo,o,_c(o)),Mu(Np,c)}}function jp(o,c,f){o==="focusin"?(bd(),bo=c,vo=f,bo.attachEvent("onpropertychange",vd)):o==="focusout"&&bd()}function Pp(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Aa(vo)}function Ip(o,c){if(o==="click")return Aa(c)}function $p(o,c){if(o==="input"||o==="change")return Aa(c)}function kp(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var fr=typeof Object.is=="function"?Object.is:kp;function So(o,c){if(fr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var v=f[g];if(!p.call(c,v)||!fr(o[v],c[v]))return!1}return!0}function Sd(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Rd(o,c){var f=Sd(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=c&&g>=c)return{node:f,offset:c-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Sd(f)}}function Ad(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Ad(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Cd(){for(var o=window,c=Ze();c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=Ze(o.document)}return c}function rl(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function _p(o){var c=Cd(),f=o.focusedElem,g=o.selectionRange;if(c!==f&&f&&f.ownerDocument&&Ad(f.ownerDocument.documentElement,f)){if(g!==null&&rl(f)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(o,f.value.length);else if(o=(c=f.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var v=f.textContent.length,C=Math.min(g.start,v);g=g.end===void 0?C:Math.min(g.end,v),!o.extend&&C>g&&(v=g,g=C,C=v),v=Rd(f,C);var _=Rd(f,g);v&&_&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==_.node||o.focusOffset!==_.offset)&&(c=c.createRange(),c.setStart(v.node,v.offset),o.removeAllRanges(),C>g?(o.addRange(c),o.extend(_.node,_.offset)):(c.setEnd(_.node,_.offset),o.addRange(c)))}}for(c=[],o=f;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)o=c[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Bp=u&&"documentMode"in document&&11>=document.documentMode,Ws=null,nl=null,Ro=null,sl=!1;function Nd(o,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;sl||Ws==null||Ws!==Ze(g)||(g=Ws,"selectionStart"in g&&rl(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ro&&So(Ro,g)||(Ro=g,g=ja(nl,"onSelect"),0<g.length&&(c=new Jc("onSelect","select",null,c,f),o.push({event:c,listeners:g}),c.target=Ws)))}function Ca(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var Js={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionend:Ca("Transition","TransitionEnd")},il={},Td={};u&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Na(o){if(il[o])return il[o];if(!Js[o])return o;var c=Js[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in Td)return il[o]=c[f];return o}var jd=Na("animationend"),Pd=Na("animationiteration"),Id=Na("animationstart"),$d=Na("transitionend"),kd=new Map,_d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gn(o,c){kd.set(o,c),a(c,[o])}for(var ol=0;ol<_d.length;ol++){var al=_d[ol],Op=al.toLowerCase(),Dp=al[0].toUpperCase()+al.slice(1);gn(Op,"on"+Dp)}gn(jd,"onAnimationEnd"),gn(Pd,"onAnimationIteration"),gn(Id,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn($d,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Bd(o,c,f){var g=o.type||"unknown-event";o.currentTarget=f,Oh(g,c,void 0,o),o.currentTarget=null}function Od(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],v=g.event;g=g.listeners;e:{var C=void 0;if(c)for(var _=g.length-1;0<=_;_--){var H=g[_],Q=H.instance,te=H.currentTarget;if(H=H.listener,Q!==C&&v.isPropagationStopped())break e;Bd(v,H,te),C=Q}else for(_=0;_<g.length;_++){if(H=g[_],Q=H.instance,te=H.currentTarget,H=H.listener,Q!==C&&v.isPropagationStopped())break e;Bd(v,H,te),C=Q}}}if(da)throw o=Fc,da=!1,Fc=null,o}function We(o,c){var f=c[ml];f===void 0&&(f=c[ml]=new Set);var g=o+"__bubble";f.has(g)||(Dd(c,o,2,!1),f.add(g))}function cl(o,c,f){var g=0;c&&(g|=4),Dd(f,o,g,c)}var Ta="_reactListening"+Math.random().toString(36).slice(2);function Co(o){if(!o[Ta]){o[Ta]=!0,s.forEach(function(f){f!=="selectionchange"&&(Lp.has(f)||cl(f,!1,o),cl(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Ta]||(c[Ta]=!0,cl("selectionchange",!1,c))}}function Dd(o,c,f,g){switch(od(c)){case 1:var v=Yh;break;case 4:v=Zh;break;default:v=Gc}f=v.bind(null,c,f,o),v=void 0,!Dc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),g?v!==void 0?o.addEventListener(c,f,{capture:!0,passive:v}):o.addEventListener(c,f,!0):v!==void 0?o.addEventListener(c,f,{passive:v}):o.addEventListener(c,f,!1)}function ll(o,c,f,g,v){var C=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var _=g.tag;if(_===3||_===4){var H=g.stateNode.containerInfo;if(H===v||H.nodeType===8&&H.parentNode===v)break;if(_===4)for(_=g.return;_!==null;){var Q=_.tag;if((Q===3||Q===4)&&(Q=_.stateNode.containerInfo,Q===v||Q.nodeType===8&&Q.parentNode===v))return;_=_.return}for(;H!==null;){if(_=Zn(H),_===null)return;if(Q=_.tag,Q===5||Q===6){g=C=_;continue e}H=H.parentNode}}g=g.return}Mu(function(){var te=C,he=_c(f),ge=[];e:{var fe=kd.get(o);if(fe!==void 0){var xe=Jc,be=o;switch(o){case"keypress":if(va(f)===0)break e;case"keydown":case"keyup":xe=pp;break;case"focusin":be="focus",xe=Xc;break;case"focusout":be="blur",xe=Xc;break;case"beforeblur":case"afterblur":xe=Xc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=rp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=yp;break;case jd:case Pd:case Id:xe=ip;break;case $d:xe=wp;break;case"scroll":xe=ep;break;case"wheel":xe=bp;break;case"copy":case"cut":case"paste":xe=ap;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=dd}var ve=(c&4)!==0,st=!ve&&o==="scroll",Y=ve?fe!==null?fe+"Capture":null:fe;ve=[];for(var K=te,ee;K!==null;){ee=K;var ye=ee.stateNode;if(ee.tag===5&&ye!==null&&(ee=ye,Y!==null&&(ye=ao(K,Y),ye!=null&&ve.push(No(K,ye,ee)))),st)break;K=K.return}0<ve.length&&(fe=new xe(fe,be,null,f,he),ge.push({event:fe,listeners:ve}))}}if((c&7)===0){e:{if(fe=o==="mouseover"||o==="pointerover",xe=o==="mouseout"||o==="pointerout",fe&&f!==Ue&&(be=f.relatedTarget||f.fromElement)&&(Zn(be)||be[zr]))break e;if((xe||fe)&&(fe=he.window===he?he:(fe=he.ownerDocument)?fe.defaultView||fe.parentWindow:window,xe?(be=f.relatedTarget||f.toElement,xe=te,be=be?Zn(be):null,be!==null&&(st=Yn(be),be!==st||be.tag!==5&&be.tag!==6)&&(be=null)):(xe=null,be=te),xe!==be)){if(ve=ld,ye="onMouseLeave",Y="onMouseEnter",K="mouse",(o==="pointerout"||o==="pointerover")&&(ve=dd,ye="onPointerLeave",Y="onPointerEnter",K="pointer"),st=xe==null?fe:Xs(xe),ee=be==null?fe:Xs(be),fe=new ve(ye,K+"leave",xe,f,he),fe.target=st,fe.relatedTarget=ee,ye=null,Zn(he)===te&&(ve=new ve(Y,K+"enter",be,f,he),ve.target=ee,ve.relatedTarget=st,ye=ve),st=ye,xe&&be)t:{for(ve=xe,Y=be,K=0,ee=ve;ee;ee=Qs(ee))K++;for(ee=0,ye=Y;ye;ye=Qs(ye))ee++;for(;0<K-ee;)ve=Qs(ve),K--;for(;0<ee-K;)Y=Qs(Y),ee--;for(;K--;){if(ve===Y||Y!==null&&ve===Y.alternate)break t;ve=Qs(ve),Y=Qs(Y)}ve=null}else ve=null;xe!==null&&Fd(ge,fe,xe,ve,!1),be!==null&&st!==null&&Fd(ge,st,be,ve,!0)}}e:{if(fe=te?Xs(te):window,xe=fe.nodeName&&fe.nodeName.toLowerCase(),xe==="select"||xe==="input"&&fe.type==="file")var Se=Tp;else if(yd(fe))if(wd)Se=$p;else{Se=Pp;var Ce=jp}else(xe=fe.nodeName)&&xe.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Se=Ip);if(Se&&(Se=Se(o,te))){xd(ge,Se,f,he);break e}Ce&&Ce(o,fe,te),o==="focusout"&&(Ce=fe._wrapperState)&&Ce.controlled&&fe.type==="number"&&oo(fe,"number",fe.value)}switch(Ce=te?Xs(te):window,o){case"focusin":(yd(Ce)||Ce.contentEditable==="true")&&(Ws=Ce,nl=te,Ro=null);break;case"focusout":Ro=nl=Ws=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,Nd(ge,f,he);break;case"selectionchange":if(Bp)break;case"keydown":case"keyup":Nd(ge,f,he)}var Ne;if(Zc)e:{switch(o){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else qs?md(o,f)&&(Pe="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Pe="onCompositionStart");Pe&&(fd&&f.locale!=="ko"&&(qs||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&qs&&(Ne=ad()):(mn=he,Wc="value"in mn?mn.value:mn.textContent,qs=!0)),Ce=ja(te,Pe),0<Ce.length&&(Pe=new ud(Pe,o,null,f,he),ge.push({event:Pe,listeners:Ce}),Ne?Pe.data=Ne:(Ne=gd(f),Ne!==null&&(Pe.data=Ne)))),(Ne=Sp?Rp(o,f):Ap(o,f))&&(te=ja(te,"onBeforeInput"),0<te.length&&(he=new ud("onBeforeInput","beforeinput",null,f,he),ge.push({event:he,listeners:te}),he.data=Ne))}Od(ge,c)})}function No(o,c,f){return{instance:o,listener:c,currentTarget:f}}function ja(o,c){for(var f=c+"Capture",g=[];o!==null;){var v=o,C=v.stateNode;v.tag===5&&C!==null&&(v=C,C=ao(o,f),C!=null&&g.unshift(No(o,C,v)),C=ao(o,c),C!=null&&g.push(No(o,C,v))),o=o.return}return g}function Qs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Fd(o,c,f,g,v){for(var C=c._reactName,_=[];f!==null&&f!==g;){var H=f,Q=H.alternate,te=H.stateNode;if(Q!==null&&Q===g)break;H.tag===5&&te!==null&&(H=te,v?(Q=ao(f,C),Q!=null&&_.unshift(No(f,Q,H))):v||(Q=ao(f,C),Q!=null&&_.push(No(f,Q,H)))),f=f.return}_.length!==0&&o.push({event:c,listeners:_})}var Up=/\r\n?/g,Mp=/\u0000|\uFFFD/g;function Ld(o){return(typeof o=="string"?o:""+o).replace(Up,`
`).replace(Mp,"")}function Pa(o,c,f){if(c=Ld(c),Ld(o)!==c&&f)throw Error(t(425))}function Ia(){}var ul=null,dl=null;function fl(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,zp=typeof clearTimeout=="function"?clearTimeout:void 0,Ud=typeof Promise=="function"?Promise:void 0,Hp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ud<"u"?function(o){return Ud.resolve(null).then(o).catch(Vp)}:hl;function Vp(o){setTimeout(function(){throw o})}function pl(o,c){var f=c,g=0;do{var v=f.nextSibling;if(o.removeChild(f),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(g===0){o.removeChild(v),yo(c);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=v}while(f);yo(c)}function yn(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Md(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Ks,To="__reactProps$"+Ks,zr="__reactContainer$"+Ks,ml="__reactEvents$"+Ks,Gp="__reactListeners$"+Ks,qp="__reactHandles$"+Ks;function Zn(o){var c=o[Cr];if(c)return c;for(var f=o.parentNode;f;){if(c=f[zr]||f[Cr]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=Md(o);o!==null;){if(f=o[Cr])return f;o=Md(o)}return c}o=f,f=o.parentNode}return null}function jo(o){return o=o[Cr]||o[zr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Xs(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function $a(o){return o[To]||null}var gl=[],Ys=-1;function xn(o){return{current:o}}function Je(o){0>Ys||(o.current=gl[Ys],gl[Ys]=null,Ys--)}function qe(o,c){Ys++,gl[Ys]=o.current,o.current=c}var wn={},yt=xn(wn),kt=xn(!1),es=wn;function Zs(o,c){var f=o.type.contextTypes;if(!f)return wn;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var v={},C;for(C in f)v[C]=c[C];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=v),v}function _t(o){return o=o.childContextTypes,o!=null}function ka(){Je(kt),Je(yt)}function zd(o,c,f){if(yt.current!==wn)throw Error(t(168));qe(yt,c),qe(kt,f)}function Hd(o,c,f){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var v in g)if(!(v in c))throw Error(t(108,Be(o)||"Unknown",v));return ce({},f,g)}function Ba(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||wn,es=yt.current,qe(yt,o),qe(kt,kt.current),!0}function Vd(o,c,f){var g=o.stateNode;if(!g)throw Error(t(169));f?(o=Hd(o,c,es),g.__reactInternalMemoizedMergedChildContext=o,Je(kt),Je(yt),qe(yt,o)):Je(kt),qe(kt,f)}var Hr=null,Oa=!1,yl=!1;function Gd(o){Hr===null?Hr=[o]:Hr.push(o)}function Wp(o){Oa=!0,Gd(o)}function En(){if(!yl&&Hr!==null){yl=!0;var o=0,c=ze;try{var f=Hr;for(ze=1;o<f.length;o++){var g=f[o];do g=g(!0);while(g!==null)}Hr=null,Oa=!1}catch(v){throw Hr!==null&&(Hr=Hr.slice(o+1)),qu(Lc,En),v}finally{ze=c,yl=!1}}return null}var ei=[],ti=0,Da=null,Fa=0,Kt=[],Xt=0,ts=null,Vr=1,Gr="";function rs(o,c){ei[ti++]=Fa,ei[ti++]=Da,Da=o,Fa=c}function qd(o,c,f){Kt[Xt++]=Vr,Kt[Xt++]=Gr,Kt[Xt++]=ts,ts=o;var g=Vr;o=Gr;var v=32-dr(g)-1;g&=~(1<<v),f+=1;var C=32-dr(c)+v;if(30<C){var _=v-v%5;C=(g&(1<<_)-1).toString(32),g>>=_,v-=_,Vr=1<<32-dr(c)+v|f<<v|g,Gr=C+o}else Vr=1<<C|f<<v|g,Gr=o}function xl(o){o.return!==null&&(rs(o,1),qd(o,1,0))}function wl(o){for(;o===Da;)Da=ei[--ti],ei[ti]=null,Fa=ei[--ti],ei[ti]=null;for(;o===ts;)ts=Kt[--Xt],Kt[Xt]=null,Gr=Kt[--Xt],Kt[Xt]=null,Vr=Kt[--Xt],Kt[Xt]=null}var Mt=null,zt=null,Ke=!1,hr=null;function Wd(o,c){var f=tr(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=o,c=o.deletions,c===null?(o.deletions=[f],o.flags|=16):c.push(f)}function Jd(o,c){switch(o.tag){case 5:var f=o.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Mt=o,zt=yn(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Mt=o,zt=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=ts!==null?{id:Vr,overflow:Gr}:null,o.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=tr(18,null,null,0),f.stateNode=c,f.return=o,o.child=f,Mt=o,zt=null,!0):!1;default:return!1}}function El(o){return(o.mode&1)!==0&&(o.flags&128)===0}function bl(o){if(Ke){var c=zt;if(c){var f=c;if(!Jd(o,c)){if(El(o))throw Error(t(418));c=yn(f.nextSibling);var g=Mt;c&&Jd(o,c)?Wd(g,f):(o.flags=o.flags&-4097|2,Ke=!1,Mt=o)}}else{if(El(o))throw Error(t(418));o.flags=o.flags&-4097|2,Ke=!1,Mt=o}}}function Qd(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Mt=o}function La(o){if(o!==Mt)return!1;if(!Ke)return Qd(o),Ke=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!fl(o.type,o.memoizedProps)),c&&(c=zt)){if(El(o))throw Kd(),Error(t(418));for(;c;)Wd(o,c),c=yn(c.nextSibling)}if(Qd(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(c===0){zt=yn(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}o=o.nextSibling}zt=null}}else zt=Mt?yn(o.stateNode.nextSibling):null;return!0}function Kd(){for(var o=zt;o;)o=yn(o.nextSibling)}function ri(){zt=Mt=null,Ke=!1}function vl(o){hr===null?hr=[o]:hr.push(o)}var Jp=z.ReactCurrentBatchConfig;function Po(o,c,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,o));var v=g,C=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===C?c.ref:(c=function(_){var H=v.refs;_===null?delete H[C]:H[C]=_},c._stringRef=C,c)}if(typeof o!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,o))}return o}function Ua(o,c){throw o=Object.prototype.toString.call(c),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Xd(o){var c=o._init;return c(o._payload)}function Yd(o){function c(Y,K){if(o){var ee=Y.deletions;ee===null?(Y.deletions=[K],Y.flags|=16):ee.push(K)}}function f(Y,K){if(!o)return null;for(;K!==null;)c(Y,K),K=K.sibling;return null}function g(Y,K){for(Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function v(Y,K){return Y=Tn(Y,K),Y.index=0,Y.sibling=null,Y}function C(Y,K,ee){return Y.index=ee,o?(ee=Y.alternate,ee!==null?(ee=ee.index,ee<K?(Y.flags|=2,K):ee):(Y.flags|=2,K)):(Y.flags|=1048576,K)}function _(Y){return o&&Y.alternate===null&&(Y.flags|=2),Y}function H(Y,K,ee,ye){return K===null||K.tag!==6?(K=pu(ee,Y.mode,ye),K.return=Y,K):(K=v(K,ee),K.return=Y,K)}function Q(Y,K,ee,ye){var Se=ee.type;return Se===G?he(Y,K,ee.props.children,ye,ee.key):K!==null&&(K.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Z&&Xd(Se)===K.type)?(ye=v(K,ee.props),ye.ref=Po(Y,K,ee),ye.return=Y,ye):(ye=uc(ee.type,ee.key,ee.props,null,Y.mode,ye),ye.ref=Po(Y,K,ee),ye.return=Y,ye)}function te(Y,K,ee,ye){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=mu(ee,Y.mode,ye),K.return=Y,K):(K=v(K,ee.children||[]),K.return=Y,K)}function he(Y,K,ee,ye,Se){return K===null||K.tag!==7?(K=ds(ee,Y.mode,ye,Se),K.return=Y,K):(K=v(K,ee),K.return=Y,K)}function ge(Y,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number")return K=pu(""+K,Y.mode,ee),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case L:return ee=uc(K.type,K.key,K.props,null,Y.mode,ee),ee.ref=Po(Y,null,K),ee.return=Y,ee;case M:return K=mu(K,Y.mode,ee),K.return=Y,K;case Z:var ye=K._init;return ge(Y,ye(K._payload),ee)}if(un(K)||se(K))return K=ds(K,Y.mode,ee,null),K.return=Y,K;Ua(Y,K)}return null}function fe(Y,K,ee,ye){var Se=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Se!==null?null:H(Y,K,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case L:return ee.key===Se?Q(Y,K,ee,ye):null;case M:return ee.key===Se?te(Y,K,ee,ye):null;case Z:return Se=ee._init,fe(Y,K,Se(ee._payload),ye)}if(un(ee)||se(ee))return Se!==null?null:he(Y,K,ee,ye,null);Ua(Y,ee)}return null}function xe(Y,K,ee,ye,Se){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Y=Y.get(ee)||null,H(K,Y,""+ye,Se);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case L:return Y=Y.get(ye.key===null?ee:ye.key)||null,Q(K,Y,ye,Se);case M:return Y=Y.get(ye.key===null?ee:ye.key)||null,te(K,Y,ye,Se);case Z:var Ce=ye._init;return xe(Y,K,ee,Ce(ye._payload),Se)}if(un(ye)||se(ye))return Y=Y.get(ee)||null,he(K,Y,ye,Se,null);Ua(K,ye)}return null}function be(Y,K,ee,ye){for(var Se=null,Ce=null,Ne=K,Pe=K=0,dt=null;Ne!==null&&Pe<ee.length;Pe++){Ne.index>Pe?(dt=Ne,Ne=null):dt=Ne.sibling;var Le=fe(Y,Ne,ee[Pe],ye);if(Le===null){Ne===null&&(Ne=dt);break}o&&Ne&&Le.alternate===null&&c(Y,Ne),K=C(Le,K,Pe),Ce===null?Se=Le:Ce.sibling=Le,Ce=Le,Ne=dt}if(Pe===ee.length)return f(Y,Ne),Ke&&rs(Y,Pe),Se;if(Ne===null){for(;Pe<ee.length;Pe++)Ne=ge(Y,ee[Pe],ye),Ne!==null&&(K=C(Ne,K,Pe),Ce===null?Se=Ne:Ce.sibling=Ne,Ce=Ne);return Ke&&rs(Y,Pe),Se}for(Ne=g(Y,Ne);Pe<ee.length;Pe++)dt=xe(Ne,Y,Pe,ee[Pe],ye),dt!==null&&(o&&dt.alternate!==null&&Ne.delete(dt.key===null?Pe:dt.key),K=C(dt,K,Pe),Ce===null?Se=dt:Ce.sibling=dt,Ce=dt);return o&&Ne.forEach(function(jn){return c(Y,jn)}),Ke&&rs(Y,Pe),Se}function ve(Y,K,ee,ye){var Se=se(ee);if(typeof Se!="function")throw Error(t(150));if(ee=Se.call(ee),ee==null)throw Error(t(151));for(var Ce=Se=null,Ne=K,Pe=K=0,dt=null,Le=ee.next();Ne!==null&&!Le.done;Pe++,Le=ee.next()){Ne.index>Pe?(dt=Ne,Ne=null):dt=Ne.sibling;var jn=fe(Y,Ne,Le.value,ye);if(jn===null){Ne===null&&(Ne=dt);break}o&&Ne&&jn.alternate===null&&c(Y,Ne),K=C(jn,K,Pe),Ce===null?Se=jn:Ce.sibling=jn,Ce=jn,Ne=dt}if(Le.done)return f(Y,Ne),Ke&&rs(Y,Pe),Se;if(Ne===null){for(;!Le.done;Pe++,Le=ee.next())Le=ge(Y,Le.value,ye),Le!==null&&(K=C(Le,K,Pe),Ce===null?Se=Le:Ce.sibling=Le,Ce=Le);return Ke&&rs(Y,Pe),Se}for(Ne=g(Y,Ne);!Le.done;Pe++,Le=ee.next())Le=xe(Ne,Y,Pe,Le.value,ye),Le!==null&&(o&&Le.alternate!==null&&Ne.delete(Le.key===null?Pe:Le.key),K=C(Le,K,Pe),Ce===null?Se=Le:Ce.sibling=Le,Ce=Le);return o&&Ne.forEach(function(Nm){return c(Y,Nm)}),Ke&&rs(Y,Pe),Se}function st(Y,K,ee,ye){if(typeof ee=="object"&&ee!==null&&ee.type===G&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case L:e:{for(var Se=ee.key,Ce=K;Ce!==null;){if(Ce.key===Se){if(Se=ee.type,Se===G){if(Ce.tag===7){f(Y,Ce.sibling),K=v(Ce,ee.props.children),K.return=Y,Y=K;break e}}else if(Ce.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Z&&Xd(Se)===Ce.type){f(Y,Ce.sibling),K=v(Ce,ee.props),K.ref=Po(Y,Ce,ee),K.return=Y,Y=K;break e}f(Y,Ce);break}else c(Y,Ce);Ce=Ce.sibling}ee.type===G?(K=ds(ee.props.children,Y.mode,ye,ee.key),K.return=Y,Y=K):(ye=uc(ee.type,ee.key,ee.props,null,Y.mode,ye),ye.ref=Po(Y,K,ee),ye.return=Y,Y=ye)}return _(Y);case M:e:{for(Ce=ee.key;K!==null;){if(K.key===Ce)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){f(Y,K.sibling),K=v(K,ee.children||[]),K.return=Y,Y=K;break e}else{f(Y,K);break}else c(Y,K);K=K.sibling}K=mu(ee,Y.mode,ye),K.return=Y,Y=K}return _(Y);case Z:return Ce=ee._init,st(Y,K,Ce(ee._payload),ye)}if(un(ee))return be(Y,K,ee,ye);if(se(ee))return ve(Y,K,ee,ye);Ua(Y,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,K!==null&&K.tag===6?(f(Y,K.sibling),K=v(K,ee),K.return=Y,Y=K):(f(Y,K),K=pu(ee,Y.mode,ye),K.return=Y,Y=K),_(Y)):f(Y,K)}return st}var ni=Yd(!0),Zd=Yd(!1),Ma=xn(null),za=null,si=null,Sl=null;function Rl(){Sl=si=za=null}function Al(o){var c=Ma.current;Je(Ma),o._currentValue=c}function Cl(o,c,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===f)break;o=o.return}}function ii(o,c){za=o,Sl=si=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Bt=!0),o.firstContext=null)}function Yt(o){var c=o._currentValue;if(Sl!==o)if(o={context:o,memoizedValue:c,next:null},si===null){if(za===null)throw Error(t(308));si=o,za.dependencies={lanes:0,firstContext:o}}else si=si.next=o;return c}var ns=null;function Nl(o){ns===null?ns=[o]:ns.push(o)}function ef(o,c,f,g){var v=c.interleaved;return v===null?(f.next=f,Nl(c)):(f.next=v.next,v.next=f),c.interleaved=f,qr(o,g)}function qr(o,c){o.lanes|=c;var f=o.alternate;for(f!==null&&(f.lanes|=c),f=o,o=o.return;o!==null;)o.childLanes|=c,f=o.alternate,f!==null&&(f.childLanes|=c),f=o,o=o.return;return f.tag===3?f.stateNode:null}var bn=!1;function Tl(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tf(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Wr(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function vn(o,c,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Fe&2)!==0){var v=g.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),g.pending=c,qr(o,f)}return v=g.interleaved,v===null?(c.next=c,Nl(g)):(c.next=v.next,v.next=c),g.interleaved=c,qr(o,f)}function Ha(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,zc(o,f)}}function rf(o,c){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var v=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var _={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};C===null?v=C=_:C=C.next=_,f=f.next}while(f!==null);C===null?v=C=c:C=C.next=c}else v=C=c;f={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:g.shared,effects:g.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}function Va(o,c,f,g){var v=o.updateQueue;bn=!1;var C=v.firstBaseUpdate,_=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var Q=H,te=Q.next;Q.next=null,_===null?C=te:_.next=te,_=Q;var he=o.alternate;he!==null&&(he=he.updateQueue,H=he.lastBaseUpdate,H!==_&&(H===null?he.firstBaseUpdate=te:H.next=te,he.lastBaseUpdate=Q))}if(C!==null){var ge=v.baseState;_=0,he=te=Q=null,H=C;do{var fe=H.lane,xe=H.eventTime;if((g&fe)===fe){he!==null&&(he=he.next={eventTime:xe,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var be=o,ve=H;switch(fe=c,xe=f,ve.tag){case 1:if(be=ve.payload,typeof be=="function"){ge=be.call(xe,ge,fe);break e}ge=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=ve.payload,fe=typeof be=="function"?be.call(xe,ge,fe):be,fe==null)break e;ge=ce({},ge,fe);break e;case 2:bn=!0}}H.callback!==null&&H.lane!==0&&(o.flags|=64,fe=v.effects,fe===null?v.effects=[H]:fe.push(H))}else xe={eventTime:xe,lane:fe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},he===null?(te=he=xe,Q=ge):he=he.next=xe,_|=fe;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;fe=H,H=fe.next,fe.next=null,v.lastBaseUpdate=fe,v.shared.pending=null}}while(!0);if(he===null&&(Q=ge),v.baseState=Q,v.firstBaseUpdate=te,v.lastBaseUpdate=he,c=v.shared.interleaved,c!==null){v=c;do _|=v.lane,v=v.next;while(v!==c)}else C===null&&(v.shared.lanes=0);as|=_,o.lanes=_,o.memoizedState=ge}}function nf(o,c,f){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],v=g.callback;if(v!==null){if(g.callback=null,g=f,typeof v!="function")throw Error(t(191,v));v.call(g)}}}var Io={},Nr=xn(Io),$o=xn(Io),ko=xn(Io);function ss(o){if(o===Io)throw Error(t(174));return o}function jl(o,c){switch(qe(ko,c),qe($o,o),qe(Nr,Io),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:B(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=B(c,o)}Je(Nr),qe(Nr,c)}function oi(){Je(Nr),Je($o),Je(ko)}function sf(o){ss(ko.current);var c=ss(Nr.current),f=B(c,o.type);c!==f&&(qe($o,o),qe(Nr,f))}function Pl(o){$o.current===o&&(Je(Nr),Je($o))}var et=xn(0);function Ga(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Il=[];function $l(){for(var o=0;o<Il.length;o++)Il[o]._workInProgressVersionPrimary=null;Il.length=0}var qa=z.ReactCurrentDispatcher,kl=z.ReactCurrentBatchConfig,os=0,tt=null,ot=null,ct=null,Wa=!1,_o=!1,Bo=0,Qp=0;function xt(){throw Error(t(321))}function _l(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!fr(o[f],c[f]))return!1;return!0}function Ol(o,c,f,g,v,C){if(os=C,tt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,qa.current=o===null||o.memoizedState===null?Zp:em,o=f(g,v),_o){C=0;do{if(_o=!1,Bo=0,25<=C)throw Error(t(301));C+=1,ct=ot=null,c.updateQueue=null,qa.current=tm,o=f(g,v)}while(_o)}if(qa.current=Ka,c=ot!==null&&ot.next!==null,os=0,ct=ot=tt=null,Wa=!1,c)throw Error(t(300));return o}function Dl(){var o=Bo!==0;return Bo=0,o}function Tr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?tt.memoizedState=ct=o:ct=ct.next=o,ct}function Zt(){if(ot===null){var o=tt.alternate;o=o!==null?o.memoizedState:null}else o=ot.next;var c=ct===null?tt.memoizedState:ct.next;if(c!==null)ct=c,ot=o;else{if(o===null)throw Error(t(310));ot=o,o={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ct===null?tt.memoizedState=ct=o:ct=ct.next=o}return ct}function Oo(o,c){return typeof c=="function"?c(o):c}function Fl(o){var c=Zt(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var g=ot,v=g.baseQueue,C=f.pending;if(C!==null){if(v!==null){var _=v.next;v.next=C.next,C.next=_}g.baseQueue=v=C,f.pending=null}if(v!==null){C=v.next,g=g.baseState;var H=_=null,Q=null,te=C;do{var he=te.lane;if((os&he)===he)Q!==null&&(Q=Q.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),g=te.hasEagerState?te.eagerState:o(g,te.action);else{var ge={lane:he,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};Q===null?(H=Q=ge,_=g):Q=Q.next=ge,tt.lanes|=he,as|=he}te=te.next}while(te!==null&&te!==C);Q===null?_=g:Q.next=H,fr(g,c.memoizedState)||(Bt=!0),c.memoizedState=g,c.baseState=_,c.baseQueue=Q,f.lastRenderedState=g}if(o=f.interleaved,o!==null){v=o;do C=v.lane,tt.lanes|=C,as|=C,v=v.next;while(v!==o)}else v===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Ll(o){var c=Zt(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var g=f.dispatch,v=f.pending,C=c.memoizedState;if(v!==null){f.pending=null;var _=v=v.next;do C=o(C,_.action),_=_.next;while(_!==v);fr(C,c.memoizedState)||(Bt=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,g]}function of(){}function af(o,c){var f=tt,g=Zt(),v=c(),C=!fr(g.memoizedState,v);if(C&&(g.memoizedState=v,Bt=!0),g=g.queue,Ul(uf.bind(null,f,g,o),[o]),g.getSnapshot!==c||C||ct!==null&&ct.memoizedState.tag&1){if(f.flags|=2048,Do(9,lf.bind(null,f,g,v,c),void 0,null),lt===null)throw Error(t(349));(os&30)!==0||cf(f,c,v)}return v}function cf(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=tt.updateQueue,c===null?(c={lastEffect:null,stores:null},tt.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function lf(o,c,f,g){c.value=f,c.getSnapshot=g,df(c)&&ff(o)}function uf(o,c,f){return f(function(){df(c)&&ff(o)})}function df(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!fr(o,f)}catch{return!0}}function ff(o){var c=qr(o,1);c!==null&&yr(c,o,1,-1)}function hf(o){var c=Tr();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:o},c.queue=o,o=o.dispatch=Yp.bind(null,tt,o),[c.memoizedState,o]}function Do(o,c,f,g){return o={tag:o,create:c,destroy:f,deps:g,next:null},c=tt.updateQueue,c===null?(c={lastEffect:null,stores:null},tt.updateQueue=c,c.lastEffect=o.next=o):(f=c.lastEffect,f===null?c.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,c.lastEffect=o)),o}function pf(){return Zt().memoizedState}function Ja(o,c,f,g){var v=Tr();tt.flags|=o,v.memoizedState=Do(1|c,f,void 0,g===void 0?null:g)}function Qa(o,c,f,g){var v=Zt();g=g===void 0?null:g;var C=void 0;if(ot!==null){var _=ot.memoizedState;if(C=_.destroy,g!==null&&_l(g,_.deps)){v.memoizedState=Do(c,f,C,g);return}}tt.flags|=o,v.memoizedState=Do(1|c,f,C,g)}function mf(o,c){return Ja(8390656,8,o,c)}function Ul(o,c){return Qa(2048,8,o,c)}function gf(o,c){return Qa(4,2,o,c)}function yf(o,c){return Qa(4,4,o,c)}function xf(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function wf(o,c,f){return f=f!=null?f.concat([o]):null,Qa(4,4,xf.bind(null,c,o),f)}function Ml(){}function Ef(o,c){var f=Zt();c=c===void 0?null:c;var g=f.memoizedState;return g!==null&&c!==null&&_l(c,g[1])?g[0]:(f.memoizedState=[o,c],o)}function bf(o,c){var f=Zt();c=c===void 0?null:c;var g=f.memoizedState;return g!==null&&c!==null&&_l(c,g[1])?g[0]:(o=o(),f.memoizedState=[o,c],o)}function vf(o,c,f){return(os&21)===0?(o.baseState&&(o.baseState=!1,Bt=!0),o.memoizedState=f):(fr(f,c)||(f=Ku(),tt.lanes|=f,as|=f,o.baseState=!0),c)}function Kp(o,c){var f=ze;ze=f!==0&&4>f?f:4,o(!0);var g=kl.transition;kl.transition={};try{o(!1),c()}finally{ze=f,kl.transition=g}}function Sf(){return Zt().memoizedState}function Xp(o,c,f){var g=Cn(o);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Rf(o))Af(c,f);else if(f=ef(o,c,f,g),f!==null){var v=jt();yr(f,o,g,v),Cf(f,c,g)}}function Yp(o,c,f){var g=Cn(o),v={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Rf(o))Af(c,v);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var _=c.lastRenderedState,H=C(_,f);if(v.hasEagerState=!0,v.eagerState=H,fr(H,_)){var Q=c.interleaved;Q===null?(v.next=v,Nl(c)):(v.next=Q.next,Q.next=v),c.interleaved=v;return}}catch{}finally{}f=ef(o,c,v,g),f!==null&&(v=jt(),yr(f,o,g,v),Cf(f,c,g))}}function Rf(o){var c=o.alternate;return o===tt||c!==null&&c===tt}function Af(o,c){_o=Wa=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function Cf(o,c,f){if((f&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,zc(o,f)}}var Ka={readContext:Yt,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},Zp={readContext:Yt,useCallback:function(o,c){return Tr().memoizedState=[o,c===void 0?null:c],o},useContext:Yt,useEffect:mf,useImperativeHandle:function(o,c,f){return f=f!=null?f.concat([o]):null,Ja(4194308,4,xf.bind(null,c,o),f)},useLayoutEffect:function(o,c){return Ja(4194308,4,o,c)},useInsertionEffect:function(o,c){return Ja(4,2,o,c)},useMemo:function(o,c){var f=Tr();return c=c===void 0?null:c,o=o(),f.memoizedState=[o,c],o},useReducer:function(o,c,f){var g=Tr();return c=f!==void 0?f(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=Xp.bind(null,tt,o),[g.memoizedState,o]},useRef:function(o){var c=Tr();return o={current:o},c.memoizedState=o},useState:hf,useDebugValue:Ml,useDeferredValue:function(o){return Tr().memoizedState=o},useTransition:function(){var o=hf(!1),c=o[0];return o=Kp.bind(null,o[1]),Tr().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,f){var g=tt,v=Tr();if(Ke){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),lt===null)throw Error(t(349));(os&30)!==0||cf(g,c,f)}v.memoizedState=f;var C={value:f,getSnapshot:c};return v.queue=C,mf(uf.bind(null,g,C,o),[o]),g.flags|=2048,Do(9,lf.bind(null,g,C,f,c),void 0,null),f},useId:function(){var o=Tr(),c=lt.identifierPrefix;if(Ke){var f=Gr,g=Vr;f=(g&~(1<<32-dr(g)-1)).toString(32)+f,c=":"+c+"R"+f,f=Bo++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=Qp++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},em={readContext:Yt,useCallback:Ef,useContext:Yt,useEffect:Ul,useImperativeHandle:wf,useInsertionEffect:gf,useLayoutEffect:yf,useMemo:bf,useReducer:Fl,useRef:pf,useState:function(){return Fl(Oo)},useDebugValue:Ml,useDeferredValue:function(o){var c=Zt();return vf(c,ot.memoizedState,o)},useTransition:function(){var o=Fl(Oo)[0],c=Zt().memoizedState;return[o,c]},useMutableSource:of,useSyncExternalStore:af,useId:Sf,unstable_isNewReconciler:!1},tm={readContext:Yt,useCallback:Ef,useContext:Yt,useEffect:Ul,useImperativeHandle:wf,useInsertionEffect:gf,useLayoutEffect:yf,useMemo:bf,useReducer:Ll,useRef:pf,useState:function(){return Ll(Oo)},useDebugValue:Ml,useDeferredValue:function(o){var c=Zt();return ot===null?c.memoizedState=o:vf(c,ot.memoizedState,o)},useTransition:function(){var o=Ll(Oo)[0],c=Zt().memoizedState;return[o,c]},useMutableSource:of,useSyncExternalStore:af,useId:Sf,unstable_isNewReconciler:!1};function pr(o,c){if(o&&o.defaultProps){c=ce({},c),o=o.defaultProps;for(var f in o)c[f]===void 0&&(c[f]=o[f]);return c}return c}function zl(o,c,f,g){c=o.memoizedState,f=f(g,c),f=f==null?c:ce({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Xa={isMounted:function(o){return(o=o._reactInternals)?Yn(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var g=jt(),v=Cn(o),C=Wr(g,v);C.payload=c,f!=null&&(C.callback=f),c=vn(o,C,v),c!==null&&(yr(c,o,v,g),Ha(c,o,v))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var g=jt(),v=Cn(o),C=Wr(g,v);C.tag=1,C.payload=c,f!=null&&(C.callback=f),c=vn(o,C,v),c!==null&&(yr(c,o,v,g),Ha(c,o,v))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=jt(),g=Cn(o),v=Wr(f,g);v.tag=2,c!=null&&(v.callback=c),c=vn(o,v,g),c!==null&&(yr(c,o,g,f),Ha(c,o,g))}};function Nf(o,c,f,g,v,C,_){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,C,_):c.prototype&&c.prototype.isPureReactComponent?!So(f,g)||!So(v,C):!0}function Tf(o,c,f){var g=!1,v=wn,C=c.contextType;return typeof C=="object"&&C!==null?C=Yt(C):(v=_t(c)?es:yt.current,g=c.contextTypes,C=(g=g!=null)?Zs(o,v):wn),c=new c(f,C),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Xa,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=C),c}function jf(o,c,f,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==o&&Xa.enqueueReplaceState(c,c.state,null)}function Hl(o,c,f,g){var v=o.stateNode;v.props=f,v.state=o.memoizedState,v.refs={},Tl(o);var C=c.contextType;typeof C=="object"&&C!==null?v.context=Yt(C):(C=_t(c)?es:yt.current,v.context=Zs(o,C)),v.state=o.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(zl(o,c,C,f),v.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(c=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),c!==v.state&&Xa.enqueueReplaceState(v,v.state,null),Va(o,f,v,g),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function ai(o,c){try{var f="",g=c;do f+=Ie(g),g=g.return;while(g);var v=f}catch(C){v=`
Error generating stack: `+C.message+`
`+C.stack}return{value:o,source:c,stack:v,digest:null}}function Vl(o,c,f){return{value:o,source:null,stack:f??null,digest:c??null}}function Gl(o,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var rm=typeof WeakMap=="function"?WeakMap:Map;function Pf(o,c,f){f=Wr(-1,f),f.tag=3,f.payload={element:null};var g=c.value;return f.callback=function(){sc||(sc=!0,ou=g),Gl(o,c)},f}function If(o,c,f){f=Wr(-1,f),f.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;f.payload=function(){return g(v)},f.callback=function(){Gl(o,c)}}var C=o.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(f.callback=function(){Gl(o,c),typeof g!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})}),f}function $f(o,c,f){var g=o.pingCache;if(g===null){g=o.pingCache=new rm;var v=new Set;g.set(c,v)}else v=g.get(c),v===void 0&&(v=new Set,g.set(c,v));v.has(f)||(v.add(f),o=gm.bind(null,o,c,f),c.then(o,o))}function kf(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function _f(o,c,f,g,v){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Wr(-1,1),c.tag=2,vn(f,c,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=v,o)}var nm=z.ReactCurrentOwner,Bt=!1;function Tt(o,c,f,g){c.child=o===null?Zd(c,null,f,g):ni(c,o.child,f,g)}function Bf(o,c,f,g,v){f=f.render;var C=c.ref;return ii(c,v),g=Ol(o,c,f,g,C,v),f=Dl(),o!==null&&!Bt?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~v,Jr(o,c,v)):(Ke&&f&&xl(c),c.flags|=1,Tt(o,c,g,v),c.child)}function Of(o,c,f,g,v){if(o===null){var C=f.type;return typeof C=="function"&&!hu(C)&&C.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=C,Df(o,c,C,g,v)):(o=uc(f.type,null,g,c,c.mode,v),o.ref=c.ref,o.return=c,c.child=o)}if(C=o.child,(o.lanes&v)===0){var _=C.memoizedProps;if(f=f.compare,f=f!==null?f:So,f(_,g)&&o.ref===c.ref)return Jr(o,c,v)}return c.flags|=1,o=Tn(C,g),o.ref=c.ref,o.return=c,c.child=o}function Df(o,c,f,g,v){if(o!==null){var C=o.memoizedProps;if(So(C,g)&&o.ref===c.ref)if(Bt=!1,c.pendingProps=g=C,(o.lanes&v)!==0)(o.flags&131072)!==0&&(Bt=!0);else return c.lanes=o.lanes,Jr(o,c,v)}return ql(o,c,f,g,v)}function Ff(o,c,f){var g=c.pendingProps,v=g.children,C=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(li,Ht),Ht|=f;else{if((f&1073741824)===0)return o=C!==null?C.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,qe(li,Ht),Ht|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=C!==null?C.baseLanes:f,qe(li,Ht),Ht|=g}else C!==null?(g=C.baseLanes|f,c.memoizedState=null):g=f,qe(li,Ht),Ht|=g;return Tt(o,c,v,f),c.child}function Lf(o,c){var f=c.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function ql(o,c,f,g,v){var C=_t(f)?es:yt.current;return C=Zs(c,C),ii(c,v),f=Ol(o,c,f,g,C,v),g=Dl(),o!==null&&!Bt?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~v,Jr(o,c,v)):(Ke&&g&&xl(c),c.flags|=1,Tt(o,c,f,v),c.child)}function Uf(o,c,f,g,v){if(_t(f)){var C=!0;Ba(c)}else C=!1;if(ii(c,v),c.stateNode===null)Za(o,c),Tf(c,f,g),Hl(c,f,g,v),g=!0;else if(o===null){var _=c.stateNode,H=c.memoizedProps;_.props=H;var Q=_.context,te=f.contextType;typeof te=="object"&&te!==null?te=Yt(te):(te=_t(f)?es:yt.current,te=Zs(c,te));var he=f.getDerivedStateFromProps,ge=typeof he=="function"||typeof _.getSnapshotBeforeUpdate=="function";ge||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(H!==g||Q!==te)&&jf(c,_,g,te),bn=!1;var fe=c.memoizedState;_.state=fe,Va(c,g,_,v),Q=c.memoizedState,H!==g||fe!==Q||kt.current||bn?(typeof he=="function"&&(zl(c,f,he,g),Q=c.memoizedState),(H=bn||Nf(c,f,H,g,fe,Q,te))?(ge||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(c.flags|=4194308)):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=Q),_.props=g,_.state=Q,_.context=te,g=H):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{_=c.stateNode,tf(o,c),H=c.memoizedProps,te=c.type===c.elementType?H:pr(c.type,H),_.props=te,ge=c.pendingProps,fe=_.context,Q=f.contextType,typeof Q=="object"&&Q!==null?Q=Yt(Q):(Q=_t(f)?es:yt.current,Q=Zs(c,Q));var xe=f.getDerivedStateFromProps;(he=typeof xe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(H!==ge||fe!==Q)&&jf(c,_,g,Q),bn=!1,fe=c.memoizedState,_.state=fe,Va(c,g,_,v);var be=c.memoizedState;H!==ge||fe!==be||kt.current||bn?(typeof xe=="function"&&(zl(c,f,xe,g),be=c.memoizedState),(te=bn||Nf(c,f,te,g,fe,be,Q)||!1)?(he||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,be,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,be,Q)),typeof _.componentDidUpdate=="function"&&(c.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof _.componentDidUpdate!="function"||H===o.memoizedProps&&fe===o.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&fe===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=be),_.props=g,_.state=be,_.context=Q,g=te):(typeof _.componentDidUpdate!="function"||H===o.memoizedProps&&fe===o.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&fe===o.memoizedState||(c.flags|=1024),g=!1)}return Wl(o,c,f,g,C,v)}function Wl(o,c,f,g,v,C){Lf(o,c);var _=(c.flags&128)!==0;if(!g&&!_)return v&&Vd(c,f,!1),Jr(o,c,C);g=c.stateNode,nm.current=c;var H=_&&typeof f.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&_?(c.child=ni(c,o.child,null,C),c.child=ni(c,null,H,C)):Tt(o,c,H,C),c.memoizedState=g.state,v&&Vd(c,f,!0),c.child}function Mf(o){var c=o.stateNode;c.pendingContext?zd(o,c.pendingContext,c.pendingContext!==c.context):c.context&&zd(o,c.context,!1),jl(o,c.containerInfo)}function zf(o,c,f,g,v){return ri(),vl(v),c.flags|=256,Tt(o,c,f,g),c.child}var Jl={dehydrated:null,treeContext:null,retryLane:0};function Ql(o){return{baseLanes:o,cachePool:null,transitions:null}}function Hf(o,c,f){var g=c.pendingProps,v=et.current,C=!1,_=(c.flags&128)!==0,H;if((H=_)||(H=o!==null&&o.memoizedState===null?!1:(v&2)!==0),H?(C=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),qe(et,v&1),o===null)return bl(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(_=g.children,o=g.fallback,C?(g=c.mode,C=c.child,_={mode:"hidden",children:_},(g&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=_):C=dc(_,g,0,null),o=ds(o,g,f,null),C.return=c,o.return=c,C.sibling=o,c.child=C,c.child.memoizedState=Ql(f),c.memoizedState=Jl,o):Kl(c,_));if(v=o.memoizedState,v!==null&&(H=v.dehydrated,H!==null))return sm(o,c,_,g,H,v,f);if(C){C=g.fallback,_=c.mode,v=o.child,H=v.sibling;var Q={mode:"hidden",children:g.children};return(_&1)===0&&c.child!==v?(g=c.child,g.childLanes=0,g.pendingProps=Q,c.deletions=null):(g=Tn(v,Q),g.subtreeFlags=v.subtreeFlags&14680064),H!==null?C=Tn(H,C):(C=ds(C,_,f,null),C.flags|=2),C.return=c,g.return=c,g.sibling=C,c.child=g,g=C,C=c.child,_=o.child.memoizedState,_=_===null?Ql(f):{baseLanes:_.baseLanes|f,cachePool:null,transitions:_.transitions},C.memoizedState=_,C.childLanes=o.childLanes&~f,c.memoizedState=Jl,g}return C=o.child,o=C.sibling,g=Tn(C,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=f),g.return=c,g.sibling=null,o!==null&&(f=c.deletions,f===null?(c.deletions=[o],c.flags|=16):f.push(o)),c.child=g,c.memoizedState=null,g}function Kl(o,c){return c=dc({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Ya(o,c,f,g){return g!==null&&vl(g),ni(c,o.child,null,f),o=Kl(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function sm(o,c,f,g,v,C,_){if(f)return c.flags&256?(c.flags&=-257,g=Vl(Error(t(422))),Ya(o,c,_,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(C=g.fallback,v=c.mode,g=dc({mode:"visible",children:g.children},v,0,null),C=ds(C,v,_,null),C.flags|=2,g.return=c,C.return=c,g.sibling=C,c.child=g,(c.mode&1)!==0&&ni(c,o.child,null,_),c.child.memoizedState=Ql(_),c.memoizedState=Jl,C);if((c.mode&1)===0)return Ya(o,c,_,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var H=g.dgst;return g=H,C=Error(t(419)),g=Vl(C,g,void 0),Ya(o,c,_,g)}if(H=(_&o.childLanes)!==0,Bt||H){if(g=lt,g!==null){switch(_&-_){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(g.suspendedLanes|_))!==0?0:v,v!==0&&v!==C.retryLane&&(C.retryLane=v,qr(o,v),yr(g,o,v,-1))}return fu(),g=Vl(Error(t(421))),Ya(o,c,_,g)}return v.data==="$?"?(c.flags|=128,c.child=o.child,c=ym.bind(null,o),v._reactRetry=c,null):(o=C.treeContext,zt=yn(v.nextSibling),Mt=c,Ke=!0,hr=null,o!==null&&(Kt[Xt++]=Vr,Kt[Xt++]=Gr,Kt[Xt++]=ts,Vr=o.id,Gr=o.overflow,ts=c),c=Kl(c,g.children),c.flags|=4096,c)}function Vf(o,c,f){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Cl(o.return,c,f)}function Xl(o,c,f,g,v){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:v}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=f,C.tailMode=v)}function Gf(o,c,f){var g=c.pendingProps,v=g.revealOrder,C=g.tail;if(Tt(o,c,g.children,f),g=et.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Vf(o,f,c);else if(o.tag===19)Vf(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(qe(et,g),(c.mode&1)===0)c.memoizedState=null;else switch(v){case"forwards":for(f=c.child,v=null;f!==null;)o=f.alternate,o!==null&&Ga(o)===null&&(v=f),f=f.sibling;f=v,f===null?(v=c.child,c.child=null):(v=f.sibling,f.sibling=null),Xl(c,!1,v,f,C);break;case"backwards":for(f=null,v=c.child,c.child=null;v!==null;){if(o=v.alternate,o!==null&&Ga(o)===null){c.child=v;break}o=v.sibling,v.sibling=f,f=v,v=o}Xl(c,!0,f,null,C);break;case"together":Xl(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Za(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Jr(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),as|=c.lanes,(f&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(t(153));if(c.child!==null){for(o=c.child,f=Tn(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=Tn(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function im(o,c,f){switch(c.tag){case 3:Mf(c),ri();break;case 5:sf(c);break;case 1:_t(c.type)&&Ba(c);break;case 4:jl(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,v=c.memoizedProps.value;qe(Ma,g._currentValue),g._currentValue=v;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(qe(et,et.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?Hf(o,c,f):(qe(et,et.current&1),o=Jr(o,c,f),o!==null?o.sibling:null);qe(et,et.current&1);break;case 19:if(g=(f&c.childLanes)!==0,(o.flags&128)!==0){if(g)return Gf(o,c,f);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),qe(et,et.current),g)break;return null;case 22:case 23:return c.lanes=0,Ff(o,c,f)}return Jr(o,c,f)}var qf,Yl,Wf,Jf;qf=function(o,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Yl=function(){},Wf=function(o,c,f,g){var v=o.memoizedProps;if(v!==g){o=c.stateNode,ss(Nr.current);var C=null;switch(f){case"input":v=gt(o,v),g=gt(o,g),C=[];break;case"select":v=ce({},v,{value:void 0}),g=ce({},g,{value:void 0}),C=[];break;case"textarea":v=$t(o,v),g=$t(o,g),C=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Ia)}He(f,g);var _;f=null;for(te in v)if(!g.hasOwnProperty(te)&&v.hasOwnProperty(te)&&v[te]!=null)if(te==="style"){var H=v[te];for(_ in H)H.hasOwnProperty(_)&&(f||(f={}),f[_]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(i.hasOwnProperty(te)?C||(C=[]):(C=C||[]).push(te,null));for(te in g){var Q=g[te];if(H=v!=null?v[te]:void 0,g.hasOwnProperty(te)&&Q!==H&&(Q!=null||H!=null))if(te==="style")if(H){for(_ in H)!H.hasOwnProperty(_)||Q&&Q.hasOwnProperty(_)||(f||(f={}),f[_]="");for(_ in Q)Q.hasOwnProperty(_)&&H[_]!==Q[_]&&(f||(f={}),f[_]=Q[_])}else f||(C||(C=[]),C.push(te,f)),f=Q;else te==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,H=H?H.__html:void 0,Q!=null&&H!==Q&&(C=C||[]).push(te,Q)):te==="children"?typeof Q!="string"&&typeof Q!="number"||(C=C||[]).push(te,""+Q):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(i.hasOwnProperty(te)?(Q!=null&&te==="onScroll"&&We("scroll",o),C||H===Q||(C=[])):(C=C||[]).push(te,Q))}f&&(C=C||[]).push("style",f);var te=C;(c.updateQueue=te)&&(c.flags|=4)}},Jf=function(o,c,f,g){f!==g&&(c.flags|=4)};function Fo(o,c){if(!Ke)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function wt(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(c)for(var v=o.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=g,o.childLanes=f,c}function om(o,c,f){var g=c.pendingProps;switch(wl(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(c),null;case 1:return _t(c.type)&&ka(),wt(c),null;case 3:return g=c.stateNode,oi(),Je(kt),Je(yt),$l(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(La(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,hr!==null&&(lu(hr),hr=null))),Yl(o,c),wt(c),null;case 5:Pl(c);var v=ss(ko.current);if(f=c.type,o!==null&&c.stateNode!=null)Wf(o,c,f,g,v),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(t(166));return wt(c),null}if(o=ss(Nr.current),La(c)){g=c.stateNode,f=c.type;var C=c.memoizedProps;switch(g[Cr]=c,g[To]=C,o=(c.mode&1)!==0,f){case"dialog":We("cancel",g),We("close",g);break;case"iframe":case"object":case"embed":We("load",g);break;case"video":case"audio":for(v=0;v<Ao.length;v++)We(Ao[v],g);break;case"source":We("error",g);break;case"img":case"image":case"link":We("error",g),We("load",g);break;case"details":We("toggle",g);break;case"input":Qn(g,C),We("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!C.multiple},We("invalid",g);break;case"textarea":Ms(g,C),We("invalid",g)}He(f,C),v=null;for(var _ in C)if(C.hasOwnProperty(_)){var H=C[_];_==="children"?typeof H=="string"?g.textContent!==H&&(C.suppressHydrationWarning!==!0&&Pa(g.textContent,H,o),v=["children",H]):typeof H=="number"&&g.textContent!==""+H&&(C.suppressHydrationWarning!==!0&&Pa(g.textContent,H,o),v=["children",""+H]):i.hasOwnProperty(_)&&H!=null&&_==="onScroll"&&We("scroll",g)}switch(f){case"input":Mr(g),aa(g,C,!0);break;case"textarea":Mr(g),ur(g);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(g.onclick=Ia)}g=v,c.updateQueue=g,g!==null&&(c.flags|=4)}else{_=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=la(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=_.createElement(f,{is:g.is}):(o=_.createElement(f),f==="select"&&(_=o,g.multiple?_.multiple=!0:g.size&&(_.size=g.size))):o=_.createElementNS(o,f),o[Cr]=c,o[To]=g,qf(o,c,!1,!1),c.stateNode=o;e:{switch(_=Ge(f,g),f){case"dialog":We("cancel",o),We("close",o),v=g;break;case"iframe":case"object":case"embed":We("load",o),v=g;break;case"video":case"audio":for(v=0;v<Ao.length;v++)We(Ao[v],o);v=g;break;case"source":We("error",o),v=g;break;case"img":case"image":case"link":We("error",o),We("load",o),v=g;break;case"details":We("toggle",o),v=g;break;case"input":Qn(o,g),v=gt(o,g),We("invalid",o);break;case"option":v=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},v=ce({},g,{value:void 0}),We("invalid",o);break;case"textarea":Ms(o,g),v=$t(o,g),We("invalid",o);break;default:v=g}He(f,v),H=v;for(C in H)if(H.hasOwnProperty(C)){var Q=H[C];C==="style"?_e(o,Q):C==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&P(o,Q)):C==="children"?typeof Q=="string"?(f!=="textarea"||Q!=="")&&F(o,Q):typeof Q=="number"&&F(o,""+Q):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(i.hasOwnProperty(C)?Q!=null&&C==="onScroll"&&We("scroll",o):Q!=null&&D(o,C,Q,_))}switch(f){case"input":Mr(o),aa(o,g,!1);break;case"textarea":Mr(o),ur(o);break;case"option":g.value!=null&&o.setAttribute("value",""+ke(g.value));break;case"select":o.multiple=!!g.multiple,C=g.value,C!=null?lr(o,!!g.multiple,C,!1):g.defaultValue!=null&&lr(o,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=Ia)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return wt(c),null;case 6:if(o&&c.stateNode!=null)Jf(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(t(166));if(f=ss(ko.current),ss(Nr.current),La(c)){if(g=c.stateNode,f=c.memoizedProps,g[Cr]=c,(C=g.nodeValue!==f)&&(o=Mt,o!==null))switch(o.tag){case 3:Pa(g.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Pa(g.nodeValue,f,(o.mode&1)!==0)}C&&(c.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[Cr]=c,c.stateNode=g}return wt(c),null;case 13:if(Je(et),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ke&&zt!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Kd(),ri(),c.flags|=98560,C=!1;else if(C=La(c),g!==null&&g.dehydrated!==null){if(o===null){if(!C)throw Error(t(318));if(C=c.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(t(317));C[Cr]=c}else ri(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;wt(c),C=!1}else hr!==null&&(lu(hr),hr=null),C=!0;if(!C)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(et.current&1)!==0?at===0&&(at=3):fu())),c.updateQueue!==null&&(c.flags|=4),wt(c),null);case 4:return oi(),Yl(o,c),o===null&&Co(c.stateNode.containerInfo),wt(c),null;case 10:return Al(c.type._context),wt(c),null;case 17:return _t(c.type)&&ka(),wt(c),null;case 19:if(Je(et),C=c.memoizedState,C===null)return wt(c),null;if(g=(c.flags&128)!==0,_=C.rendering,_===null)if(g)Fo(C,!1);else{if(at!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(_=Ga(o),_!==null){for(c.flags|=128,Fo(C,!1),g=_.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=f,f=c.child;f!==null;)C=f,o=g,C.flags&=14680066,_=C.alternate,_===null?(C.childLanes=0,C.lanes=o,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=_.childLanes,C.lanes=_.lanes,C.child=_.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=_.memoizedProps,C.memoizedState=_.memoizedState,C.updateQueue=_.updateQueue,C.type=_.type,o=_.dependencies,C.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return qe(et,et.current&1|2),c.child}o=o.sibling}C.tail!==null&&nt()>ui&&(c.flags|=128,g=!0,Fo(C,!1),c.lanes=4194304)}else{if(!g)if(o=Ga(_),o!==null){if(c.flags|=128,g=!0,f=o.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),Fo(C,!0),C.tail===null&&C.tailMode==="hidden"&&!_.alternate&&!Ke)return wt(c),null}else 2*nt()-C.renderingStartTime>ui&&f!==1073741824&&(c.flags|=128,g=!0,Fo(C,!1),c.lanes=4194304);C.isBackwards?(_.sibling=c.child,c.child=_):(f=C.last,f!==null?f.sibling=_:c.child=_,C.last=_)}return C.tail!==null?(c=C.tail,C.rendering=c,C.tail=c.sibling,C.renderingStartTime=nt(),c.sibling=null,f=et.current,qe(et,g?f&1|2:f&1),c):(wt(c),null);case 22:case 23:return du(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Ht&1073741824)!==0&&(wt(c),c.subtreeFlags&6&&(c.flags|=8192)):wt(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function am(o,c){switch(wl(c),c.tag){case 1:return _t(c.type)&&ka(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return oi(),Je(kt),Je(yt),$l(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Pl(c),null;case 13:if(Je(et),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(t(340));ri()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Je(et),null;case 4:return oi(),null;case 10:return Al(c.type._context),null;case 22:case 23:return du(),null;case 24:return null;default:return null}}var ec=!1,Et=!1,cm=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function ci(o,c){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){rt(o,c,g)}else f.current=null}function Zl(o,c,f){try{f()}catch(g){rt(o,c,g)}}var Qf=!1;function lm(o,c){if(ul=wa,o=Cd(),rl(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var v=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var _=0,H=-1,Q=-1,te=0,he=0,ge=o,fe=null;t:for(;;){for(var xe;ge!==f||v!==0&&ge.nodeType!==3||(H=_+v),ge!==C||g!==0&&ge.nodeType!==3||(Q=_+g),ge.nodeType===3&&(_+=ge.nodeValue.length),(xe=ge.firstChild)!==null;)fe=ge,ge=xe;for(;;){if(ge===o)break t;if(fe===f&&++te===v&&(H=_),fe===C&&++he===g&&(Q=_),(xe=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=xe}f=H===-1||Q===-1?null:{start:H,end:Q}}else f=null}f=f||{start:0,end:0}}else f=null;for(dl={focusedElem:o,selectionRange:f},wa=!1,Ee=c;Ee!==null;)if(c=Ee,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ee=o;else for(;Ee!==null;){c=Ee;try{var be=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var ve=be.memoizedProps,st=be.memoizedState,Y=c.stateNode,K=Y.getSnapshotBeforeUpdate(c.elementType===c.type?ve:pr(c.type,ve),st);Y.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var ee=c.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){rt(c,c.return,ye)}if(o=c.sibling,o!==null){o.return=c.return,Ee=o;break}Ee=c.return}return be=Qf,Qf=!1,be}function Lo(o,c,f){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&o)===o){var C=v.destroy;v.destroy=void 0,C!==void 0&&Zl(c,f,C)}v=v.next}while(v!==g)}}function tc(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&o)===o){var g=f.create;f.destroy=g()}f=f.next}while(f!==c)}}function eu(o){var c=o.ref;if(c!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof c=="function"?c(o):c.current=o}}function Kf(o){var c=o.alternate;c!==null&&(o.alternate=null,Kf(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Cr],delete c[To],delete c[ml],delete c[Gp],delete c[qp])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Xf(o){return o.tag===5||o.tag===3||o.tag===4}function Yf(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Xf(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function tu(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(o,c):f.insertBefore(o,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(o,f)):(c=f,c.appendChild(o)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Ia));else if(g!==4&&(o=o.child,o!==null))for(tu(o,c,f),o=o.sibling;o!==null;)tu(o,c,f),o=o.sibling}function ru(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(ru(o,c,f),o=o.sibling;o!==null;)ru(o,c,f),o=o.sibling}var ht=null,mr=!1;function Sn(o,c,f){for(f=f.child;f!==null;)Zf(o,c,f),f=f.sibling}function Zf(o,c,f){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(ha,f)}catch{}switch(f.tag){case 5:Et||ci(f,c);case 6:var g=ht,v=mr;ht=null,Sn(o,c,f),ht=g,mr=v,ht!==null&&(mr?(o=ht,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):ht.removeChild(f.stateNode));break;case 18:ht!==null&&(mr?(o=ht,f=f.stateNode,o.nodeType===8?pl(o.parentNode,f):o.nodeType===1&&pl(o,f),yo(o)):pl(ht,f.stateNode));break;case 4:g=ht,v=mr,ht=f.stateNode.containerInfo,mr=!0,Sn(o,c,f),ht=g,mr=v;break;case 0:case 11:case 14:case 15:if(!Et&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var C=v,_=C.destroy;C=C.tag,_!==void 0&&((C&2)!==0||(C&4)!==0)&&Zl(f,c,_),v=v.next}while(v!==g)}Sn(o,c,f);break;case 1:if(!Et&&(ci(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(H){rt(f,c,H)}Sn(o,c,f);break;case 21:Sn(o,c,f);break;case 22:f.mode&1?(Et=(g=Et)||f.memoizedState!==null,Sn(o,c,f),Et=g):Sn(o,c,f);break;default:Sn(o,c,f)}}function eh(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new cm),c.forEach(function(g){var v=xm.bind(null,o,g);f.has(g)||(f.add(g),g.then(v,v))})}}function gr(o,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var v=f[g];try{var C=o,_=c,H=_;e:for(;H!==null;){switch(H.tag){case 5:ht=H.stateNode,mr=!1;break e;case 3:ht=H.stateNode.containerInfo,mr=!0;break e;case 4:ht=H.stateNode.containerInfo,mr=!0;break e}H=H.return}if(ht===null)throw Error(t(160));Zf(C,_,v),ht=null,mr=!1;var Q=v.alternate;Q!==null&&(Q.return=null),v.return=null}catch(te){rt(v,c,te)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)th(c,o),c=c.sibling}function th(o,c){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(gr(c,o),jr(o),g&4){try{Lo(3,o,o.return),tc(3,o)}catch(ve){rt(o,o.return,ve)}try{Lo(5,o,o.return)}catch(ve){rt(o,o.return,ve)}}break;case 1:gr(c,o),jr(o),g&512&&f!==null&&ci(f,f.return);break;case 5:if(gr(c,o),jr(o),g&512&&f!==null&&ci(f,f.return),o.flags&32){var v=o.stateNode;try{F(v,"")}catch(ve){rt(o,o.return,ve)}}if(g&4&&(v=o.stateNode,v!=null)){var C=o.memoizedProps,_=f!==null?f.memoizedProps:C,H=o.type,Q=o.updateQueue;if(o.updateQueue=null,Q!==null)try{H==="input"&&C.type==="radio"&&C.name!=null&&Kn(v,C),Ge(H,_);var te=Ge(H,C);for(_=0;_<Q.length;_+=2){var he=Q[_],ge=Q[_+1];he==="style"?_e(v,ge):he==="dangerouslySetInnerHTML"?P(v,ge):he==="children"?F(v,ge):D(v,he,ge,te)}switch(H){case"input":Xn(v,C);break;case"textarea":ca(v,C);break;case"select":var fe=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!C.multiple;var xe=C.value;xe!=null?lr(v,!!C.multiple,xe,!1):fe!==!!C.multiple&&(C.defaultValue!=null?lr(v,!!C.multiple,C.defaultValue,!0):lr(v,!!C.multiple,C.multiple?[]:"",!1))}v[To]=C}catch(ve){rt(o,o.return,ve)}}break;case 6:if(gr(c,o),jr(o),g&4){if(o.stateNode===null)throw Error(t(162));v=o.stateNode,C=o.memoizedProps;try{v.nodeValue=C}catch(ve){rt(o,o.return,ve)}}break;case 3:if(gr(c,o),jr(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{yo(c.containerInfo)}catch(ve){rt(o,o.return,ve)}break;case 4:gr(c,o),jr(o);break;case 13:gr(c,o),jr(o),v=o.child,v.flags&8192&&(C=v.memoizedState!==null,v.stateNode.isHidden=C,!C||v.alternate!==null&&v.alternate.memoizedState!==null||(iu=nt())),g&4&&eh(o);break;case 22:if(he=f!==null&&f.memoizedState!==null,o.mode&1?(Et=(te=Et)||he,gr(c,o),Et=te):gr(c,o),jr(o),g&8192){if(te=o.memoizedState!==null,(o.stateNode.isHidden=te)&&!he&&(o.mode&1)!==0)for(Ee=o,he=o.child;he!==null;){for(ge=Ee=he;Ee!==null;){switch(fe=Ee,xe=fe.child,fe.tag){case 0:case 11:case 14:case 15:Lo(4,fe,fe.return);break;case 1:ci(fe,fe.return);var be=fe.stateNode;if(typeof be.componentWillUnmount=="function"){g=fe,f=fe.return;try{c=g,be.props=c.memoizedProps,be.state=c.memoizedState,be.componentWillUnmount()}catch(ve){rt(g,f,ve)}}break;case 5:ci(fe,fe.return);break;case 22:if(fe.memoizedState!==null){sh(ge);continue}}xe!==null?(xe.return=fe,Ee=xe):sh(ge)}he=he.sibling}e:for(he=null,ge=o;;){if(ge.tag===5){if(he===null){he=ge;try{v=ge.stateNode,te?(C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(H=ge.stateNode,Q=ge.memoizedProps.style,_=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,H.style.display=ue("display",_))}catch(ve){rt(o,o.return,ve)}}}else if(ge.tag===6){if(he===null)try{ge.stateNode.nodeValue=te?"":ge.memoizedProps}catch(ve){rt(o,o.return,ve)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===o)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===o)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===o)break e;he===ge&&(he=null),ge=ge.return}he===ge&&(he=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:gr(c,o),jr(o),g&4&&eh(o);break;case 21:break;default:gr(c,o),jr(o)}}function jr(o){var c=o.flags;if(c&2){try{e:{for(var f=o.return;f!==null;){if(Xf(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(F(v,""),g.flags&=-33);var C=Yf(o);ru(o,C,v);break;case 3:case 4:var _=g.stateNode.containerInfo,H=Yf(o);tu(o,H,_);break;default:throw Error(t(161))}}catch(Q){rt(o,o.return,Q)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function um(o,c,f){Ee=o,rh(o)}function rh(o,c,f){for(var g=(o.mode&1)!==0;Ee!==null;){var v=Ee,C=v.child;if(v.tag===22&&g){var _=v.memoizedState!==null||ec;if(!_){var H=v.alternate,Q=H!==null&&H.memoizedState!==null||Et;H=ec;var te=Et;if(ec=_,(Et=Q)&&!te)for(Ee=v;Ee!==null;)_=Ee,Q=_.child,_.tag===22&&_.memoizedState!==null?ih(v):Q!==null?(Q.return=_,Ee=Q):ih(v);for(;C!==null;)Ee=C,rh(C),C=C.sibling;Ee=v,ec=H,Et=te}nh(o)}else(v.subtreeFlags&8772)!==0&&C!==null?(C.return=v,Ee=C):nh(o)}}function nh(o){for(;Ee!==null;){var c=Ee;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Et||tc(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Et)if(f===null)g.componentDidMount();else{var v=c.elementType===c.type?f.memoizedProps:pr(c.type,f.memoizedProps);g.componentDidUpdate(v,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var C=c.updateQueue;C!==null&&nf(c,C,g);break;case 3:var _=c.updateQueue;if(_!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}nf(c,_,f)}break;case 5:var H=c.stateNode;if(f===null&&c.flags&4){f=H;var Q=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&f.focus();break;case"img":Q.src&&(f.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var te=c.alternate;if(te!==null){var he=te.memoizedState;if(he!==null){var ge=he.dehydrated;ge!==null&&yo(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Et||c.flags&512&&eu(c)}catch(fe){rt(c,c.return,fe)}}if(c===o){Ee=null;break}if(f=c.sibling,f!==null){f.return=c.return,Ee=f;break}Ee=c.return}}function sh(o){for(;Ee!==null;){var c=Ee;if(c===o){Ee=null;break}var f=c.sibling;if(f!==null){f.return=c.return,Ee=f;break}Ee=c.return}}function ih(o){for(;Ee!==null;){var c=Ee;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{tc(4,c)}catch(Q){rt(c,f,Q)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var v=c.return;try{g.componentDidMount()}catch(Q){rt(c,v,Q)}}var C=c.return;try{eu(c)}catch(Q){rt(c,C,Q)}break;case 5:var _=c.return;try{eu(c)}catch(Q){rt(c,_,Q)}}}catch(Q){rt(c,c.return,Q)}if(c===o){Ee=null;break}var H=c.sibling;if(H!==null){H.return=c.return,Ee=H;break}Ee=c.return}}var dm=Math.ceil,rc=z.ReactCurrentDispatcher,nu=z.ReactCurrentOwner,er=z.ReactCurrentBatchConfig,Fe=0,lt=null,it=null,pt=0,Ht=0,li=xn(0),at=0,Uo=null,as=0,nc=0,su=0,Mo=null,Ot=null,iu=0,ui=1/0,Qr=null,sc=!1,ou=null,Rn=null,ic=!1,An=null,oc=0,zo=0,au=null,ac=-1,cc=0;function jt(){return(Fe&6)!==0?nt():ac!==-1?ac:ac=nt()}function Cn(o){return(o.mode&1)===0?1:(Fe&2)!==0&&pt!==0?pt&-pt:Jp.transition!==null?(cc===0&&(cc=Ku()),cc):(o=ze,o!==0||(o=window.event,o=o===void 0?16:od(o.type)),o)}function yr(o,c,f,g){if(50<zo)throw zo=0,au=null,Error(t(185));fo(o,f,g),((Fe&2)===0||o!==lt)&&(o===lt&&((Fe&2)===0&&(nc|=f),at===4&&Nn(o,pt)),Dt(o,g),f===1&&Fe===0&&(c.mode&1)===0&&(ui=nt()+500,Oa&&En()))}function Dt(o,c){var f=o.callbackNode;Wh(o,c);var g=ga(o,o===lt?pt:0);if(g===0)f!==null&&Wu(f),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(f!=null&&Wu(f),c===1)o.tag===0?Wp(ah.bind(null,o)):Gd(ah.bind(null,o)),Hp(function(){(Fe&6)===0&&En()}),f=null;else{switch(Xu(g)){case 1:f=Lc;break;case 4:f=Ju;break;case 16:f=fa;break;case 536870912:f=Qu;break;default:f=fa}f=mh(f,oh.bind(null,o))}o.callbackPriority=c,o.callbackNode=f}}function oh(o,c){if(ac=-1,cc=0,(Fe&6)!==0)throw Error(t(327));var f=o.callbackNode;if(di()&&o.callbackNode!==f)return null;var g=ga(o,o===lt?pt:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=lc(o,g);else{c=g;var v=Fe;Fe|=2;var C=lh();(lt!==o||pt!==c)&&(Qr=null,ui=nt()+500,ls(o,c));do try{pm();break}catch(H){ch(o,H)}while(!0);Rl(),rc.current=C,Fe=v,it!==null?c=0:(lt=null,pt=0,c=at)}if(c!==0){if(c===2&&(v=Uc(o),v!==0&&(g=v,c=cu(o,v))),c===1)throw f=Uo,ls(o,0),Nn(o,g),Dt(o,nt()),f;if(c===6)Nn(o,g);else{if(v=o.current.alternate,(g&30)===0&&!fm(v)&&(c=lc(o,g),c===2&&(C=Uc(o),C!==0&&(g=C,c=cu(o,C))),c===1))throw f=Uo,ls(o,0),Nn(o,g),Dt(o,nt()),f;switch(o.finishedWork=v,o.finishedLanes=g,c){case 0:case 1:throw Error(t(345));case 2:us(o,Ot,Qr);break;case 3:if(Nn(o,g),(g&130023424)===g&&(c=iu+500-nt(),10<c)){if(ga(o,0)!==0)break;if(v=o.suspendedLanes,(v&g)!==g){jt(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=hl(us.bind(null,o,Ot,Qr),c);break}us(o,Ot,Qr);break;case 4:if(Nn(o,g),(g&4194240)===g)break;for(c=o.eventTimes,v=-1;0<g;){var _=31-dr(g);C=1<<_,_=c[_],_>v&&(v=_),g&=~C}if(g=v,g=nt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*dm(g/1960))-g,10<g){o.timeoutHandle=hl(us.bind(null,o,Ot,Qr),g);break}us(o,Ot,Qr);break;case 5:us(o,Ot,Qr);break;default:throw Error(t(329))}}}return Dt(o,nt()),o.callbackNode===f?oh.bind(null,o):null}function cu(o,c){var f=Mo;return o.current.memoizedState.isDehydrated&&(ls(o,c).flags|=256),o=lc(o,c),o!==2&&(c=Ot,Ot=f,c!==null&&lu(c)),o}function lu(o){Ot===null?Ot=o:Ot.push.apply(Ot,o)}function fm(o){for(var c=o;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var v=f[g],C=v.getSnapshot;v=v.value;try{if(!fr(C(),v))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Nn(o,c){for(c&=~su,c&=~nc,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var f=31-dr(c),g=1<<f;o[f]=-1,c&=~g}}function ah(o){if((Fe&6)!==0)throw Error(t(327));di();var c=ga(o,0);if((c&1)===0)return Dt(o,nt()),null;var f=lc(o,c);if(o.tag!==0&&f===2){var g=Uc(o);g!==0&&(c=g,f=cu(o,g))}if(f===1)throw f=Uo,ls(o,0),Nn(o,c),Dt(o,nt()),f;if(f===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,us(o,Ot,Qr),Dt(o,nt()),null}function uu(o,c){var f=Fe;Fe|=1;try{return o(c)}finally{Fe=f,Fe===0&&(ui=nt()+500,Oa&&En())}}function cs(o){An!==null&&An.tag===0&&(Fe&6)===0&&di();var c=Fe;Fe|=1;var f=er.transition,g=ze;try{if(er.transition=null,ze=1,o)return o()}finally{ze=g,er.transition=f,Fe=c,(Fe&6)===0&&En()}}function du(){Ht=li.current,Je(li)}function ls(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,zp(f)),it!==null)for(f=it.return;f!==null;){var g=f;switch(wl(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&ka();break;case 3:oi(),Je(kt),Je(yt),$l();break;case 5:Pl(g);break;case 4:oi();break;case 13:Je(et);break;case 19:Je(et);break;case 10:Al(g.type._context);break;case 22:case 23:du()}f=f.return}if(lt=o,it=o=Tn(o.current,null),pt=Ht=c,at=0,Uo=null,su=nc=as=0,Ot=Mo=null,ns!==null){for(c=0;c<ns.length;c++)if(f=ns[c],g=f.interleaved,g!==null){f.interleaved=null;var v=g.next,C=f.pending;if(C!==null){var _=C.next;C.next=v,g.next=_}f.pending=g}ns=null}return o}function ch(o,c){do{var f=it;try{if(Rl(),qa.current=Ka,Wa){for(var g=tt.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}Wa=!1}if(os=0,ct=ot=tt=null,_o=!1,Bo=0,nu.current=null,f===null||f.return===null){at=1,Uo=c,it=null;break}e:{var C=o,_=f.return,H=f,Q=c;if(c=pt,H.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var te=Q,he=H,ge=he.tag;if((he.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=he.alternate;fe?(he.updateQueue=fe.updateQueue,he.memoizedState=fe.memoizedState,he.lanes=fe.lanes):(he.updateQueue=null,he.memoizedState=null)}var xe=kf(_);if(xe!==null){xe.flags&=-257,_f(xe,_,H,C,c),xe.mode&1&&$f(C,te,c),c=xe,Q=te;var be=c.updateQueue;if(be===null){var ve=new Set;ve.add(Q),c.updateQueue=ve}else be.add(Q);break e}else{if((c&1)===0){$f(C,te,c),fu();break e}Q=Error(t(426))}}else if(Ke&&H.mode&1){var st=kf(_);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),_f(st,_,H,C,c),vl(ai(Q,H));break e}}C=Q=ai(Q,H),at!==4&&(at=2),Mo===null?Mo=[C]:Mo.push(C),C=_;do{switch(C.tag){case 3:C.flags|=65536,c&=-c,C.lanes|=c;var Y=Pf(C,Q,c);rf(C,Y);break e;case 1:H=Q;var K=C.type,ee=C.stateNode;if((C.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Rn===null||!Rn.has(ee)))){C.flags|=65536,c&=-c,C.lanes|=c;var ye=If(C,H,c);rf(C,ye);break e}}C=C.return}while(C!==null)}dh(f)}catch(Se){c=Se,it===f&&f!==null&&(it=f=f.return);continue}break}while(!0)}function lh(){var o=rc.current;return rc.current=Ka,o===null?Ka:o}function fu(){(at===0||at===3||at===2)&&(at=4),lt===null||(as&268435455)===0&&(nc&268435455)===0||Nn(lt,pt)}function lc(o,c){var f=Fe;Fe|=2;var g=lh();(lt!==o||pt!==c)&&(Qr=null,ls(o,c));do try{hm();break}catch(v){ch(o,v)}while(!0);if(Rl(),Fe=f,rc.current=g,it!==null)throw Error(t(261));return lt=null,pt=0,at}function hm(){for(;it!==null;)uh(it)}function pm(){for(;it!==null&&!Fh();)uh(it)}function uh(o){var c=ph(o.alternate,o,Ht);o.memoizedProps=o.pendingProps,c===null?dh(o):it=c,nu.current=null}function dh(o){var c=o;do{var f=c.alternate;if(o=c.return,(c.flags&32768)===0){if(f=om(f,c,Ht),f!==null){it=f;return}}else{if(f=am(f,c),f!==null){f.flags&=32767,it=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{at=6,it=null;return}}if(c=c.sibling,c!==null){it=c;return}it=c=o}while(c!==null);at===0&&(at=5)}function us(o,c,f){var g=ze,v=er.transition;try{er.transition=null,ze=1,mm(o,c,f,g)}finally{er.transition=v,ze=g}return null}function mm(o,c,f,g){do di();while(An!==null);if((Fe&6)!==0)throw Error(t(327));f=o.finishedWork;var v=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var C=f.lanes|f.childLanes;if(Jh(o,C),o===lt&&(it=lt=null,pt=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||ic||(ic=!0,mh(fa,function(){return di(),null})),C=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||C){C=er.transition,er.transition=null;var _=ze;ze=1;var H=Fe;Fe|=4,nu.current=null,lm(o,f),th(f,o),_p(dl),wa=!!ul,dl=ul=null,o.current=f,um(f),Lh(),Fe=H,ze=_,er.transition=C}else o.current=f;if(ic&&(ic=!1,An=o,oc=v),C=o.pendingLanes,C===0&&(Rn=null),zh(f.stateNode),Dt(o,nt()),c!==null)for(g=o.onRecoverableError,f=0;f<c.length;f++)v=c[f],g(v.value,{componentStack:v.stack,digest:v.digest});if(sc)throw sc=!1,o=ou,ou=null,o;return(oc&1)!==0&&o.tag!==0&&di(),C=o.pendingLanes,(C&1)!==0?o===au?zo++:(zo=0,au=o):zo=0,En(),null}function di(){if(An!==null){var o=Xu(oc),c=er.transition,f=ze;try{if(er.transition=null,ze=16>o?16:o,An===null)var g=!1;else{if(o=An,An=null,oc=0,(Fe&6)!==0)throw Error(t(331));var v=Fe;for(Fe|=4,Ee=o.current;Ee!==null;){var C=Ee,_=C.child;if((Ee.flags&16)!==0){var H=C.deletions;if(H!==null){for(var Q=0;Q<H.length;Q++){var te=H[Q];for(Ee=te;Ee!==null;){var he=Ee;switch(he.tag){case 0:case 11:case 15:Lo(8,he,C)}var ge=he.child;if(ge!==null)ge.return=he,Ee=ge;else for(;Ee!==null;){he=Ee;var fe=he.sibling,xe=he.return;if(Kf(he),he===te){Ee=null;break}if(fe!==null){fe.return=xe,Ee=fe;break}Ee=xe}}}var be=C.alternate;if(be!==null){var ve=be.child;if(ve!==null){be.child=null;do{var st=ve.sibling;ve.sibling=null,ve=st}while(ve!==null)}}Ee=C}}if((C.subtreeFlags&2064)!==0&&_!==null)_.return=C,Ee=_;else e:for(;Ee!==null;){if(C=Ee,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Lo(9,C,C.return)}var Y=C.sibling;if(Y!==null){Y.return=C.return,Ee=Y;break e}Ee=C.return}}var K=o.current;for(Ee=K;Ee!==null;){_=Ee;var ee=_.child;if((_.subtreeFlags&2064)!==0&&ee!==null)ee.return=_,Ee=ee;else e:for(_=K;Ee!==null;){if(H=Ee,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:tc(9,H)}}catch(Se){rt(H,H.return,Se)}if(H===_){Ee=null;break e}var ye=H.sibling;if(ye!==null){ye.return=H.return,Ee=ye;break e}Ee=H.return}}if(Fe=v,En(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(ha,o)}catch{}g=!0}return g}finally{ze=f,er.transition=c}}return!1}function fh(o,c,f){c=ai(f,c),c=Pf(o,c,1),o=vn(o,c,1),c=jt(),o!==null&&(fo(o,1,c),Dt(o,c))}function rt(o,c,f){if(o.tag===3)fh(o,o,f);else for(;c!==null;){if(c.tag===3){fh(c,o,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Rn===null||!Rn.has(g))){o=ai(f,o),o=If(c,o,1),c=vn(c,o,1),o=jt(),c!==null&&(fo(c,1,o),Dt(c,o));break}}c=c.return}}function gm(o,c,f){var g=o.pingCache;g!==null&&g.delete(c),c=jt(),o.pingedLanes|=o.suspendedLanes&f,lt===o&&(pt&f)===f&&(at===4||at===3&&(pt&130023424)===pt&&500>nt()-iu?ls(o,0):su|=f),Dt(o,c)}function hh(o,c){c===0&&((o.mode&1)===0?c=1:(c=ma,ma<<=1,(ma&130023424)===0&&(ma=4194304)));var f=jt();o=qr(o,c),o!==null&&(fo(o,c,f),Dt(o,f))}function ym(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),hh(o,f)}function xm(o,c){var f=0;switch(o.tag){case 13:var g=o.stateNode,v=o.memoizedState;v!==null&&(f=v.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(c),hh(o,f)}var ph;ph=function(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps||kt.current)Bt=!0;else{if((o.lanes&f)===0&&(c.flags&128)===0)return Bt=!1,im(o,c,f);Bt=(o.flags&131072)!==0}else Bt=!1,Ke&&(c.flags&1048576)!==0&&qd(c,Fa,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Za(o,c),o=c.pendingProps;var v=Zs(c,yt.current);ii(c,f),v=Ol(null,c,g,o,v,f);var C=Dl();return c.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,_t(g)?(C=!0,Ba(c)):C=!1,c.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Tl(c),v.updater=Xa,c.stateNode=v,v._reactInternals=c,Hl(c,g,o,f),c=Wl(null,c,g,!0,C,f)):(c.tag=0,Ke&&C&&xl(c),Tt(null,c,v,f),c=c.child),c;case 16:g=c.elementType;e:{switch(Za(o,c),o=c.pendingProps,v=g._init,g=v(g._payload),c.type=g,v=c.tag=Em(g),o=pr(g,o),v){case 0:c=ql(null,c,g,o,f);break e;case 1:c=Uf(null,c,g,o,f);break e;case 11:c=Bf(null,c,g,o,f);break e;case 14:c=Of(null,c,g,pr(g.type,o),f);break e}throw Error(t(306,g,""))}return c;case 0:return g=c.type,v=c.pendingProps,v=c.elementType===g?v:pr(g,v),ql(o,c,g,v,f);case 1:return g=c.type,v=c.pendingProps,v=c.elementType===g?v:pr(g,v),Uf(o,c,g,v,f);case 3:e:{if(Mf(c),o===null)throw Error(t(387));g=c.pendingProps,C=c.memoizedState,v=C.element,tf(o,c),Va(c,g,null,f);var _=c.memoizedState;if(g=_.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){v=ai(Error(t(423)),c),c=zf(o,c,g,f,v);break e}else if(g!==v){v=ai(Error(t(424)),c),c=zf(o,c,g,f,v);break e}else for(zt=yn(c.stateNode.containerInfo.firstChild),Mt=c,Ke=!0,hr=null,f=Zd(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(ri(),g===v){c=Jr(o,c,f);break e}Tt(o,c,g,f)}c=c.child}return c;case 5:return sf(c),o===null&&bl(c),g=c.type,v=c.pendingProps,C=o!==null?o.memoizedProps:null,_=v.children,fl(g,v)?_=null:C!==null&&fl(g,C)&&(c.flags|=32),Lf(o,c),Tt(o,c,_,f),c.child;case 6:return o===null&&bl(c),null;case 13:return Hf(o,c,f);case 4:return jl(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=ni(c,null,g,f):Tt(o,c,g,f),c.child;case 11:return g=c.type,v=c.pendingProps,v=c.elementType===g?v:pr(g,v),Bf(o,c,g,v,f);case 7:return Tt(o,c,c.pendingProps,f),c.child;case 8:return Tt(o,c,c.pendingProps.children,f),c.child;case 12:return Tt(o,c,c.pendingProps.children,f),c.child;case 10:e:{if(g=c.type._context,v=c.pendingProps,C=c.memoizedProps,_=v.value,qe(Ma,g._currentValue),g._currentValue=_,C!==null)if(fr(C.value,_)){if(C.children===v.children&&!kt.current){c=Jr(o,c,f);break e}}else for(C=c.child,C!==null&&(C.return=c);C!==null;){var H=C.dependencies;if(H!==null){_=C.child;for(var Q=H.firstContext;Q!==null;){if(Q.context===g){if(C.tag===1){Q=Wr(-1,f&-f),Q.tag=2;var te=C.updateQueue;if(te!==null){te=te.shared;var he=te.pending;he===null?Q.next=Q:(Q.next=he.next,he.next=Q),te.pending=Q}}C.lanes|=f,Q=C.alternate,Q!==null&&(Q.lanes|=f),Cl(C.return,f,c),H.lanes|=f;break}Q=Q.next}}else if(C.tag===10)_=C.type===c.type?null:C.child;else if(C.tag===18){if(_=C.return,_===null)throw Error(t(341));_.lanes|=f,H=_.alternate,H!==null&&(H.lanes|=f),Cl(_,f,c),_=C.sibling}else _=C.child;if(_!==null)_.return=C;else for(_=C;_!==null;){if(_===c){_=null;break}if(C=_.sibling,C!==null){C.return=_.return,_=C;break}_=_.return}C=_}Tt(o,c,v.children,f),c=c.child}return c;case 9:return v=c.type,g=c.pendingProps.children,ii(c,f),v=Yt(v),g=g(v),c.flags|=1,Tt(o,c,g,f),c.child;case 14:return g=c.type,v=pr(g,c.pendingProps),v=pr(g.type,v),Of(o,c,g,v,f);case 15:return Df(o,c,c.type,c.pendingProps,f);case 17:return g=c.type,v=c.pendingProps,v=c.elementType===g?v:pr(g,v),Za(o,c),c.tag=1,_t(g)?(o=!0,Ba(c)):o=!1,ii(c,f),Tf(c,g,v),Hl(c,g,v,f),Wl(null,c,g,!0,o,f);case 19:return Gf(o,c,f);case 22:return Ff(o,c,f)}throw Error(t(156,c.tag))};function mh(o,c){return qu(o,c)}function wm(o,c,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(o,c,f,g){return new wm(o,c,f,g)}function hu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Em(o){if(typeof o=="function")return hu(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Te)return 11;if(o===de)return 14}return 2}function Tn(o,c){var f=o.alternate;return f===null?(f=tr(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function uc(o,c,f,g,v,C){var _=2;if(g=o,typeof o=="function")hu(o)&&(_=1);else if(typeof o=="string")_=5;else e:switch(o){case G:return ds(f.children,v,C,c);case W:_=8,v|=8;break;case q:return o=tr(12,f,c,v|2),o.elementType=q,o.lanes=C,o;case Ae:return o=tr(13,f,c,v),o.elementType=Ae,o.lanes=C,o;case we:return o=tr(19,f,c,v),o.elementType=we,o.lanes=C,o;case pe:return dc(f,v,C,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case oe:_=10;break e;case le:_=9;break e;case Te:_=11;break e;case de:_=14;break e;case Z:_=16,g=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return c=tr(_,f,c,v),c.elementType=o,c.type=g,c.lanes=C,c}function ds(o,c,f,g){return o=tr(7,o,g,c),o.lanes=f,o}function dc(o,c,f,g){return o=tr(22,o,g,c),o.elementType=pe,o.lanes=f,o.stateNode={isHidden:!1},o}function pu(o,c,f){return o=tr(6,o,null,c),o.lanes=f,o}function mu(o,c,f){return c=tr(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function bm(o,c,f,g,v){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mc(0),this.expirationTimes=Mc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mc(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function gu(o,c,f,g,v,C,_,H,Q){return o=new bm(o,c,f,H,Q),c===1?(c=1,C===!0&&(c|=8)):c=0,C=tr(3,null,null,c),o.current=C,C.stateNode=o,C.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tl(C),o}function vm(o,c,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:g==null?null:""+g,children:o,containerInfo:c,implementation:f}}function gh(o){if(!o)return wn;o=o._reactInternals;e:{if(Yn(o)!==o||o.tag!==1)throw Error(t(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(_t(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(o.tag===1){var f=o.type;if(_t(f))return Hd(o,f,c)}return c}function yh(o,c,f,g,v,C,_,H,Q){return o=gu(f,g,!0,o,v,C,_,H,Q),o.context=gh(null),f=o.current,g=jt(),v=Cn(f),C=Wr(g,v),C.callback=c??null,vn(f,C,v),o.current.lanes=v,fo(o,v,g),Dt(o,g),o}function fc(o,c,f,g){var v=c.current,C=jt(),_=Cn(v);return f=gh(f),c.context===null?c.context=f:c.pendingContext=f,c=Wr(C,_),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=vn(v,c,_),o!==null&&(yr(o,v,_,C),Ha(o,v,_)),_}function hc(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function xh(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function yu(o,c){xh(o,c),(o=o.alternate)&&xh(o,c)}function Sm(){return null}var wh=typeof reportError=="function"?reportError:function(o){console.error(o)};function xu(o){this._internalRoot=o}pc.prototype.render=xu.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(t(409));fc(o,c,null,null)},pc.prototype.unmount=xu.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;cs(function(){fc(null,o,null,null)}),c[zr]=null}};function pc(o){this._internalRoot=o}pc.prototype.unstable_scheduleHydration=function(o){if(o){var c=ed();o={blockedOn:null,target:o,priority:c};for(var f=0;f<pn.length&&c!==0&&c<pn[f].priority;f++);pn.splice(f,0,o),f===0&&nd(o)}};function wu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function mc(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Eh(){}function Rm(o,c,f,g,v){if(v){if(typeof g=="function"){var C=g;g=function(){var te=hc(_);C.call(te)}}var _=yh(c,g,o,0,null,!1,!1,"",Eh);return o._reactRootContainer=_,o[zr]=_.current,Co(o.nodeType===8?o.parentNode:o),cs(),_}for(;v=o.lastChild;)o.removeChild(v);if(typeof g=="function"){var H=g;g=function(){var te=hc(Q);H.call(te)}}var Q=gu(o,0,!1,null,null,!1,!1,"",Eh);return o._reactRootContainer=Q,o[zr]=Q.current,Co(o.nodeType===8?o.parentNode:o),cs(function(){fc(c,Q,f,g)}),Q}function gc(o,c,f,g,v){var C=f._reactRootContainer;if(C){var _=C;if(typeof v=="function"){var H=v;v=function(){var Q=hc(_);H.call(Q)}}fc(c,_,o,v)}else _=Rm(f,c,o,v,g);return hc(_)}Yu=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var f=uo(c.pendingLanes);f!==0&&(zc(c,f|1),Dt(c,nt()),(Fe&6)===0&&(ui=nt()+500,En()))}break;case 13:cs(function(){var g=qr(o,1);if(g!==null){var v=jt();yr(g,o,1,v)}}),yu(o,1)}},Hc=function(o){if(o.tag===13){var c=qr(o,134217728);if(c!==null){var f=jt();yr(c,o,134217728,f)}yu(o,134217728)}},Zu=function(o){if(o.tag===13){var c=Cn(o),f=qr(o,c);if(f!==null){var g=jt();yr(f,o,c,g)}yu(o,c)}},ed=function(){return ze},td=function(o,c){var f=ze;try{return ze=o,c()}finally{ze=f}},Bc=function(o,c,f){switch(c){case"input":if(Xn(o,f),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==o&&g.form===o.form){var v=$a(g);if(!v)throw Error(t(90));Qt(g),Xn(g,v)}}}break;case"textarea":ca(o,f);break;case"select":c=f.value,c!=null&&lr(o,!!f.multiple,c,!1)}},Lu=uu,Uu=cs;var Am={usingClientEntryPoint:!1,Events:[jo,Xs,$a,Du,Fu,uu]},Ho={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cm={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Vu(o),o===null?null:o.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||Sm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{ha=yc.inject(Cm),Ar=yc}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Am,reactDom_production_min.createPortal=function(o,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wu(c))throw Error(t(200));return vm(o,c,null,f)},reactDom_production_min.createRoot=function(o,c){if(!wu(o))throw Error(t(299));var f=!1,g="",v=wh;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(v=c.onRecoverableError)),c=gu(o,1,!1,null,null,f,!1,g,v),o[zr]=c.current,Co(o.nodeType===8?o.parentNode:o),new xu(c)},reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Vu(c),o=o===null?null:o.stateNode,o},reactDom_production_min.flushSync=function(o){return cs(o)},reactDom_production_min.hydrate=function(o,c,f){if(!mc(c))throw Error(t(200));return gc(null,o,c,!0,f)},reactDom_production_min.hydrateRoot=function(o,c,f){if(!wu(o))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,v=!1,C="",_=wh;if(f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onRecoverableError!==void 0&&(_=f.onRecoverableError)),c=yh(c,null,o,1,f??null,v,!1,C,_),o[zr]=c.current,Co(o),g)for(o=0;o<g.length;o++)f=g[o],v=f._getVersion,v=v(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,v]:c.mutableSourceEagerHydrationData.push(f,v);return new pc(c)},reactDom_production_min.render=function(o,c,f){if(!mc(c))throw Error(t(200));return gc(null,o,c,!1,f)},reactDom_production_min.unmountComponentAtNode=function(o){if(!mc(o))throw Error(t(40));return o._reactRootContainer?(cs(function(){gc(null,null,o,!1,function(){o._reactRootContainer=null,o[zr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=uu,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,c,f,g){if(!mc(f))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return gc(o,c,f,!1,g)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var r=requireReactDom();return client.createRoot=r.createRoot,client.hydrateRoot=r.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var cookie={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredCookie;function requireCookie(){if(hasRequiredCookie)return cookie;hasRequiredCookie=1,cookie.parse=l,cookie.serialize=x;var r=Object.prototype.toString,e=Object.prototype.hasOwnProperty,t=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,s=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/;function l(A,S){if(typeof A!="string")throw new TypeError("argument str must be a string");var N={},k=A.length;if(k<2)return N;var j=S&&S.decode||w,$=0,D=0,z=0;do{if(D=A.indexOf("=",$),D===-1)break;if(z=A.indexOf(";",$),z===-1)z=k;else if(D>z){$=A.lastIndexOf(";",D-1)+1;continue}var L=u(A,$,D),M=p(A,D,L),G=A.slice(L,M);if(!e.call(N,G)){var W=u(A,D+1,z),q=p(A,z,W);A.charCodeAt(W)===34&&A.charCodeAt(q-1)===34&&(W++,q--);var oe=A.slice(W,q);N[G]=R(oe,j)}$=z+1}while($<k);return N}function u(A,S,N){do{var k=A.charCodeAt(S);if(k!==32&&k!==9)return S}while(++S<N);return N}function p(A,S,N){for(;S>N;){var k=A.charCodeAt(--S);if(k!==32&&k!==9)return S+1}return N}function x(A,S,N){var k=N&&N.encode||encodeURIComponent;if(typeof k!="function")throw new TypeError("option encode is invalid");if(!t.test(A))throw new TypeError("argument name is invalid");var j=k(S);if(!s.test(j))throw new TypeError("argument val is invalid");var $=A+"="+j;if(!N)return $;if(N.maxAge!=null){var D=Math.floor(N.maxAge);if(!isFinite(D))throw new TypeError("option maxAge is invalid");$+="; Max-Age="+D}if(N.domain){if(!i.test(N.domain))throw new TypeError("option domain is invalid");$+="; Domain="+N.domain}if(N.path){if(!a.test(N.path))throw new TypeError("option path is invalid");$+="; Path="+N.path}if(N.expires){var z=N.expires;if(!E(z)||isNaN(z.valueOf()))throw new TypeError("option expires is invalid");$+="; Expires="+z.toUTCString()}if(N.httpOnly&&($+="; HttpOnly"),N.secure&&($+="; Secure"),N.partitioned&&($+="; Partitioned"),N.priority){var L=typeof N.priority=="string"?N.priority.toLowerCase():N.priority;switch(L){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(N.sameSite){var M=typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite;switch(M){case!0:$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"strict":$+="; SameSite=Strict";break;case"none":$+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return $}function w(A){return A.indexOf("%")!==-1?decodeURIComponent(A):A}function E(A){return r.call(A)==="[object Date]"}function R(A,S){try{return S(A)}catch{return A}}return cookie}requireCookie();var PopStateEventType="popstate";function createBrowserHistory(r={}){function e(s,i){let{pathname:a,search:l,hash:u}=s.location;return createLocation("",{pathname:a,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:createPath(i)}return getUrlBasedHistory(e,t,null,r)}function invariant(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function warning(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey$1(){return Math.random().toString(36).substring(2,10)}function getHistoryState(r,e){return{usr:r.state,key:r.key,idx:e}}function createLocation(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:t,key:e&&e.key||s||createKey$1()}}function createPath({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function parsePath(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function getUrlBasedHistory(r,e,t,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,l=i.history,u="POP",p=null,x=w();x==null&&(x=0,l.replaceState({...l.state,idx:x},""));function w(){return(l.state||{idx:null}).idx}function E(){u="POP";let k=w(),j=k==null?null:k-x;x=k,p&&p({action:u,location:N.location,delta:j})}function R(k,j){u="PUSH";let $=createLocation(N.location,k,j);x=w()+1;let D=getHistoryState($,x),z=N.createHref($);try{l.pushState(D,"",z)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(z)}a&&p&&p({action:u,location:N.location,delta:1})}function A(k,j){u="REPLACE";let $=createLocation(N.location,k,j);x=w();let D=getHistoryState($,x),z=N.createHref($);l.replaceState(D,"",z),a&&p&&p({action:u,location:N.location,delta:0})}function S(k){return createBrowserURLImpl(k)}let N={get action(){return u},get location(){return r(i,l)},listen(k){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(PopStateEventType,E),p=k,()=>{i.removeEventListener(PopStateEventType,E),p=null}},createHref(k){return e(i,k)},createURL:S,encodeLocation(k){let j=S(k);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:R,replace:A,go(k){return l.go(k)}};return N}function createBrowserURLImpl(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:createPath(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function matchRoutes(r,e,t="/"){return matchRoutesImpl(r,e,t,!1)}function matchRoutesImpl(r,e,t,s){let i=typeof e=="string"?parsePath(e):e,a=stripBasename(i.pathname||"/",t);if(a==null)return null;let l=flattenRoutes(r);rankRouteBranches(l);let u=null;for(let p=0;u==null&&p<l.length;++p){let x=decodePath(a);u=matchRouteBranch(l[p],x,s)}return u}function flattenRoutes(r,e=[],t=[],s=""){let i=(a,l,u)=>{let p={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};p.relativePath.startsWith("/")&&(invariant(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let x=joinPaths([s,p.relativePath]),w=t.concat(p);a.children&&a.children.length>0&&(invariant(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),flattenRoutes(a.children,e,w,x)),!(a.path==null&&!a.index)&&e.push({path:x,score:computeScore(x,a.index),routesMeta:w})};return r.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,l);else for(let p of explodeOptionalSegments(a.path))i(a,l,p)}),e}function explodeOptionalSegments(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let l=explodeOptionalSegments(s.join("/")),u=[];return u.push(...l.map(p=>p===""?a:[a,p].join("/"))),i&&u.push(...l),u.map(p=>r.startsWith("/")&&p===""?"/":p)}function rankRouteBranches(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=r=>r==="*";function computeScore(r,e){let t=r.split("/"),s=t.length;return t.some(isSplat)&&(s+=splatPenalty),e&&(s+=indexRouteValue),t.filter(i=>!isSplat(i)).reduce((i,a)=>i+(paramRe.test(a)?dynamicSegmentValue:a===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(r,e){return r.length===e.length&&r.slice(0,-1).every((s,i)=>s===e[i])?r[r.length-1]-e[e.length-1]:0}function matchRouteBranch(r,e,t=!1){let{routesMeta:s}=r,i={},a="/",l=[];for(let u=0;u<s.length;++u){let p=s[u],x=u===s.length-1,w=a==="/"?e:e.slice(a.length)||"/",E=matchPath({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},w),R=p.route;if(!E&&x&&t&&!s[s.length-1].route.index&&(E=matchPath({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!E)return null;Object.assign(i,E.params),l.push({params:i,pathname:joinPaths([a,E.pathname]),pathnameBase:normalizePathname(joinPaths([a,E.pathnameBase])),route:R}),E.pathnameBase!=="/"&&(a=joinPaths([a,E.pathnameBase]))}return l}function matchPath(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=compilePath(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:s.reduce((x,{paramName:w,isOptional:E},R)=>{if(w==="*"){let S=u[R]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const A=u[R];return E&&!A?x[w]=void 0:x[w]=(A||"").replace(/%2F/g,"/"),x},{}),pathname:a,pathnameBase:l,pattern:r}}function compilePath(r,e=!1,t=!0){warning(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,p)=>(s.push({paramName:u,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function decodePath(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function stripBasename(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function resolvePath(r,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof r=="string"?parsePath(r):r;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(s),hash:normalizeHash(i)}}function resolvePathname(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(r){let e=getPathContributingMatches(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function resolveTo(r,e,t,s=!1){let i;typeof r=="string"?i=parsePath(r):(i={...r},invariant(!i.pathname||!i.pathname.includes("?"),getInvalidPathError("?","pathname","search",i)),invariant(!i.pathname||!i.pathname.includes("#"),getInvalidPathError("#","pathname","hash",i)),invariant(!i.search||!i.search.includes("#"),getInvalidPathError("#","search","hash",i)));let a=r===""||i.pathname==="",l=a?"/":i.pathname,u;if(l==null)u=t;else{let E=e.length-1;if(!s&&l.startsWith("..")){let R=l.split("/");for(;R[0]==="..";)R.shift(),E-=1;i.pathname=R.join("/")}u=E>=0?e[E]:"/"}let p=resolvePath(i,u),x=l&&l!=="/"&&l.endsWith("/"),w=(a||l===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(x||w)&&(p.pathname+="/"),p}var joinPaths=r=>r.join("/").replace(/\/\/+/g,"/"),normalizePathname=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,normalizeHash=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function isRouteErrorResponse(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(r,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=reactExports.useContext(NavigationContext),{hash:i,pathname:a,search:l}=useResolvedPath(r,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:joinPaths([t,a])),s.createHref({pathname:u,search:l,hash:i})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(r)}function useNavigate(){let{isDataRoute:r}=reactExports.useContext(RouteContext);return r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let r=reactExports.useContext(DataRouterContext),{basename:e,navigator:t}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),{pathname:i}=useLocation(),a=JSON.stringify(getResolveToMatches(s)),l=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{l.current=!0}),reactExports.useCallback((p,x={})=>{if(warning(l.current,navigateEffectWarning),!l.current)return;if(typeof p=="number"){t.go(p);return}let w=resolveTo(p,JSON.parse(a),i,x.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:joinPaths([e,w.pathname])),(x.replace?t.replace:t.push)(w,x.state,x)},[e,t,a,i,r])}var OutletContext=reactExports.createContext(null);function useOutlet(r){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:r},e)}function useParams(){let{matches:r}=reactExports.useContext(RouteContext),e=r[r.length-1];return e?e.params:{}}function useResolvedPath(r,{relative:e}={}){let{matches:t}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),i=JSON.stringify(getResolveToMatches(t));return reactExports.useMemo(()=>resolveTo(r,JSON.parse(i),s,e==="path"),[r,i,s,e])}function useRoutes(r,e){return useRoutesImpl(r,e)}function useRoutesImpl(r,e,t,s){var j;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),l=a[a.length-1],u=l?l.params:{},p=l?l.pathname:"/",x=l?l.pathnameBase:"/",w=l&&l.route;{let $=w&&w.path||"";warningOnce(p,!w||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let E=useLocation(),R;if(e){let $=typeof e=="string"?parsePath(e):e;invariant(x==="/"||((j=$.pathname)==null?void 0:j.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${$.pathname}" was given in the \`location\` prop.`),R=$}else R=E;let A=R.pathname||"/",S=A;if(x!=="/"){let $=x.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice($.length).join("/")}let N=matchRoutes(r,{pathname:S});warning(w||N!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),warning(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=_renderMatches(N&&N.map($=>Object.assign({},$,{params:Object.assign({},u,$.params),pathname:joinPaths([x,i.encodeLocation?i.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?x:joinPaths([x,i.encodeLocation?i.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),a,t,s);return e&&k?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},k):k}function DefaultErrorComponent(){let r=useRouteError(),e=isRouteErrorResponse(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:a},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:a},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:i},t):null,l)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:r,match:e,children:t}){let s=reactExports.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:r},t)}function _renderMatches(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,a=t==null?void 0:t.errors;if(a!=null){let p=i.findIndex(x=>x.route.id&&(a==null?void 0:a[x.route.id])!==void 0);invariant(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let l=!1,u=-1;if(t)for(let p=0;p<i.length;p++){let x=i[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(u=p),x.route.id){let{loaderData:w,errors:E}=t,R=x.route.loader&&!w.hasOwnProperty(x.route.id)&&(!E||E[x.route.id]===void 0);if(x.route.lazy||R){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((p,x,w)=>{let E,R=!1,A=null,S=null;t&&(E=a&&x.route.id?a[x.route.id]:void 0,A=x.route.errorElement||defaultErrorElement,l&&(u<0&&w===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,S=null):u===w&&(R=!0,S=x.route.hydrateFallbackElement||null)));let N=e.concat(i.slice(0,w+1)),k=()=>{let j;return E?j=A:R?j=S:x.route.Component?j=reactExports.createElement(x.route.Component,null):x.route.element?j=x.route.element:j=p,reactExports.createElement(RenderedRoute,{match:x,routeContext:{outlet:p,matches:N,isDataRoute:t!=null},children:j})};return t&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:A,error:E,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}function getDataRouterConsoleError(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(r)),e}function useDataRouterState(r){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(r)),e}function useRouteContext(r){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(r)),e}function useCurrentRouteId(r){let e=useRouteContext(r),t=e.matches[e.matches.length-1];return invariant(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var s;let r=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),t=useCurrentRouteId("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function useNavigateStable(){let{router:r}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{t.current=!0}),reactExports.useCallback(async(i,a={})=>{warning(t.current,navigateEffectWarning),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var alreadyWarned={};function warningOnce(r,e,t){!e&&!alreadyWarned[r]&&(alreadyWarned[r]=!0,warning(!1,t))}reactExports.memo(DataRoutes);function DataRoutes({routes:r,future:e,state:t}){return useRoutesImpl(r,void 0,t,e)}function Navigate({to:r,replace:e,state:t,relative:s}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=reactExports.useContext(NavigationContext);warning(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),u=useNavigate(),p=resolveTo(r,getResolveToMatches(a),l,s==="path"),x=JSON.stringify(p);return reactExports.useEffect(()=>{u(JSON.parse(x),{replace:e,state:t,relative:s})},[u,x,s,e,t]),null}function Outlet(r){return useOutlet(r.context)}function Route(r){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:a=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),u=reactExports.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof t=="string"&&(t=parsePath(t));let{pathname:p="/",search:x="",hash:w="",state:E=null,key:R="default"}=t,A=reactExports.useMemo(()=>{let S=stripBasename(p,l);return S==null?null:{location:{pathname:S,search:x,hash:w,state:E,key:R},navigationType:s}},[l,p,x,w,E,R,s]);return warning(A!=null,`<Router basename="${l}"> is not able to match the URL "${p}${x}${w}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:reactExports.createElement(NavigationContext.Provider,{value:u},reactExports.createElement(LocationContext.Provider,{children:e,value:A}))}function Routes({children:r,location:e}){return useRoutes(createRoutesFromChildren(r),e)}function createRoutesFromChildren(r,e=[]){let t=[];return reactExports.Children.forEach(r,(s,i)=>{if(!reactExports.isValidElement(s))return;let a=[...e,i];if(s.type===reactExports.Fragment){t.push.apply(t,createRoutesFromChildren(s.props.children,a));return}invariant(s.type===Route,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=createRoutesFromChildren(s.props.children,a)),t.push(l)}),t}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(r){return r!=null&&typeof r.tagName=="string"}function isButtonElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="button"}function isFormElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="form"}function isInputElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="input"}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,e){return r.button===0&&(!e||e==="_self")&&!isModifiedEvent(r)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(r){return r!=null&&!supportedFormEncTypes.has(r)?(warning(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):r}function getFormSubmissionInfo(r,e){let t,s,i,a,l;if(isFormElement(r)){let u=r.getAttribute("action");s=u?stripBasename(u,e):null,t=r.getAttribute("method")||defaultMethod,i=getFormEncType(r.getAttribute("enctype"))||defaultEncType,a=new FormData(r)}else if(isButtonElement(r)||isInputElement(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||u.getAttribute("action");if(s=p?stripBasename(p,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||defaultMethod,i=getFormEncType(r.getAttribute("formenctype"))||getFormEncType(u.getAttribute("enctype"))||defaultEncType,a=new FormData(u,r),!isFormDataSubmitterSupported()){let{name:x,type:w,value:E}=r;if(w==="image"){let R=x?`${x}.`:"";a.append(`${R}x`,"0"),a.append(`${R}y`,"0")}else x&&a.append(x,E)}}else{if(isHtmlElement(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=defaultMethod,s=null,i=defaultEncType,l=r}return a&&i==="text/plain"&&(l=a,a=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:a,body:l}}function invariant2(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function loadRouteModule(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function getKeyedPrefetchLinks(r,e,t){let s=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await loadRouteModule(a,t);return l.links?l.links():[]}return[]}));return dedupeLinkDescriptors(s.flat(1).filter(isHtmlLinkDescriptor).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function getNewMatchesForLinks(r,e,t,s,i,a){let l=(p,x)=>t[x]?p.route.id!==t[x].route.id:!0,u=(p,x)=>{var w;return t[x].pathname!==p.pathname||((w=t[x].route.path)==null?void 0:w.endsWith("*"))&&t[x].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,x)=>l(p,x)||u(p,x)):a==="data"?e.filter((p,x)=>{var E;let w=s.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(l(p,x)||u(p,x))return!0;if(p.route.shouldRevalidate){let R=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function getModuleLinkHrefs(r,e,{includeHydrateFallback:t}={}){return dedupeHrefs(r.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function dedupeHrefs(r){return[...new Set(r)]}function sortKeys(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function dedupeLinkDescriptors(r,e){let t=new Set;return new Set(e),r.reduce((s,i)=>{let a=JSON.stringify(sortKeys(i));return t.has(a)||(t.add(a),s.push({key:a,link:i})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var NO_BODY_STATUS_CODES=new Set([100,101,204,205]);function singleFetchUrl(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&stripBasename(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function useDataRouterContext2(){let r=reactExports.useContext(DataRouterContext);return invariant2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function useDataRouterStateContext(){let r=reactExports.useContext(DataRouterStateContext);return invariant2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let r=reactExports.useContext(FrameworkContext);return invariant2(r,"You must render this element inside a <HydratedRouter> element"),r}function usePrefetchBehavior(r,e){let t=reactExports.useContext(FrameworkContext),[s,i]=reactExports.useState(!1),[a,l]=reactExports.useState(!1),{onFocus:u,onBlur:p,onMouseEnter:x,onMouseLeave:w,onTouchStart:E}=e,R=reactExports.useRef(null);reactExports.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let N=j=>{j.forEach($=>{l($.isIntersecting)})},k=new IntersectionObserver(N,{threshold:.5});return R.current&&k.observe(R.current),()=>{k.disconnect()}}},[r]),reactExports.useEffect(()=>{if(s){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[s]);let A=()=>{i(!0)},S=()=>{i(!1),l(!1)};return t?r!=="intent"?[a,R,{}]:[a,R,{onFocus:composeEventHandlers(u,A),onBlur:composeEventHandlers(p,S),onMouseEnter:composeEventHandlers(x,A),onMouseLeave:composeEventHandlers(w,S),onTouchStart:composeEventHandlers(E,A)}]:[!1,R,{}]}function composeEventHandlers(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function PrefetchPageLinks({page:r,...e}){let{router:t}=useDataRouterContext2(),s=reactExports.useMemo(()=>matchRoutes(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?reactExports.createElement(PrefetchPageLinksImpl,{page:r,matches:s,...e}):null}function useKeyedPrefetchLinks(r){let{manifest:e,routeModules:t}=useFrameworkContext(),[s,i]=reactExports.useState([]);return reactExports.useEffect(()=>{let a=!1;return getKeyedPrefetchLinks(r,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[r,e,t]),s}function PrefetchPageLinksImpl({page:r,matches:e,...t}){let s=useLocation(),{manifest:i,routeModules:a}=useFrameworkContext(),{basename:l}=useDataRouterContext2(),{loaderData:u,matches:p}=useDataRouterStateContext(),x=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,p,i,s,"data"),[r,e,p,i,s]),w=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,p,i,s,"assets"),[r,e,p,i,s]),E=reactExports.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let S=new Set,N=!1;if(e.forEach(j=>{var D;let $=i.routes[j.route.id];!$||!$.hasLoader||(!x.some(z=>z.route.id===j.route.id)&&j.route.id in u&&((D=a[j.route.id])!=null&&D.shouldRevalidate)||$.hasClientLoader?N=!0:S.add(j.route.id))}),S.size===0)return[];let k=singleFetchUrl(r,l);return N&&S.size>0&&k.searchParams.set("_routes",e.filter(j=>S.has(j.route.id)).map(j=>j.route.id).join(",")),[k.pathname+k.search]},[l,u,s,i,x,e,r,a]),R=reactExports.useMemo(()=>getModuleLinkHrefs(w,i),[w,i]),A=useKeyedPrefetchLinks(w);return reactExports.createElement(reactExports.Fragment,null,E.map(S=>reactExports.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),R.map(S=>reactExports.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),A.map(({key:S,link:N})=>reactExports.createElement("link",{key:S,...N})))}function mergeRefs(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.6.3")}catch{}function BrowserRouter({basename:r,children:e,window:t}){let s=reactExports.useRef();s.current==null&&(s.current=createBrowserHistory({window:t,v5Compat:!0}));let i=s.current,[a,l]=reactExports.useState({action:i.action,location:i.location}),u=reactExports.useCallback(p=>{reactExports.startTransition(()=>l(p))},[l]);return reactExports.useLayoutEffect(()=>i.listen(u),[i,u]),reactExports.createElement(Router,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:a,replace:l,state:u,target:p,to:x,preventScrollReset:w,viewTransition:E,...R},A){let{basename:S}=reactExports.useContext(NavigationContext),N=typeof x=="string"&&ABSOLUTE_URL_REGEX2.test(x),k,j=!1;if(typeof x=="string"&&N&&(k=x,isBrowser))try{let q=new URL(window.location.href),oe=x.startsWith("//")?new URL(q.protocol+x):new URL(x),le=stripBasename(oe.pathname,S);oe.origin===q.origin&&le!=null?x=le+oe.search+oe.hash:j=!0}catch{warning(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=useHref(x,{relative:i}),[D,z,L]=usePrefetchBehavior(s,R),M=useLinkClickHandler(x,{replace:l,state:u,target:p,preventScrollReset:w,relative:i,viewTransition:E});function G(q){e&&e(q),q.defaultPrevented||M(q)}let W=reactExports.createElement("a",{...R,...L,href:k||$,onClick:j||a?e:G,ref:mergeRefs(A,z),target:p,"data-discover":!N&&t==="render"?"true":void 0});return D&&!N?reactExports.createElement(reactExports.Fragment,null,W,reactExports.createElement(PrefetchPageLinks,{page:$})):W});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:a,to:l,viewTransition:u,children:p,...x},w){let E=useResolvedPath(l,{relative:x.relative}),R=useLocation(),A=reactExports.useContext(DataRouterStateContext),{navigator:S,basename:N}=reactExports.useContext(NavigationContext),k=A!=null&&useViewTransitionState(E)&&u===!0,j=S.encodeLocation?S.encodeLocation(E).pathname:E.pathname,$=R.pathname,D=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||($=$.toLowerCase(),D=D?D.toLowerCase():null,j=j.toLowerCase()),D&&N&&(D=stripBasename(D,N)||D);const z=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let L=$===j||!i&&$.startsWith(j)&&$.charAt(z)==="/",M=D!=null&&(D===j||!i&&D.startsWith(j)&&D.charAt(j.length)==="/"),G={isActive:L,isPending:M,isTransitioning:k},W=L?e:void 0,q;typeof s=="function"?q=s(G):q=[s,L?"active":null,M?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let oe=typeof a=="function"?a(G):a;return reactExports.createElement(Link,{...x,"aria-current":W,className:q,ref:w,style:oe,to:l,viewTransition:u},typeof p=="function"?p(G):p)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:a,method:l=defaultMethod,action:u,onSubmit:p,relative:x,preventScrollReset:w,viewTransition:E,...R},A)=>{let S=useSubmit(),N=useFormAction(u,{relative:x}),k=l.toLowerCase()==="get"?"get":"post",j=typeof u=="string"&&ABSOLUTE_URL_REGEX2.test(u),$=D=>{if(p&&p(D),D.defaultPrevented)return;D.preventDefault();let z=D.nativeEvent.submitter,L=(z==null?void 0:z.getAttribute("formmethod"))||l;S(z||D.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:i,state:a,relative:x,preventScrollReset:w,viewTransition:E})};return reactExports.createElement("form",{ref:A,method:k,action:N,onSubmit:s?p:$,...R,"data-discover":!j&&r==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(r)),e}function useLinkClickHandler(r,{target:e,replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:l}={}){let u=useNavigate(),p=useLocation(),x=useResolvedPath(r,{relative:a});return reactExports.useCallback(w=>{if(shouldProcessLinkClick(w,e)){w.preventDefault();let E=t!==void 0?t:createPath(p)===createPath(x);u(r,{replace:E,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[p,u,x,t,s,e,r,i,a,l])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:r}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),t=useRouteId();return reactExports.useCallback(async(s,i={})=>{let{action:a,method:l,encType:u,formData:p,body:x}=getFormSubmissionInfo(s,e);if(i.navigate===!1){let w=i.fetcherKey||getUniqueFetcherId();await r.fetch(w,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:p,body:x,formMethod:i.method||l,formEncType:i.encType||u,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:p,body:x,formMethod:i.method||l,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function useFormAction(r,{relative:e}={}){let{basename:t}=reactExports.useContext(NavigationContext),s=reactExports.useContext(RouteContext);invariant(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...useResolvedPath(r||".",{relative:e})},l=useLocation();if(r==null){a.search=l.search;let u=new URLSearchParams(a.search),p=u.getAll("index");if(p.some(w=>w==="")){u.delete("index"),p.filter(E=>E).forEach(E=>u.append("index",E));let w=u.toString();a.search=w?`?${w}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:joinPaths([t,a.pathname])),createPath(a)}function useViewTransitionState(r,e={}){let t=reactExports.useContext(ViewTransitionContext);invariant(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=useDataRouterContext3("useViewTransitionState"),i=useResolvedPath(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=stripBasename(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=stripBasename(t.nextLocation.pathname,s)||t.nextLocation.pathname;return matchPath(i.pathname,l)!=null||matchPath(i.pathname,a)!=null}[...NO_BODY_STATUS_CODES];class SearchService{static initializeFeeds(e){this.allFeeds=e}static async search(e){const t=Date.now();if(!e.query.trim())return{results:[],totalCount:0,searchTime:0,suggestions:[]};let s=this.allFeeds;e.dateRange&&(s=this.filterByDateRange(s,e.dateRange)),e.sources&&e.sources.length>0&&(s=s.filter(l=>e.sources.includes(l.name)||e.sources.includes(l.url)));const i=this.performTextSearch(s,e),a=Date.now()-t;return{results:i,totalCount:i.length,searchTime:a,suggestions:this.generateSuggestions(e.query)}}static getSearchSuggestions(e){if(!e||e.length<2)return[];const t=new Set,s=e.toLowerCase();return this.allFeeds.forEach(i=>{`${i.title} ${i.description||""}`.toLowerCase().split(/\s+/).forEach(u=>{u.includes(s)&&u.length>2&&t.add(u)})}),Array.from(t).slice(0,10)}static filterByDateRange(e,t){return e.filter(s=>{const i=new Date(s.pubDate);return i>=t.start&&i<=t.end})}static performTextSearch(e,t){const s=t.caseSensitive?t.query:t.query.toLowerCase(),i=this.parseSearchQuery(s,t.operators),a=[];return e.forEach(l=>{const u=this.getSearchableText(l,t.caseSensitive),p=this.matchKeywords(u,i,t.operators);p.isMatch&&a.push({feed:l,relevanceScore:p.score,matchedFields:p.fields,snippet:this.generateSnippet(l,i[0],150)})}),a.sort((l,u)=>u.relevanceScore-l.relevanceScore)}static parseSearchQuery(e,t="AND"){return e.split(/\s+/).filter(s=>s.length>1)}static getSearchableText(e,t=!1){const s=t?i=>i:i=>i.toLowerCase();return{title:s(e.title),description:s(e.description||""),content:s(e.content||""),author:s(e.author||""),categories:s((e.categories||[]).join(" ")),source:s(e.name)}}static matchKeywords(e,t,s="AND"){const i={title:3,description:2,content:1,author:1,categories:2,source:1};let a=0;const l=[];Object.entries(e).forEach(([p,x])=>{let w=0;const E=t.filter(R=>x.includes(R));E.length>0&&(l.push(p),w=E.length*i[p],E.length),a+=w});let u=!1;return s==="AND"?u=t.every(p=>Object.values(e).some(x=>x.includes(p))):s==="OR"?u=t.some(p=>Object.values(e).some(x=>x.includes(p))):u=l.length>0,{isMatch:u,score:a,fields:l}}static generateSnippet(e,t,s=150){const i=e.description||e.content||e.title;if(!i)return"";const a=i.toLowerCase(),l=t.toLowerCase(),u=a.indexOf(l);if(u===-1)return i.substring(0,s)+(i.length>s?"...":"");const p=Math.max(0,u-50),x=Math.min(i.length,u+t.length+50);let w=i.substring(p,x);return p>0&&(w="..."+w),x<i.length&&(w=w+"..."),w}static generateSuggestions(e){return["cybersecurity","breaking news","politics","technology","economy","health","climate","security","international","business","science","market","government","crisis"].filter(s=>s.toLowerCase().includes(e.toLowerCase())).slice(0,5)}static clearData(){this.allFeeds=[]}static getFeedCount(){return this.allFeeds.length}}O(SearchService,"allFeeds",[]);const SearchContext=reactExports.createContext(void 0),SearchProvider=({children:r})=>{const[e,t]=reactExports.useState(null),[s,i]=reactExports.useState(!1),[a,l]=reactExports.useState(""),[u,p]=reactExports.useState(()=>{const S=localStorage.getItem("tactical_search_history");return S?JSON.parse(S):[]}),x=reactExports.useCallback(async S=>{if(!S.query.trim()){t(null);return}i(!0);try{const N=await SearchService.search(S);t(N),l(S.query)}catch(N){console.error("Search failed:",N),t({results:[],totalCount:0,searchTime:0,suggestions:[]})}finally{i(!1)}},[]),w=reactExports.useCallback(()=>{t(null),l("")},[]),E=reactExports.useCallback(S=>{S.trim()&&p(N=>{const k=[S,...N.filter(j=>j!==S)].slice(0,10);return localStorage.setItem("tactical_search_history",JSON.stringify(k)),k})},[]),R=reactExports.useCallback(()=>{p([]),localStorage.removeItem("tactical_search_history")},[]),A={searchResults:e,isSearching:s,searchQuery:a,searchHistory:u,performSearch:x,clearSearch:w,setSearchQuery:l,addToHistory:E,clearHistory:R};return jsxRuntimeExports.jsx(SearchContext.Provider,{value:A,children:r})},useSearch=()=>{const r=reactExports.useContext(SearchContext);if(!r)throw new Error("useSearch must be used within a SearchProvider");return r};class FilterService{static applyFilters(e,t){let s=[...e];return t.activeFilters.size>0&&(s=s.filter(i=>this.matchesFilters(i,t.activeFilters))),t.timeRange&&(s=s.filter(i=>this.isWithinTimeRange(i,t.timeRange))),t.searchQuery.trim()&&(s=s.filter(i=>this.matchesSearchQuery(i,t.searchQuery))),s=this.sortFeeds(s,t.sortBy),s}static matchesFilters(e,t){for(const s of t)if(this.feedMatchesFilter(e,s))return!0;return!1}static feedMatchesFilter(e,t){return["CRITICAL","HIGH","MEDIUM","LOW"].includes(t)?e.priority===t:["INTEL","NEWS","ALERT","THREAT"].includes(t)?e.contentType===t:["GLOBAL","AMERICAS","EUROPE","ASIA_PACIFIC"].includes(t)?e.region===t:!!(e.tags&&e.tags.includes(t)||e.classification===t)}static isWithinTimeRange(e,t){if(!e.timestamp)return!1;const s=new Date(e.timestamp);return s>=t.start&&s<=t.end}static matchesSearchQuery(e,t){var i;return[e.title,e.description,e.source,(i=e.tags)==null?void 0:i.join(" "),e.classification].filter(Boolean).join(" ").toLowerCase().includes(t.toLowerCase())}static sortFeeds(e,t){return e.sort((s,i)=>{let a=0;switch(t.field){case"timestamp":const l=new Date(s.timestamp||0).getTime(),u=new Date(i.timestamp||0).getTime();a=l-u;break;case"title":a=(s.title||"").localeCompare(i.title||"");break;case"priority":const p={CRITICAL:3,HIGH:2,MEDIUM:1,LOW:0},x=p[s.priority]||0,w=p[i.priority]||0;a=x-w;break;case"source":a=(s.source||"").localeCompare(i.source||"");break;default:a=0}return t.direction==="desc"?-a:a})}static getDefaultFilterState(){return{activeFilters:new Set,timeRange:null,sortBy:{field:"timestamp",direction:"desc"},searchQuery:""}}static getFilterCounts(e){const t={};return e.forEach(s=>{s.priority&&(t[s.priority]=(t[s.priority]||0)+1),s.contentType&&(t[s.contentType]=(t[s.contentType]||0)+1),s.region&&(t[s.region]=(t[s.region]||0)+1),s.tags&&s.tags.forEach(i=>{t[i]=(t[i]||0)+1})}),t}static createTimeRangeFromPreset(e){const t=new Date,i={"1H":1,"6H":6,"24H":24,"7D":168,"30D":720}[e];if(!i)throw new Error(`Invalid time range preset: ${e}`);return{start:new Date(t.getTime()-i*60*60*1e3),end:t,label:e}}static validateFilterState(e){var t,s;return{activeFilters:new Set(Array.isArray(e.activeFilters)?e.activeFilters:[]),timeRange:e.timeRange||null,sortBy:{field:["timestamp","title","priority","source"].includes((t=e.sortBy)==null?void 0:t.field)?e.sortBy.field:"timestamp",direction:["asc","desc"].includes((s=e.sortBy)==null?void 0:s.direction)?e.sortBy.direction:"desc"},searchQuery:typeof e.searchQuery=="string"?e.searchQuery:""}}}const FilterContext=reactExports.createContext(void 0),FilterProvider=({children:r})=>{const[e,t]=reactExports.useState(()=>{try{const j=localStorage.getItem("tactical-filter-state");if(j){const $=JSON.parse(j);return FilterService.validateFilterState($)}}catch(j){console.warn("Failed to load saved filter state:",j)}return FilterService.getDefaultFilterState()}),s=reactExports.useCallback(j=>{try{const $={...j,activeFilters:Array.from(j.activeFilters)};localStorage.setItem("tactical-filter-state",JSON.stringify($))}catch($){console.warn("Failed to save filter state:",$)}},[]),i=reactExports.useCallback(j=>{const $={...e,activeFilters:j};t($),s($)},[e,s]),a=reactExports.useCallback(j=>{const $={...e,timeRange:j};t($),s($)},[e,s]),l=reactExports.useCallback(j=>{const $={...e,sortBy:j};t($),s($)},[e,s]),u=reactExports.useCallback(j=>{const $={...e,searchQuery:j};t($),s($)},[e,s]),p=reactExports.useCallback(j=>{const $=new Set(e.activeFilters);$.add(j),i($)},[e.activeFilters,i]),x=reactExports.useCallback(j=>{const $=new Set(e.activeFilters);$.delete(j),i($)},[e.activeFilters,i]),w=reactExports.useCallback(()=>{const j={...e,activeFilters:new Set,timeRange:null,searchQuery:""};t(j),s(j)},[e,s]),E=reactExports.useCallback(()=>{const j=FilterService.getDefaultFilterState();t(j),s(j)},[s]),R=reactExports.useCallback(j=>FilterService.applyFilters(j,e),[e]),A=reactExports.useCallback(j=>FilterService.getFilterCounts(j),[]),S=reactExports.useCallback(j=>e.activeFilters.has(j),[e.activeFilters]),N=reactExports.useMemo(()=>e.activeFilters.size>0||e.timeRange!==null||e.searchQuery.trim()!=="",[e]),k={filterState:e,updateFilters:i,updateTimeRange:a,updateSort:l,updateSearch:u,addFilter:p,removeFilter:x,clearAllFilters:w,getFilteredFeeds:R,getFilterCounts:A,isFilterActive:S,hasActiveFilters:N,resetFilters:E};return jsxRuntimeExports.jsx(FilterContext.Provider,{value:k,children:r})},useFilters=()=>{const r=reactExports.useContext(FilterContext);if(!r)throw new Error("useFilters must be used within a FilterProvider");return r},useTimeRangePresets=()=>{const{updateTimeRange:r}=useFilters(),e=reactExports.useCallback(s=>{try{const i=FilterService.createTimeRangeFromPreset(s);r(i)}catch(i){console.error("Failed to apply time range preset:",i)}},[r]),t=reactExports.useCallback((s,i,a="Custom")=>{r({start:s,end:i,label:a})},[r]);return{applyPreset:e,applyCustomRange:t}};var CORSStrategy=(r=>(r.RSS2JSON="RSS2JSON",r.JSONP="JSONP",r.SERVICE_WORKER="SERVICE_WORKER",r.DIRECT="DIRECT",r.EXTENSION="EXTENSION",r))(CORSStrategy||{}),SettingsTab=(r=>(r.GENERAL="general",r.CORS="cors",r.PROTOCOLS="protocols",r.VERIFICATION="verification",r.DISPLAY="display",r.ADVANCED="advanced",r))(SettingsTab||{});const defaultSettings={version:"1.0.0",lastTab:"general",cors:{defaultStrategy:"RSS2JSON",protocolStrategies:{},services:{rss2json:["https://rss2json.vercel.app/api","https://api.rss2json.com/v1/api.json","https://feed2json.org/convert","https://rss-to-json-serverless-api.vercel.app"],corsProxies:["https://corsproxy.io/?","https://api.allorigins.win/raw?url=","https://api.codetabs.com/v1/proxy?quest="]},fallbackChain:["RSS2JSON","DIRECT","SERVICE_WORKER","JSONP","EXTENSION"]},protocols:{priority:["RSS","JSON","API","IPFS","MASTODON","SSB"],settings:{},autoDetect:!0,fallbackEnabled:!0},verification:{minimumTrustRating:60,preferredMethods:["official","community","automated"],warningThreshold:40,advancedSettings:{crossReference:!0,machineLearning:!0,highlightUnverified:!0,crossReferenceCount:2}},display:{theme:"alliance",density:"comfortable",fontSize:14},general:{refreshInterval:3e5,cacheSettings:{enabled:!0,duration:3e5},notifications:{enabled:!0,sound:!1}}},SettingsContext=reactExports.createContext(void 0),SettingsProvider=({children:r})=>{const[e,t]=reactExports.useState(defaultSettings);reactExports.useEffect(()=>{try{const a=localStorage.getItem("dashboardSettings");a&&t(JSON.parse(a))}catch(a){console.error("Failed to load settings:",a)}},[]),reactExports.useEffect(()=>{try{localStorage.setItem("dashboardSettings",JSON.stringify(e))}catch(a){console.error("Failed to save settings:",a)}},[e]);const s=a=>{t(l=>{var u;return{...l,...a,cors:{...l.cors,...a.cors||{},services:{...l.cors.services,...((u=a.cors)==null?void 0:u.services)||{}}},protocols:{...l.protocols,...a.protocols||{}},verification:{...l.verification,...a.verification||{}},display:{...l.display,...a.display||{}}}})},i=a=>{t(a?l=>{const u={...l};switch(a){case"cors":u.cors={...defaultSettings.cors};break;case"protocols":u.protocols={...defaultSettings.protocols};break;case"verification":u.verification={...defaultSettings.verification};break;case"display":u.display={...defaultSettings.display};break}return u}:defaultSettings)};return jsxRuntimeExports.jsx(SettingsContext.Provider,{value:{settings:e,updateSettings:s,resetSettings:i},children:r})},useSettings=()=>{const r=reactExports.useContext(SettingsContext);if(r===void 0)throw new Error("useSettings must be used within a SettingsProvider");return r},initialState={theme:"dark",compactMode:!1},themeReducer=(r,e)=>{switch(e.type){case"SET_THEME":return{...r,theme:e.payload};case"SET_COMPACT_MODE":return{...r,compactMode:e.payload};case"TOGGLE_COMPACT_MODE":return{...r,compactMode:!r.compactMode};case"SYNC_WITH_SETTINGS":return{theme:e.payload.theme,compactMode:e.payload.compactMode};default:return r}},ThemeContext=reactExports.createContext(void 0),useTheme=()=>{const r=reactExports.useContext(ThemeContext);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r},ThemeProvider=({children:r})=>{const[e,t]=reactExports.useReducer(themeReducer,initialState),{settings:s,updateSettings:i}=useSettings();reactExports.useEffect(()=>{const x=localStorage.getItem("tactical-theme"),w=localStorage.getItem("tactical-compact-mode")==="true";x&&t({type:"SET_THEME",payload:x}),w!==null&&t({type:"SET_COMPACT_MODE",payload:w})},[]),reactExports.useEffect(()=>{if(s!=null&&s.display){const x=s.display.density==="compact";t({type:"SYNC_WITH_SETTINGS",payload:{theme:s.display.theme,compactMode:x}})}},[s]),reactExports.useEffect(()=>{var x;localStorage.setItem("tactical-theme",e.theme),document.documentElement.setAttribute("data-theme",e.theme),((x=s==null?void 0:s.display)==null?void 0:x.theme)!==e.theme&&i({display:{...s.display,theme:e.theme}})},[e.theme,s,i]),reactExports.useEffect(()=>{if(localStorage.setItem("tactical-compact-mode",e.compactMode.toString()),document.documentElement.setAttribute("data-compact",e.compactMode.toString()),s!=null&&s.display){const x=s.display.density,w=e.compactMode?"compact":"comfortable";x!==w&&i({display:{...s.display,density:w}})}},[e.compactMode,s,i]);const a=x=>{t({type:"SET_THEME",payload:x})},l=x=>{t({type:"SET_COMPACT_MODE",payload:x})},u=()=>{t({type:"TOGGLE_COMPACT_MODE"})},p={theme:e.theme,compactMode:e.compactMode,setTheme:a,setCompactMode:l,toggleCompactMode:u};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:p,children:r})},hs=class hs{constructor(){O(this,"healthState");O(this,"listeners",new Set);O(this,"scanInterval");O(this,"startTime",Date.now());this.healthState={overallStatus:"OPTIMAL",connectionStatus:"ONLINE",securityStatus:"SECURE",issues:[],metrics:this.getInitialMetrics(),isScanning:!1,isCleaning:!1,isRepairing:!1}}static getInstance(){return hs.instance||(hs.instance=new hs),hs.instance}getInitialMetrics(){return{responseTime:50,errorRate:0,dataIntegrity:100,connectionStability:98,memoryUsage:45,feedHealth:95,lastScanTime:new Date,uptime:0}}notifyListeners(){this.listeners.forEach(e=>e(this.healthState))}subscribe(e){return this.listeners.add(e),e(this.healthState),()=>{this.listeners.delete(e)}}getHealthState(){return{...this.healthState}}async performScan(){const e=Date.now();this.healthState.isScanning=!0,this.notifyListeners();try{await this.delay(1500);const t=await this.identifyIssues(),s=await this.gatherMetrics(),i=this.generateRecommendations(t,s),a={timestamp:new Date,type:"scan",status:t.some(l=>l.severity==="critical")?"error":t.some(l=>l.severity==="high")?"warning":"success",issues:t,metrics:s,recommendations:i,duration:Date.now()-e};return this.healthState.lastScan=a,this.healthState.issues=t,this.healthState.metrics=s,this.healthState.overallStatus=this.determineOverallStatus(t,s),this.healthState.isScanning=!1,this.notifyListeners(),a}catch{const s={timestamp:new Date,type:"scan",status:"error",issues:[{id:"scan-error",severity:"high",category:"performance",title:"Scan Failed",description:"System scan encountered an error",autoFixable:!1,timestamp:new Date}],metrics:this.healthState.metrics,recommendations:["Retry system scan","Check system resources"],duration:Date.now()-e};return this.healthState.isScanning=!1,this.healthState.overallStatus="WARNING",this.notifyListeners(),s}}async performClean(){const e=Date.now();this.healthState.isCleaning=!0,this.notifyListeners();try{await this.delay(2e3);const t=this.healthState.issues.filter(l=>l.autoFixable&&["data","performance"].includes(l.category));let s=0;const i=[...this.healthState.issues];for(const l of t)if(Math.random()>.2){const u=i.findIndex(p=>p.id===l.id);u>=0&&(i.splice(u,1),s++)}const a={timestamp:new Date,type:"clean",status:s>0?"success":"warning",issues:i,metrics:await this.gatherMetrics(),recommendations:s>0?["System cleaning completed successfully"]:["No cleanable issues found","Consider running repair if issues persist"],duration:Date.now()-e,itemsFixed:s,itemsRemaining:i.length};return this.healthState.issues=i,this.healthState.metrics=a.metrics,this.healthState.overallStatus=this.determineOverallStatus(i,a.metrics),this.healthState.isCleaning=!1,this.notifyListeners(),a}catch(t){throw this.healthState.isCleaning=!1,this.healthState.overallStatus="WARNING",this.notifyListeners(),t}}async performRepair(){const e=Date.now();this.healthState.isRepairing=!0,this.notifyListeners();try{await this.delay(3e3);const t=this.healthState.issues.filter(l=>l.autoFixable);let s=0;const i=[...this.healthState.issues];for(const l of t)if(Math.random()>.1){const u=i.findIndex(p=>p.id===l.id);u>=0&&(i.splice(u,1),s++)}const a={timestamp:new Date,type:"repair",status:s>0?"success":"warning",issues:i,metrics:await this.gatherMetrics(),recommendations:s>0?["System repair completed successfully"]:["No repairable issues found","Manual intervention may be required"],duration:Date.now()-e,itemsFixed:s,itemsRemaining:i.length};return this.healthState.issues=i,this.healthState.metrics=a.metrics,this.healthState.overallStatus=this.determineOverallStatus(i,a.metrics),this.healthState.isRepairing=!1,this.notifyListeners(),a}catch(t){throw this.healthState.isRepairing=!1,this.healthState.overallStatus="WARNING",this.notifyListeners(),t}}async identifyIssues(){const e=[],t=[{name:"Memory Usage",probability:.3,category:"performance"},{name:"Connection Stability",probability:.2,category:"connectivity"},{name:"Data Integrity",probability:.15,category:"data"},{name:"Security Status",probability:.1,category:"security"},{name:"Feed Health",probability:.25,category:"data"}];for(const s of t)Math.random()<s.probability&&e.push({id:`issue-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,severity:this.getRandomSeverity(),category:s.category,title:`${s.name} Issue`,description:`${s.name} requires attention`,solution:`Optimize ${s.name.toLowerCase()}`,autoFixable:Math.random()>.3,component:s.name,timestamp:new Date});return e}async gatherMetrics(){const e=this.getInitialMetrics();return{responseTime:Math.round(e.responseTime+(Math.random()-.5)*20),errorRate:Math.round(Math.random()*5*100)/100,dataIntegrity:Math.round((95+Math.random()*5)*100)/100,connectionStability:Math.round((90+Math.random()*10)*100)/100,memoryUsage:Math.round((30+Math.random()*40)*100)/100,feedHealth:Math.round((85+Math.random()*15)*100)/100,lastScanTime:new Date,uptime:Math.round((Date.now()-this.startTime)/1e3)}}generateRecommendations(e,t){const s=[];if(e.length===0)s.push("System is running optimally");else{const i=e.filter(l=>l.severity==="critical"),a=e.filter(l=>l.severity==="high");i.length>0&&s.push("Address critical issues immediately"),a.length>0&&s.push("Schedule maintenance for high-priority issues"),e.some(l=>l.autoFixable)&&s.push("Run system cleanup to fix automated issues")}return t.memoryUsage>80&&s.push("Monitor memory usage"),t.errorRate>2&&s.push("Investigate error sources"),s}determineOverallStatus(e,t){const s=e.filter(a=>a.severity==="critical"),i=e.filter(a=>a.severity==="high");return s.length>0||t.errorRate>5?"CRITICAL":i.length>0||t.memoryUsage>85||t.errorRate>2?"WARNING":"OPTIMAL"}getRandomSeverity(){const e=Math.random();return e<.1?"critical":e<.3?"high":e<.7?"medium":"low"}delay(e){return new Promise(t=>setTimeout(t,e))}startMonitoring(e=3e4){this.scanInterval&&clearInterval(this.scanInterval),this.scanInterval=setInterval(()=>{this.performLightweightCheck()},e)}stopMonitoring(){this.scanInterval&&(clearInterval(this.scanInterval),this.scanInterval=void 0)}async performLightweightCheck(){this.healthState.metrics=await this.gatherMetrics(),this.healthState.connectionStatus=navigator.onLine?"ONLINE":"OFFLINE",this.healthState.overallStatus=this.determineOverallStatus(this.healthState.issues,this.healthState.metrics),this.notifyListeners()}exportHealthData(){return{timestamp:new Date,state:this.healthState,uptime:Date.now()-this.startTime,performance:{...this.healthState.metrics}}}clearIssues(){this.healthState.issues=[],this.healthState.overallStatus="OPTIMAL",this.notifyListeners()}};O(hs,"instance");let DiagnosticService=hs;const HealthContext=reactExports.createContext(void 0),HealthProvider=({children:r})=>{const[e,t]=reactExports.useState({overallStatus:"OPTIMAL",connectionStatus:"ONLINE",securityStatus:"SECURE",issues:[],metrics:{responseTime:50,errorRate:0,dataIntegrity:100,connectionStability:98,memoryUsage:45,feedHealth:95,lastScanTime:new Date,uptime:0},isScanning:!1,isCleaning:!1,isRepairing:!1}),[s,i]=reactExports.useState(),a=DiagnosticService.getInstance();reactExports.useEffect(()=>{const N=a.subscribe(k=>{t(k)});return a.startMonitoring(3e4),()=>{N(),a.stopMonitoring()}},[a]);const l=async()=>{const N=await a.performScan();return i(N),N},u=async()=>{const N=await a.performClean();return i(N),N},p=async()=>{const N=await a.performRepair();return i(N),N},x=N=>{a.startMonitoring(N)},w=()=>{a.stopMonitoring()},E=()=>{a.clearIssues()},R=()=>a.exportHealthData(),A=e.isScanning||e.isCleaning||e.isRepairing,S={healthState:e,performScan:l,performClean:u,performRepair:p,startMonitoring:x,stopMonitoring:w,clearIssues:E,exportHealthData:R,isOperationInProgress:A,lastResult:s};return jsxRuntimeExports.jsx(HealthContext.Provider,{value:S,children:r})},useHealth=()=>{const r=reactExports.useContext(HealthContext);if(r===void 0)throw new Error("useHealth must be used within a HealthProvider");return r},EARTH_ALLIANCE_SOURCES=[{id:"veterans-today-1",name:"Veterans Today",url:"https://www.veteranstoday.com",category:"MILITARY_INTELLIGENCE_WHISTLEBLOWER_PLATFORMS",trustRating:75,allianceAlignment:79,accessMethod:"account-required",verificationMethod:"member-verification",protocol:"rss",endpoint:"https://www.veteranstoday.com/feed",format:"news"},{id:"new-energy-times-2",name:"New Energy Times",url:"https://newenergytimes.com",category:"TECHNOLOGY_DISCLOSURE_NETWORKS",trustRating:88,allianceAlignment:97,accessMethod:"direct",verificationMethod:"document-authentication",protocol:"rss",endpoint:"https://newenergytimes.com/feed",format:"research"},{id:"the-last-american-vagabond-3",name:"The Last American Vagabond",url:"https://www.thelastamericanvagabond.com",category:"INDEPENDENT_INVESTIGATIVE_JOURNALISM",trustRating:85,allianceAlignment:93,accessMethod:"direct",verificationMethod:"source-documentation",protocol:"rss",endpoint:"https://www.thelastamericanvagabond.com/feed",format:"news"},{id:"unlimited-hangout-4",name:"Unlimited Hangout",url:"https://unlimitedhangout.com",category:"INDEPENDENT_INVESTIGATIVE_JOURNALISM",trustRating:85,allianceAlignment:94,accessMethod:"direct",verificationMethod:"source-documentation",protocol:"rss",endpoint:"https://unlimitedhangout.com/feed",format:"investigation"},{id:"the-grayzone-5",name:"The Grayzone",url:"https://thegrayzone.com",category:"INDEPENDENT_INVESTIGATIVE_JOURNALISM",trustRating:82,allianceAlignment:87,accessMethod:"direct",verificationMethod:"scientific-analysis",protocol:"rss",endpoint:"https://thegrayzone.com/feed",format:"news"},{id:"the-corbett-report-6",name:"The Corbett Report",url:"https://www.corbettreport.com",category:"INDEPENDENT_INVESTIGATIVE_JOURNALISM",trustRating:81,allianceAlignment:84,accessMethod:"direct",verificationMethod:"on-the-ground-reporting",protocol:"rss",endpoint:"https://www.corbettreport.com/feed",format:"multimedia"},{id:"mintpress-news-7",name:"MintPress News",url:"https://www.mintpressnews.com",category:"INDEPENDENT_INVESTIGATIVE_JOURNALISM",trustRating:84,allianceAlignment:85,accessMethod:"direct",verificationMethod:"source-documentation",protocol:"rss",endpoint:"https://www.mintpressnews.com/feed",format:"news"},{id:"children-s-health-defense-8",name:"Children's Health Defense",url:"https://childrenshealthdefense.org",category:"ALTERNATIVE_HEALTH_RESEARCH",trustRating:83,allianceAlignment:89,accessMethod:"registration",verificationMethod:"study-based",protocol:"rss",endpoint:"https://childrenshealthdefense.org/feed",format:"news"},{id:"natural-health-research-institute-9",name:"Natural Health Research Institute",url:"https://naturalhealthresearch.org",category:"ALTERNATIVE_HEALTH_RESEARCH",trustRating:86,allianceAlignment:93,accessMethod:"direct",verificationMethod:"physician-reviewed",protocol:"rss",endpoint:"https://naturalhealthresearch.org/feed",format:"research"},{id:"the-highwire-10",name:"The Highwire",url:"https://thehighwire.com",category:"ALTERNATIVE_HEALTH_RESEARCH",trustRating:84,allianceAlignment:93,accessMethod:"direct",verificationMethod:"peer-reviewed",protocol:"rss",endpoint:"https://thehighwire.com/feed",format:"multimedia"},{id:"alliance-for-natural-health-11",name:"Alliance for Natural Health",url:"https://anh-usa.org",category:"ALTERNATIVE_HEALTH_RESEARCH",trustRating:79,allianceAlignment:81,accessMethod:"direct",verificationMethod:"expert-interviews",protocol:"rss",endpoint:"https://anh-usa.org/feed",format:"news"},{id:"international-association-for-near-death-studies-12",name:"International Association for Near-Death Studies",url:"https://iands.org",category:"CONSCIOUSNESS_REALITY_RESEARCH",trustRating:81,allianceAlignment:89,accessMethod:"direct",verificationMethod:"peer-reviewed",protocol:"rss",endpoint:"https://iands.org/feed",format:"research"},{id:"institute-of-noetic-sciences-13",name:"Institute of Noetic Sciences",url:"https://noetic.org",category:"CONSCIOUSNESS_REALITY_RESEARCH",trustRating:86,allianceAlignment:86,accessMethod:"direct",verificationMethod:"academic-standards",protocol:"rss",endpoint:"https://noetic.org/feed",format:"research"},{id:"covert-action-quarterly-14",name:"Covert Action Quarterly",url:"https://covertactionquarterly.org",category:"POSITIVE_MILITARY_OPERATIONS_TRACKING",trustRating:85,allianceAlignment:86,accessMethod:"restricted",verificationMethod:"insider-sources",protocol:"rss",endpoint:"https://covertactionquarterly.org/feed",format:"journal"}];EARTH_ALLIANCE_SOURCES.map(r=>r.endpoint);const EarthAllianceFeeds=EARTH_ALLIANCE_SOURCES.map((r,e)=>({id:`ea-${e+1}`,title:r.name,link:r.url,pubDate:new Date().toISOString(),description:`Earth Alliance aligned source: ${r.category}`,content:`Earth Alliance intelligence source with trust rating: ${r.trustRating}`,feedListId:"2",categories:[r.category]})),DefaultFeeds$1=EarthAllianceFeeds;var FeedMode=(r=>(r.EARTH_ALLIANCE="EARTH_ALLIANCE",r.MAINSTREAM="MAINSTREAM",r.HYBRID="HYBRID",r))(FeedMode||{});const FeedModeContext=reactExports.createContext({feedMode:FeedMode.EARTH_ALLIANCE,setFeedMode:()=>{}}),FeedModeProvider=({children:r})=>{const[e,t]=reactExports.useState(FeedMode.EARTH_ALLIANCE);return jsxRuntimeExports.jsx(FeedModeContext.Provider,{value:{feedMode:e,setFeedMode:t},children:r})},version="6.15.0";function checkType(r,e,t){const s=e.split("|").map(a=>a.trim());for(let a=0;a<s.length;a++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}async function resolveProperties(r){const e=Object.keys(r);return(await Promise.all(e.map(s=>Promise.resolve(r[s])))).reduce((s,i,a)=>(s[e[a]]=i,s),{})}function defineProperties(r,e,t){for(let s in e){let i=e[s];const a=t?t[s]:null;a&&checkType(i,a,s),Object.defineProperty(r,s,{enumerable:!0,value:i,writable:!1})}}function stringify(r,e){if(r==null)return"null";if(e==null&&(e=new Set),typeof r=="object"){if(e.has(r))return"[Circular]";e.add(r)}if(Array.isArray(r))return"[ "+r.map(t=>stringify(t,e)).join(", ")+" ]";if(r instanceof Uint8Array){const t="0123456789abcdef";let s="0x";for(let i=0;i<r.length;i++)s+=t[r[i]>>4],s+=t[r[i]&15];return s}if(typeof r=="object"&&typeof r.toJSON=="function")return stringify(r.toJSON(),e);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const t=Object.keys(r);return t.sort(),"{ "+t.map(s=>`${stringify(s,e)}: ${stringify(r[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function isError(r,e){return r&&r.code===e}function isCallException(r){return isError(r,"CALL_EXCEPTION")}function makeError(r,e,t){let s=r;{const a=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${stringify(t)}`);for(const l in t){if(l==="shortMessage")continue;const u=t[l];a.push(l+"="+stringify(u))}}a.push(`code=${e}`),a.push(`version=${version}`),a.length&&(r+=" ("+a.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return defineProperties(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&defineProperties(i,{shortMessage:s}),i}function assert(r,e,t,s){if(!r)throw makeError(e,t,s)}function assertArgument(r,e,t,s){assert(r,e,"INVALID_ARGUMENT",{argument:t,value:s})}function assertArgumentCount(r,e,t){t==null&&(t=""),t&&(t=": "+t),assert(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),assert(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");r.push(e)}catch{}return r},[]);function assertPrivate(r,e,t){if(t==null&&(t=""),r!==e){let s=t,i="new";t&&(s+=".",i+=" "+t),assert(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function _getBytes(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((r.length-2)/2);let i=2;for(let a=0;a<s.length;a++)s[a]=parseInt(r.substring(i,i+2),16),i+=2;return s}assertArgument(!1,"invalid BytesLike value",e||"value",r)}function getBytes(r,e){return _getBytes(r,e,!1)}function getBytesCopy(r,e){return _getBytes(r,e,!0)}function isHexString(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}function isBytesLike(r){return isHexString(r,!0)||r instanceof Uint8Array}const HexCharacters="0123456789abcdef";function hexlify(r){const e=getBytes(r);let t="0x";for(let s=0;s<e.length;s++){const i=e[s];t+=HexCharacters[(i&240)>>4]+HexCharacters[i&15]}return t}function concat$3(r){return"0x"+r.map(e=>hexlify(e).substring(2)).join("")}function dataLength(r){return isHexString(r,!0)?(r.length-2)/2:getBytes(r).length}function dataSlice(r,e,t){const s=getBytes(r);return t!=null&&t>s.length&&assert(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:t}),hexlify(s.slice(e??0,t??s.length))}function zeroPad(r,e,t){const s=getBytes(r);assert(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(s,e-s.length):i.set(s,0),hexlify(i)}function zeroPadValue(r,e){return zeroPad(r,e,!0)}function zeroPadBytes(r,e){return zeroPad(r,e,!1)}const BN_0$9=BigInt(0),BN_1$4=BigInt(1),maxValue$1=9007199254740991;function fromTwos(r,e){const t=getUint(r,"value"),s=BigInt(getNumber(e,"width"));if(assert(t>>s===BN_0$9,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>s-BN_1$4){const i=(BN_1$4<<s)-BN_1$4;return-((~t&i)+BN_1$4)}return t}function toTwos(r,e){let t=getBigInt(r,"value");const s=BigInt(getNumber(e,"width")),i=BN_1$4<<s-BN_1$4;if(t<BN_0$9){t=-t,assert(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const a=(BN_1$4<<s)-BN_1$4;return(~t&a)+BN_1$4}else assert(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function mask(r,e){const t=getUint(r,"value"),s=BigInt(getNumber(e,"bits"));return t&(BN_1$4<<s)-BN_1$4}function getBigInt(r,e){switch(typeof r){case"bigint":return r;case"number":return assertArgument(Number.isInteger(r),"underflow",e||"value",r),assertArgument(r>=-maxValue$1&&r<=maxValue$1,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){assertArgument(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}assertArgument(!1,"invalid BigNumberish value",e||"value",r)}function getUint(r,e){const t=getBigInt(r,e);return assert(t>=BN_0$9,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const Nibbles="0123456789abcdef";function toBigInt(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=Nibbles[t>>4],e+=Nibbles[t&15];return BigInt(e)}return getBigInt(r)}function getNumber(r,e){switch(typeof r){case"bigint":return assertArgument(r>=-maxValue$1&&r<=maxValue$1,"overflow",e||"value",r),Number(r);case"number":return assertArgument(Number.isInteger(r),"underflow",e||"value",r),assertArgument(r>=-maxValue$1&&r<=maxValue$1,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return getNumber(BigInt(r),e)}catch(t){assertArgument(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}assertArgument(!1,"invalid numeric value",e||"value",r)}function toNumber(r){return getNumber(toBigInt(r))}function toBeHex(r,e){let s=getUint(r,"value").toString(16);if(e==null)s.length%2&&(s="0"+s);else{const i=getNumber(e,"width");for(assert(i*2>=s.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});s.length<i*2;)s="0"+s}return"0x"+s}function toBeArray(r){const e=getUint(r,"value");if(e===BN_0$9)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const s=new Uint8Array(t.length/2);for(let i=0;i<s.length;i++){const a=i*2;s[i]=parseInt(t.substring(a,a+2),16)}return s}function toQuantity(r){let e=hexlify(isBytesLike(r)?r:toBeArray(r)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Alphabet="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const BN_58=BigInt(58);function encodeBase58(r){const e=getBytes(r);let t=toBigInt(e),s="";for(;t;)s=Alphabet[Number(t%BN_58)]+s,t/=BN_58;for(let i=0;i<e.length&&!e[i];i++)s=Alphabet[0]+s;return s}function decodeBase64(r){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return getBytes(e)}function encodeBase64(r){const e=getBytes(r);let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return btoa(t)}var xi;class EventPayload{constructor(e,t,s){O(this,"filter");O(this,"emitter");re(this,xi);U(this,xi,t),defineProperties(this,{emitter:e,filter:s})}async removeListener(){I(this,xi)!=null&&await this.emitter.off(this.filter,I(this,xi))}}xi=new WeakMap;function errorFunc(r,e,t,s,i){assertArgument(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function ignoreFunc(r,e,t,s,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let a=0;for(let l=e+1;l<t.length&&t[l]>>6===2;l++)a++;return a}return r==="OVERRUN"?t.length-e-1:0}function replaceFunc(r,e,t,s,i){return r==="OVERLONG"?(assertArgument(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),s.push(i),0):(s.push(65533),ignoreFunc(r,e,t))}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(r,e){e==null&&(e=Utf8ErrorFuncs.error);const t=getBytes(r,"bytes"),s=[];let i=0;for(;i<t.length;){const a=t[i++];if(a>>7===0){s.push(a);continue}let l=null,u=null;if((a&224)===192)l=1,u=127;else if((a&240)===224)l=2,u=2047;else if((a&248)===240)l=3,u=65535;else{(a&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,s):i+=e("BAD_PREFIX",i-1,t,s);continue}if(i-1+l>=t.length){i+=e("OVERRUN",i-1,t,s);continue}let p=a&(1<<8-l-1)-1;for(let x=0;x<l;x++){let w=t[i];if((w&192)!=128){i+=e("MISSING_CONTINUE",i,t,s),p=null;break}p=p<<6|w&63,i++}if(p!==null){if(p>1114111){i+=e("OUT_OF_RANGE",i-1-l,t,s,p);continue}if(p>=55296&&p<=57343){i+=e("UTF16_SURROGATE",i-1-l,t,s,p);continue}if(p<=u){i+=e("OVERLONG",i-1-l,t,s,p);continue}s.push(p)}}return s}function toUtf8Bytes(r,e){assertArgument(typeof r=="string","invalid string value","str",r);let t=[];for(let s=0;s<r.length;s++){const i=r.charCodeAt(s);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){s++;const a=r.charCodeAt(s);assertArgument(s<r.length&&(a&64512)===56320,"invalid surrogate pair","str",r);const l=65536+((i&1023)<<10)+(a&1023);t.push(l>>18|240),t.push(l>>12&63|128),t.push(l>>6&63|128),t.push(l&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function _toUtf8String(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function toUtf8String(r,e){return _toUtf8String(getUtf8CodePoints(r,e))}function createGetUrl(r){async function e(t,s){assert(s==null||!s.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();assert(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),assert(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let a=null;const l=new AbortController,u=setTimeout(()=>{a=makeError("request timeout","TIMEOUT"),l.abort()},t.timeout);s&&s.addListener(()=>{a=makeError("request cancelled","CANCELLED"),l.abort()});const p=Object.assign({},r,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:l.signal});let x;try{x=await fetch(t.url,p)}catch(A){throw clearTimeout(u),a||A}clearTimeout(u);const w={};x.headers.forEach((A,S)=>{w[S.toLowerCase()]=A});const E=await x.arrayBuffer(),R=E==null?null:new Uint8Array(E);return{statusCode:x.status,statusMessage:x.statusText,headers:w,body:R}}return e}const MAX_ATTEMPTS=12,SLOT_INTERVAL=250;let defaultGetUrlFunc=createGetUrl();const reData=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),reIpfs=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let locked$1=!1;async function dataGatewayFunc(r,e){try{const t=r.match(reData);if(!t)throw new Error("invalid data");return new FetchResponse(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?decodeBase64(t[3]):unpercent(t[3]))}catch{return new FetchResponse(599,"BAD REQUEST (invalid data: URI)",{},null,new FetchRequest(r))}}function getIpfsGatewayFunc(r){async function e(t,s){try{const i=t.match(reIpfs);if(!i)throw new Error("invalid link");return new FetchRequest(`${r}${i[2]}`)}catch{return new FetchResponse(599,"BAD REQUEST (invalid IPFS URI)",{},null,new FetchRequest(t))}}return e}const Gateways={data:dataGatewayFunc,ipfs:getIpfsGatewayFunc("https://gateway.ipfs.io/ipfs/")},fetchSignals=new WeakMap;var Es,In;class FetchCancelSignal{constructor(e){re(this,Es);re(this,In);U(this,Es,[]),U(this,In,!1),fetchSignals.set(e,()=>{if(!I(this,In)){U(this,In,!0);for(const t of I(this,Es))setTimeout(()=>{t()},0);U(this,Es,[])}})}addListener(e){assert(!I(this,In),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),I(this,Es).push(e)}get cancelled(){return I(this,In)}checkSignal(){assert(!this.cancelled,"cancelled","CANCELLED",{})}}Es=new WeakMap,In=new WeakMap;function checkSignal(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var wi,Ei,wr,Yr,bi,vi,ft,Gt,Zr,bs,vs,Ss,Ir,Er,$n,Rs,Go;const Ac=class Ac{constructor(e){re(this,Rs);re(this,wi);re(this,Ei);re(this,wr);re(this,Yr);re(this,bi);re(this,vi);re(this,ft);re(this,Gt);re(this,Zr);re(this,bs);re(this,vs);re(this,Ss);re(this,Ir);re(this,Er);re(this,$n);U(this,vi,String(e)),U(this,wi,!1),U(this,Ei,!0),U(this,wr,{}),U(this,Yr,""),U(this,bi,3e5),U(this,Er,{slotInterval:SLOT_INTERVAL,maxAttempts:MAX_ATTEMPTS}),U(this,$n,null)}get url(){return I(this,vi)}set url(e){U(this,vi,String(e))}get body(){return I(this,ft)==null?null:new Uint8Array(I(this,ft))}set body(e){if(e==null)U(this,ft,void 0),U(this,Gt,void 0);else if(typeof e=="string")U(this,ft,toUtf8Bytes(e)),U(this,Gt,"text/plain");else if(e instanceof Uint8Array)U(this,ft,e),U(this,Gt,"application/octet-stream");else if(typeof e=="object")U(this,ft,toUtf8Bytes(JSON.stringify(e))),U(this,Gt,"application/json");else throw new Error("invalid body")}hasBody(){return I(this,ft)!=null}get method(){return I(this,Yr)?I(this,Yr):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),U(this,Yr,String(e).toUpperCase())}get headers(){const e=Object.assign({},I(this,wr));return I(this,Zr)&&(e.authorization=`Basic ${encodeBase64(toUtf8Bytes(I(this,Zr)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&I(this,Gt)&&(e["content-type"]=I(this,Gt)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){I(this,wr)[String(e).toLowerCase()]=String(t)}clearHeaders(){U(this,wr,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const i=t[s++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return I(this,Zr)||null}setCredentials(e,t){assertArgument(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),U(this,Zr,`${e}:${t}`)}get allowGzip(){return I(this,Ei)}set allowGzip(e){U(this,Ei,!!e)}get allowInsecureAuthentication(){return!!I(this,wi)}set allowInsecureAuthentication(e){U(this,wi,!!e)}get timeout(){return I(this,bi)}set timeout(e){assertArgument(e>=0,"timeout must be non-zero","timeout",e),U(this,bi,e)}get preflightFunc(){return I(this,bs)||null}set preflightFunc(e){U(this,bs,e)}get processFunc(){return I(this,vs)||null}set processFunc(e){U(this,vs,e)}get retryFunc(){return I(this,Ss)||null}set retryFunc(e){U(this,Ss,e)}get getUrlFunc(){return I(this,$n)||defaultGetUrlFunc}set getUrlFunc(e){U(this,$n,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${I(this,ft)?hexlify(I(this,ft)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(I(this,Er).slotInterval=e.slotInterval),e.maxAttempts!=null&&(I(this,Er).maxAttempts=e.maxAttempts)}send(){return assert(I(this,Ir)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),U(this,Ir,new FetchCancelSignal(this)),me(this,Rs,Go).call(this,0,getTime$1()+this.timeout,0,this,new FetchResponse(0,"",{},null,this))}cancel(){assert(I(this,Ir)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=fetchSignals.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),s=e.split(":")[0].toLowerCase();assert(this.method==="GET"&&(t!=="https"||s!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Ac(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,U(i,wr,Object.assign({},I(this,wr))),I(this,ft)&&U(i,ft,new Uint8Array(I(this,ft))),U(i,Gt,I(this,Gt)),i}clone(){const e=new Ac(this.url);return U(e,Yr,I(this,Yr)),I(this,ft)&&U(e,ft,I(this,ft)),U(e,Gt,I(this,Gt)),U(e,wr,Object.assign({},I(this,wr))),U(e,Zr,I(this,Zr)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),U(e,bs,I(this,bs)),U(e,vs,I(this,vs)),U(e,Ss,I(this,Ss)),U(e,Er,Object.assign({},I(this,Er))),U(e,$n,I(this,$n)),e}static lockConfig(){locked$1=!0}static getGateway(e){return Gateways[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(locked$1)throw new Error("gateways locked");Gateways[e]=t}static registerGetUrl(e){if(locked$1)throw new Error("gateways locked");defaultGetUrlFunc=e}static createGetUrlFunc(e){return createGetUrl(e)}static createDataGateway(){return dataGatewayFunc}static createIpfsGatewayFunc(e){return getIpfsGatewayFunc(e)}};wi=new WeakMap,Ei=new WeakMap,wr=new WeakMap,Yr=new WeakMap,bi=new WeakMap,vi=new WeakMap,ft=new WeakMap,Gt=new WeakMap,Zr=new WeakMap,bs=new WeakMap,vs=new WeakMap,Ss=new WeakMap,Ir=new WeakMap,Er=new WeakMap,$n=new WeakMap,Rs=new WeakSet,Go=async function(e,t,s,i,a){var w,E,R;if(e>=I(this,Er).maxAttempts)return a.makeServerError("exceeded maximum retry limit");assert(getTime$1()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),s>0&&await wait(s);let l=this.clone();const u=(l.url.split(":")[0]||"").toLowerCase();if(u in Gateways){const A=await Gateways[u](l.url,checkSignal(I(i,Ir)));if(A instanceof FetchResponse){let S=A;if(this.processFunc){checkSignal(I(i,Ir));try{S=await this.processFunc(l,S)}catch(N){(N.throttle==null||typeof N.stall!="number")&&S.makeServerError("error in post-processing function",N).assertOk()}}return S}l=A}this.preflightFunc&&(l=await this.preflightFunc(l));const p=await this.getUrlFunc(l,checkSignal(I(i,Ir)));let x=new FetchResponse(p.statusCode,p.statusMessage,p.headers,p.body,i);if(x.statusCode===301||x.statusCode===302){try{const A=x.headers.location||"";return me(w=l.redirect(A),Rs,Go).call(w,e+1,t,0,i,x)}catch{}return x}else if(x.statusCode===429&&(this.retryFunc==null||await this.retryFunc(l,x,e))){const A=x.headers["retry-after"];let S=I(this,Er).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof A=="string"&&A.match(/^[1-9][0-9]*$/)&&(S=parseInt(A)),me(E=l.clone(),Rs,Go).call(E,e+1,t,S,i,x)}if(this.processFunc){checkSignal(I(i,Ir));try{x=await this.processFunc(l,x)}catch(A){(A.throttle==null||typeof A.stall!="number")&&x.makeServerError("error in post-processing function",A).assertOk();let S=I(this,Er).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return A.stall>=0&&(S=A.stall),me(R=l.clone(),Rs,Go).call(R,e+1,t,S,i,x)}}return x};let FetchRequest=Ac;var Qo,Ko,Xo,qt,Si,As;const ku=class ku{constructor(e,t,s,i,a){re(this,Qo);re(this,Ko);re(this,Xo);re(this,qt);re(this,Si);re(this,As);U(this,Qo,e),U(this,Ko,t),U(this,Xo,Object.keys(s).reduce((l,u)=>(l[u.toLowerCase()]=String(s[u]),l),{})),U(this,qt,i==null?null:new Uint8Array(i)),U(this,Si,a||null),U(this,As,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${I(this,qt)?hexlify(I(this,qt)):"null"}>`}get statusCode(){return I(this,Qo)}get statusMessage(){return I(this,Ko)}get headers(){return Object.assign({},I(this,Xo))}get body(){return I(this,qt)==null?null:new Uint8Array(I(this,qt))}get bodyText(){try{return I(this,qt)==null?"":toUtf8String(I(this,qt))}catch{assert(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{assert(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const i=t[s++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let s;e?s=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,s=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new ku(599,s,this.headers,this.body,I(this,Si)||void 0);return U(i,As,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:assertArgument(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const s=new Error(e||"throttling requests");throw defineProperties(s,{stall:t,throttle:!0}),s}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return I(this,qt)!=null}get request(){return I(this,Si)}ok(){return I(this,As).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=I(this,As);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let i=null;try{I(this,qt)&&(i=toUtf8String(I(this,qt)))}catch{}assert(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:s,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Qo=new WeakMap,Ko=new WeakMap,Xo=new WeakMap,qt=new WeakMap,Si=new WeakMap,As=new WeakMap;let FetchResponse=ku;function getTime$1(){return new Date().getTime()}function unpercent(r){return toUtf8Bytes(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function wait(r){return new Promise(e=>setTimeout(e,r))}const BN_N1=BigInt(-1),BN_0$8=BigInt(0),BN_1$3=BigInt(1),BN_5=BigInt(5),_guard$3={};let Zeros$1="0000";for(;Zeros$1.length<80;)Zeros$1+=Zeros$1;function getTens(r){let e=Zeros$1;for(;e.length<r;)e+=e;return BigInt("1"+e.substring(0,r))}function checkValue(r,e,t){const s=BigInt(e.width);if(e.signed){const i=BN_1$3<<s-BN_1$3;assert(t==null||r>=-i&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r>BN_0$8?r=fromTwos(mask(r,s),s):r=-fromTwos(mask(-r,s),s)}else{const i=BN_1$3<<s;assert(t==null||r>=0&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r=(r%i+i)%i&i-BN_1$3}return r}function getFormat(r){typeof r=="number"&&(r=`fixed128x${r}`);let e=!0,t=128,s=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")e=!1;else{const a=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);assertArgument(a,"invalid fixed format","format",r),e=a[1]!=="u",t=parseInt(a[2]),s=parseInt(a[3])}}else if(r){const a=r,l=(u,p,x)=>a[u]==null?x:(assertArgument(typeof a[u]===p,"invalid fixed format ("+u+" not "+p+")","format."+u,a[u]),a[u]);e=l("signed","boolean",e),t=l("width","number",t),s=l("decimals","number",s)}assertArgument(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),assertArgument(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(s);return{signed:e,width:t,decimals:s,name:i}}function toString$7(r,e){let t="";r<BN_0$8&&(t="-",r*=BN_N1);let s=r.toString();if(e===0)return t+s;for(;s.length<=e;)s=Zeros$1+s;const i=s.length-e;for(s=s.substring(0,i)+"."+s.substring(i);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return t+s}var br,Ve,Pt,Me,fs,Kr,bu,vu,Su,Ru;const Pn=class Pn{constructor(e,t,s){re(this,Me);O(this,"format");re(this,br);re(this,Ve);re(this,Pt);O(this,"_value");assertPrivate(e,_guard$3,"FixedNumber"),U(this,Ve,t),U(this,br,s);const i=toString$7(t,s.decimals);defineProperties(this,{format:s.name,_value:i}),U(this,Pt,getTens(s.decimals))}get signed(){return I(this,br).signed}get width(){return I(this,br).width}get decimals(){return I(this,br).decimals}get value(){return I(this,Ve)}addUnsafe(e){return me(this,Me,bu).call(this,e)}add(e){return me(this,Me,bu).call(this,e,"add")}subUnsafe(e){return me(this,Me,vu).call(this,e)}sub(e){return me(this,Me,vu).call(this,e,"sub")}mulUnsafe(e){return me(this,Me,Su).call(this,e)}mul(e){return me(this,Me,Su).call(this,e,"mul")}mulSignal(e){me(this,Me,fs).call(this,e);const t=I(this,Ve)*I(e,Ve);return assert(t%I(this,Pt)===BN_0$8,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),me(this,Me,Kr).call(this,t/I(this,Pt),"mulSignal")}divUnsafe(e){return me(this,Me,Ru).call(this,e)}div(e){return me(this,Me,Ru).call(this,e,"div")}divSignal(e){assert(I(e,Ve)!==BN_0$8,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),me(this,Me,fs).call(this,e);const t=I(this,Ve)*I(this,Pt);return assert(t%I(e,Ve)===BN_0$8,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),me(this,Me,Kr).call(this,t/I(e,Ve),"divSignal")}cmp(e){let t=this.value,s=e.value;const i=this.decimals-e.decimals;return i>0?s*=getTens(i):i<0&&(t*=getTens(-i)),t<s?-1:t>s?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=I(this,Ve);return I(this,Ve)<BN_0$8&&(e-=I(this,Pt)-BN_1$3),e=I(this,Ve)/I(this,Pt)*I(this,Pt),me(this,Me,Kr).call(this,e,"floor")}ceiling(){let e=I(this,Ve);return I(this,Ve)>BN_0$8&&(e+=I(this,Pt)-BN_1$3),e=I(this,Ve)/I(this,Pt)*I(this,Pt),me(this,Me,Kr).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,s=BN_5*getTens(t-1);let i=this.value+s;const a=getTens(t);return i=i/a*a,checkValue(i,I(this,br),"round"),new Pn(_guard$3,i,I(this,br))}isZero(){return I(this,Ve)===BN_0$8}isNegative(){return I(this,Ve)<BN_0$8}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Pn.fromString(this.toString(),e)}static fromValue(e,t,s){const i=t==null?0:getNumber(t),a=getFormat(s);let l=getBigInt(e,"value");const u=i-a.decimals;if(u>0){const p=getTens(u);assert(l%p===BN_0$8,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),l/=p}else u<0&&(l*=getTens(-u));return checkValue(l,a,"fromValue"),new Pn(_guard$3,l,a)}static fromString(e,t){const s=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);assertArgument(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",e);const i=getFormat(t);let a=s[2]||"0",l=s[3]||"";for(;l.length<i.decimals;)l+=Zeros$1;assert(l.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),l=l.substring(0,i.decimals);const u=BigInt(s[1]+a+l);return checkValue(u,i,"fromString"),new Pn(_guard$3,u,i)}static fromBytes(e,t){let s=toBigInt(getBytes(e,"value"));const i=getFormat(t);return i.signed&&(s=fromTwos(s,i.width)),checkValue(s,i,"fromBytes"),new Pn(_guard$3,s,i)}};br=new WeakMap,Ve=new WeakMap,Pt=new WeakMap,Me=new WeakSet,fs=function(e){assertArgument(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Kr=function(e,t){return e=checkValue(e,I(this,br),t),new Pn(_guard$3,e,I(this,br))},bu=function(e,t){return me(this,Me,fs).call(this,e),me(this,Me,Kr).call(this,I(this,Ve)+I(e,Ve),t)},vu=function(e,t){return me(this,Me,fs).call(this,e),me(this,Me,Kr).call(this,I(this,Ve)-I(e,Ve),t)},Su=function(e,t){return me(this,Me,fs).call(this,e),me(this,Me,Kr).call(this,I(this,Ve)*I(e,Ve)/I(this,Pt),t)},Ru=function(e,t){return assert(I(e,Ve)!==BN_0$8,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),me(this,Me,fs).call(this,e),me(this,Me,Kr).call(this,I(this,Ve)*I(this,Pt)/I(e,Ve),t)};let FixedNumber=Pn;function hexlifyByte(r){let e=r.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function unarrayifyInteger(r,e,t){let s=0;for(let i=0;i<t;i++)s=s*256+r[e+i];return s}function _decodeChildren(r,e,t,s){const i=[];for(;t<e+1+s;){const a=_decode(r,t);i.push(a.result),t+=a.consumed,assert(t<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:r,length:s,offset:e})}return{consumed:1+s,result:i}}function _decode(r,e){assert(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const t=s=>{assert(s<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:s})};if(r[e]>=248){const s=r[e]-247;t(e+1+s);const i=unarrayifyInteger(r,e+1,s);return t(e+1+s+i),_decodeChildren(r,e,e+1+s,s+i)}else if(r[e]>=192){const s=r[e]-192;return t(e+1+s),_decodeChildren(r,e,e+1,s)}else if(r[e]>=184){const s=r[e]-183;t(e+1+s);const i=unarrayifyInteger(r,e+1,s);t(e+1+s+i);const a=hexlify(r.slice(e+1+s,e+1+s+i));return{consumed:1+s+i,result:a}}else if(r[e]>=128){const s=r[e]-128;t(e+1+s);const i=hexlify(r.slice(e+1,e+1+s));return{consumed:1+s,result:i}}return{consumed:1,result:hexlifyByte(r[e])}}function decodeRlp(r){const e=getBytes(r,"data"),t=_decode(e,0);return assertArgument(t.consumed===e.length,"unexpected junk after rlp payload","data",r),t.result}function arrayifyInteger(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function _encode(r){if(Array.isArray(r)){let s=[];if(r.forEach(function(a){s=s.concat(_encode(a))}),s.length<=55)return s.unshift(192+s.length),s;const i=arrayifyInteger(s.length);return i.unshift(247+i.length),i.concat(s)}const e=Array.prototype.slice.call(getBytes(r,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=arrayifyInteger(e.length);return t.unshift(183+t.length),t.concat(e)}const nibbles="0123456789abcdef";function encodeRlp(r){let e="0x";for(const t of _encode(r))e+=nibbles[t>>4],e+=nibbles[t&15];return e}function formatUnits(r,e){let t=18;return t=getNumber(e,"unit"),FixedNumber.fromValue(r,t,{decimals:t,width:512}).toString()}function formatEther(r){return formatUnits(r,18)}const WordSize=32,Padding=new Uint8Array(WordSize),passProperties$1=["then"],_guard$2={},resultNames=new WeakMap;function getNames(r){return resultNames.get(r)}function setNames(r,e){resultNames.set(r,e)}function throwError(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function toObject(r,e,t){return r.indexOf(null)>=0?e.map((s,i)=>s instanceof Result?toObject(getNames(s),s,t):s):r.reduce((s,i,a)=>{let l=e.getValue(i);return i in s||(t&&l instanceof Result&&(l=toObject(getNames(l),l,t)),s[i]=l),s},{})}var Ri;const pi=class pi extends Array{constructor(...t){const s=t[0];let i=t[1],a=(t[2]||[]).slice(),l=!0;s!==_guard$2&&(i=t,a=[],l=!1);super(i.length);re(this,Ri);i.forEach((x,w)=>{this[w]=x});const u=a.reduce((x,w)=>(typeof w=="string"&&x.set(w,(x.get(w)||0)+1),x),new Map);if(setNames(this,Object.freeze(i.map((x,w)=>{const E=a[w];return E!=null&&u.get(E)===1?E:null}))),U(this,Ri,[]),I(this,Ri)==null&&I(this,Ri),!l)return;Object.freeze(this);const p=new Proxy(this,{get:(x,w,E)=>{if(typeof w=="string"){if(w.match(/^[0-9]+$/)){const A=getNumber(w,"%index");if(A<0||A>=this.length)throw new RangeError("out of result range");const S=x[A];return S instanceof Error&&throwError(`index ${A}`,S),S}if(passProperties$1.indexOf(w)>=0)return Reflect.get(x,w,E);const R=x[w];if(R instanceof Function)return function(...A){return R.apply(this===E?x:this,A)};if(!(w in x))return x.getValue.apply(this===E?x:this,[w])}return Reflect.get(x,w,E)}});return setNames(p,getNames(this)),p}toArray(t){const s=[];return this.forEach((i,a)=>{i instanceof Error&&throwError(`index ${a}`,i),t&&i instanceof pi&&(i=i.toArray(t)),s.push(i)}),s}toObject(t){const s=getNames(this);return s.reduce((i,a,l)=>(assert(a!=null,`value at index ${l} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),toObject(s,this,t)),{})}slice(t,s){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),s==null&&(s=this.length),s<0&&(s+=this.length,s<0&&(s=0)),s>this.length&&(s=this.length);const i=getNames(this),a=[],l=[];for(let u=t;u<s;u++)a.push(this[u]),l.push(i[u]);return new pi(_guard$2,a,l)}filter(t,s){const i=getNames(this),a=[],l=[];for(let u=0;u<this.length;u++){const p=this[u];p instanceof Error&&throwError(`index ${u}`,p),t.call(s,p,u,this)&&(a.push(p),l.push(i[u]))}return new pi(_guard$2,a,l)}map(t,s){const i=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&throwError(`index ${a}`,l),i.push(t.call(s,l,a,this))}return i}getValue(t){const s=getNames(this).indexOf(t);if(s===-1)return;const i=this[s];return i instanceof Error&&throwError(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,s){return new pi(_guard$2,t,s)}};Ri=new WeakMap;let Result=pi;function getValue$1(r){let e=toBeArray(r);return assert(e.length<=WordSize,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:WordSize,offset:e.length}),e.length!==WordSize&&(e=getBytesCopy(concat$3([Padding.slice(e.length%WordSize),e]))),e}class Coder{constructor(e,t,s,i){O(this,"name");O(this,"type");O(this,"localName");O(this,"dynamic");defineProperties(this,{name:e,type:t,localName:s,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){assertArgument(!1,e,this.localName,t)}}var en,Cs,Ai,xc;class Writer{constructor(){re(this,Ai);re(this,en);re(this,Cs);U(this,en,[]),U(this,Cs,0)}get data(){return concat$3(I(this,en))}get length(){return I(this,Cs)}appendWriter(e){return me(this,Ai,xc).call(this,getBytesCopy(e.data))}writeBytes(e){let t=getBytesCopy(e);const s=t.length%WordSize;return s&&(t=getBytesCopy(concat$3([t,Padding.slice(s)]))),me(this,Ai,xc).call(this,t)}writeValue(e){return me(this,Ai,xc).call(this,getValue$1(e))}writeUpdatableValue(){const e=I(this,en).length;return I(this,en).push(Padding),U(this,Cs,I(this,Cs)+WordSize),t=>{I(this,en)[e]=getValue$1(t)}}}en=new WeakMap,Cs=new WeakMap,Ai=new WeakSet,xc=function(e){return I(this,en).push(e),U(this,Cs,I(this,Cs)+e.length),e.length};var Ft,Wt,Ns,Ts,kn,Us,Au,jh;const _u=class _u{constructor(e,t,s){re(this,Us);O(this,"allowLoose");re(this,Ft);re(this,Wt);re(this,Ns);re(this,Ts);re(this,kn);defineProperties(this,{allowLoose:!!t}),U(this,Ft,getBytesCopy(e)),U(this,Ns,0),U(this,Ts,null),U(this,kn,s??1024),U(this,Wt,0)}get data(){return hexlify(I(this,Ft))}get dataLength(){return I(this,Ft).length}get consumed(){return I(this,Wt)}get bytes(){return new Uint8Array(I(this,Ft))}subReader(e){const t=new _u(I(this,Ft).slice(I(this,Wt)+e),this.allowLoose,I(this,kn));return U(t,Ts,this),t}readBytes(e,t){let s=me(this,Us,jh).call(this,0,e,!!t);return me(this,Us,Au).call(this,e),U(this,Wt,I(this,Wt)+s.length),s.slice(0,e)}readValue(){return toBigInt(this.readBytes(WordSize))}readIndex(){return toNumber(this.readBytes(WordSize))}};Ft=new WeakMap,Wt=new WeakMap,Ns=new WeakMap,Ts=new WeakMap,kn=new WeakMap,Us=new WeakSet,Au=function(e){var t;if(I(this,Ts))return me(t=I(this,Ts),Us,Au).call(t,e);U(this,Ns,I(this,Ns)+e),assert(I(this,kn)<1||I(this,Ns)<=I(this,kn)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${I(this,kn)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:getBytesCopy(I(this,Ft)),offset:I(this,Wt),length:e,info:{bytesRead:I(this,Ns),dataLength:this.dataLength}})},jh=function(e,t,s){let i=Math.ceil(t/WordSize)*WordSize;return I(this,Wt)+i>I(this,Ft).length&&(this.allowLoose&&s&&I(this,Wt)+t<=I(this,Ft).length?i=t:assert(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:getBytesCopy(I(this,Ft)),length:I(this,Ft).length,offset:I(this,Wt)+i})),I(this,Ft).slice(I(this,Wt),I(this,Wt)+i)};let Reader=_u;function number(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function bytes(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function hash(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(r.outputLen),number(r.blockLen)}function exists(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function output(r,e){bytes(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$1=r=>r instanceof Uint8Array,u32=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),createView=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),rotr=(r,e)=>r<<32-e|r>>>e,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$2(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function toBytes$2(r){if(typeof r=="string"&&(r=utf8ToBytes$2(r)),!u8a$1(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function concatBytes$1(...r){const e=new Uint8Array(r.reduce((s,i)=>s+i.length,0));let t=0;return r.forEach(s=>{if(!u8a$1(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(r){const e=s=>r().update(toBytes$2(s)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function randomBytes(r=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class HMAC extends Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,hash(e);const s=toBytes$2(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(s.length>i?e.create().update(s).digest():s);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=e.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(e){return exists(this),this.iHash.update(e),this}digestInto(e){exists(this),bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:i,destroyed:a,blockLen:l,outputLen:u}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=l,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(r,e,t)=>new HMAC(r,e).update(t).digest();hmac.create=(r,e)=>new HMAC(r,e);function setBigUint64(r,e,t,s){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,s);const i=BigInt(32),a=BigInt(4294967295),l=Number(t>>i&a),u=Number(t&a),p=s?4:0,x=s?0:4;r.setUint32(e+p,l,s),r.setUint32(e+x,u,s)}class SHA2 extends Hash{constructor(e,t,s,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){exists(this);const{view:t,buffer:s,blockLen:i}=this;e=toBytes$2(e);const a=e.length;for(let l=0;l<a;){const u=Math.min(i-this.pos,a-l);if(u===i){const p=createView(e);for(;i<=a-l;l+=i)this.process(p,l);continue}s.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists(this),output(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:i,isLE:a}=this;let{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>i-l&&(this.process(s,0),l=0);for(let E=l;E<i;E++)t[E]=0;setBigUint64(s,i-8,BigInt(this.length*8),a),this.process(s,0);const u=createView(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=p/4,w=this.get();if(x>w.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<x;E++)u.setUint32(4*E,w[E],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:i,finished:a,destroyed:l,pos:u}=this;return e.length=i,e.pos=u,e.finished=a,e.destroyed=l,i%t&&e.buffer.set(s),e}}const Chi=(r,e,t)=>r&e^~r&t,Maj=(r,e,t)=>r&e^r&t^e&t,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:e,B:t,C:s,D:i,E:a,F:l,G:u,H:p}=this;return[e,t,s,i,a,l,u,p]}set(e,t,s,i,a,l,u,p){this.A=e|0,this.B=t|0,this.C=s|0,this.D=i|0,this.E=a|0,this.F=l|0,this.G=u|0,this.H=p|0}process(e,t){for(let E=0;E<16;E++,t+=4)SHA256_W[E]=e.getUint32(t,!1);for(let E=16;E<64;E++){const R=SHA256_W[E-15],A=SHA256_W[E-2],S=rotr(R,7)^rotr(R,18)^R>>>3,N=rotr(A,17)^rotr(A,19)^A>>>10;SHA256_W[E]=N+SHA256_W[E-7]+S+SHA256_W[E-16]|0}let{A:s,B:i,C:a,D:l,E:u,F:p,G:x,H:w}=this;for(let E=0;E<64;E++){const R=rotr(u,6)^rotr(u,11)^rotr(u,25),A=w+R+Chi(u,p,x)+SHA256_K[E]+SHA256_W[E]|0,N=(rotr(s,2)^rotr(s,13)^rotr(s,22))+Maj(s,i,a)|0;w=x,x=p,p=u,u=l+A|0,l=a,a=i,i=s,s=A+N|0}s=s+this.A|0,i=i+this.B|0,a=a+this.C|0,l=l+this.D|0,u=u+this.E|0,p=p+this.F|0,x=x+this.G|0,w=w+this.H|0,this.set(s,i,a,l,u,p,x,w)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$2=wrapConstructor(()=>new SHA256),U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(r,e=!1){return e?{h:Number(r&U32_MASK64),l:Number(r>>_32n&U32_MASK64)}:{h:Number(r>>_32n&U32_MASK64)|0,l:Number(r&U32_MASK64)|0}}function split$1(r,e=!1){let t=new Uint32Array(r.length),s=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:a,l}=fromBig(r[i],e);[t[i],s[i]]=[a,l]}return[t,s]}const toBig=(r,e)=>BigInt(r>>>0)<<_32n|BigInt(e>>>0),shrSH=(r,e,t)=>r>>>t,shrSL=(r,e,t)=>r<<32-t|e>>>t,rotrSH=(r,e,t)=>r>>>t|e<<32-t,rotrSL=(r,e,t)=>r<<32-t|e>>>t,rotrBH=(r,e,t)=>r<<64-t|e>>>t-32,rotrBL=(r,e,t)=>r>>>t-32|e<<64-t,rotr32H=(r,e)=>e,rotr32L=(r,e)=>r,rotlSH=(r,e,t)=>r<<t|e>>>32-t,rotlSL=(r,e,t)=>e<<t|r>>>32-t,rotlBH=(r,e,t)=>e<<t-32|r>>>64-t,rotlBL=(r,e,t)=>r<<t-32|e>>>64-t;function add(r,e,t,s){const i=(e>>>0)+(s>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const add3L=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),add3H=(r,e,t,s)=>e+t+s+(r/2**32|0)|0,add4L=(r,e,t,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(s>>>0),add4H=(r,e,t,s,i)=>e+t+s+i+(r/2**32|0)|0,add5L=(r,e,t,s,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(s>>>0)+(i>>>0),add5H=(r,e,t,s,i,a)=>e+t+s+i+a+(r/2**32|0)|0,u64={fromBig,split:split$1,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L},[SHA512_Kh,SHA512_Kl]=u64.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:i,Ch:a,Cl:l,Dh:u,Dl:p,Eh:x,El:w,Fh:E,Fl:R,Gh:A,Gl:S,Hh:N,Hl:k}=this;return[e,t,s,i,a,l,u,p,x,w,E,R,A,S,N,k]}set(e,t,s,i,a,l,u,p,x,w,E,R,A,S,N,k){this.Ah=e|0,this.Al=t|0,this.Bh=s|0,this.Bl=i|0,this.Ch=a|0,this.Cl=l|0,this.Dh=u|0,this.Dl=p|0,this.Eh=x|0,this.El=w|0,this.Fh=E|0,this.Fl=R|0,this.Gh=A|0,this.Gl=S|0,this.Hh=N|0,this.Hl=k|0}process(e,t){for(let D=0;D<16;D++,t+=4)SHA512_W_H[D]=e.getUint32(t),SHA512_W_L[D]=e.getUint32(t+=4);for(let D=16;D<80;D++){const z=SHA512_W_H[D-15]|0,L=SHA512_W_L[D-15]|0,M=u64.rotrSH(z,L,1)^u64.rotrSH(z,L,8)^u64.shrSH(z,L,7),G=u64.rotrSL(z,L,1)^u64.rotrSL(z,L,8)^u64.shrSL(z,L,7),W=SHA512_W_H[D-2]|0,q=SHA512_W_L[D-2]|0,oe=u64.rotrSH(W,q,19)^u64.rotrBH(W,q,61)^u64.shrSH(W,q,6),le=u64.rotrSL(W,q,19)^u64.rotrBL(W,q,61)^u64.shrSL(W,q,6),Te=u64.add4L(G,le,SHA512_W_L[D-7],SHA512_W_L[D-16]),Ae=u64.add4H(Te,M,oe,SHA512_W_H[D-7],SHA512_W_H[D-16]);SHA512_W_H[D]=Ae|0,SHA512_W_L[D]=Te|0}let{Ah:s,Al:i,Bh:a,Bl:l,Ch:u,Cl:p,Dh:x,Dl:w,Eh:E,El:R,Fh:A,Fl:S,Gh:N,Gl:k,Hh:j,Hl:$}=this;for(let D=0;D<80;D++){const z=u64.rotrSH(E,R,14)^u64.rotrSH(E,R,18)^u64.rotrBH(E,R,41),L=u64.rotrSL(E,R,14)^u64.rotrSL(E,R,18)^u64.rotrBL(E,R,41),M=E&A^~E&N,G=R&S^~R&k,W=u64.add5L($,L,G,SHA512_Kl[D],SHA512_W_L[D]),q=u64.add5H(W,j,z,M,SHA512_Kh[D],SHA512_W_H[D]),oe=W|0,le=u64.rotrSH(s,i,28)^u64.rotrBH(s,i,34)^u64.rotrBH(s,i,39),Te=u64.rotrSL(s,i,28)^u64.rotrBL(s,i,34)^u64.rotrBL(s,i,39),Ae=s&a^s&u^a&u,we=i&l^i&p^l&p;j=N|0,$=k|0,N=A|0,k=S|0,A=E|0,S=R|0,{h:E,l:R}=u64.add(x|0,w|0,q|0,oe|0),x=u|0,w=p|0,u=a|0,p=l|0,a=s|0,l=i|0;const de=u64.add3L(oe,Te,we);s=u64.add3H(de,q,le,Ae),i=de|0}({h:s,l:i}=u64.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:a,l}=u64.add(this.Bh|0,this.Bl|0,a|0,l|0),{h:u,l:p}=u64.add(this.Ch|0,this.Cl|0,u|0,p|0),{h:x,l:w}=u64.add(this.Dh|0,this.Dl|0,x|0,w|0),{h:E,l:R}=u64.add(this.Eh|0,this.El|0,E|0,R|0),{h:A,l:S}=u64.add(this.Fh|0,this.Fl|0,A|0,S|0),{h:N,l:k}=u64.add(this.Gh|0,this.Gl|0,N|0,k|0),{h:j,l:$}=u64.add(this.Hh|0,this.Hl|0,j|0,$|0),this.set(s,i,a,l,u,p,x,w,E,R,A,S,N,k,j,$)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512$1=wrapConstructor(()=>new SHA512);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const anyGlobal=getGlobal();anyGlobal.crypto||anyGlobal.msCrypto;function createHash(r){switch(r){case"sha256":return sha256$2.create();case"sha512":return sha512$1.create()}assertArgument(!1,"invalid hashing algorithm name","algorithm",r)}const[SHA3_PI,SHA3_ROTL,_SHA3_IOTA]=[[],[],[]],_0n$4=BigInt(0),_1n$5=BigInt(1),_2n$3=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let r=0,e=_1n$5,t=1,s=0;r<24;r++){[t,s]=[s,(2*t+3*s)%5],SHA3_PI.push(2*(5*s+t)),SHA3_ROTL.push((r+1)*(r+2)/2%64);let i=_0n$4;for(let a=0;a<7;a++)e=(e<<_1n$5^(e>>_7n)*_0x71n)%_256n,e&_2n$3&&(i^=_1n$5<<(_1n$5<<BigInt(a))-_1n$5);_SHA3_IOTA.push(i)}const[SHA3_IOTA_H,SHA3_IOTA_L]=split$1(_SHA3_IOTA,!0),rotlH=(r,e,t)=>t>32?rotlBH(r,e,t):rotlSH(r,e,t),rotlL=(r,e,t)=>t>32?rotlBL(r,e,t):rotlSL(r,e,t);function keccakP(r,e=24){const t=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let l=0;l<10;l++)t[l]=r[l]^r[l+10]^r[l+20]^r[l+30]^r[l+40];for(let l=0;l<10;l+=2){const u=(l+8)%10,p=(l+2)%10,x=t[p],w=t[p+1],E=rotlH(x,w,1)^t[u],R=rotlL(x,w,1)^t[u+1];for(let A=0;A<50;A+=10)r[l+A]^=E,r[l+A+1]^=R}let i=r[2],a=r[3];for(let l=0;l<24;l++){const u=SHA3_ROTL[l],p=rotlH(i,a,u),x=rotlL(i,a,u),w=SHA3_PI[l];i=r[w],a=r[w+1],r[w]=p,r[w+1]=x}for(let l=0;l<50;l+=10){for(let u=0;u<10;u++)t[u]=r[l+u];for(let u=0;u<10;u++)r[l+u]^=~t[(u+2)%10]&t[(u+4)%10]}r[0]^=SHA3_IOTA_H[s],r[1]^=SHA3_IOTA_L[s]}t.fill(0)}class Keccak extends Hash{constructor(e,t,s,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,number(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32(this.state)}keccak(){keccakP(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){exists(this);const{blockLen:t,state:s}=this;e=toBytes$2(e);const i=e.length;for(let a=0;a<i;){const l=Math.min(t-this.pos,i-a);for(let u=0;u<l;u++)s[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:i}=this;e[s]^=t,(t&128)!==0&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){exists(this,!1),bytes(e),this.finish();const t=this.state,{blockLen:s}=this;for(let i=0,a=e.length;i<a;){this.posOut>=s&&this.keccak();const l=Math.min(s-this.posOut,a-i);e.set(t.subarray(this.posOut,this.posOut+l),i),this.posOut+=l,i+=l}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:i,rounds:a,enableXOF:l}=this;return e||(e=new Keccak(t,s,i,l,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=s,e.outputLen=i,e.enableXOF=l,e.destroyed=this.destroyed,e}}const gen=(r,e,t)=>wrapConstructor(()=>new Keccak(e,r,t)),keccak_256=gen(1,136,256/8);let locked=!1;const _keccak256=function(r){return keccak_256(r)};let __keccak256=_keccak256;function keccak256(r){const e=getBytes(r,"data");return hexlify(__keccak256(e))}keccak256._=_keccak256;keccak256.lock=function(){locked=!0};keccak256.register=function(r){if(locked)throw new TypeError("keccak256 is locked");__keccak256=r};Object.freeze(keccak256);const _sha256=function(r){return createHash("sha256").update(r).digest()};let __sha256=_sha256,locked256=!1;function sha256$1(r){const e=getBytes(r,"data");return hexlify(__sha256(e))}sha256$1._=_sha256;sha256$1.lock=function(){locked256=!0};sha256$1.register=function(r){if(locked256)throw new Error("sha256 is locked");__sha256=r};Object.freeze(sha256$1);Object.freeze(sha256$1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$4=BigInt(1),_2n$2=BigInt(2),u8a=r=>r instanceof Uint8Array,hexes=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(r){if(!u8a(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=hexes[r[t]];return e}function numberToHexUnpadded(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function hexToNumber(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function hexToBytes(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let s=0;s<t.length;s++){const i=s*2,a=r.slice(i,i+2),l=Number.parseInt(a,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");t[s]=l}return t}function bytesToNumberBE(r){return hexToNumber(bytesToHex(r))}function bytesToNumberLE(r){if(!u8a(r))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(r).reverse()))}function numberToBytesBE(r,e){return hexToBytes(r.toString(16).padStart(e*2,"0"))}function numberToBytesLE(r,e){return numberToBytesBE(r,e).reverse()}function numberToVarBytesBE(r){return hexToBytes(numberToHexUnpadded(r))}function ensureBytes(r,e,t){let s;if(typeof e=="string")try{s=hexToBytes(e)}catch(a){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${a}`)}else if(u8a(e))s=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=s.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return s}function concatBytes(...r){const e=new Uint8Array(r.reduce((s,i)=>s+i.length,0));let t=0;return r.forEach(s=>{if(!u8a(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}function equalBytes(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function utf8ToBytes$1(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function bitLen(r){let e;for(e=0;r>_0n$3;r>>=_1n$4,e+=1);return e}function bitGet(r,e){return r>>BigInt(e)&_1n$4}const bitSet=(r,e,t)=>r|(t?_1n$4:_0n$3)<<BigInt(e),bitMask=r=>(_2n$2<<BigInt(r-1))-_1n$4,u8n=r=>new Uint8Array(r),u8fr=r=>Uint8Array.from(r);function createHmacDrbg(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let s=u8n(r),i=u8n(r),a=0;const l=()=>{s.fill(1),i.fill(0),a=0},u=(...E)=>t(i,s,...E),p=(E=u8n())=>{i=u(u8fr([0]),E),s=u(),E.length!==0&&(i=u(u8fr([1]),E),s=u())},x=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const R=[];for(;E<e;){s=u();const A=s.slice();R.push(A),E+=s.length}return concatBytes(...R)};return(E,R)=>{l(),p(E);let A;for(;!(A=R(x()));)p();return l(),A}}const validatorFns={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function validateObject(r,e,t={}){const s=(i,a,l)=>{const u=validatorFns[a];if(typeof u!="function")throw new Error(`Invalid validator "${a}", expected function`);const p=r[i];if(!(l&&p===void 0)&&!u(p,r))throw new Error(`Invalid param ${String(i)}=${p} (${typeof p}), expected ${a}`)};for(const[i,a]of Object.entries(e))s(i,a,!1);for(const[i,a]of Object.entries(t))s(i,a,!0);return r}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes,hexToBytes,hexToNumber,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$1,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$3=BigInt(1),_2n$1=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);BigInt(9);BigInt(16);function mod(r,e){const t=r%e;return t>=_0n$2?t:e+t}function pow(r,e,t){if(t<=_0n$2||e<_0n$2)throw new Error("Expected power/modulo > 0");if(t===_1n$3)return _0n$2;let s=_1n$3;for(;e>_0n$2;)e&_1n$3&&(s=s*r%t),r=r*r%t,e>>=_1n$3;return s}function pow2(r,e,t){let s=r;for(;e-- >_0n$2;)s*=s,s%=t;return s}function invert(r,e){if(r===_0n$2||e<=_0n$2)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=mod(r,e),s=e,i=_0n$2,a=_1n$3;for(;t!==_0n$2;){const u=s/t,p=s%t,x=i-a*u;s=t,t=p,i=a,a=x}if(s!==_1n$3)throw new Error("invert: does not exist");return mod(i,e)}function tonelliShanks(r){const e=(r-_1n$3)/_2n$1;let t,s,i;for(t=r-_1n$3,s=0;t%_2n$1===_0n$2;t/=_2n$1,s++);for(i=_2n$1;i<r&&pow(i,e,r)!==r-_1n$3;i++);if(s===1){const l=(r+_1n$3)/_4n;return function(p,x){const w=p.pow(x,l);if(!p.eql(p.sqr(w),x))throw new Error("Cannot find square root");return w}}const a=(t+_1n$3)/_2n$1;return function(u,p){if(u.pow(p,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let x=s,w=u.pow(u.mul(u.ONE,i),t),E=u.pow(p,a),R=u.pow(p,t);for(;!u.eql(R,u.ONE);){if(u.eql(R,u.ZERO))return u.ZERO;let A=1;for(let N=u.sqr(R);A<x&&!u.eql(N,u.ONE);A++)N=u.sqr(N);const S=u.pow(w,_1n$3<<BigInt(x-A-1));w=u.sqr(S),E=u.mul(E,S),R=u.mul(R,w),x=A}return E}}function FpSqrt(r){if(r%_4n===_3n$1){const e=(r+_1n$3)/_4n;return function(s,i){const a=s.pow(i,e);if(!s.eql(s.sqr(a),i))throw new Error("Cannot find square root");return a}}if(r%_8n===_5n){const e=(r-_5n)/_8n;return function(s,i){const a=s.mul(i,_2n$1),l=s.pow(a,e),u=s.mul(i,l),p=s.mul(s.mul(u,_2n$1),l),x=s.mul(u,s.sub(p,s.ONE));if(!s.eql(s.sqr(x),i))throw new Error("Cannot find square root");return x}}return tonelliShanks(r)}const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=FIELD_FIELDS.reduce((s,i)=>(s[i]="function",s),e);return validateObject(r,t)}function FpPow(r,e,t){if(t<_0n$2)throw new Error("Expected power > 0");if(t===_0n$2)return r.ONE;if(t===_1n$3)return e;let s=r.ONE,i=e;for(;t>_0n$2;)t&_1n$3&&(s=r.mul(s,i)),i=r.sqr(i),t>>=_1n$3;return s}function FpInvertBatch(r,e){const t=new Array(e.length),s=e.reduce((a,l,u)=>r.is0(l)?a:(t[u]=a,r.mul(a,l)),r.ONE),i=r.inv(s);return e.reduceRight((a,l,u)=>r.is0(l)?a:(t[u]=r.mul(a,t[u]),r.mul(a,l)),i),t}function nLength(r,e){const t=e!==void 0?e:r.toString(2).length,s=Math.ceil(t/8);return{nBitLength:t,nByteLength:s}}function Field(r,e,t=!1,s={}){if(r<=_0n$2)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:a}=nLength(r,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const l=FpSqrt(r),u=Object.freeze({ORDER:r,BITS:i,BYTES:a,MASK:bitMask(i),ZERO:_0n$2,ONE:_1n$3,create:p=>mod(p,r),isValid:p=>{if(typeof p!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof p}`);return _0n$2<=p&&p<r},is0:p=>p===_0n$2,isOdd:p=>(p&_1n$3)===_1n$3,neg:p=>mod(-p,r),eql:(p,x)=>p===x,sqr:p=>mod(p*p,r),add:(p,x)=>mod(p+x,r),sub:(p,x)=>mod(p-x,r),mul:(p,x)=>mod(p*x,r),pow:(p,x)=>FpPow(u,p,x),div:(p,x)=>mod(p*invert(x,r),r),sqrN:p=>p*p,addN:(p,x)=>p+x,subN:(p,x)=>p-x,mulN:(p,x)=>p*x,inv:p=>invert(p,r),sqrt:s.sqrt||(p=>l(u,p)),invertBatch:p=>FpInvertBatch(u,p),cmov:(p,x,w)=>w?x:p,toBytes:p=>t?numberToBytesLE(p,a):numberToBytesBE(p,a),fromBytes:p=>{if(p.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${p.length}`);return t?bytesToNumberLE(p):bytesToNumberBE(p)}});return Object.freeze(u)}function getFieldBytesLength(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(r){const e=getFieldBytesLength(r);return e+Math.ceil(e/2)}function mapHashToField(r,e,t=!1){const s=r.length,i=getFieldBytesLength(e),a=getMinHashLength(e);if(s<16||s<a||s>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${s}`);const l=t?bytesToNumberBE(r):bytesToNumberLE(r),u=mod(l,e-_1n$3)+_1n$3;return t?numberToBytesLE(u,i):numberToBytesBE(u,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$2=BigInt(1);function wNAF(r,e){const t=(i,a)=>{const l=a.negate();return i?l:a},s=i=>{const a=Math.ceil(e/i)+1,l=2**(i-1);return{windows:a,windowSize:l}};return{constTimeNegate:t,unsafeLadder(i,a){let l=r.ZERO,u=i;for(;a>_0n$1;)a&_1n$2&&(l=l.add(u)),u=u.double(),a>>=_1n$2;return l},precomputeWindow(i,a){const{windows:l,windowSize:u}=s(a),p=[];let x=i,w=x;for(let E=0;E<l;E++){w=x,p.push(w);for(let R=1;R<u;R++)w=w.add(x),p.push(w);x=w.double()}return p},wNAF(i,a,l){const{windows:u,windowSize:p}=s(i);let x=r.ZERO,w=r.BASE;const E=BigInt(2**i-1),R=2**i,A=BigInt(i);for(let S=0;S<u;S++){const N=S*p;let k=Number(l&E);l>>=A,k>p&&(k-=R,l+=_1n$2);const j=N,$=N+Math.abs(k)-1,D=S%2!==0,z=k<0;k===0?w=w.add(t(D,a[j])):x=x.add(t(z,a[$]))}return{p:x,f:w}},wNAFCached(i,a,l,u){const p=i._WINDOW_SIZE||1;let x=a.get(i);return x||(x=this.precomputeWindow(i,p),p!==1&&a.set(i,u(x))),this.wNAF(p,x,l)}}}function validateBasic(r){return validateField(r.Fp),validateObject(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(r){const e=validateBasic(r);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:s,a:i}=e;if(t){if(!s.eql(i,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=DER;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],s=r.subarray(2,t+2);if(!t||s.length!==t)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:b2n(s),l:r.subarray(t+2)}},toSig(r){const{Err:e}=DER,t=typeof r=="string"?h2b(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let s=t.length;if(s<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:i,l:a}=DER._parseInt(t.subarray(2)),{d:l,l:u}=DER._parseInt(a);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:l}},hexFromSig(r){const e=x=>Number.parseInt(x[0],16)&8?"00"+x:x,t=x=>{const w=x.toString(16);return w.length&1?`0${w}`:w},s=e(t(r.s)),i=e(t(r.r)),a=s.length/2,l=i.length/2,u=t(a),p=t(l);return`30${t(l+a+4)}02${p}${i}02${u}${s}`}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(r){const e=validatePointOpts(r),{Fp:t}=e,s=e.toBytes||((S,N,k)=>{const j=N.toAffine();return concatBytes(Uint8Array.from([4]),t.toBytes(j.x),t.toBytes(j.y))}),i=e.fromBytes||(S=>{const N=S.subarray(1),k=t.fromBytes(N.subarray(0,t.BYTES)),j=t.fromBytes(N.subarray(t.BYTES,2*t.BYTES));return{x:k,y:j}});function a(S){const{a:N,b:k}=e,j=t.sqr(S),$=t.mul(j,S);return t.add(t.add($,t.mul(S,N)),k)}if(!t.eql(t.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function l(S){return typeof S=="bigint"&&_0n<S&&S<e.n}function u(S){if(!l(S))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function p(S){const{allowedPrivateKeyLengths:N,nByteLength:k,wrapPrivateKey:j,n:$}=e;if(N&&typeof S!="bigint"){if(S instanceof Uint8Array&&(S=bytesToHex(S)),typeof S!="string"||!N.includes(S.length))throw new Error("Invalid key");S=S.padStart(k*2,"0")}let D;try{D=typeof S=="bigint"?S:bytesToNumberBE(ensureBytes("private key",S,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof S}`)}return j&&(D=mod(D,$)),u(D),D}const x=new Map;function w(S){if(!(S instanceof E))throw new Error("ProjectivePoint expected")}class E{constructor(N,k,j){if(this.px=N,this.py=k,this.pz=j,N==null||!t.isValid(N))throw new Error("x required");if(k==null||!t.isValid(k))throw new Error("y required");if(j==null||!t.isValid(j))throw new Error("z required")}static fromAffine(N){const{x:k,y:j}=N||{};if(!N||!t.isValid(k)||!t.isValid(j))throw new Error("invalid affine point");if(N instanceof E)throw new Error("projective point not allowed");const $=D=>t.eql(D,t.ZERO);return $(k)&&$(j)?E.ZERO:new E(k,j,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const k=t.invertBatch(N.map(j=>j.pz));return N.map((j,$)=>j.toAffine(k[$])).map(E.fromAffine)}static fromHex(N){const k=E.fromAffine(i(ensureBytes("pointHex",N)));return k.assertValidity(),k}static fromPrivateKey(N){return E.BASE.multiply(p(N))}_setWindowSize(N){this._WINDOW_SIZE=N,x.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:N,y:k}=this.toAffine();if(!t.isValid(N)||!t.isValid(k))throw new Error("bad point: x or y not FE");const j=t.sqr(k),$=a(N);if(!t.eql(j,$))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:N}=this.toAffine();if(t.isOdd)return!t.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){w(N);const{px:k,py:j,pz:$}=this,{px:D,py:z,pz:L}=N,M=t.eql(t.mul(k,L),t.mul(D,$)),G=t.eql(t.mul(j,L),t.mul(z,$));return M&&G}negate(){return new E(this.px,t.neg(this.py),this.pz)}double(){const{a:N,b:k}=e,j=t.mul(k,_3n),{px:$,py:D,pz:z}=this;let L=t.ZERO,M=t.ZERO,G=t.ZERO,W=t.mul($,$),q=t.mul(D,D),oe=t.mul(z,z),le=t.mul($,D);return le=t.add(le,le),G=t.mul($,z),G=t.add(G,G),L=t.mul(N,G),M=t.mul(j,oe),M=t.add(L,M),L=t.sub(q,M),M=t.add(q,M),M=t.mul(L,M),L=t.mul(le,L),G=t.mul(j,G),oe=t.mul(N,oe),le=t.sub(W,oe),le=t.mul(N,le),le=t.add(le,G),G=t.add(W,W),W=t.add(G,W),W=t.add(W,oe),W=t.mul(W,le),M=t.add(M,W),oe=t.mul(D,z),oe=t.add(oe,oe),W=t.mul(oe,le),L=t.sub(L,W),G=t.mul(oe,q),G=t.add(G,G),G=t.add(G,G),new E(L,M,G)}add(N){w(N);const{px:k,py:j,pz:$}=this,{px:D,py:z,pz:L}=N;let M=t.ZERO,G=t.ZERO,W=t.ZERO;const q=e.a,oe=t.mul(e.b,_3n);let le=t.mul(k,D),Te=t.mul(j,z),Ae=t.mul($,L),we=t.add(k,j),de=t.add(D,z);we=t.mul(we,de),de=t.add(le,Te),we=t.sub(we,de),de=t.add(k,$);let Z=t.add(D,L);return de=t.mul(de,Z),Z=t.add(le,Ae),de=t.sub(de,Z),Z=t.add(j,$),M=t.add(z,L),Z=t.mul(Z,M),M=t.add(Te,Ae),Z=t.sub(Z,M),W=t.mul(q,de),M=t.mul(oe,Ae),W=t.add(M,W),M=t.sub(Te,W),W=t.add(Te,W),G=t.mul(M,W),Te=t.add(le,le),Te=t.add(Te,le),Ae=t.mul(q,Ae),de=t.mul(oe,de),Te=t.add(Te,Ae),Ae=t.sub(le,Ae),Ae=t.mul(q,Ae),de=t.add(de,Ae),le=t.mul(Te,de),G=t.add(G,le),le=t.mul(Z,de),M=t.mul(we,M),M=t.sub(M,le),le=t.mul(we,Te),W=t.mul(Z,W),W=t.add(W,le),new E(M,G,W)}subtract(N){return this.add(N.negate())}is0(){return this.equals(E.ZERO)}wNAF(N){return A.wNAFCached(this,x,N,k=>{const j=t.invertBatch(k.map($=>$.pz));return k.map(($,D)=>$.toAffine(j[D])).map(E.fromAffine)})}multiplyUnsafe(N){const k=E.ZERO;if(N===_0n)return k;if(u(N),N===_1n$1)return this;const{endo:j}=e;if(!j)return A.unsafeLadder(this,N);let{k1neg:$,k1:D,k2neg:z,k2:L}=j.splitScalar(N),M=k,G=k,W=this;for(;D>_0n||L>_0n;)D&_1n$1&&(M=M.add(W)),L&_1n$1&&(G=G.add(W)),W=W.double(),D>>=_1n$1,L>>=_1n$1;return $&&(M=M.negate()),z&&(G=G.negate()),G=new E(t.mul(G.px,j.beta),G.py,G.pz),M.add(G)}multiply(N){u(N);let k=N,j,$;const{endo:D}=e;if(D){const{k1neg:z,k1:L,k2neg:M,k2:G}=D.splitScalar(k);let{p:W,f:q}=this.wNAF(L),{p:oe,f:le}=this.wNAF(G);W=A.constTimeNegate(z,W),oe=A.constTimeNegate(M,oe),oe=new E(t.mul(oe.px,D.beta),oe.py,oe.pz),j=W.add(oe),$=q.add(le)}else{const{p:z,f:L}=this.wNAF(k);j=z,$=L}return E.normalizeZ([j,$])[0]}multiplyAndAddUnsafe(N,k,j){const $=E.BASE,D=(L,M)=>M===_0n||M===_1n$1||!L.equals($)?L.multiplyUnsafe(M):L.multiply(M),z=D(this,k).add(D(N,j));return z.is0()?void 0:z}toAffine(N){const{px:k,py:j,pz:$}=this,D=this.is0();N==null&&(N=D?t.ONE:t.inv($));const z=t.mul(k,N),L=t.mul(j,N),M=t.mul($,N);if(D)return{x:t.ZERO,y:t.ZERO};if(!t.eql(M,t.ONE))throw new Error("invZ was invalid");return{x:z,y:L}}isTorsionFree(){const{h:N,isTorsionFree:k}=e;if(N===_1n$1)return!0;if(k)return k(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:k}=e;return N===_1n$1?this:k?k(E,this):this.multiplyUnsafe(e.h)}toRawBytes(N=!0){return this.assertValidity(),s(E,this,N)}toHex(N=!0){return bytesToHex(this.toRawBytes(N))}}E.BASE=new E(e.Gx,e.Gy,t.ONE),E.ZERO=new E(t.ZERO,t.ONE,t.ZERO);const R=e.nBitLength,A=wNAF(E,e.endo?Math.ceil(R/2):R);return{CURVE:e,ProjectivePoint:E,normPrivateKeyToScalar:p,weierstrassEquation:a,isWithinCurveOrder:l}}function validateOpts(r){const e=validateBasic(r);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass(r){const e=validateOpts(r),{Fp:t,n:s}=e,i=t.BYTES+1,a=2*t.BYTES+1;function l(de){return _0n<de&&de<t.ORDER}function u(de){return mod(de,s)}function p(de){return invert(de,s)}const{ProjectivePoint:x,normPrivateKeyToScalar:w,weierstrassEquation:E,isWithinCurveOrder:R}=weierstrassPoints({...e,toBytes(de,Z,pe){const ae=Z.toAffine(),se=t.toBytes(ae.x),ce=concatBytes;return pe?ce(Uint8Array.from([Z.hasEvenY()?2:3]),se):ce(Uint8Array.from([4]),se,t.toBytes(ae.y))},fromBytes(de){const Z=de.length,pe=de[0],ae=de.subarray(1);if(Z===i&&(pe===2||pe===3)){const se=bytesToNumberBE(ae);if(!l(se))throw new Error("Point is not on curve");const ce=E(se);let J=t.sqrt(ce);const ie=(J&_1n$1)===_1n$1;return(pe&1)===1!==ie&&(J=t.neg(J)),{x:se,y:J}}else if(Z===a&&pe===4){const se=t.fromBytes(ae.subarray(0,t.BYTES)),ce=t.fromBytes(ae.subarray(t.BYTES,2*t.BYTES));return{x:se,y:ce}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}}),A=de=>bytesToHex(numberToBytesBE(de,e.nByteLength));function S(de){const Z=s>>_1n$1;return de>Z}function N(de){return S(de)?u(-de):de}const k=(de,Z,pe)=>bytesToNumberBE(de.slice(Z,pe));class j{constructor(Z,pe,ae){this.r=Z,this.s=pe,this.recovery=ae,this.assertValidity()}static fromCompact(Z){const pe=e.nByteLength;return Z=ensureBytes("compactSignature",Z,pe*2),new j(k(Z,0,pe),k(Z,pe,2*pe))}static fromDER(Z){const{r:pe,s:ae}=DER.toSig(ensureBytes("DER",Z));return new j(pe,ae)}assertValidity(){if(!R(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!R(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new j(this.r,this.s,Z)}recoverPublicKey(Z){const{r:pe,s:ae,recovery:se}=this,ce=G(ensureBytes("msgHash",Z));if(se==null||![0,1,2,3].includes(se))throw new Error("recovery id invalid");const J=se===2||se===3?pe+e.n:pe;if(J>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const ie=(se&1)===0?"02":"03",Re=x.fromHex(ie+A(J)),je=p(J),Ie=u(-ce*je),$e=u(ae*je),Be=x.BASE.multiplyAndAddUnsafe(Re,Ie,$e);if(!Be)throw new Error("point at infinify");return Be.assertValidity(),Be}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new j(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}const $={isValidPrivateKey(de){try{return w(de),!0}catch{return!1}},normPrivateKeyToScalar:w,randomPrivateKey:()=>{const de=getMinHashLength(e.n);return mapHashToField(e.randomBytes(de),e.n)},precompute(de=8,Z=x.BASE){return Z._setWindowSize(de),Z.multiply(BigInt(3)),Z}};function D(de,Z=!0){return x.fromPrivateKey(de).toRawBytes(Z)}function z(de){const Z=de instanceof Uint8Array,pe=typeof de=="string",ae=(Z||pe)&&de.length;return Z?ae===i||ae===a:pe?ae===2*i||ae===2*a:de instanceof x}function L(de,Z,pe=!0){if(z(de))throw new Error("first arg must be private key");if(!z(Z))throw new Error("second arg must be public key");return x.fromHex(Z).multiply(w(de)).toRawBytes(pe)}const M=e.bits2int||function(de){const Z=bytesToNumberBE(de),pe=de.length*8-e.nBitLength;return pe>0?Z>>BigInt(pe):Z},G=e.bits2int_modN||function(de){return u(M(de))},W=bitMask(e.nBitLength);function q(de){if(typeof de!="bigint")throw new Error("bigint expected");if(!(_0n<=de&&de<W))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE(de,e.nByteLength)}function oe(de,Z,pe=le){if(["recovered","canonical"].some(De=>De in pe))throw new Error("sign() legacy options not supported");const{hash:ae,randomBytes:se}=e;let{lowS:ce,prehash:J,extraEntropy:ie}=pe;ce==null&&(ce=!0),de=ensureBytes("msgHash",de),J&&(de=ensureBytes("prehashed msgHash",ae(de)));const Re=G(de),je=w(Z),Ie=[q(je),q(Re)];if(ie!=null){const De=ie===!0?se(t.BYTES):ie;Ie.push(ensureBytes("extraEntropy",De))}const $e=concatBytes(...Ie),Be=Re;function ke(De){const Ye=M(De);if(!R(Ye))return;const Mr=p(Ye),Qt=x.BASE.multiply(Ye).toAffine(),Ze=u(Qt.x);if(Ze===_0n)return;const gt=u(Mr*u(Be+Ze*je));if(gt===_0n)return;let Qn=(Qt.x===Ze?0:2)|Number(Qt.y&_1n$1),Kn=gt;return ce&&S(gt)&&(Kn=N(gt),Qn^=1),new j(Ze,Kn,Qn)}return{seed:$e,k2sig:ke}}const le={lowS:e.lowS,prehash:!1},Te={lowS:e.lowS,prehash:!1};function Ae(de,Z,pe=le){const{seed:ae,k2sig:se}=oe(de,Z,pe),ce=e;return createHmacDrbg(ce.hash.outputLen,ce.nByteLength,ce.hmac)(ae,se)}x.BASE._setWindowSize(8);function we(de,Z,pe,ae=Te){var Qt;const se=de;if(Z=ensureBytes("msgHash",Z),pe=ensureBytes("publicKey",pe),"strict"in ae)throw new Error("options.strict was renamed to lowS");const{lowS:ce,prehash:J}=ae;let ie,Re;try{if(typeof se=="string"||se instanceof Uint8Array)try{ie=j.fromDER(se)}catch(Ze){if(!(Ze instanceof DER.Err))throw Ze;ie=j.fromCompact(se)}else if(typeof se=="object"&&typeof se.r=="bigint"&&typeof se.s=="bigint"){const{r:Ze,s:gt}=se;ie=new j(Ze,gt)}else throw new Error("PARSE");Re=x.fromHex(pe)}catch(Ze){if(Ze.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ce&&ie.hasHighS())return!1;J&&(Z=e.hash(Z));const{r:je,s:Ie}=ie,$e=G(Z),Be=p(Ie),ke=u($e*Be),De=u(je*Be),Ye=(Qt=x.BASE.multiplyAndAddUnsafe(Re,ke,De))==null?void 0:Qt.toAffine();return Ye?u(Ye.x)===je:!1}return{CURVE:e,getPublicKey:D,getSharedSecret:L,sign:Ae,verify:we,ProjectivePoint:x,Signature:j,utils:$}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(r){return{hash:r,hmac:(e,...t)=>hmac(r,e,concatBytes$1(...t)),randomBytes}}function createCurve(r,e){const t=s=>weierstrass({...r,...getHash(s)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(r,e)=>(r+e/_2n)/e;function sqrtMod(r){const e=secp256k1P,t=BigInt(3),s=BigInt(6),i=BigInt(11),a=BigInt(22),l=BigInt(23),u=BigInt(44),p=BigInt(88),x=r*r*r%e,w=x*x*r%e,E=pow2(w,t,e)*w%e,R=pow2(E,t,e)*w%e,A=pow2(R,_2n,e)*x%e,S=pow2(A,i,e)*A%e,N=pow2(S,a,e)*S%e,k=pow2(N,u,e)*N%e,j=pow2(k,p,e)*k%e,$=pow2(j,u,e)*N%e,D=pow2($,t,e)*w%e,z=pow2(D,l,e)*S%e,L=pow2(z,s,e)*x%e,M=pow2(L,_2n,e);if(!Fp.eql(Fp.sqr(M),r))throw new Error("Cannot find square root");return M}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=secp256k1N,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=t,l=BigInt("0x100000000000000000000000000000000"),u=divNearest(a*r,e),p=divNearest(-s*r,e);let x=mod(r-u*t-p*i,e),w=mod(-u*s-p*a,e);const E=x>l,R=w>l;if(E&&(x=e-x),R&&(w=e-w),x>l||w>l)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:E,k1:x,k2neg:R,k2:w}}}},sha256$2);BigInt(0);secp256k1.ProjectivePoint;const ZeroAddress="0x0000000000000000000000000000000000000000",ZeroHash="0x0000000000000000000000000000000000000000000000000000000000000000",BN_0$7=BigInt(0),BN_1$2=BigInt(1),BN_2$2=BigInt(2),BN_27$1=BigInt(27),BN_28$1=BigInt(28),BN_35$1=BigInt(35),_guard$1={};function toUint256(r){return zeroPadValue(toBeArray(r),32)}var Ci,$r,Ni,js;const xr=class xr{constructor(e,t,s,i){re(this,Ci);re(this,$r);re(this,Ni);re(this,js);assertPrivate(e,_guard$1,"Signature"),U(this,Ci,t),U(this,$r,s),U(this,Ni,i),U(this,js,null)}get r(){return I(this,Ci)}set r(e){assertArgument(dataLength(e)===32,"invalid r","value",e),U(this,Ci,hexlify(e))}get s(){return assertArgument(parseInt(I(this,$r).substring(0,3))<8,"non-canonical s; use ._s","s",I(this,$r)),I(this,$r)}set s(e){assertArgument(dataLength(e)===32,"invalid s","value",e),U(this,$r,hexlify(e))}get _s(){return I(this,$r)}isValid(){return parseInt(I(this,$r).substring(0,3))<8}get v(){return I(this,Ni)}set v(e){const t=getNumber(e,"value");assertArgument(t===27||t===28,"invalid v","v",e),U(this,Ni,t)}get networkV(){return I(this,js)}get legacyChainId(){const e=this.networkV;return e==null?null:xr.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=getBytes(this.s);return this.yParity&&(e[0]|=128),hexlify(e)}get compactSerialized(){return concat$3([this.r,this.yParityAndS])}get serialized(){return concat$3([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new xr(_guard$1,this.r,this._s,this.v);return this.networkV&&U(e,js,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=getBigInt(e,"v");return t==BN_27$1||t==BN_28$1?BN_0$7:(assertArgument(t>=BN_35$1,"invalid EIP-155 v","v",e),(t-BN_35$1)/BN_2$2)}static getChainIdV(e,t){return getBigInt(e)*BN_2$2+BigInt(35+t-27)}static getNormalizedV(e){const t=getBigInt(e);return t===BN_0$7||t===BN_27$1?27:t===BN_1$2||t===BN_28$1?28:(assertArgument(t>=BN_35$1,"invalid v","v",e),t&BN_1$2?27:28)}static from(e){function t(x,w){assertArgument(x,w,"signature",e)}if(e==null)return new xr(_guard$1,ZeroHash,ZeroHash,27);if(typeof e=="string"){const x=getBytes(e,"signature");if(x.length===64){const w=hexlify(x.slice(0,32)),E=x.slice(32,64),R=E[0]&128?28:27;return E[0]&=127,new xr(_guard$1,w,hexlify(E),R)}if(x.length===65){const w=hexlify(x.slice(0,32)),E=hexlify(x.slice(32,64)),R=xr.getNormalizedV(x[64]);return new xr(_guard$1,w,E,R)}t(!1,"invalid raw signature length")}if(e instanceof xr)return e.clone();const s=e.r;t(s!=null,"missing r");const i=toUint256(s),a=function(x,w){if(x!=null)return toUint256(x);if(w!=null){t(isHexString(w,32),"invalid yParityAndS");const E=getBytes(w);return E[0]&=127,hexlify(E)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:l,v:u}=function(x,w,E){if(x!=null){const R=getBigInt(x);return{networkV:R>=BN_35$1?R:void 0,v:xr.getNormalizedV(R)}}if(w!=null)return t(isHexString(w,32),"invalid yParityAndS"),{v:getBytes(w)[0]&128?28:27};if(E!=null){switch(getNumber(E,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),p=new xr(_guard$1,i,a,u);return l&&U(p,js,l),t(e.yParity==null||getNumber(e.yParity,"sig.yParity")===p.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===p.yParityAndS,"yParityAndS mismatch"),p}};Ci=new WeakMap,$r=new WeakMap,Ni=new WeakMap,js=new WeakMap;let Signature=xr;var tn;const ps=class ps{constructor(e){re(this,tn);assertArgument(dataLength(e)===32,"invalid private key","privateKey","[REDACTED]"),U(this,tn,hexlify(e))}get privateKey(){return I(this,tn)}get publicKey(){return ps.computePublicKey(I(this,tn))}get compressedPublicKey(){return ps.computePublicKey(I(this,tn),!0)}sign(e){assertArgument(dataLength(e)===32,"invalid digest length","digest",e);const t=secp256k1.sign(getBytesCopy(e),getBytesCopy(I(this,tn)),{lowS:!0});return Signature.from({r:toBeHex(t.r,32),s:toBeHex(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=ps.computePublicKey(e);return hexlify(secp256k1.getSharedSecret(getBytesCopy(I(this,tn)),getBytes(t),!1))}static computePublicKey(e,t){let s=getBytes(e,"key");if(s.length===32){const a=secp256k1.getPublicKey(s,!!t);return hexlify(a)}if(s.length===64){const a=new Uint8Array(65);a[0]=4,a.set(s,1),s=a}const i=secp256k1.ProjectivePoint.fromHex(s);return hexlify(i.toRawBytes(t))}static recoverPublicKey(e,t){assertArgument(dataLength(e)===32,"invalid digest length","digest",e);const s=Signature.from(t);let i=secp256k1.Signature.fromCompact(getBytesCopy(concat$3([s.r,s.s])));i=i.addRecoveryBit(s.yParity);const a=i.recoverPublicKey(getBytesCopy(e));return assertArgument(a!=null,"invalid signature for digest","signature",t),"0x"+a.toHex(!1)}static addPoints(e,t,s){const i=secp256k1.ProjectivePoint.fromHex(ps.computePublicKey(e).substring(2)),a=secp256k1.ProjectivePoint.fromHex(ps.computePublicKey(t).substring(2));return"0x"+i.add(a).toHex(!!s)}};tn=new WeakMap;let SigningKey=ps;const BN_0$6=BigInt(0),BN_36=BigInt(36);function getChecksumAddress(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const s=getBytes(keccak256(t));for(let i=0;i<40;i+=2)s[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(s[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const ibanLookup={};for(let r=0;r<10;r++)ibanLookup[String(r)]=String(r);for(let r=0;r<26;r++)ibanLookup[String.fromCharCode(65+r)]=String(10+r);const safeDigits=15;function ibanChecksum(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(s=>ibanLookup[s]).join("");for(;e.length>=safeDigits;){let s=e.substring(0,safeDigits);e=parseInt(s,10)%97+e.substring(s.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const Base36=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function fromBase36(r){r=r.toLowerCase();let e=BN_0$6;for(let t=0;t<r.length;t++)e=e*BN_36+Base36[r[t]];return e}function getAddress(r){if(assertArgument(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=getChecksumAddress(r);return assertArgument(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){assertArgument(r.substring(2,4)===ibanChecksum(r),"bad icap checksum","address",r);let e=fromBase36(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return getChecksumAddress("0x"+e)}assertArgument(!1,"invalid address","address",r)}function getCreateAddress(r){const e=getAddress(r.from);let s=getBigInt(r.nonce,"tx.nonce").toString(16);return s==="0"?s="0x":s.length%2?s="0x0"+s:s="0x"+s,getAddress(dataSlice(keccak256(encodeRlp([e,s])),12))}function isAddressable(r){return r&&typeof r.getAddress=="function"}async function checkAddress(r,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(assert(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),assertArgument(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),getAddress(t)}function resolveAddress(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?getAddress(r):(assert(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),checkAddress(r,e.resolveName(r)));if(isAddressable(r))return checkAddress(r,r.getAddress());if(r&&typeof r.then=="function")return checkAddress(r,r);assertArgument(!1,"unsupported addressable value","target",r)}const _gaurd={};function n(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new Typed(_gaurd,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function b(r,e){return new Typed(_gaurd,`bytes${e||""}`,r,{size:e})}const _typedSymbol=Symbol.for("_ethers_typed");var Ps;const Xr=class Xr{constructor(e,t,s,i){O(this,"type");O(this,"value");re(this,Ps);O(this,"_typedSymbol");i==null&&(i=null),assertPrivate(_gaurd,e,"Typed"),defineProperties(this,{_typedSymbol,type:t,value:s}),U(this,Ps,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return I(this,Ps)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return I(this,Ps)===!0?-1:I(this,Ps)===!1?this.value.length:null}static from(e,t){return new Xr(_gaurd,e,t)}static uint8(e){return n(e,8)}static uint16(e){return n(e,16)}static uint24(e){return n(e,24)}static uint32(e){return n(e,32)}static uint40(e){return n(e,40)}static uint48(e){return n(e,48)}static uint56(e){return n(e,56)}static uint64(e){return n(e,64)}static uint72(e){return n(e,72)}static uint80(e){return n(e,80)}static uint88(e){return n(e,88)}static uint96(e){return n(e,96)}static uint104(e){return n(e,104)}static uint112(e){return n(e,112)}static uint120(e){return n(e,120)}static uint128(e){return n(e,128)}static uint136(e){return n(e,136)}static uint144(e){return n(e,144)}static uint152(e){return n(e,152)}static uint160(e){return n(e,160)}static uint168(e){return n(e,168)}static uint176(e){return n(e,176)}static uint184(e){return n(e,184)}static uint192(e){return n(e,192)}static uint200(e){return n(e,200)}static uint208(e){return n(e,208)}static uint216(e){return n(e,216)}static uint224(e){return n(e,224)}static uint232(e){return n(e,232)}static uint240(e){return n(e,240)}static uint248(e){return n(e,248)}static uint256(e){return n(e,256)}static uint(e){return n(e,256)}static int8(e){return n(e,-8)}static int16(e){return n(e,-16)}static int24(e){return n(e,-24)}static int32(e){return n(e,-32)}static int40(e){return n(e,-40)}static int48(e){return n(e,-48)}static int56(e){return n(e,-56)}static int64(e){return n(e,-64)}static int72(e){return n(e,-72)}static int80(e){return n(e,-80)}static int88(e){return n(e,-88)}static int96(e){return n(e,-96)}static int104(e){return n(e,-104)}static int112(e){return n(e,-112)}static int120(e){return n(e,-120)}static int128(e){return n(e,-128)}static int136(e){return n(e,-136)}static int144(e){return n(e,-144)}static int152(e){return n(e,-152)}static int160(e){return n(e,-160)}static int168(e){return n(e,-168)}static int176(e){return n(e,-176)}static int184(e){return n(e,-184)}static int192(e){return n(e,-192)}static int200(e){return n(e,-200)}static int208(e){return n(e,-208)}static int216(e){return n(e,-216)}static int224(e){return n(e,-224)}static int232(e){return n(e,-232)}static int240(e){return n(e,-240)}static int248(e){return n(e,-248)}static int256(e){return n(e,-256)}static int(e){return n(e,-256)}static bytes1(e){return b(e,1)}static bytes2(e){return b(e,2)}static bytes3(e){return b(e,3)}static bytes4(e){return b(e,4)}static bytes5(e){return b(e,5)}static bytes6(e){return b(e,6)}static bytes7(e){return b(e,7)}static bytes8(e){return b(e,8)}static bytes9(e){return b(e,9)}static bytes10(e){return b(e,10)}static bytes11(e){return b(e,11)}static bytes12(e){return b(e,12)}static bytes13(e){return b(e,13)}static bytes14(e){return b(e,14)}static bytes15(e){return b(e,15)}static bytes16(e){return b(e,16)}static bytes17(e){return b(e,17)}static bytes18(e){return b(e,18)}static bytes19(e){return b(e,19)}static bytes20(e){return b(e,20)}static bytes21(e){return b(e,21)}static bytes22(e){return b(e,22)}static bytes23(e){return b(e,23)}static bytes24(e){return b(e,24)}static bytes25(e){return b(e,25)}static bytes26(e){return b(e,26)}static bytes27(e){return b(e,27)}static bytes28(e){return b(e,28)}static bytes29(e){return b(e,29)}static bytes30(e){return b(e,30)}static bytes31(e){return b(e,31)}static bytes32(e){return b(e,32)}static address(e){return new Xr(_gaurd,"address",e)}static bool(e){return new Xr(_gaurd,"bool",!!e)}static bytes(e){return new Xr(_gaurd,"bytes",e)}static string(e){return new Xr(_gaurd,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Xr(_gaurd,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===_typedSymbol}static dereference(e,t){if(Xr.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Ps=new WeakMap;let Typed=Xr;class AddressCoder extends Coder{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let s=Typed.dereference(t,"string");try{s=getAddress(s)}catch(i){return this._throwError(i.message,t)}return e.writeValue(s)}decode(e){return getAddress(toBeHex(e.readValue(),20))}}class AnonymousCoder extends Coder{constructor(t){super(t.name,t.type,"_",t.dynamic);O(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,s){return this.coder.encode(t,s)}decode(t){return this.coder.decode(t)}}function pack(r,e,t){let s=[];if(Array.isArray(t))s=t;else if(t&&typeof t=="object"){let p={};s=e.map(x=>{const w=x.localName;return assert(w,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:x},value:t}),assert(!p[w],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:x},value:t}),p[w]=!0,t[w]})}else assertArgument(!1,"invalid tuple value","tuple",t);assertArgument(e.length===s.length,"types/value length mismatch","tuple",t);let i=new Writer,a=new Writer,l=[];e.forEach((p,x)=>{let w=s[x];if(p.dynamic){let E=a.length;p.encode(a,w);let R=i.writeUpdatableValue();l.push(A=>{R(A+E)})}else p.encode(i,w)}),l.forEach(p=>{p(i.length)});let u=r.appendWriter(i);return u+=r.appendWriter(a),u}function unpack(r,e){let t=[],s=[],i=r.subReader(0);return e.forEach(a=>{let l=null;if(a.dynamic){let u=r.readIndex(),p=i.subReader(u);try{l=a.decode(p)}catch(x){if(isError(x,"BUFFER_OVERRUN"))throw x;l=x,l.baseType=a.name,l.name=a.localName,l.type=a.type}}else try{l=a.decode(r)}catch(u){if(isError(u,"BUFFER_OVERRUN"))throw u;l=u,l.baseType=a.name,l.name=a.localName,l.type=a.type}if(l==null)throw new Error("investigate");t.push(l),s.push(a.localName||null)}),Result.fromItems(t,s)}class ArrayCoder extends Coder{constructor(t,s,i){const a=t.type+"["+(s>=0?s:"")+"]",l=s===-1||t.dynamic;super("array",a,i,l);O(this,"coder");O(this,"length");defineProperties(this,{coder:t,length:s})}defaultValue(){const t=this.coder.defaultValue(),s=[];for(let i=0;i<this.length;i++)s.push(t);return s}encode(t,s){const i=Typed.dereference(s,"array");Array.isArray(i)||this._throwError("expected array value",i);let a=this.length;a===-1&&(a=i.length,t.writeValue(i.length)),assertArgumentCount(i.length,a,"coder array"+(this.localName?" "+this.localName:""));let l=[];for(let u=0;u<i.length;u++)l.push(this.coder);return pack(t,l,i)}decode(t){let s=this.length;s===-1&&(s=t.readIndex(),assert(s*WordSize<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:s*WordSize,length:t.dataLength}));let i=[];for(let a=0;a<s;a++)i.push(new AnonymousCoder(this.coder));return unpack(t,i)}}class BooleanCoder extends Coder{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const s=Typed.dereference(t,"bool");return e.writeValue(s?1:0)}decode(e){return!!e.readValue()}}class DynamicBytesCoder extends Coder{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=getBytesCopy(t);let s=e.writeValue(t.length);return s+=e.writeBytes(t),s}decode(e){return e.readBytes(e.readIndex(),!0)}}class BytesCoder extends DynamicBytesCoder{constructor(e){super("bytes",e)}decode(e){return hexlify(super.decode(e))}}class FixedBytesCoder extends Coder{constructor(t,s){let i="bytes"+String(t);super(i,i,s,!1);O(this,"size");defineProperties(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,s){let i=getBytesCopy(Typed.dereference(s,this.type));return i.length!==this.size&&this._throwError("incorrect data length",s),t.writeBytes(i)}decode(t){return hexlify(t.readBytes(this.size))}}const Empty=new Uint8Array([]);class NullCoder extends Coder{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(Empty)}decode(e){return e.readBytes(0),null}}const BN_0$5=BigInt(0),BN_1$1=BigInt(1),BN_MAX_UINT256$1=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class NumberCoder extends Coder{constructor(t,s,i){const a=(s?"int":"uint")+t*8;super(a,a,i,!1);O(this,"size");O(this,"signed");defineProperties(this,{size:t,signed:s},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,s){let i=getBigInt(Typed.dereference(s,this.type)),a=mask(BN_MAX_UINT256$1,WordSize*8);if(this.signed){let l=mask(a,this.size*8-1);(i>l||i<-(l+BN_1$1))&&this._throwError("value out-of-bounds",s),i=toTwos(i,8*WordSize)}else(i<BN_0$5||i>mask(a,this.size*8))&&this._throwError("value out-of-bounds",s);return t.writeValue(i)}decode(t){let s=mask(t.readValue(),this.size*8);return this.signed&&(s=fromTwos(s,this.size*8)),s}}class StringCoder extends DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,toUtf8Bytes(Typed.dereference(t,"string")))}decode(e){return toUtf8String(super.decode(e))}}class TupleCoder extends Coder{constructor(t,s){let i=!1;const a=[];t.forEach(u=>{u.dynamic&&(i=!0),a.push(u.type)});const l="tuple("+a.join(",")+")";super("tuple",l,s,i);O(this,"coders");defineProperties(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const s=this.coders.reduce((i,a)=>{const l=a.localName;return l&&(i[l]||(i[l]=0),i[l]++),i},{});return this.coders.forEach((i,a)=>{let l=i.localName;!l||s[l]!==1||(l==="length"&&(l="_length"),t[l]==null&&(t[l]=t[a]))}),Object.freeze(t)}encode(t,s){const i=Typed.dereference(s,"tuple");return pack(t,this.coders,i)}decode(t){return unpack(t,this.coders)}}function accessSetify(r,e){return{address:getAddress(r),storageKeys:e.map((t,s)=>(assertArgument(isHexString(t,32),"invalid slot",`storageKeys[${s}]`,t),t.toLowerCase()))}}function accessListify(r){if(Array.isArray(r))return r.map((t,s)=>Array.isArray(t)?(assertArgument(t.length===2,"invalid slot set",`value[${s}]`,t),accessSetify(t[0],t[1])):(assertArgument(t!=null&&typeof t=="object","invalid address-slot set","value",r),accessSetify(t.address,t.storageKeys)));assertArgument(r!=null&&typeof r=="object","invalid access list","value",r);const e=Object.keys(r).map(t=>{const s=r[t].reduce((i,a)=>(i[a]=!0,i),{});return accessSetify(t,Object.keys(s).sort())});return e.sort((t,s)=>t.address.localeCompare(s.address)),e}function authorizationify(r){return{address:getAddress(r.address),nonce:getBigInt(r.nonce!=null?r.nonce:0),chainId:getBigInt(r.chainId!=null?r.chainId:0),signature:Signature.from(r.signature)}}function computeAddress(r){let e;return typeof r=="string"?e=SigningKey.computePublicKey(r,!1):e=r.publicKey,getAddress(keccak256("0x"+e.substring(4)).substring(26))}function recoverAddress(r,e){return computeAddress(SigningKey.recoverPublicKey(r,e))}const BN_0$4=BigInt(0),BN_2$1=BigInt(2),BN_27=BigInt(27),BN_28=BigInt(28),BN_35=BigInt(35),BN_MAX_UINT=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),BLOB_SIZE=4096*32;function getKzgLibrary(r){return{blobToKzgCommitment:s=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return getBytes(r.blobToKzgCommitment(hexlify(s)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return getBytes(r.blobToKzgCommitment(s));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return getBytes(r.blobToKZGCommitment(hexlify(s)));assertArgument(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(s,i)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return getBytes(r.computeBlobProof(hexlify(s),hexlify(i)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(s,i);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return getBytes(r.computeBlobKZGProof(hexlify(s),hexlify(i)));assertArgument(!1,"unsupported KZG library","kzg",r)}}}function getVersionedHash(r,e){let t=r.toString(16);for(;t.length<2;)t="0"+t;return t+=sha256$1(e).substring(4),"0x"+t}function handleAddress(r){return r==="0x"?null:getAddress(r)}function handleAccessList(r,e){try{return accessListify(r)}catch(t){assertArgument(!1,t.message,e,r)}}function handleAuthorizationList(r,e){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const t=[];for(let s=0;s<r.length;s++){const i=r[s];if(!Array.isArray(i))throw new Error(`authorization[${s}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!i[1])throw new Error(`authorization[${s}]: null address`);t.push({address:handleAddress(i[1]),nonce:handleUint(i[2],"nonce"),chainId:handleUint(i[0],"chainId"),signature:Signature.from({yParity:handleNumber(i[3],"yParity"),r:zeroPadValue(i[4],32),s:zeroPadValue(i[5],32)})})}return t}catch(t){assertArgument(!1,t.message,e,r)}}function handleNumber(r,e){return r==="0x"?0:getNumber(r,e)}function handleUint(r,e){if(r==="0x")return BN_0$4;const t=getBigInt(r,e);return assertArgument(t<=BN_MAX_UINT,"value exceeds uint size",e,t),t}function formatNumber(r,e){const t=getBigInt(r,"value"),s=toBeArray(t);return assertArgument(s.length<=32,"value too large",`tx.${e}`,t),s}function formatAccessList(r){return accessListify(r).map(e=>[e.address,e.storageKeys])}function formatAuthorizationList(r){return r.map(e=>[formatNumber(e.chainId,"chainId"),e.address,formatNumber(e.nonce,"nonce"),formatNumber(e.signature.yParity,"yParity"),toBeArray(e.signature.r),toBeArray(e.signature.s)])}function formatHashes(r,e){assertArgument(Array.isArray(r),`invalid ${e}`,"value",r);for(let t=0;t<r.length;t++)assertArgument(isHexString(r[t],32),"invalid ${ param } hash",`value[${t}]`,r[t]);return r}function _parseLegacy(r){const e=decodeRlp(r);assertArgument(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",r);const t={type:0,nonce:handleNumber(e[0],"nonce"),gasPrice:handleUint(e[1],"gasPrice"),gasLimit:handleUint(e[2],"gasLimit"),to:handleAddress(e[3]),value:handleUint(e[4],"value"),data:hexlify(e[5]),chainId:BN_0$4};if(e.length===6)return t;const s=handleUint(e[6],"v"),i=handleUint(e[7],"r"),a=handleUint(e[8],"s");if(i===BN_0$4&&a===BN_0$4)t.chainId=s;else{let l=(s-BN_35)/BN_2$1;l<BN_0$4&&(l=BN_0$4),t.chainId=l,assertArgument(l!==BN_0$4||s===BN_27||s===BN_28,"non-canonical legacy v","v",e[6]),t.signature=Signature.from({r:zeroPadValue(e[7],32),s:zeroPadValue(e[8],32),v:s})}return t}function _serializeLegacy(r,e){const t=[formatNumber(r.nonce,"nonce"),formatNumber(r.gasPrice||0,"gasPrice"),formatNumber(r.gasLimit,"gasLimit"),r.to||"0x",formatNumber(r.value,"value"),r.data];let s=BN_0$4;if(r.chainId!=BN_0$4)s=getBigInt(r.chainId,"tx.chainId"),assertArgument(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(r.signature){const a=r.signature.legacyChainId;a!=null&&(s=a)}if(!e)return s!==BN_0$4&&(t.push(toBeArray(s)),t.push("0x"),t.push("0x")),encodeRlp(t);let i=BigInt(27+e.yParity);return s!==BN_0$4?i=Signature.getChainIdV(s,e.v):BigInt(e.v)!==i&&assertArgument(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(toBeArray(i)),t.push(toBeArray(e.r)),t.push(toBeArray(e.s)),encodeRlp(t)}function _parseEipSignature(r,e){let t;try{if(t=handleNumber(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{assertArgument(!1,"invalid yParity","yParity",e[0])}const s=zeroPadValue(e[1],32),i=zeroPadValue(e[2],32),a=Signature.from({r:s,s:i,yParity:t});r.signature=a}function _parseEip1559(r){const e=decodeRlp(getBytes(r).slice(1));assertArgument(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",hexlify(r));const t={type:2,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),maxPriorityFeePerGas:handleUint(e[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(e[4],"gasLimit"),to:handleAddress(e[5]),value:handleUint(e[6],"value"),data:hexlify(e[7]),accessList:handleAccessList(e[8],"accessList")};return e.length===9||_parseEipSignature(t,e.slice(9)),t}function _serializeEip1559(r,e){const t=[formatNumber(r.chainId,"chainId"),formatNumber(r.nonce,"nonce"),formatNumber(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(r.maxFeePerGas||0,"maxFeePerGas"),formatNumber(r.gasLimit,"gasLimit"),r.to||"0x",formatNumber(r.value,"value"),r.data,formatAccessList(r.accessList||[])];return e&&(t.push(formatNumber(e.yParity,"yParity")),t.push(toBeArray(e.r)),t.push(toBeArray(e.s))),concat$3(["0x02",encodeRlp(t)])}function _parseEip2930(r){const e=decodeRlp(getBytes(r).slice(1));assertArgument(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",hexlify(r));const t={type:1,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),gasPrice:handleUint(e[2],"gasPrice"),gasLimit:handleUint(e[3],"gasLimit"),to:handleAddress(e[4]),value:handleUint(e[5],"value"),data:hexlify(e[6]),accessList:handleAccessList(e[7],"accessList")};return e.length===8||_parseEipSignature(t,e.slice(8)),t}function _serializeEip2930(r,e){const t=[formatNumber(r.chainId,"chainId"),formatNumber(r.nonce,"nonce"),formatNumber(r.gasPrice||0,"gasPrice"),formatNumber(r.gasLimit,"gasLimit"),r.to||"0x",formatNumber(r.value,"value"),r.data,formatAccessList(r.accessList||[])];return e&&(t.push(formatNumber(e.yParity,"recoveryParam")),t.push(toBeArray(e.r)),t.push(toBeArray(e.s))),concat$3(["0x01",encodeRlp(t)])}function _parseEip4844(r){let e=decodeRlp(getBytes(r).slice(1)),t="3",s=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const a=e[1],l=e[2],u=e[3];assertArgument(Array.isArray(a),"invalid network format: blobs not an array","fields[1]",a),assertArgument(Array.isArray(l),"invalid network format: commitments not an array","fields[2]",l),assertArgument(Array.isArray(u),"invalid network format: proofs not an array","fields[3]",u),assertArgument(a.length===l.length,"invalid network format: blobs/commitments length mismatch","fields",e),assertArgument(a.length===u.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let p=0;p<e[1].length;p++)s.push({data:a[p],commitment:l[p],proof:u[p]});e=e[0]}assertArgument(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",hexlify(r));const i={type:3,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),maxPriorityFeePerGas:handleUint(e[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(e[4],"gasLimit"),to:handleAddress(e[5]),value:handleUint(e[6],"value"),data:hexlify(e[7]),accessList:handleAccessList(e[8],"accessList"),maxFeePerBlobGas:handleUint(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};s&&(i.blobs=s),assertArgument(i.to!=null,`invalid address for transaction type: ${t}`,"data",r),assertArgument(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let a=0;a<i.blobVersionedHashes.length;a++)assertArgument(isHexString(i.blobVersionedHashes[a],32),`invalid blobVersionedHash at index ${a}: must be length 32`,"data",r);return e.length===11||_parseEipSignature(i,e.slice(11)),i}function _serializeEip4844(r,e,t){const s=[formatNumber(r.chainId,"chainId"),formatNumber(r.nonce,"nonce"),formatNumber(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(r.maxFeePerGas||0,"maxFeePerGas"),formatNumber(r.gasLimit,"gasLimit"),r.to||ZeroAddress,formatNumber(r.value,"value"),r.data,formatAccessList(r.accessList||[]),formatNumber(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),formatHashes(r.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(s.push(formatNumber(e.yParity,"yParity")),s.push(toBeArray(e.r)),s.push(toBeArray(e.s)),t)?concat$3(["0x03",encodeRlp([s,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):concat$3(["0x03",encodeRlp(s)])}function _parseEip7702(r){const e=decodeRlp(getBytes(r).slice(1));assertArgument(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",hexlify(r));const t={type:4,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),maxPriorityFeePerGas:handleUint(e[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(e[4],"gasLimit"),to:handleAddress(e[5]),value:handleUint(e[6],"value"),data:hexlify(e[7]),accessList:handleAccessList(e[8],"accessList"),authorizationList:handleAuthorizationList(e[9],"authorizationList")};return e.length===10||_parseEipSignature(t,e.slice(10)),t}function _serializeEip7702(r,e){const t=[formatNumber(r.chainId,"chainId"),formatNumber(r.nonce,"nonce"),formatNumber(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(r.maxFeePerGas||0,"maxFeePerGas"),formatNumber(r.gasLimit,"gasLimit"),r.to||"0x",formatNumber(r.value,"value"),r.data,formatAccessList(r.accessList||[]),formatAuthorizationList(r.authorizationList||[])];return e&&(t.push(formatNumber(e.yParity,"yParity")),t.push(toBeArray(e.r)),t.push(toBeArray(e.s))),concat$3(["0x04",encodeRlp(t)])}var vr,Ti,ji,Pi,Ii,$i,ki,_i,Bi,Oi,Di,Fi,Is,_n,kr,Bn,Li,Ui,wc;const Pr=class Pr{constructor(){re(this,Ui);re(this,vr);re(this,Ti);re(this,ji);re(this,Pi);re(this,Ii);re(this,$i);re(this,ki);re(this,_i);re(this,Bi);re(this,Oi);re(this,Di);re(this,Fi);re(this,Is);re(this,_n);re(this,kr);re(this,Bn);re(this,Li);U(this,vr,null),U(this,Ti,null),U(this,Pi,0),U(this,Ii,BN_0$4),U(this,$i,null),U(this,ki,null),U(this,_i,null),U(this,ji,"0x"),U(this,Bi,BN_0$4),U(this,Oi,BN_0$4),U(this,Di,null),U(this,Fi,null),U(this,Is,null),U(this,_n,null),U(this,kr,null),U(this,Bn,null),U(this,Li,null)}get type(){return I(this,vr)}set type(e){switch(e){case null:U(this,vr,null);break;case 0:case"legacy":U(this,vr,0);break;case 1:case"berlin":case"eip-2930":U(this,vr,1);break;case 2:case"london":case"eip-1559":U(this,vr,2);break;case 3:case"cancun":case"eip-4844":U(this,vr,3);break;case 4:case"pectra":case"eip-7702":U(this,vr,4);break;default:assertArgument(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=I(this,Ti);return e==null&&this.type===3?ZeroAddress:e}set to(e){U(this,Ti,e==null?null:getAddress(e))}get nonce(){return I(this,Pi)}set nonce(e){U(this,Pi,getNumber(e,"value"))}get gasLimit(){return I(this,Ii)}set gasLimit(e){U(this,Ii,getBigInt(e))}get gasPrice(){const e=I(this,$i);return e==null&&(this.type===0||this.type===1)?BN_0$4:e}set gasPrice(e){U(this,$i,e==null?null:getBigInt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=I(this,ki);return e??(this.type===2||this.type===3?BN_0$4:null)}set maxPriorityFeePerGas(e){U(this,ki,e==null?null:getBigInt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=I(this,_i);return e??(this.type===2||this.type===3?BN_0$4:null)}set maxFeePerGas(e){U(this,_i,e==null?null:getBigInt(e,"maxFeePerGas"))}get data(){return I(this,ji)}set data(e){U(this,ji,hexlify(e))}get value(){return I(this,Bi)}set value(e){U(this,Bi,getBigInt(e,"value"))}get chainId(){return I(this,Oi)}set chainId(e){U(this,Oi,getBigInt(e))}get signature(){return I(this,Di)||null}set signature(e){U(this,Di,e==null?null:Signature.from(e))}get accessList(){const e=I(this,Fi)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){U(this,Fi,e==null?null:accessListify(e))}get authorizationList(){const e=I(this,Li)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){U(this,Li,e==null?null:e.map(t=>authorizationify(t)))}get maxFeePerBlobGas(){const e=I(this,Is);return e==null&&this.type===3?BN_0$4:e}set maxFeePerBlobGas(e){U(this,Is,e==null?null:getBigInt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=I(this,_n);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){assertArgument(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)assertArgument(isHexString(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}U(this,_n,e)}get blobs(){return I(this,Bn)==null?null:I(this,Bn).map(e=>Object.assign({},e))}set blobs(e){if(e==null){U(this,Bn,null);return}const t=[],s=[];for(let i=0;i<e.length;i++){const a=e[i];if(isBytesLike(a)){assert(I(this,kr),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let l=getBytes(a);if(assertArgument(l.length<=BLOB_SIZE,"blob is too large",`blobs[${i}]`,a),l.length!==BLOB_SIZE){const x=new Uint8Array(BLOB_SIZE);x.set(l),l=x}const u=I(this,kr).blobToKzgCommitment(l),p=hexlify(I(this,kr).computeBlobKzgProof(l,u));t.push({data:hexlify(l),commitment:hexlify(u),proof:p}),s.push(getVersionedHash(1,u))}else{const l=hexlify(a.commitment);t.push({data:hexlify(a.data),commitment:l,proof:hexlify(a.proof)}),s.push(getVersionedHash(1,l))}}U(this,Bn,t),U(this,_n,s)}get kzg(){return I(this,kr)}set kzg(e){e==null?U(this,kr,null):U(this,kr,getKzgLibrary(e))}get hash(){return this.signature==null?null:keccak256(me(this,Ui,wc).call(this,!0,!1))}get unsignedHash(){return keccak256(this.unsignedSerialized)}get from(){return this.signature==null?null:recoverAddress(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return me(this,Ui,wc).call(this,!0,!0)}get unsignedSerialized(){return me(this,Ui,wc).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,i=I(this,Is)!=null||I(this,_n);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&assert(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),assert(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),assert(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const a=[];return this.type!=null?a.push(this.type):this.authorizationList&&this.authorizationList.length?a.push(4):t?a.push(2):e?(a.push(1),s||a.push(0)):s?(a.push(1),a.push(2)):(i&&this.to||(a.push(0),a.push(1),a.push(2)),a.push(3)),a.sort(),a}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Pr.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Pr;if(typeof e=="string"){const s=getBytes(e);if(s[0]>=127)return Pr.from(_parseLegacy(s));switch(s[0]){case 1:return Pr.from(_parseEip2930(s));case 2:return Pr.from(_parseEip1559(s));case 3:return Pr.from(_parseEip4844(s));case 4:return Pr.from(_parseEip7702(s))}assert(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Pr;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Signature.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(assertArgument(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),assertArgument(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(assertArgument(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),assertArgument(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};vr=new WeakMap,Ti=new WeakMap,ji=new WeakMap,Pi=new WeakMap,Ii=new WeakMap,$i=new WeakMap,ki=new WeakMap,_i=new WeakMap,Bi=new WeakMap,Oi=new WeakMap,Di=new WeakMap,Fi=new WeakMap,Is=new WeakMap,_n=new WeakMap,kr=new WeakMap,Bn=new WeakMap,Li=new WeakMap,Ui=new WeakSet,wc=function(e,t){assert(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return _serializeLegacy(this,s);case 1:return _serializeEip2930(this,s);case 2:return _serializeEip1559(this,s);case 3:return _serializeEip4844(this,s,t?this.blobs:null);case 4:return _serializeEip7702(this,s)}assert(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Transaction=Pr;function id(r){return keccak256(toUtf8Bytes(r))}var COMPRESSED$1="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const FENCED=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),NSM_MAX=4;function decode_arithmetic(r){let e=0;function t(){return r[e++]<<8|r[e++]}let s=t(),i=1,a=[0,1];for(let L=1;L<s;L++)a.push(i+=t());let l=t(),u=e;e+=l;let p=0,x=0;function w(){return p==0&&(x=x<<8|r[e++],p=8),x>>--p&1}const E=31,R=2**E,A=R>>>1,S=A>>1,N=R-1;let k=0;for(let L=0;L<E;L++)k=k<<1|w();let j=[],$=0,D=R;for(;;){let L=Math.floor(((k-$+1)*i-1)/D),M=0,G=s;for(;G-M>1;){let oe=M+G>>>1;L<a[oe]?G=oe:M=oe}if(M==0)break;j.push(M);let W=$+Math.floor(D*a[M]/i),q=$+Math.floor(D*a[M+1]/i)-1;for(;((W^q)&A)==0;)k=k<<1&N|w(),W=W<<1&N,q=q<<1&N|1;for(;W&~q&S;)k=k&A|k<<1&N>>>1|w(),W=W<<1^A,q=(q^A)<<1|A|1;$=W,D=1+q-W}let z=s-4;return j.map(L=>{switch(L-z){case 3:return z+65792+(r[u++]<<16|r[u++]<<8|r[u++]);case 2:return z+256+(r[u++]<<8|r[u++]);case 1:return z+r[u++];default:return L-1}})}function read_payload(r){let e=0;return()=>r[e++]}function read_compressed_payload(r){return read_payload(decode_arithmetic(unsafe_atob(r)))}function unsafe_atob(r){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,a)=>e[i.charCodeAt(0)]=a);let t=r.length,s=new Uint8Array(6*t>>3);for(let i=0,a=0,l=0,u=0;i<t;i++)u=u<<6|e[r.charCodeAt(i)],l+=6,l>=8&&(s[a++]=u>>(l-=8));return s}function signed(r){return r&1?~r>>1:r>>1}function read_deltas(r,e){let t=Array(r);for(let s=0,i=0;s<r;s++)t[s]=i+=signed(e());return t}function read_sorted(r,e=0){let t=[];for(;;){let s=r(),i=r();if(!i)break;e+=s;for(let a=0;a<i;a++)t.push(e+a);e+=i+1}return t}function read_sorted_arrays(r){return read_array_while(()=>{let e=read_sorted(r);if(e.length)return e})}function read_mapped(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(read_linear_table(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(read_replacement_table(t,r))}return e.flat()}function read_array_while(r){let e=[];for(;;){let t=r(e.length);if(!t)break;e.push(t)}return e}function read_transposed(r,e,t){let s=Array(r).fill().map(()=>[]);for(let i=0;i<e;i++)read_deltas(r,t).forEach((a,l)=>s[l].push(a));return s}function read_linear_table(r,e){let t=1+e(),s=e(),i=read_array_while(e);return read_transposed(i.length,1+r,e).flatMap((l,u)=>{let[p,...x]=l;return Array(i[u]).fill().map((w,E)=>{let R=E*s;return[p+E*t,x.map(A=>A+R)]})})}function read_replacement_table(r,e){let t=1+e();return read_transposed(t,1+r,e).map(i=>[i[0],i.slice(1)])}function read_trie(r){let e=[],t=read_sorted(r);return i(s([]),[]),e;function s(a){let l=r(),u=read_array_while(()=>{let p=read_sorted(r).map(x=>t[x]);if(p.length)return s(p)});return{S:l,B:u,Q:a}}function i({S:a,B:l},u,p){if(!(a&4&&p===u[u.length-1])){a&2&&(p=u[u.length-1]),a&1&&e.push(u);for(let x of l)for(let w of x.Q)i(x,[...u,w],p)}}}function hex_cp(r){return r.toString(16).toUpperCase().padStart(2,"0")}function quote_cp(r){return`{${hex_cp(r)}}`}function explode_cp(r){let e=[];for(let t=0,s=r.length;t<s;){let i=r.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function str_from_cps(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let s=[];for(let i=0;i<t;)s.push(String.fromCodePoint(...r.slice(i,i+=4096)));return s.join("")}function compare_arrays(r,e){let t=r.length,s=t-e.length;for(let i=0;s==0&&i<t;i++)s=r[i]-e[i];return s}var COMPRESSED="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const S0=44032,L0=4352,V0=4449,T0=4519,L_COUNT=19,V_COUNT=21,T_COUNT=28,N_COUNT=V_COUNT*T_COUNT,S_COUNT=L_COUNT*N_COUNT,S1=S0+S_COUNT,L1=L0+L_COUNT,V1=V0+V_COUNT,T1=T0+T_COUNT;function unpack_cc(r){return r>>24&255}function unpack_cp(r){return r&16777215}let SHIFTED_RANK,EXCLUSIONS,DECOMP,RECOMP;function init$1(){let r=read_compressed_payload(COMPRESSED);SHIFTED_RANK=new Map(read_sorted_arrays(r).flatMap((e,t)=>e.map(s=>[s,t+1<<24]))),EXCLUSIONS=new Set(read_sorted(r)),DECOMP=new Map,RECOMP=new Map;for(let[e,t]of read_mapped(r)){if(!EXCLUSIONS.has(e)&&t.length==2){let[s,i]=t,a=RECOMP.get(s);a||(a=new Map,RECOMP.set(s,a)),a.set(i,e)}DECOMP.set(e,t.reverse())}}function is_hangul(r){return r>=S0&&r<S1}function compose_pair(r,e){if(r>=L0&&r<L1&&e>=V0&&e<V1)return S0+(r-L0)*N_COUNT+(e-V0)*T_COUNT;if(is_hangul(r)&&e>T0&&e<T1&&(r-S0)%T_COUNT==0)return r+(e-T0);{let t=RECOMP.get(r);return t&&(t=t.get(e),t)?t:-1}}function decomposed(r){SHIFTED_RANK||init$1();let e=[],t=[],s=!1;function i(a){let l=SHIFTED_RANK.get(a);l&&(s=!0,a|=l),e.push(a)}for(let a of r)for(;;){if(a<128)e.push(a);else if(is_hangul(a)){let l=a-S0,u=l/N_COUNT|0,p=l%N_COUNT/T_COUNT|0,x=l%T_COUNT;i(L0+u),i(V0+p),x>0&&i(T0+x)}else{let l=DECOMP.get(a);l?t.push(...l):i(a)}if(!t.length)break;a=t.pop()}if(s&&e.length>1){let a=unpack_cc(e[0]);for(let l=1;l<e.length;l++){let u=unpack_cc(e[l]);if(u==0||a<=u){a=u;continue}let p=l-1;for(;;){let x=e[p+1];if(e[p+1]=e[p],e[p]=x,!p||(a=unpack_cc(e[--p]),a<=u))break}a=unpack_cc(e[l])}}return e}function composed_from_decomposed(r){let e=[],t=[],s=-1,i=0;for(let a of r){let l=unpack_cc(a),u=unpack_cp(a);if(s==-1)l==0?s=u:e.push(u);else if(i>0&&i>=l)l==0?(e.push(s,...t),t.length=0,s=u):t.push(u),i=l;else{let p=compose_pair(s,u);p>=0?s=p:i==0&&l==0?(e.push(s),s=u):(t.push(u),i=l)}}return s>=0&&e.push(s,...t),e}function nfd(r){return decomposed(r).map(unpack_cp)}function nfc(r){return composed_from_decomposed(decomposed(r))}const HYPHEN=45,STOP_CH=".",FE0F=65039,UNIQUE_PH=1,Array_from=r=>Array.from(r);function group_has_cp(r,e){return r.P.has(e)||r.Q.has(e)}class Emoji extends Array{get is_emoji(){return!0}}let MAPPED,IGNORED,CM,NSM,ESCAPE,GROUPS,WHOLE_VALID,WHOLE_MAP,VALID,EMOJI_LIST,EMOJI_ROOT;function init(){if(MAPPED)return;let r=read_compressed_payload(COMPRESSED$1);const e=()=>read_sorted(r),t=()=>new Set(e()),s=(w,E)=>E.forEach(R=>w.add(R));MAPPED=new Map(read_mapped(r)),IGNORED=t(),CM=e(),NSM=new Set(e().map(w=>CM[w])),CM=new Set(CM),ESCAPE=t(),t();let i=read_sorted_arrays(r),a=r();const l=()=>{let w=new Set;return e().forEach(E=>s(w,i[E])),s(w,e()),w};GROUPS=read_array_while(w=>{let E=read_array_while(r).map(R=>R+96);if(E.length){let R=w>=a;E[0]-=32,E=str_from_cps(E),R&&(E=`Restricted[${E}]`);let A=l(),S=l(),N=!r();return{N:E,P:A,Q:S,M:N,R}}}),WHOLE_VALID=t(),WHOLE_MAP=new Map;let u=e().concat(Array_from(WHOLE_VALID)).sort((w,E)=>w-E);u.forEach((w,E)=>{let R=r(),A=u[E]=R?u[E-R]:{V:[],M:new Map};A.V.push(w),WHOLE_VALID.has(w)||WHOLE_MAP.set(w,A)});for(let{V:w,M:E}of new Set(WHOLE_MAP.values())){let R=[];for(let S of w){let N=GROUPS.filter(j=>group_has_cp(j,S)),k=R.find(({G:j})=>N.some($=>j.has($)));k||(k={G:new Set,V:[]},R.push(k)),k.V.push(S),s(k.G,N)}let A=R.flatMap(S=>Array_from(S.G));for(let{G:S,V:N}of R){let k=new Set(A.filter(j=>!S.has(j)));for(let j of N)E.set(j,k)}}VALID=new Set;let p=new Set;const x=w=>VALID.has(w)?p.add(w):VALID.add(w);for(let w of GROUPS){for(let E of w.P)x(E);for(let E of w.Q)x(E)}for(let w of VALID)!WHOLE_MAP.has(w)&&!p.has(w)&&WHOLE_MAP.set(w,UNIQUE_PH);s(VALID,nfd(VALID)),EMOJI_LIST=read_trie(r).map(w=>Emoji.from(w)).sort(compare_arrays),EMOJI_ROOT=new Map;for(let w of EMOJI_LIST){let E=[EMOJI_ROOT];for(let R of w){let A=E.map(S=>{let N=S.get(R);return N||(N=new Map,S.set(R,N)),N});R===FE0F?E.push(...A):E=A}for(let R of E)R.V=w}}function quoted_cp(r){return(should_escape(r)?"":`${bidi_qq(safe_str_from_cps([r]))} `)+quote_cp(r)}function bidi_qq(r){return`"${r}"`}function check_label_extension(r){if(r.length>=4&&r[2]==HYPHEN&&r[3]==HYPHEN)throw new Error(`invalid label extension: "${str_from_cps(r.slice(0,4))}"`)}function check_leading_underscore(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function check_fenced(r){let e=r[0],t=FENCED.get(e);if(t)throw error_placement(`leading ${t}`);let s=r.length,i=-1;for(let a=1;a<s;a++){e=r[a];let l=FENCED.get(e);if(l){if(i==a)throw error_placement(`${t} + ${l}`);i=a+1,t=l}}if(i==s)throw error_placement(`trailing ${t}`)}function safe_str_from_cps(r,e=1/0,t=quote_cp){let s=[];is_combining_mark(r[0])&&s.push(""),r.length>e&&(e>>=1,r=[...r.slice(0,e),8230,...r.slice(-e)]);let i=0,a=r.length;for(let l=0;l<a;l++){let u=r[l];should_escape(u)&&(s.push(str_from_cps(r.slice(i,l))),s.push(t(u)),i=l+1)}return s.push(str_from_cps(r.slice(i,a))),s.join("")}function is_combining_mark(r){return init(),CM.has(r)}function should_escape(r){return init(),ESCAPE.has(r)}function ens_normalize(r){return flatten(split(r,nfc,filter_fe0f))}function split(r,e,t){if(!r)return[];init();let s=0;return r.split(STOP_CH).map(i=>{let a=explode_cp(i),l={input:a,offset:s};s+=a.length+1;try{let u=l.tokens=tokens_from_str(a,e,t),p=u.length,x;if(!p)throw new Error("empty label");let w=l.output=u.flat();if(check_leading_underscore(w),!(l.emoji=p>1||u[0].is_emoji)&&w.every(R=>R<128))check_label_extension(w),x="ASCII";else{let R=u.flatMap(A=>A.is_emoji?[]:A);if(!R.length)x="Emoji";else{if(CM.has(w[0]))throw error_placement("leading combining mark");for(let N=1;N<p;N++){let k=u[N];if(!k.is_emoji&&CM.has(k[0]))throw error_placement(`emoji + combining mark: "${str_from_cps(u[N-1])} + ${safe_str_from_cps([k[0]])}"`)}check_fenced(w);let A=Array_from(new Set(R)),[S]=determine_group(A);check_group(S,R),check_whole(S,A),x=S.N}}l.type=x}catch(u){l.error=u}return l})}function check_whole(r,e){let t,s=[];for(let i of e){let a=WHOLE_MAP.get(i);if(a===UNIQUE_PH)return;if(a){let l=a.M.get(i);if(t=t?t.filter(u=>l.has(u)):Array_from(l),!t.length)return}else s.push(i)}if(t){for(let i of t)if(s.every(a=>group_has_cp(i,a)))throw new Error(`whole-script confusable: ${r.N}/${i.N}`)}}function determine_group(r){let e=GROUPS;for(let t of r){let s=e.filter(i=>group_has_cp(i,t));if(!s.length)throw GROUPS.some(i=>group_has_cp(i,t))?error_group_member(e[0],t):error_disallowed(t);if(e=s,s.length==1)break}return e}function flatten(r){return r.map(({input:e,error:t,output:s})=>{if(t){let i=t.message;throw new Error(r.length==1?i:`Invalid label ${bidi_qq(safe_str_from_cps(e,63))}: ${i}`)}return str_from_cps(s)}).join(STOP_CH)}function error_disallowed(r){return new Error(`disallowed character: ${quoted_cp(r)}`)}function error_group_member(r,e){let t=quoted_cp(e),s=GROUPS.find(i=>i.P.has(e));return s&&(t=`${s.N} ${t}`),new Error(`illegal mixture: ${r.N} + ${t}`)}function error_placement(r){return new Error(`illegal placement: ${r}`)}function check_group(r,e){for(let t of e)if(!group_has_cp(r,t))throw error_group_member(r,t);if(r.M){let t=nfd(e);for(let s=1,i=t.length;s<i;s++)if(NSM.has(t[s])){let a=s+1;for(let l;a<i&&NSM.has(l=t[a]);a++)for(let u=s;u<a;u++)if(t[u]==l)throw new Error(`duplicate non-spacing marks: ${quoted_cp(l)}`);if(a-s>NSM_MAX)throw new Error(`excessive non-spacing marks: ${bidi_qq(safe_str_from_cps(t.slice(s-1,a)))} (${a-s}/${NSM_MAX})`);s=a}}}function tokens_from_str(r,e,t){let s=[],i=[];for(r=r.slice().reverse();r.length;){let a=consume_emoji_reversed(r);if(a)i.length&&(s.push(e(i)),i=[]),s.push(t(a));else{let l=r.pop();if(VALID.has(l))i.push(l);else{let u=MAPPED.get(l);if(u)i.push(...u);else if(!IGNORED.has(l))throw error_disallowed(l)}}}return i.length&&s.push(e(i)),s}function filter_fe0f(r){return r.filter(e=>e!=FE0F)}function consume_emoji_reversed(r,e){let t=EMOJI_ROOT,s,i=r.length;for(;i&&(t=t.get(r[--i]),!!t);){let{V:a}=t;a&&(s=a,r.length=i)}return s}const Zeros=new Uint8Array(32);Zeros.fill(0);function checkComponent(r){return assertArgument(r.length!==0,"invalid ENS name; empty component","comp",r),r}function ensNameSplit(r){const e=toUtf8Bytes(ensNormalize(r)),t=[];if(r.length===0)return t;let s=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(checkComponent(e.slice(s,i))),s=i+1);return assertArgument(s<e.length,"invalid ENS name; empty component","name",r),t.push(checkComponent(e.slice(s))),t}function ensNormalize(r){try{if(r.length===0)throw new Error("empty label");return ens_normalize(r)}catch(e){assertArgument(!1,`invalid ENS name (${e.message})`,"name",r)}}function namehash(r){assertArgument(typeof r=="string","invalid ENS name; not a string","name",r),assertArgument(r.length,"invalid ENS name (empty label)","name",r);let e=Zeros;const t=ensNameSplit(r);for(;t.length;)e=keccak256(concat$3([e,keccak256(t.pop())]));return hexlify(e)}function dnsEncode(r,e){const t=e;return assertArgument(t<=255,"DNS encoded label cannot exceed 255","length",t),hexlify(concat$3(ensNameSplit(r).map(s=>{assertArgument(s.length<=t,`label ${JSON.stringify(r)} exceeds ${t} bytes`,"name",r);const i=new Uint8Array(s.length+1);return i.set(s,1),i[0]=i.length-1,i})))+"00"}const padding=new Uint8Array(32);padding.fill(0);const BN__1=BigInt(-1),BN_0$3=BigInt(0),BN_1=BigInt(1),BN_MAX_UINT256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(r){const e=getBytes(r),t=e.length%32;return t?concat$3([e,padding.slice(t)]):hexlify(e)}const hexTrue=toBeHex(BN_1,32),hexFalse=toBeHex(BN_0$3,32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(r){return function(e){return assertArgument(typeof e=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(r){const e=getBigInt(r,"domain.chainId");return assertArgument(e>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(e)?Number(e):toQuantity(e)},verifyingContract:function(r){try{return getAddress(r).toLowerCase()}catch{}assertArgument(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const e=getBytes(r,"domain.salt");return assertArgument(e.length===32,'invalid domain value "salt"',"domain.salt",r),hexlify(e)}};function getBaseEncoder(r){{const e=r.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",s=parseInt(e[2]);assertArgument(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",r);const i=mask(BN_MAX_UINT256,t?s-1:s),a=t?(i+BN_1)*BN__1:BN_0$3;return function(l){const u=getBigInt(l,"value");return assertArgument(u>=a&&u<=i,`value out-of-bounds for ${r}`,"value",u),toBeHex(t?toTwos(u,256):u,32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return assertArgument(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",r),function(s){const i=getBytes(s);return assertArgument(i.length===t,`invalid length for ${r}`,"value",s),hexPadRight(s)}}}switch(r){case"address":return function(e){return zeroPadValue(getAddress(e),32)};case"bool":return function(e){return e?hexTrue:hexFalse};case"bytes":return function(e){return keccak256(e)};case"string":return function(e){return id(e)}}return null}function encodeType(r,e){return`${r}(${e.map(({name:t,type:s})=>s+" "+t).join(",")})`}function splitArray(r){const e=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:r}}var Yo,rn,Mi,Cc,Ph;const rr=class rr{constructor(e){re(this,Cc);O(this,"primaryType");re(this,Yo);re(this,rn);re(this,Mi);U(this,rn,new Map),U(this,Mi,new Map);const t=new Map,s=new Map,i=new Map,a={};Object.keys(e).forEach(p=>{a[p]=e[p].map(({name:x,type:w})=>{let{base:E,index:R}=splitArray(w);return E==="int"&&!e.int&&(E="int256"),E==="uint"&&!e.uint&&(E="uint256"),{name:x,type:E+(R||"")}}),t.set(p,new Set),s.set(p,[]),i.set(p,new Set)}),U(this,Yo,JSON.stringify(a));for(const p in a){const x=new Set;for(const w of a[p]){assertArgument(!x.has(w.name),`duplicate variable name ${JSON.stringify(w.name)} in ${JSON.stringify(p)}`,"types",e),x.add(w.name);const E=splitArray(w.type).base;assertArgument(E!==p,`circular type reference to ${JSON.stringify(E)}`,"types",e),!getBaseEncoder(E)&&(assertArgument(s.has(E),`unknown type ${JSON.stringify(E)}`,"types",e),s.get(E).push(p),t.get(p).add(E))}}const l=Array.from(s.keys()).filter(p=>s.get(p).length===0);assertArgument(l.length!==0,"missing primary type","types",e),assertArgument(l.length===1,`ambiguous primary types or unused types: ${l.map(p=>JSON.stringify(p)).join(", ")}`,"types",e),defineProperties(this,{primaryType:l[0]});function u(p,x){assertArgument(!x.has(p),`circular type reference to ${JSON.stringify(p)}`,"types",e),x.add(p);for(const w of t.get(p))if(s.has(w)){u(w,x);for(const E of x)i.get(E).add(w)}x.delete(p)}u(this.primaryType,new Set);for(const[p,x]of i){const w=Array.from(x);w.sort(),I(this,rn).set(p,encodeType(p,a[p])+w.map(E=>encodeType(E,a[E])).join(""))}}get types(){return JSON.parse(I(this,Yo))}getEncoder(e){let t=I(this,Mi).get(e);return t||(t=me(this,Cc,Ph).call(this,e),I(this,Mi).set(e,t)),t}encodeType(e){const t=I(this,rn).get(e);return assertArgument(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return keccak256(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,s){if(getBaseEncoder(e))return s(e,t);const i=splitArray(e).array;if(i)return assertArgument(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(l=>this._visit(i.prefix,l,s));const a=this.types[e];if(a)return a.reduce((l,{name:u,type:p})=>(l[u]=this._visit(p,t[u],s),l),{});assertArgument(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new rr(e)}static getPrimaryType(e){return rr.from(e).primaryType}static hashStruct(e,t,s){return rr.from(t).hashStruct(e,s)}static hashDomain(e){const t=[];for(const s in e){if(e[s]==null)continue;const i=domainFieldTypes[s];assertArgument(i,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),t.push({name:s,type:i})}return t.sort((s,i)=>domainFieldNames.indexOf(s.name)-domainFieldNames.indexOf(i.name)),rr.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,s){return concat$3(["0x1901",rr.hashDomain(e),rr.from(t).hash(s)])}static hash(e,t,s){return keccak256(rr.encode(e,t,s))}static async resolveNames(e,t,s,i){e=Object.assign({},e);for(const u in e)e[u]==null&&delete e[u];const a={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(a[e.verifyingContract]="0x");const l=rr.from(t);l.visit(s,(u,p)=>(u==="address"&&!isHexString(p,20)&&(a[p]="0x"),p));for(const u in a)a[u]=await i(u);return e.verifyingContract&&a[e.verifyingContract]&&(e.verifyingContract=a[e.verifyingContract]),s=l.visit(s,(u,p)=>u==="address"&&a[p]?a[p]:p),{domain:e,value:s}}static getPayload(e,t,s){rr.hashDomain(e);const i={},a=[];domainFieldNames.forEach(p=>{const x=e[p];x!=null&&(i[p]=domainChecks[p](x),a.push({name:p,type:domainFieldTypes[p]}))});const l=rr.from(t);t=l.types;const u=Object.assign({},t);return assertArgument(u.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),u.EIP712Domain=a,l.encode(s),{types:u,domain:i,primaryType:l.primaryType,message:l.visit(s,(p,x)=>{if(p.match(/^bytes(\d*)/))return hexlify(getBytes(x));if(p.match(/^u?int/))return getBigInt(x).toString();switch(p){case"address":return x.toLowerCase();case"bool":return!!x;case"string":return assertArgument(typeof x=="string","invalid string","value",x),x}assertArgument(!1,"unsupported type","type",p)})}}};Yo=new WeakMap,rn=new WeakMap,Mi=new WeakMap,Cc=new WeakSet,Ph=function(e){{const i=getBaseEncoder(e);if(i)return i}const t=splitArray(e).array;if(t){const i=t.prefix,a=this.getEncoder(i);return l=>{assertArgument(t.count===-1||t.count===l.length,`array length mismatch; expected length ${t.count}`,"value",l);let u=l.map(a);return I(this,rn).has(i)&&(u=u.map(keccak256)),keccak256(concat$3(u))}}const s=this.types[e];if(s){const i=id(I(this,rn).get(e));return a=>{const l=s.map(({name:u,type:p})=>{const x=this.getEncoder(p)(a[u]);return I(this,rn).has(p)?keccak256(x):x});return l.unshift(i),concat$3(l)}}assertArgument(!1,`unknown type: ${e}`,"type",e)};let TypedDataEncoder=rr;function setify(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const _kwVisibDeploy="external public payable override",KwVisibDeploy=setify(_kwVisibDeploy.split(" ")),_kwVisib="constant external internal payable private public pure view override",KwVisib=setify(_kwVisib.split(" ")),_kwTypes="constructor error event fallback function receive struct",KwTypes=setify(_kwTypes.split(" ")),_kwModifiers="calldata memory storage payable indexed",KwModifiers=setify(_kwModifiers.split(" ")),_kwOther="tuple returns",_keywords=[_kwTypes,_kwModifiers,_kwOther,_kwVisib].join(" "),Keywords=setify(_keywords.split(" ")),SimpleTokens={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},regexWhitespacePrefix=new RegExp("^(\\s*)"),regexNumberPrefix=new RegExp("^([0-9]+)"),regexIdPrefix=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),regexId=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),regexType=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var mt,Sr,Zo,Cu;const Nc=class Nc{constructor(e){re(this,Zo);re(this,mt);re(this,Sr);U(this,mt,0),U(this,Sr,e.slice())}get offset(){return I(this,mt)}get length(){return I(this,Sr).length-I(this,mt)}clone(){return new Nc(I(this,Sr))}reset(){U(this,mt,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=me(this,Zo,Cu).call(this,I(this,mt)+1,e.match+1);return U(this,mt,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;I(this,mt)<e.match-1;){const s=this.peek().linkNext;t.push(me(this,Zo,Cu).call(this,I(this,mt)+1,s)),U(this,mt,s)}return U(this,mt,e.match+1),t}peek(){if(I(this,mt)>=I(this,Sr).length)throw new Error("out-of-bounds");return I(this,Sr)[I(this,mt)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Vo(this,mt)._++,e}toString(){const e=[];for(let t=I(this,mt);t<I(this,Sr).length;t++){const s=I(this,Sr)[t];e.push(`${s.type}:${s.text}`)}return`<TokenString ${e.join(" ")}>`}};mt=new WeakMap,Sr=new WeakMap,Zo=new WeakSet,Cu=function(e=0,t=0){return new Nc(I(this,Sr).slice(e,t).map(s=>Object.freeze(Object.assign({},s,{match:s.match-e,linkBack:s.linkBack-e,linkNext:s.linkNext-e}))))};let TokenString=Nc;function lex(r){const e=[],t=l=>{const u=a<r.length?JSON.stringify(r[a]):"$EOI";throw new Error(`invalid token ${u} at ${a}: ${l}`)};let s=[],i=[],a=0;for(;a<r.length;){let l=r.substring(a),u=l.match(regexWhitespacePrefix);u&&(a+=u[1].length,l=r.substring(a));const p={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};e.push(p);let x=SimpleTokens[l[0]]||"";if(x){if(p.type=x,p.text=l[0],a++,x==="OPEN_PAREN")s.push(e.length-1),i.push(e.length-1);else if(x=="CLOSE_PAREN")s.length===0&&t("no matching open bracket"),p.match=s.pop(),e[p.match].match=e.length-1,p.depth--,p.linkBack=i.pop(),e[p.linkBack].linkNext=e.length-1;else if(x==="COMMA")p.linkBack=i.pop(),e[p.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(x==="OPEN_BRACKET")p.type="BRACKET";else if(x==="CLOSE_BRACKET"){let w=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const E=e.pop().text;w=E+w,e[e.length-1].value=getNumber(E)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=w}continue}if(u=l.match(regexIdPrefix),u){if(p.text=u[1],a+=p.text.length,Keywords.has(p.text)){p.type="KEYWORD";continue}if(p.text.match(regexType)){p.type="TYPE";continue}p.type="ID";continue}if(u=l.match(regexNumberPrefix),u){p.text=u[1],p.type="NUMBER",a+=p.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(l[0])} at position ${a}`)}return new TokenString(e.map(l=>Object.freeze(l)))}function allowSingle(r,e){let t=[];for(const s in e.keys())r.has(s)&&t.push(s);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function consumeName(r,e){if(e.peekKeyword(KwTypes)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function consumeKeywords(r,e){const t=new Set;for(;;){const s=r.peekType("KEYWORD");if(s==null||e&&!e.has(s))break;if(r.pop(),t.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);t.add(s)}return Object.freeze(t)}function consumeMutability(r){let e=consumeKeywords(r,KwVisib);return allowSingle(e,setify("constant payable nonpayable".split(" "))),allowSingle(e,setify("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function consumeParams(r,e){return r.popParams().map(t=>ParamType.from(t,e))}function consumeGas(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return getBigInt(r.pop().text);throw new Error("invalid gas")}return null}function consumeEoi(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const regexArrayType=new RegExp(/^(.*)\[([0-9]*)\]$/);function verifyBasicType(r){const e=r.match(regexType);if(assertArgument(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);assertArgument(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);assertArgument(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const _guard={},internal$1=Symbol.for("_ethers_internal"),ParamTypeInternal="_ParamTypeInternal",ErrorFragmentInternal="_ErrorInternal",EventFragmentInternal="_EventInternal",ConstructorFragmentInternal="_ConstructorInternal",FallbackFragmentInternal="_FallbackInternal",FunctionFragmentInternal="_FunctionInternal",StructFragmentInternal="_StructInternal";var zi,Ec;const nr=class nr{constructor(e,t,s,i,a,l,u,p){re(this,zi);O(this,"name");O(this,"type");O(this,"baseType");O(this,"indexed");O(this,"components");O(this,"arrayLength");O(this,"arrayChildren");if(assertPrivate(e,_guard,"ParamType"),Object.defineProperty(this,internal$1,{value:ParamTypeInternal}),l&&(l=Object.freeze(l.slice())),i==="array"){if(u==null||p==null)throw new Error("")}else if(u!=null||p!=null)throw new Error("");if(i==="tuple"){if(l==null)throw new Error("")}else if(l!=null)throw new Error("");defineProperties(this,{name:t,type:s,baseType:i,indexed:a,components:l,arrayLength:u,arrayChildren:p})}format(e){if(e==null&&(e="sighash"),e==="json"){const s=this.name||"";if(this.isArray()){const a=JSON.parse(this.arrayChildren.format("json"));return a.name=s,a.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(a)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:s};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(a=>JSON.parse(a.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(s=>s.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return e.map(i=>s.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const s=this;return e.map((i,a)=>s.components[a].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const s=[],i=[e];return me(this,zi,Ec).call(this,s,e,t,a=>{i[0]=a}),s.length&&await Promise.all(s),i[0]}static from(e,t){if(nr.isParamType(e))return e;if(typeof e=="string")try{return nr.from(lex(e),t)}catch{assertArgument(!1,"invalid param type","obj",e)}else if(e instanceof TokenString){let u="",p="",x=null;consumeKeywords(e,setify(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(p="tuple",x=e.popParams().map(N=>nr.from(N)),u=`tuple(${x.map(N=>N.format()).join(",")})`):(u=verifyBasicType(e.popType("TYPE")),p=u);let w=null,E=null;for(;e.length&&e.peekType("BRACKET");){const N=e.pop();w=new nr(_guard,"",u,p,null,x,E,w),E=N.value,u+=N.text,p="array",x=null}let R=null;if(consumeKeywords(e,KwModifiers).has("indexed")){if(!t)throw new Error("");R=!0}const S=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new nr(_guard,S,u,p,R,x,E,w)}const s=e.name;assertArgument(!s||typeof s=="string"&&s.match(regexId),"invalid name","obj.name",s);let i=e.indexed;i!=null&&(assertArgument(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let a=e.type,l=a.match(regexArrayType);if(l){const u=parseInt(l[2]||"-1"),p=nr.from({type:l[1],components:e.components});return new nr(_guard,s||"",a,"array",i,null,u,p)}if(a==="tuple"||a.startsWith("tuple(")||a.startsWith("(")){const u=e.components!=null?e.components.map(x=>nr.from(x)):null;return new nr(_guard,s||"",a,"tuple",i,u,null,null)}return a=verifyBasicType(e.type),new nr(_guard,s||"",a,a,i,null,null,null)}static isParamType(e){return e&&e[internal$1]===ParamTypeInternal}};zi=new WeakSet,Ec=function(e,t,s,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const l=this.arrayChildren,u=t.slice();u.forEach((p,x)=>{var w;me(w=l,zi,Ec).call(w,e,p,s,E=>{u[x]=E})}),i(u);return}if(this.isTuple()){const l=this.components;let u;if(Array.isArray(t))u=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");u=l.map(p=>{if(!p.name)throw new Error("cannot use object value with unnamed components");if(!(p.name in t))throw new Error(`missing value for component ${p.name}`);return t[p.name]})}if(u.length!==this.components.length)throw new Error("array is wrong length");u.forEach((p,x)=>{var w;me(w=l[x],zi,Ec).call(w,e,p,s,E=>{u[x]=E})}),i(u);return}const a=s(this.type,t);a.then?e.push(async function(){i(await a)}()):i(a)};let ParamType=nr;class Fragment{constructor(e,t,s){O(this,"type");O(this,"inputs");assertPrivate(e,_guard,"Fragment"),s=Object.freeze(s.slice()),defineProperties(this,{type:t,inputs:s})}static from(e){if(typeof e=="string"){try{Fragment.from(JSON.parse(e))}catch{}return Fragment.from(lex(e))}if(e instanceof TokenString)switch(e.peekKeyword(KwTypes)){case"constructor":return ConstructorFragment.from(e);case"error":return ErrorFragment.from(e);case"event":return EventFragment.from(e);case"fallback":case"receive":return FallbackFragment.from(e);case"function":return FunctionFragment.from(e);case"struct":return StructFragment.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return ConstructorFragment.from(e);case"error":return ErrorFragment.from(e);case"event":return EventFragment.from(e);case"fallback":case"receive":return FallbackFragment.from(e);case"function":return FunctionFragment.from(e);case"struct":return StructFragment.from(e)}assert(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}assertArgument(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return ConstructorFragment.isFragment(e)}static isError(e){return ErrorFragment.isFragment(e)}static isEvent(e){return EventFragment.isFragment(e)}static isFunction(e){return FunctionFragment.isFragment(e)}static isStruct(e){return StructFragment.isFragment(e)}}class NamedFragment extends Fragment{constructor(t,s,i,a){super(t,s,a);O(this,"name");assertArgument(typeof i=="string"&&i.match(regexId),"invalid identifier","name",i),a=Object.freeze(a.slice()),defineProperties(this,{name:i})}}function joinParams(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class ErrorFragment extends NamedFragment{constructor(e,t,s){super(e,"error",t,s),Object.defineProperty(this,internal$1,{value:ErrorFragmentInternal})}get selector(){return id(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+joinParams(e,this.inputs)),t.join(" ")}static from(e){if(ErrorFragment.isFragment(e))return e;if(typeof e=="string")return ErrorFragment.from(lex(e));if(e instanceof TokenString){const t=consumeName("error",e),s=consumeParams(e);return consumeEoi(e),new ErrorFragment(_guard,t,s)}return new ErrorFragment(_guard,e.name,e.inputs?e.inputs.map(ParamType.from):[])}static isFragment(e){return e&&e[internal$1]===ErrorFragmentInternal}}class EventFragment extends NamedFragment{constructor(t,s,i,a){super(t,"event",s,i);O(this,"anonymous");Object.defineProperty(this,internal$1,{value:EventFragmentInternal}),defineProperties(this,{anonymous:a})}get topicHash(){return id(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const s=[];return t!=="sighash"&&s.push("event"),s.push(this.name+joinParams(t,this.inputs)),t!=="sighash"&&this.anonymous&&s.push("anonymous"),s.join(" ")}static getTopicHash(t,s){return s=(s||[]).map(a=>ParamType.from(a)),new EventFragment(_guard,t,s,!1).topicHash}static from(t){if(EventFragment.isFragment(t))return t;if(typeof t=="string")try{return EventFragment.from(lex(t))}catch{assertArgument(!1,"invalid event fragment","obj",t)}else if(t instanceof TokenString){const s=consumeName("event",t),i=consumeParams(t,!0),a=!!consumeKeywords(t,setify(["anonymous"])).has("anonymous");return consumeEoi(t),new EventFragment(_guard,s,i,a)}return new EventFragment(_guard,t.name,t.inputs?t.inputs.map(s=>ParamType.from(s,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[internal$1]===EventFragmentInternal}}class ConstructorFragment extends Fragment{constructor(t,s,i,a,l){super(t,s,i);O(this,"payable");O(this,"gas");Object.defineProperty(this,internal$1,{value:ConstructorFragmentInternal}),defineProperties(this,{payable:a,gas:l})}format(t){if(assert(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const s=[`constructor${joinParams(t,this.inputs)}`];return this.payable&&s.push("payable"),this.gas!=null&&s.push(`@${this.gas.toString()}`),s.join(" ")}static from(t){if(ConstructorFragment.isFragment(t))return t;if(typeof t=="string")try{return ConstructorFragment.from(lex(t))}catch{assertArgument(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof TokenString){consumeKeywords(t,setify(["constructor"]));const s=consumeParams(t),i=!!consumeKeywords(t,KwVisibDeploy).has("payable"),a=consumeGas(t);return consumeEoi(t),new ConstructorFragment(_guard,"constructor",s,i,a)}return new ConstructorFragment(_guard,"constructor",t.inputs?t.inputs.map(ParamType.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[internal$1]===ConstructorFragmentInternal}}class FallbackFragment extends Fragment{constructor(t,s,i){super(t,"fallback",s);O(this,"payable");Object.defineProperty(this,internal$1,{value:FallbackFragmentInternal}),defineProperties(this,{payable:i})}format(t){const s=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:s,stateMutability:i})}return`${s}()${this.payable?" payable":""}`}static from(t){if(FallbackFragment.isFragment(t))return t;if(typeof t=="string")try{return FallbackFragment.from(lex(t))}catch{assertArgument(!1,"invalid fallback fragment","obj",t)}else if(t instanceof TokenString){const s=t.toString(),i=t.peekKeyword(setify(["fallback","receive"]));if(assertArgument(i,"type must be fallback or receive","obj",s),t.popKeyword(setify(["fallback","receive"]))==="receive"){const p=consumeParams(t);return assertArgument(p.length===0,"receive cannot have arguments","obj.inputs",p),consumeKeywords(t,setify(["payable"])),consumeEoi(t),new FallbackFragment(_guard,[],!0)}let l=consumeParams(t);l.length?assertArgument(l.length===1&&l[0].type==="bytes","invalid fallback inputs","obj.inputs",l.map(p=>p.format("minimal")).join(", ")):l=[ParamType.from("bytes")];const u=consumeMutability(t);if(assertArgument(u==="nonpayable"||u==="payable","fallback cannot be constants","obj.stateMutability",u),consumeKeywords(t,setify(["returns"])).has("returns")){const p=consumeParams(t);assertArgument(p.length===1&&p[0].type==="bytes","invalid fallback outputs","obj.outputs",p.map(x=>x.format("minimal")).join(", "))}return consumeEoi(t),new FallbackFragment(_guard,l,u==="payable")}if(t.type==="receive")return new FallbackFragment(_guard,[],!0);if(t.type==="fallback"){const s=[ParamType.from("bytes")],i=t.stateMutability==="payable";return new FallbackFragment(_guard,s,i)}assertArgument(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[internal$1]===FallbackFragmentInternal}}class FunctionFragment extends NamedFragment{constructor(t,s,i,a,l,u){super(t,"function",s,a);O(this,"constant");O(this,"outputs");O(this,"stateMutability");O(this,"payable");O(this,"gas");Object.defineProperty(this,internal$1,{value:FunctionFragmentInternal}),l=Object.freeze(l.slice()),defineProperties(this,{constant:i==="view"||i==="pure",gas:u,outputs:l,payable:i==="payable",stateMutability:i})}get selector(){return id(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const s=[];return t!=="sighash"&&s.push("function"),s.push(this.name+joinParams(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&s.push(this.stateMutability),this.outputs&&this.outputs.length&&(s.push("returns"),s.push(joinParams(t,this.outputs))),this.gas!=null&&s.push(`@${this.gas.toString()}`)),s.join(" ")}static getSelector(t,s){return s=(s||[]).map(a=>ParamType.from(a)),new FunctionFragment(_guard,t,"view",s,[],null).selector}static from(t){if(FunctionFragment.isFragment(t))return t;if(typeof t=="string")try{return FunctionFragment.from(lex(t))}catch{assertArgument(!1,"invalid function fragment","obj",t)}else if(t instanceof TokenString){const i=consumeName("function",t),a=consumeParams(t),l=consumeMutability(t);let u=[];consumeKeywords(t,setify(["returns"])).has("returns")&&(u=consumeParams(t));const p=consumeGas(t);return consumeEoi(t),new FunctionFragment(_guard,i,l,a,u,p)}let s=t.stateMutability;return s==null&&(s="payable",typeof t.constant=="boolean"?(s="view",t.constant||(s="payable",typeof t.payable=="boolean"&&!t.payable&&(s="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(s="nonpayable")),new FunctionFragment(_guard,t.name,s,t.inputs?t.inputs.map(ParamType.from):[],t.outputs?t.outputs.map(ParamType.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[internal$1]===FunctionFragmentInternal}}class StructFragment extends NamedFragment{constructor(e,t,s){super(e,"struct",t,s),Object.defineProperty(this,internal$1,{value:StructFragmentInternal})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return StructFragment.from(lex(e))}catch{assertArgument(!1,"invalid struct fragment","obj",e)}else if(e instanceof TokenString){const t=consumeName("struct",e),s=consumeParams(e);return consumeEoi(e),new StructFragment(_guard,t,s)}return new StructFragment(_guard,e.name,e.inputs?e.inputs.map(ParamType.from):[])}static isFragment(e){return e&&e[internal$1]===StructFragmentInternal}}const PanicReasons$1=new Map;PanicReasons$1.set(0,"GENERIC_PANIC");PanicReasons$1.set(1,"ASSERT_FALSE");PanicReasons$1.set(17,"OVERFLOW");PanicReasons$1.set(18,"DIVIDE_BY_ZERO");PanicReasons$1.set(33,"ENUM_RANGE_ERROR");PanicReasons$1.set(34,"BAD_STORAGE_DATA");PanicReasons$1.set(49,"STACK_UNDERFLOW");PanicReasons$1.set(50,"ARRAY_RANGE_ERROR");PanicReasons$1.set(65,"OUT_OF_MEMORY");PanicReasons$1.set(81,"UNINITIALIZED_FUNCTION_CALL");const paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);let defaultCoder=null,defaultMaxInflation=1024;function getBuiltinCallException(r,e,t,s){let i="missing revert data",a=null;const l=null;let u=null;if(t){i="execution reverted";const x=getBytes(t);if(t=hexlify(t),x.length===0)i+=" (no data present; likely require(false) occurred",a="require(false)";else if(x.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(hexlify(x.slice(0,4))==="0x08c379a0")try{a=s.decode(["string"],x.slice(4))[0],u={signature:"Error(string)",name:"Error",args:[a]},i+=`: ${JSON.stringify(a)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(hexlify(x.slice(0,4))==="0x4e487b71")try{const w=Number(s.decode(["uint256"],x.slice(4))[0]);u={signature:"Panic(uint256)",name:"Panic",args:[w]},a=`Panic due to ${PanicReasons$1.get(w)||"UNKNOWN"}(${w})`,i+=`: ${a}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const p={to:e.to?getAddress(e.to):null,data:e.data||"0x"};return e.from&&(p.from=getAddress(e.from)),makeError(i,"CALL_EXCEPTION",{action:r,data:t,reason:a,transaction:p,invocation:l,revert:u})}var On,fi;const Tc=class Tc{constructor(){re(this,On)}getDefaultValue(e){const t=e.map(i=>me(this,On,fi).call(this,ParamType.from(i)));return new TupleCoder(t,"_").defaultValue()}encode(e,t){assertArgumentCount(t.length,e.length,"types/values length mismatch");const s=e.map(l=>me(this,On,fi).call(this,ParamType.from(l))),i=new TupleCoder(s,"_"),a=new Writer;return i.encode(a,t),a.data}decode(e,t,s){const i=e.map(l=>me(this,On,fi).call(this,ParamType.from(l)));return new TupleCoder(i,"_").decode(new Reader(t,s,defaultMaxInflation))}static _setDefaultMaxInflation(e){assertArgument(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),defaultMaxInflation=e}static defaultAbiCoder(){return defaultCoder==null&&(defaultCoder=new Tc),defaultCoder}static getBuiltinCallException(e,t,s){return getBuiltinCallException(e,t,s,Tc.defaultAbiCoder())}};On=new WeakSet,fi=function(e){if(e.isArray())return new ArrayCoder(me(this,On,fi).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new TupleCoder(e.components.map(s=>me(this,On,fi).call(this,s)),e.name);switch(e.baseType){case"address":return new AddressCoder(e.name);case"bool":return new BooleanCoder(e.name);case"string":return new StringCoder(e.name);case"bytes":return new BytesCoder(e.name);case"":return new NullCoder(e.name)}let t=e.type.match(paramTypeNumber);if(t){let s=parseInt(t[2]||"256");return assertArgument(s!==0&&s<=256&&s%8===0,"invalid "+t[1]+" bit length","param",e),new NumberCoder(s/8,t[1]==="int",e.name)}if(t=e.type.match(paramTypeBytes),t){let s=parseInt(t[1]);return assertArgument(s!==0&&s<=32,"invalid bytes length","param",e),new FixedBytesCoder(s,e.name)}assertArgument(!1,"invalid type","type",e.type)};let AbiCoder=Tc;class LogDescription{constructor(e,t,s){O(this,"fragment");O(this,"name");O(this,"signature");O(this,"topic");O(this,"args");const i=e.name,a=e.format();defineProperties(this,{fragment:e,name:i,signature:a,topic:t,args:s})}}class TransactionDescription{constructor(e,t,s,i){O(this,"fragment");O(this,"name");O(this,"args");O(this,"signature");O(this,"selector");O(this,"value");const a=e.name,l=e.format();defineProperties(this,{fragment:e,name:a,args:s,signature:l,selector:t,value:i})}}class ErrorDescription{constructor(e,t,s){O(this,"fragment");O(this,"name");O(this,"args");O(this,"signature");O(this,"selector");const i=e.name,a=e.format();defineProperties(this,{fragment:e,name:i,args:s,signature:a,selector:t})}}class Indexed{constructor(e){O(this,"hash");O(this,"_isIndexed");defineProperties(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const PanicReasons={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},BuiltinErrors={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&PanicReasons[r.toString()]&&(e=PanicReasons[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};var _r,Br,Or,At,Ur,bc,vc;const gs=class gs{constructor(e){re(this,Ur);O(this,"fragments");O(this,"deploy");O(this,"fallback");O(this,"receive");re(this,_r);re(this,Br);re(this,Or);re(this,At);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,U(this,Or,new Map),U(this,_r,new Map),U(this,Br,new Map);const s=[];for(const l of t)try{s.push(Fragment.from(l))}catch(u){console.log(`[Warning] Invalid Fragment ${JSON.stringify(l)}:`,u.message)}defineProperties(this,{fragments:Object.freeze(s)});let i=null,a=!1;U(this,At,this.getAbiCoder()),this.fragments.forEach((l,u)=>{let p;switch(l.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}defineProperties(this,{deploy:l});return;case"fallback":l.inputs.length===0?a=!0:(assertArgument(!i||l.payable!==i.payable,"conflicting fallback fragments",`fragments[${u}]`,l),i=l,a=i.payable);return;case"function":p=I(this,Or);break;case"event":p=I(this,Br);break;case"error":p=I(this,_r);break;default:return}const x=l.format();p.has(x)||p.set(x,l)}),this.deploy||defineProperties(this,{deploy:ConstructorFragment.from("constructor()")}),defineProperties(this,{fallback:i,receive:a})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return AbiCoder.defaultAbiCoder()}getFunctionName(e){const t=me(this,Ur,bc).call(this,e,null,!1);return assertArgument(t,"no matching function","key",e),t.name}hasFunction(e){return!!me(this,Ur,bc).call(this,e,null,!1)}getFunction(e,t){return me(this,Ur,bc).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(I(this,Or).keys());t.sort((s,i)=>s.localeCompare(i));for(let s=0;s<t.length;s++){const i=t[s];e(I(this,Or).get(i),s)}}getEventName(e){const t=me(this,Ur,vc).call(this,e,null,!1);return assertArgument(t,"no matching event","key",e),t.name}hasEvent(e){return!!me(this,Ur,vc).call(this,e,null,!1)}getEvent(e,t){return me(this,Ur,vc).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(I(this,Br).keys());t.sort((s,i)=>s.localeCompare(i));for(let s=0;s<t.length;s++){const i=t[s];e(I(this,Br).get(i),s)}}getError(e,t){if(isHexString(e)){const i=e.toLowerCase();if(BuiltinErrors[i])return ErrorFragment.from(BuiltinErrors[i].signature);for(const a of I(this,_r).values())if(i===a.selector)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,l]of I(this,_r))a.split("(")[0]===e&&i.push(l);if(i.length===0)return e==="Error"?ErrorFragment.from("error Error(string)"):e==="Panic"?ErrorFragment.from("error Panic(uint256)"):null;if(i.length>1){const a=i.map(l=>JSON.stringify(l.format())).join(", ");assertArgument(!1,`ambiguous error description (i.e. ${a})`,"name",e)}return i[0]}if(e=ErrorFragment.from(e).format(),e==="Error(string)")return ErrorFragment.from("error Error(string)");if(e==="Panic(uint256)")return ErrorFragment.from("error Panic(uint256)");const s=I(this,_r).get(e);return s||null}forEachError(e){const t=Array.from(I(this,_r).keys());t.sort((s,i)=>s.localeCompare(i));for(let s=0;s<t.length;s++){const i=t[s];e(I(this,_r).get(i),s)}}_decodeParams(e,t){return I(this,At).decode(e,t)}_encodeParams(e,t){return I(this,At).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);assertArgument(s,"unknown error","fragment",e),e=s}return assertArgument(dataSlice(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,dataSlice(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);assertArgument(s,"unknown error","fragment",e),e=s}return concat$3([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);assertArgument(s,"unknown function","fragment",e),e=s}return assertArgument(dataSlice(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,dataSlice(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);assertArgument(s,"unknown function","fragment",e),e=s}return concat$3([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const a=this.getFunction(e);assertArgument(a,"unknown function","fragment",e),e=a}let s="invalid length for result data";const i=getBytesCopy(t);if(i.length%32===0)try{return I(this,At).decode(e.outputs,i)}catch{s="could not decode result data"}assert(!1,s,"BAD_DATA",{value:hexlify(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const s=getBytes(e,"data"),i=AbiCoder.getBuiltinCallException("call",t,s);if(i.message.startsWith("execution reverted (unknown custom error)")){const u=hexlify(s.slice(0,4)),p=this.getError(u);if(p)try{const x=I(this,At).decode(p.inputs,s.slice(4));i.revert={name:p.name,signature:p.format(),args:x},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const l=this.parseTransaction(t);return l&&(i.invocation={method:l.name,signature:l.signature,args:l.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);assertArgument(s,"unknown function","fragment",e),e=s}return hexlify(I(this,At).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const a=this.getEvent(e);assertArgument(a,"unknown event","eventFragment",e),e=a}assert(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const s=[];e.anonymous||s.push(e.topicHash);const i=(a,l)=>a.type==="string"?id(l):a.type==="bytes"?keccak256(hexlify(l)):(a.type==="bool"&&typeof l=="boolean"?l=l?"0x01":"0x00":a.type.match(/^u?int/)?l=toBeHex(l):a.type.match(/^bytes/)?l=zeroPadBytes(l,32):a.type==="address"&&I(this,At).encode(["address"],[l]),zeroPadValue(hexlify(l),32));for(t.forEach((a,l)=>{const u=e.inputs[l];if(!u.indexed){assertArgument(a==null,"cannot filter non-indexed parameters; must be null","contract."+u.name,a);return}a==null?s.push(null):u.baseType==="array"||u.baseType==="tuple"?assertArgument(!1,"filtering with tuples or arrays not supported","contract."+u.name,a):Array.isArray(a)?s.push(a.map(p=>i(u,p))):s.push(i(u,a))});s.length&&s[s.length-1]===null;)s.pop();return s}encodeEventLog(e,t){if(typeof e=="string"){const l=this.getEvent(e);assertArgument(l,"unknown event","eventFragment",e),e=l}const s=[],i=[],a=[];return e.anonymous||s.push(e.topicHash),assertArgument(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((l,u)=>{const p=t[u];if(l.indexed)if(l.type==="string")s.push(id(p));else if(l.type==="bytes")s.push(keccak256(p));else{if(l.baseType==="tuple"||l.baseType==="array")throw new Error("not implemented");s.push(I(this,At).encode([l.type],[p]))}else i.push(l),a.push(p)}),{data:I(this,At).encode(i,a),topics:s}}decodeEventLog(e,t,s){if(typeof e=="string"){const A=this.getEvent(e);assertArgument(A,"unknown event","eventFragment",e),e=A}if(s!=null&&!e.anonymous){const A=e.topicHash;assertArgument(isHexString(s[0],32)&&s[0].toLowerCase()===A,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const i=[],a=[],l=[];e.inputs.forEach((A,S)=>{A.indexed?A.type==="string"||A.type==="bytes"||A.baseType==="tuple"||A.baseType==="array"?(i.push(ParamType.from({type:"bytes32",name:A.name})),l.push(!0)):(i.push(A),l.push(!1)):(a.push(A),l.push(!1))});const u=s!=null?I(this,At).decode(i,concat$3(s)):null,p=I(this,At).decode(a,t,!0),x=[],w=[];let E=0,R=0;return e.inputs.forEach((A,S)=>{let N=null;if(A.indexed)if(u==null)N=new Indexed(null);else if(l[S])N=new Indexed(u[R++]);else try{N=u[R++]}catch(k){N=k}else try{N=p[E++]}catch(k){N=k}x.push(N),w.push(A.name||null)}),Result.fromItems(x,w)}parseTransaction(e){const t=getBytes(e.data,"tx.data"),s=getBigInt(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(hexlify(t.slice(0,4)));if(!i)return null;const a=I(this,At).decode(i.inputs,t.slice(4));return new TransactionDescription(i,i.selector,a,s)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new LogDescription(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=hexlify(e),s=this.getError(dataSlice(t,0,4));if(!s)return null;const i=I(this,At).decode(s.inputs,dataSlice(t,4));return new ErrorDescription(s,s.selector,i)}static from(e){return e instanceof gs?e:typeof e=="string"?new gs(JSON.parse(e)):typeof e.formatJson=="function"?new gs(e.formatJson()):typeof e.format=="function"?new gs(e.format("json")):new gs(e)}};_r=new WeakMap,Br=new WeakMap,Or=new WeakMap,At=new WeakMap,Ur=new WeakSet,bc=function(e,t,s){if(isHexString(e)){const a=e.toLowerCase();for(const l of I(this,Or).values())if(a===l.selector)return l;return null}if(e.indexOf("(")===-1){const a=[];for(const[l,u]of I(this,Or))l.split("(")[0]===e&&a.push(u);if(t){const l=t.length>0?t[t.length-1]:null;let u=t.length,p=!0;Typed.isTyped(l)&&l.type==="overrides"&&(p=!1,u--);for(let x=a.length-1;x>=0;x--){const w=a[x].inputs.length;w!==u&&(!p||w!==u-1)&&a.splice(x,1)}for(let x=a.length-1;x>=0;x--){const w=a[x].inputs;for(let E=0;E<t.length;E++)if(Typed.isTyped(t[E])){if(E>=w.length){if(t[E].type==="overrides")continue;a.splice(x,1);break}if(t[E].type!==w[E].baseType){a.splice(x,1);break}}}}if(a.length===1&&t&&t.length!==a[0].inputs.length){const l=t[t.length-1];(l==null||Array.isArray(l)||typeof l!="object")&&a.splice(0,1)}if(a.length===0)return null;if(a.length>1&&s){const l=a.map(u=>JSON.stringify(u.format())).join(", ");assertArgument(!1,`ambiguous function description (i.e. matches ${l})`,"key",e)}return a[0]}const i=I(this,Or).get(FunctionFragment.from(e).format());return i||null},vc=function(e,t,s){if(isHexString(e)){const a=e.toLowerCase();for(const l of I(this,Br).values())if(a===l.topicHash)return l;return null}if(e.indexOf("(")===-1){const a=[];for(const[l,u]of I(this,Br))l.split("(")[0]===e&&a.push(u);if(t){for(let l=a.length-1;l>=0;l--)a[l].inputs.length<t.length&&a.splice(l,1);for(let l=a.length-1;l>=0;l--){const u=a[l].inputs;for(let p=0;p<t.length;p++)if(Typed.isTyped(t[p])&&t[p].type!==u[p].baseType){a.splice(l,1);break}}}if(a.length===0)return null;if(a.length>1&&s){const l=a.map(u=>JSON.stringify(u.format())).join(", ");assertArgument(!1,`ambiguous event description (i.e. matches ${l})`,"key",e)}return a[0]}const i=I(this,Br).get(EventFragment.from(e).format());return i||null};let Interface=gs;const BN_0$2=BigInt(0);function getValue(r){return r??null}function toJson(r){return r==null?null:r.toString()}class FeeData{constructor(e,t,s){O(this,"gasPrice");O(this,"maxFeePerGas");O(this,"maxPriorityFeePerGas");defineProperties(this,{gasPrice:getValue(e),maxFeePerGas:getValue(t),maxPriorityFeePerGas:getValue(s)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:toJson(e),maxFeePerGas:toJson(t),maxPriorityFeePerGas:toJson(s)}}}function copyRequest(r){const e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=hexlify(r.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in r)||r[i]==null||(e[i]=getBigInt(r[i],`request.${i}`));const s="type,nonce".split(/,/);for(const i of s)!(i in r)||r[i]==null||(e[i]=getNumber(r[i],`request.${i}`));return r.accessList&&(e.accessList=accessListify(r.accessList)),r.authorizationList&&(e.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(e.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(e.kzg=r.kzg),"blobs"in r&&r.blobs&&(e.blobs=r.blobs.map(i=>isBytesLike(i)?hexlify(i):Object.assign({},i))),e}var nn;class Block{constructor(e,t){O(this,"provider");O(this,"number");O(this,"hash");O(this,"timestamp");O(this,"parentHash");O(this,"parentBeaconBlockRoot");O(this,"nonce");O(this,"difficulty");O(this,"gasLimit");O(this,"gasUsed");O(this,"stateRoot");O(this,"receiptsRoot");O(this,"blobGasUsed");O(this,"excessBlobGas");O(this,"miner");O(this,"prevRandao");O(this,"extraData");O(this,"baseFeePerGas");re(this,nn);U(this,nn,e.transactions.map(s=>typeof s!="string"?new TransactionResponse(s,t):s)),defineProperties(this,{provider:t,hash:getValue(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:getValue(e.prevRandao),extraData:e.extraData,baseFeePerGas:getValue(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return I(this,nn).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=I(this,nn).slice();return e.length===0?[]:(assert(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:s,gasLimit:i,gasUsed:a,hash:l,miner:u,prevRandao:p,nonce:x,number:w,parentHash:E,parentBeaconBlockRoot:R,stateRoot:A,receiptsRoot:S,timestamp:N,transactions:k}=this;return{_type:"Block",baseFeePerGas:toJson(e),difficulty:toJson(t),extraData:s,gasLimit:toJson(i),gasUsed:toJson(a),blobGasUsed:toJson(this.blobGasUsed),excessBlobGas:toJson(this.excessBlobGas),hash:l,miner:u,prevRandao:p,nonce:x,number:w,parentHash:E,timestamp:N,parentBeaconBlockRoot:R,stateRoot:A,receiptsRoot:S,transactions:k}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return I(this,nn).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=I(this,nn)[e];else{const s=e.toLowerCase();for(const i of I(this,nn))if(typeof i=="string"){if(i!==s)continue;t=i;break}else{if(i.hash!==s)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const s of t)if(s.hash===e)return s;assertArgument(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return createOrphanedBlockFilter(this)}}nn=new WeakMap;class Log{constructor(e,t){O(this,"provider");O(this,"transactionHash");O(this,"blockHash");O(this,"blockNumber");O(this,"removed");O(this,"address");O(this,"data");O(this,"topics");O(this,"index");O(this,"transactionIndex");this.provider=t;const s=Object.freeze(e.topics.slice());defineProperties(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:s,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:s,data:i,index:a,removed:l,topics:u,transactionHash:p,transactionIndex:x}=this;return{_type:"log",address:e,blockHash:t,blockNumber:s,data:i,index:a,removed:l,topics:u,transactionHash:p,transactionIndex:x}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return assert(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return assert(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return assert(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return createRemovedLogFilter(this)}}var ea;class TransactionReceipt{constructor(e,t){O(this,"provider");O(this,"to");O(this,"from");O(this,"contractAddress");O(this,"hash");O(this,"index");O(this,"blockHash");O(this,"blockNumber");O(this,"logsBloom");O(this,"gasUsed");O(this,"blobGasUsed");O(this,"cumulativeGasUsed");O(this,"gasPrice");O(this,"blobGasPrice");O(this,"type");O(this,"status");O(this,"root");re(this,ea);U(this,ea,Object.freeze(e.logs.map(i=>new Log(i,t))));let s=BN_0$2;e.effectiveGasPrice!=null?s=e.effectiveGasPrice:e.gasPrice!=null&&(s=e.gasPrice),defineProperties(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:s,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return I(this,ea)}toJSON(){const{to:e,from:t,contractAddress:s,hash:i,index:a,blockHash:l,blockNumber:u,logsBloom:p,logs:x,status:w,root:E}=this;return{_type:"TransactionReceipt",blockHash:l,blockNumber:u,contractAddress:s,cumulativeGasUsed:toJson(this.cumulativeGasUsed),from:t,gasPrice:toJson(this.gasPrice),blobGasUsed:toJson(this.blobGasUsed),blobGasPrice:toJson(this.blobGasPrice),gasUsed:toJson(this.gasUsed),hash:i,index:a,logs:x,logsBloom:p,root:E,status:w,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return createRemovedTransactionFilter(this)}reorderedEvent(e){return assert(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),createReorderedTransactionFilter(this,e)}}ea=new WeakMap;var Dn;const Bu=class Bu{constructor(e,t){O(this,"provider");O(this,"blockNumber");O(this,"blockHash");O(this,"index");O(this,"hash");O(this,"type");O(this,"to");O(this,"from");O(this,"nonce");O(this,"gasLimit");O(this,"gasPrice");O(this,"maxPriorityFeePerGas");O(this,"maxFeePerGas");O(this,"maxFeePerBlobGas");O(this,"data");O(this,"value");O(this,"chainId");O(this,"signature");O(this,"accessList");O(this,"blobVersionedHashes");O(this,"authorizationList");re(this,Dn);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,U(this,Dn,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:s,hash:i,type:a,to:l,from:u,nonce:p,data:x,signature:w,accessList:E,blobVersionedHashes:R}=this;return{_type:"TransactionResponse",accessList:E,blockNumber:e,blockHash:t,blobVersionedHashes:R,chainId:toJson(this.chainId),data:x,from:u,gasLimit:toJson(this.gasLimit),gasPrice:toJson(this.gasPrice),hash:i,maxFeePerGas:toJson(this.maxFeePerGas),maxPriorityFeePerGas:toJson(this.maxPriorityFeePerGas),maxFeePerBlobGas:toJson(this.maxFeePerBlobGas),nonce:p,signature:w,to:l,index:s,type:a,value:toJson(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const s=await this.getTransaction();s&&(e=s.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:s}=await resolveProperties({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:s-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const s=e??1,i=t??0;let a=I(this,Dn),l=-1,u=a===-1;const p=async()=>{if(u)return null;const{blockNumber:R,nonce:A}=await resolveProperties({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(A<this.nonce){a=R;return}if(u)return null;const S=await this.getTransaction();if(!(S&&S.blockNumber!=null))for(l===-1&&(l=a-3,l<I(this,Dn)&&(l=I(this,Dn)));l<=R;){if(u)return null;const N=await this.provider.getBlock(l,!0);if(N==null)return;for(const k of N)if(k===this.hash)return;for(let k=0;k<N.length;k++){const j=await N.getTransaction(k);if(j.from===this.from&&j.nonce===this.nonce){if(u)return null;const $=await this.provider.getTransactionReceipt(j.hash);if($==null||R-$.blockNumber+1<s)return;let D="replaced";j.data===this.data&&j.to===this.to&&j.value===this.value?D="repriced":j.data==="0x"&&j.from===j.to&&j.value===BN_0$2&&(D="cancelled"),assert(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:j.replaceableTransaction(a),hash:j.hash,receipt:$})}}l++}},x=R=>{if(R==null||R.status!==0)return R;assert(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:R.to,from:R.from,data:""},receipt:R})},w=await this.provider.getTransactionReceipt(this.hash);if(s===0)return x(w);if(w){if(s===1||await w.confirmations()>=s)return x(w)}else if(await p(),s===0)return null;return await new Promise((R,A)=>{const S=[],N=()=>{S.forEach(j=>j())};if(S.push(()=>{u=!0}),i>0){const j=setTimeout(()=>{N(),A(makeError("wait for transaction timeout","TIMEOUT"))},i);S.push(()=>{clearTimeout(j)})}const k=async j=>{if(await j.confirmations()>=s){N();try{R(x(j))}catch($){A($)}}};if(S.push(()=>{this.provider.off(this.hash,k)}),this.provider.on(this.hash,k),a>=0){const j=async()=>{try{await p()}catch($){if(isError($,"TRANSACTION_REPLACED")){N(),A($);return}}u||this.provider.once("block",j)};S.push(()=>{this.provider.off("block",j)}),this.provider.once("block",j)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return assert(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),createRemovedTransactionFilter(this)}reorderedEvent(e){return assert(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),assert(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),createReorderedTransactionFilter(this,e)}replaceableTransaction(e){assertArgument(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Bu(this,this.provider);return U(t,Dn,e),t}};Dn=new WeakMap;let TransactionResponse=Bu;function createOrphanedBlockFilter(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function createReorderedTransactionFilter(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function createRemovedTransactionFilter(r){return{orphan:"drop-transaction",tx:r}}function createRemovedLogFilter(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class EventLog extends Log{constructor(t,s,i){super(t,t.provider);O(this,"interface");O(this,"fragment");O(this,"args");const a=s.decodeEventLog(i,t.data,t.topics);defineProperties(this,{args:a,fragment:i,interface:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class UndecodedEventLog extends Log{constructor(t,s){super(t,t.provider);O(this,"error");defineProperties(this,{error:s})}}var Hi;class ContractTransactionReceipt extends TransactionReceipt{constructor(t,s,i){super(i,s);re(this,Hi);U(this,Hi,t)}get logs(){return super.logs.map(t=>{const s=t.topics.length?I(this,Hi).getEvent(t.topics[0]):null;if(s)try{return new EventLog(t,I(this,Hi),s)}catch(i){return new UndecodedEventLog(t,i)}return t})}}Hi=new WeakMap;var ta;class ContractTransactionResponse extends TransactionResponse{constructor(t,s,i){super(i,s);re(this,ta);U(this,ta,t)}async wait(t,s){const i=await super.wait(t,s);return i==null?null:new ContractTransactionReceipt(I(this,ta),this.provider,i)}}ta=new WeakMap;class ContractUnknownEventPayload extends EventPayload{constructor(t,s,i,a){super(t,s,i);O(this,"log");defineProperties(this,{log:a})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class ContractEventPayload extends ContractUnknownEventPayload{constructor(e,t,s,i,a){super(e,t,s,new EventLog(a,e.interface,i));const l=e.interface.decodeEventLog(i,this.log.data,this.log.topics);defineProperties(this,{args:l,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const BN_0$1=BigInt(0);function canCall(r){return r&&typeof r.call=="function"}function canEstimate(r){return r&&typeof r.estimateGas=="function"}function canResolve(r){return r&&typeof r.resolveName=="function"}function canSend(r){return r&&typeof r.sendTransaction=="function"}function getResolver(r){if(r!=null){if(canResolve(r))return r;if(r.provider)return r.provider}}var ra;class PreparedTopicFilter{constructor(e,t,s){re(this,ra);O(this,"fragment");if(defineProperties(this,{fragment:t}),t.inputs.length<s.length)throw new Error("too many arguments");const i=getRunner(e.runner,"resolveName"),a=canResolve(i)?i:null;U(this,ra,async function(){const l=await Promise.all(t.inputs.map((u,p)=>s[p]==null?null:u.walkAsync(s[p],(w,E)=>w==="address"?Array.isArray(E)?Promise.all(E.map(R=>resolveAddress(R,a))):resolveAddress(E,a):E)));return e.interface.encodeFilterTopics(t,l)}())}getTopicFilter(){return I(this,ra)}}ra=new WeakMap;function getRunner(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function getProvider(r){return r==null?null:r.provider||null}async function copyOverrides(r,e){const t=Typed.dereference(r,"overrides");assertArgument(typeof t=="object","invalid overrides parameter","overrides",r);const s=copyRequest(t);return assertArgument(s.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),assertArgument(s.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}async function resolveArgs(r,e,t){const s=getRunner(r,"resolveName"),i=canResolve(s)?s:null;return await Promise.all(e.map((a,l)=>a.walkAsync(t[l],(u,p)=>(p=Typed.dereference(p,u),u==="address"?resolveAddress(p,i):p))))}function buildWrappedFallback(r){const e=async function(l){const u=await copyOverrides(l,["data"]);u.to=await r.getAddress(),u.from&&(u.from=await resolveAddress(u.from,getResolver(r.runner)));const p=r.interface,x=getBigInt(u.value||BN_0$1,"overrides.value")===BN_0$1,w=(u.data||"0x")==="0x";p.fallback&&!p.fallback.payable&&p.receive&&!w&&!x&&assertArgument(!1,"cannot send data to receive or send value to non-payable fallback","overrides",l),assertArgument(p.fallback||w,"cannot send data to receive-only contract","overrides.data",u.data);const E=p.receive||p.fallback&&p.fallback.payable;return assertArgument(E||x,"cannot send value to non-payable fallback","overrides.value",u.value),assertArgument(p.fallback||w,"cannot send data to receive-only contract","overrides.data",u.data),u},t=async function(l){const u=getRunner(r.runner,"call");assert(canCall(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const p=await e(l);try{return await u.call(p)}catch(x){throw isCallException(x)&&x.data?r.interface.makeError(x.data,p):x}},s=async function(l){const u=r.runner;assert(canSend(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const p=await u.sendTransaction(await e(l)),x=getProvider(r.runner);return new ContractTransactionResponse(r.interface,x,p)},i=async function(l){const u=getRunner(r.runner,"estimateGas");return assert(canEstimate(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await e(l))},a=async l=>await s(l);return defineProperties(a,{_contract:r,estimateGas:i,populateTransaction:e,send:s,staticCall:t}),a}function buildWrappedMethod(r,e){const t=function(...x){const w=r.interface.getFunction(e,x);return assert(w,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:x}}),w},s=async function(...x){const w=t(...x);let E={};if(w.inputs.length+1===x.length&&(E=await copyOverrides(x.pop()),E.from&&(E.from=await resolveAddress(E.from,getResolver(r.runner)))),w.inputs.length!==x.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const R=await resolveArgs(r.runner,w.inputs,x);return Object.assign({},E,await resolveProperties({to:r.getAddress(),data:r.interface.encodeFunctionData(w,R)}))},i=async function(...x){const w=await u(...x);return w.length===1?w[0]:w},a=async function(...x){const w=r.runner;assert(canSend(w),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const E=await w.sendTransaction(await s(...x)),R=getProvider(r.runner);return new ContractTransactionResponse(r.interface,R,E)},l=async function(...x){const w=getRunner(r.runner,"estimateGas");return assert(canEstimate(w),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await w.estimateGas(await s(...x))},u=async function(...x){const w=getRunner(r.runner,"call");assert(canCall(w),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const E=await s(...x);let R="0x";try{R=await w.call(E)}catch(S){throw isCallException(S)&&S.data?r.interface.makeError(S.data,E):S}const A=t(...x);return r.interface.decodeFunctionResult(A,R)},p=async(...x)=>t(...x).constant?await i(...x):await a(...x);return defineProperties(p,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:l,populateTransaction:s,send:a,staticCall:i,staticCallResult:u}),Object.defineProperty(p,"fragment",{configurable:!1,enumerable:!0,get:()=>{const x=r.interface.getFunction(e);return assert(x,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),x}}),p}function buildWrappedEvent(r,e){const t=function(...i){const a=r.interface.getEvent(e,i);return assert(a,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),a},s=function(...i){return new PreparedTopicFilter(r,t(...i),i)};return defineProperties(s,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=r.interface.getEvent(e);return assert(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),s}const internal=Symbol.for("_ethersInternal_contract"),internalValues=new WeakMap;function setInternal(r,e){internalValues.set(r[internal],e)}function getInternal(r){return internalValues.get(r[internal])}function isDeferred(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function getSubInfo(r,e){let t,s=null;if(Array.isArray(e)){const a=function(l){if(isHexString(l,32))return l;const u=r.interface.getEvent(l);return assertArgument(u,"unknown fragment","name",l),u.topicHash};t=e.map(l=>l==null?null:Array.isArray(l)?l.map(a):a(l))}else e==="*"?t=[null]:typeof e=="string"?isHexString(e,32)?t=[e]:(s=r.interface.getEvent(e),assertArgument(s,"unknown fragment","event",e),t=[s.topicHash]):isDeferred(e)?t=await e.getTopicFilter():"fragment"in e?(s=e.fragment,t=[s.topicHash]):assertArgument(!1,"unknown event name","event",e);t=t.map(a=>{if(a==null)return null;if(Array.isArray(a)){const l=Array.from(new Set(a.map(u=>u.toLowerCase())).values());return l.length===1?l[0]:(l.sort(),l)}return a.toLowerCase()});const i=t.map(a=>a==null?"null":Array.isArray(a)?a.join("|"):a).join("&");return{fragment:s,tag:i,topics:t}}async function hasSub(r,e){const{subs:t}=getInternal(r);return t.get((await getSubInfo(r,e)).tag)||null}async function getSub(r,e,t){const s=getProvider(r.runner);assert(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:a,topics:l}=await getSubInfo(r,t),{addr:u,subs:p}=getInternal(r);let x=p.get(a);if(!x){const E={address:u||r,topics:l},R=k=>{let j=i;if(j==null)try{j=r.interface.getEvent(k.topics[0])}catch{}if(j){const $=j,D=i?r.interface.decodeEventLog(i,k.data,k.topics):[];emit(r,t,D,z=>new ContractEventPayload(r,z,t,$,k))}else emit(r,t,[],$=>new ContractUnknownEventPayload(r,$,t,k))};let A=[];x={tag:a,listeners:[],start:()=>{A.length||A.push(s.on(E,R))},stop:async()=>{if(A.length==0)return;let k=A;A=[],await Promise.all(k),s.off(E,R)}},p.set(a,x)}return x}let lastEmit=Promise.resolve();async function _emit(r,e,t,s){await lastEmit;const i=await hasSub(r,e);if(!i)return!1;const a=i.listeners.length;return i.listeners=i.listeners.filter(({listener:l,once:u})=>{const p=Array.from(t);s&&p.push(s(u?null:l));try{l.call(r,...p)}catch{}return!u}),i.listeners.length===0&&(i.stop(),getInternal(r).subs.delete(i.tag)),a>0}async function emit(r,e,t,s){try{await lastEmit}catch{}const i=_emit(r,e,t,s);return lastEmit=i,await i}const passProperties=["then"];var vh;vh=internal;const Jo=class Jo{constructor(e,t,s,i){O(this,"target");O(this,"interface");O(this,"runner");O(this,"filters");O(this,vh);O(this,"fallback");assertArgument(typeof e=="string"||isAddressable(e),"invalid value for Contract target","target",e),s==null&&(s=null);const a=Interface.from(t);defineProperties(this,{target:e,runner:s,interface:a}),Object.defineProperty(this,internal,{value:{}});let l,u=null,p=null;if(i){const E=getProvider(s);p=new ContractTransactionResponse(this.interface,E,i)}let x=new Map;if(typeof e=="string")if(isHexString(e))u=e,l=Promise.resolve(e);else{const E=getRunner(s,"resolveName");if(!canResolve(E))throw makeError("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});l=E.resolveName(e).then(R=>{if(R==null)throw makeError("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return getInternal(this).addr=R,R})}else l=e.getAddress().then(E=>{if(E==null)throw new Error("TODO");return getInternal(this).addr=E,E});setInternal(this,{addrPromise:l,addr:u,deployTx:p,subs:x});const w=new Proxy({},{get:(E,R,A)=>{if(typeof R=="symbol"||passProperties.indexOf(R)>=0)return Reflect.get(E,R,A);try{return this.getEvent(R)}catch(S){if(!isError(S,"INVALID_ARGUMENT")||S.argument!=="key")throw S}},has:(E,R)=>passProperties.indexOf(R)>=0?Reflect.has(E,R):Reflect.has(E,R)||this.interface.hasEvent(String(R))});return defineProperties(this,{filters:w}),defineProperties(this,{fallback:a.receive||a.fallback?buildWrappedFallback(this):null}),new Proxy(this,{get:(E,R,A)=>{if(typeof R=="symbol"||R in E||passProperties.indexOf(R)>=0)return Reflect.get(E,R,A);try{return E.getFunction(R)}catch(S){if(!isError(S,"INVALID_ARGUMENT")||S.argument!=="key")throw S}},has:(E,R)=>typeof R=="symbol"||R in E||passProperties.indexOf(R)>=0?Reflect.has(E,R):E.interface.hasFunction(R)})}connect(e){return new Jo(this.target,this.interface,e)}attach(e){return new Jo(e,this.interface,this.runner)}async getAddress(){return await getInternal(this).addrPromise}async getDeployedCode(){const e=getProvider(this.runner);assert(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const s=getProvider(this.runner);return assert(s!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,a)=>{const l=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);s.once("block",l)}catch(u){a(u)}};l()})}deploymentTransaction(){return getInternal(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),buildWrappedMethod(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),buildWrappedEvent(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,s){t==null&&(t=0),s==null&&(s="latest");const{addr:i,addrPromise:a}=getInternal(this),l=i||await a,{fragment:u,topics:p}=await getSubInfo(this,e),x={address:l,topics:p,fromBlock:t,toBlock:s},w=getProvider(this.runner);return assert(w,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await w.getLogs(x)).map(E=>{let R=u;if(R==null)try{R=this.interface.getEvent(E.topics[0])}catch{}if(R)try{return new EventLog(E,this.interface,R)}catch(A){return new UndecodedEventLog(E,A)}return new Log(E,w)})}async on(e,t){const s=await getSub(this,"on",e);return s.listeners.push({listener:t,once:!1}),s.start(),this}async once(e,t){const s=await getSub(this,"once",e);return s.listeners.push({listener:t,once:!0}),s.start(),this}async emit(e,...t){return await emit(this,e,t,null)}async listenerCount(e){if(e){const i=await hasSub(this,e);return i?i.listeners.length:0}const{subs:t}=getInternal(this);let s=0;for(const{listeners:i}of t.values())s+=i.length;return s}async listeners(e){if(e){const i=await hasSub(this,e);return i?i.listeners.map(({listener:a})=>a):[]}const{subs:t}=getInternal(this);let s=[];for(const{listeners:i}of t.values())s=s.concat(i.map(({listener:a})=>a));return s}async off(e,t){const s=await hasSub(this,e);if(!s)return this;if(t){const i=s.listeners.map(({listener:a})=>a).indexOf(t);i>=0&&s.listeners.splice(i,1)}return(t==null||s.listeners.length===0)&&(s.stop(),getInternal(this).subs.delete(s.tag)),this}async removeAllListeners(e){if(e){const t=await hasSub(this,e);if(!t)return this;t.stop(),getInternal(this).subs.delete(t.tag)}else{const{subs:t}=getInternal(this);for(const{tag:s,stop:i}of t.values())i(),t.delete(s)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Jo{constructor(i,a=null){super(i,e,a)}}return t}static from(e,t,s){return s==null&&(s=null),new this(e,t,s)}};let BaseContract=Jo;function _ContractBase(){return BaseContract}class Contract extends _ContractBase(){}function getIpfsLink(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):assertArgument(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class MulticoinProviderPlugin{constructor(e){O(this,"name");defineProperties(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const matcherIpfs=new RegExp("^(ipfs)://(.*)$","i"),matchers=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Fn,$s,Ln,hi,jc,Ih;const mi=class mi{constructor(e,t,s){re(this,Ln);O(this,"provider");O(this,"address");O(this,"name");re(this,Fn);re(this,$s);defineProperties(this,{provider:e,address:t,name:s}),U(this,Fn,null),U(this,$s,new Contract(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return I(this,Fn)==null&&U(this,Fn,(async()=>{try{return await I(this,$s).supportsInterface("0x9061b923")}catch(e){if(isError(e,"CALL_EXCEPTION"))return!1;throw U(this,Fn,null),e}})()),await I(this,Fn)}async getAddress(e){if(e==null&&(e=60),e===60)try{const a=await me(this,Ln,hi).call(this,"addr(bytes32)");return a==null||a===ZeroAddress?null:a}catch(a){if(isError(a,"CALL_EXCEPTION"))return null;throw a}if(e>=0&&e<2147483648){let a=e+2147483648;const l=await me(this,Ln,hi).call(this,"addr(bytes32,uint)",[a]);if(isHexString(l,20))return getAddress(l)}let t=null;for(const a of this.provider.plugins)if(a instanceof MulticoinProviderPlugin&&a.supportsCoinType(e)){t=a;break}if(t==null)return null;const s=await me(this,Ln,hi).call(this,"addr(bytes32,uint)",[e]);if(s==null||s==="0x")return null;const i=await t.decodeAddress(e,s);if(i!=null)return i;assert(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){const t=await me(this,Ln,hi).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await me(this,Ln,hi).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",a=parseInt(t[4],16);if(t[5].length===a*2)return`${i}://${encodeBase58("0x"+t[2])}`}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return`bzz://${s[1]}`;assert(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let s=0;s<matchers.length;s++){const i=t.match(matchers[s]);if(i==null)continue;const a=i[1].toLowerCase();switch(a){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const l=getIpfsLink(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:l}),{linkage:e,url:l}}case"erc721":case"erc1155":{const l=a==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:a,value:t});const u=await this.getAddress();if(u==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const p=(i[2]||"").split("/");if(p.length!==2)return e.push({type:`!${a}caip`,value:i[2]||""}),{url:null,linkage:e};const x=p[1],w=new Contract(p[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(a==="erc721"){const N=await w.ownerOf(x);if(u!==N)return e.push({type:"!owner",value:N}),{url:null,linkage:e};e.push({type:"owner",value:N})}else if(a==="erc1155"){const N=await w.balanceOf(u,x);if(!N)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:N.toString()})}let E=await w[l](x);if(E==null||E==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:E}),a==="erc1155"&&(E=E.replace("{id}",toBeHex(x,32).substring(2)),e.push({type:"metadata-url-expanded",value:E})),E.match(/^ipfs:/i)&&(E=getIpfsLink(E)),e.push({type:"metadata-url",value:E});let R={};const A=await new FetchRequest(E).send();A.assertOk();try{R=A.bodyJson}catch{try{e.push({type:"!metadata",value:A.bodyText})}catch{const j=A.body;return j&&e.push({type:"!metadata",value:hexlify(j)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!R)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(R)});let S=R.image;if(typeof S!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!S.match(/^(https:\/\/|data:)/i)){if(S.match(matcherIpfs)==null)return e.push({type:"!imageUrl-ipfs",value:S}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:S}),S=getIpfsLink(S)}return e.push({type:"url",value:S}),{linkage:e,url:S}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),s=t.getPlugin("org.ethers.plugins.network.Ens");return assert(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),s.address}static async fromName(e,t){var i;let s=t;for(;;){if(s===""||s==="."||t!=="eth"&&s==="eth")return null;const a=await me(i=mi,jc,Ih).call(i,e,s);if(a!=null){const l=new mi(e,a,t);return s!==t&&!await l.supportsWildcard()?null:l}s=s.split(".").slice(1).join(".")}}};Fn=new WeakMap,$s=new WeakMap,Ln=new WeakSet,hi=async function(e,t){t=(t||[]).slice();const s=I(this,$s).interface;t.unshift(namehash(this.name));let i=null;await this.supportsWildcard()&&(i=s.getFunction(e),assert(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[dnsEncode(this.name,255),s.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const a=await I(this,$s)[e](...t);return i?s.decodeFunctionResult(i,a)[0]:a}catch(a){if(!isError(a,"CALL_EXCEPTION"))throw a}return null},jc=new WeakSet,Ih=async function(e,t){const s=await mi.getEnsAddress(e);try{const a=await new Contract(s,["function resolver(bytes32) view returns (address)"],e).resolver(namehash(t),{enableCcipRead:!0});return a===ZeroAddress?null:a}catch(i){throw i}return null},re(mi,jc);let EnsResolver=mi;const BN_0=BigInt(0);function allowNull(r,e){return function(t){return t==null?e:r(t)}}function arrayOf(r,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(s=>r(s))}}function object(r,e){return t=>{const s={};for(const i in r){let a=i;if(e&&i in e&&!(a in t)){for(const l of e[i])if(l in t){a=l;break}}try{const l=r[i](t[a]);l!==void 0&&(s[i]=l)}catch(l){const u=l instanceof Error?l.message:"not-an-error";assert(!1,`invalid value for value.${i} (${u})`,"BAD_DATA",{value:t})}}return s}}function formatBoolean(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}assertArgument(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function formatData(r){return assertArgument(isHexString(r,!0),"invalid data","value",r),r}function formatHash(r){return assertArgument(isHexString(r,32),"invalid hash","value",r),r}const _formatLog=object({address:getAddress,blockHash:formatHash,blockNumber:getNumber,data:formatData,index:getNumber,removed:allowNull(formatBoolean,!1),topics:arrayOf(formatHash),transactionHash:formatHash,transactionIndex:getNumber},{index:["logIndex"]});function formatLog(r){return _formatLog(r)}const _formatBlock=object({hash:allowNull(formatHash),parentHash:formatHash,parentBeaconBlockRoot:allowNull(formatHash,null),number:getNumber,timestamp:getNumber,nonce:allowNull(formatData),difficulty:getBigInt,gasLimit:getBigInt,gasUsed:getBigInt,stateRoot:allowNull(formatHash,null),receiptsRoot:allowNull(formatHash,null),blobGasUsed:allowNull(getBigInt,null),excessBlobGas:allowNull(getBigInt,null),miner:allowNull(getAddress),prevRandao:allowNull(formatHash,null),extraData:formatData,baseFeePerGas:allowNull(getBigInt)},{prevRandao:["mixHash"]});function formatBlock(r){const e=_formatBlock(r);return e.transactions=r.transactions.map(t=>typeof t=="string"?t:formatTransactionResponse(t)),e}const _formatReceiptLog=object({transactionIndex:getNumber,blockNumber:getNumber,transactionHash:formatHash,address:getAddress,topics:arrayOf(formatHash),data:formatData,index:getNumber,blockHash:formatHash},{index:["logIndex"]});function formatReceiptLog(r){return _formatReceiptLog(r)}const _formatTransactionReceipt=object({to:allowNull(getAddress,null),from:allowNull(getAddress,null),contractAddress:allowNull(getAddress,null),index:getNumber,root:allowNull(hexlify),gasUsed:getBigInt,blobGasUsed:allowNull(getBigInt,null),logsBloom:allowNull(formatData),blockHash:formatHash,hash:formatHash,logs:arrayOf(formatReceiptLog),blockNumber:getNumber,cumulativeGasUsed:getBigInt,effectiveGasPrice:allowNull(getBigInt),blobGasPrice:allowNull(getBigInt,null),status:allowNull(getNumber),type:allowNull(getNumber,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function formatTransactionReceipt(r){return _formatTransactionReceipt(r)}function formatTransactionResponse(r){r.to&&getBigInt(r.to)===BN_0&&(r.to="0x0000000000000000000000000000000000000000");const e=object({hash:formatHash,index:allowNull(getNumber,void 0),type:t=>t==="0x"||t==null?0:getNumber(t),accessList:allowNull(accessListify,null),blobVersionedHashes:allowNull(arrayOf(formatHash,!0),null),authorizationList:allowNull(arrayOf(t=>{let s;if(t.signature)s=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),s=Object.assign({},t,{yParity:i})}return{address:getAddress(t.address),chainId:getBigInt(t.chainId),nonce:getBigInt(t.nonce),signature:Signature.from(s)}},!1),null),blockHash:allowNull(formatHash,null),blockNumber:allowNull(getNumber,null),transactionIndex:allowNull(getNumber,null),from:getAddress,gasPrice:allowNull(getBigInt),maxPriorityFeePerGas:allowNull(getBigInt),maxFeePerGas:allowNull(getBigInt),maxFeePerBlobGas:allowNull(getBigInt,null),gasLimit:getBigInt,to:allowNull(getAddress,null),value:getBigInt,nonce:getNumber,data:formatData,creates:allowNull(getAddress,null),chainId:allowNull(getBigInt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(e.to==null&&e.creates==null&&(e.creates=getCreateAddress(e)),(r.type===1||r.type===2)&&r.accessList==null&&(e.accessList=[]),r.signature?e.signature=Signature.from(r.signature):e.signature=Signature.from(r),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&getBigInt(e.blockHash)===BN_0&&(e.blockHash=null),e}const EnsAddress="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class NetworkPlugin{constructor(e){O(this,"name");defineProperties(this,{name:e})}clone(){return new NetworkPlugin(this.name)}}class GasCostPlugin extends NetworkPlugin{constructor(t,s){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);O(this,"effectiveBlock");O(this,"txBase");O(this,"txCreate");O(this,"txDataZero");O(this,"txDataNonzero");O(this,"txAccessListStorageKey");O(this,"txAccessListAddress");const i={effectiveBlock:t};function a(l,u){let p=(s||{})[l];p==null&&(p=u),assertArgument(typeof p=="number",`invalud value for ${l}`,"costs",s),i[l]=p}a("txBase",21e3),a("txCreate",32e3),a("txDataZero",4),a("txDataNonzero",16),a("txAccessListStorageKey",1900),a("txAccessListAddress",2400),defineProperties(this,i)}clone(){return new GasCostPlugin(this.effectiveBlock,this)}}class EnsPlugin extends NetworkPlugin{constructor(t,s){super("org.ethers.plugins.network.Ens");O(this,"address");O(this,"targetNetwork");defineProperties(this,{address:t||EnsAddress,targetNetwork:s??1})}clone(){return new EnsPlugin(this.address,this.targetNetwork)}}var na,sa;class FetchUrlFeeDataNetworkPlugin extends NetworkPlugin{constructor(t,s){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");re(this,na);re(this,sa);U(this,na,t),U(this,sa,s)}get url(){return I(this,na)}get processFunc(){return I(this,sa)}clone(){return this}}na=new WeakMap,sa=new WeakMap;const Networks=new Map;var Vi,Gi,Un;const gi=class gi{constructor(e,t){re(this,Vi);re(this,Gi);re(this,Un);U(this,Vi,e),U(this,Gi,getBigInt(t)),U(this,Un,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return I(this,Vi)}set name(e){U(this,Vi,e)}get chainId(){return I(this,Gi)}set chainId(e){U(this,Gi,getBigInt(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===getBigInt(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===getBigInt(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===getBigInt(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(I(this,Un).values())}attachPlugin(e){if(I(this,Un).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return I(this,Un).set(e.name,e.clone()),this}getPlugin(e){return I(this,Un).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new gi(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new GasCostPlugin;let s=t.txBase;if(e.to==null&&(s+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?s+=t.txDataZero:s+=t.txDataNonzero;if(e.accessList){const i=accessListify(e.accessList);for(const a in i)s+=t.txAccessListAddress+t.txAccessListStorageKey*i[a].storageKeys.length}return s}static from(e){if(injectCommonNetworks(),e==null)return gi.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Networks.get(e);if(t)return t();if(typeof e=="bigint")return new gi("unknown",e);assertArgument(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){assertArgument(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new gi(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new EnsPlugin(e.ensAddress,e.ensNetwork)),t}assertArgument(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const s=Networks.get(e);s&&assertArgument(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",e),Networks.set(e,t)}};Vi=new WeakMap,Gi=new WeakMap,Un=new WeakMap;let Network=gi;function parseUnits(r,e){const t=String(r);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const s=t.split(".");if(s.length===1&&s.push(""),s.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;s[1].length<e;)s[1]+="0";if(s[1].length>9){let i=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||i++,s[1]=i.toString()}return BigInt(s[0]+s[1])}function getGasStationPlugin(r){return new FetchUrlFeeDataNetworkPlugin(r,async(e,t,s)=>{s.setHeader("User-Agent","ethers");let i;try{const[a,l]=await Promise.all([s.send(),e()]);i=a;const u=i.bodyJson.standard;return{gasPrice:l.gasPrice,maxFeePerGas:parseUnits(u.maxFee,9),maxPriorityFeePerGas:parseUnits(u.maxPriorityFee,9)}}catch(a){assert(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:i,error:a})}})}let injected=!1;function injectCommonNetworks(){if(injected)return;injected=!0;function r(e,t,s){const i=function(){const a=new Network(e,t);return s.ensNetwork!=null&&a.attachPlugin(new EnsPlugin(null,s.ensNetwork)),a.attachPlugin(new GasCostPlugin),(s.plugins||[]).forEach(l=>{a.attachPlugin(l)}),a};Network.register(e,i),Network.register(t,i),s.altNames&&s.altNames.forEach(a=>{Network.register(a,i)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[getGasStationPlugin("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[getGasStationPlugin("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function copy$2(r){return JSON.parse(JSON.stringify(r))}var sn,sr,Mn,Dr,qi,Sc;class PollingBlockSubscriber{constructor(e){re(this,qi);re(this,sn);re(this,sr);re(this,Mn);re(this,Dr);U(this,sn,e),U(this,sr,null),U(this,Mn,4e3),U(this,Dr,-2)}get pollingInterval(){return I(this,Mn)}set pollingInterval(e){U(this,Mn,e)}start(){I(this,sr)||(U(this,sr,I(this,sn)._setTimeout(me(this,qi,Sc).bind(this),I(this,Mn))),me(this,qi,Sc).call(this))}stop(){I(this,sr)&&(I(this,sn)._clearTimeout(I(this,sr)),U(this,sr,null))}pause(e){this.stop(),e&&U(this,Dr,-2)}resume(){this.start()}}sn=new WeakMap,sr=new WeakMap,Mn=new WeakMap,Dr=new WeakMap,qi=new WeakSet,Sc=async function(){try{const e=await I(this,sn).getBlockNumber();if(I(this,Dr)===-2){U(this,Dr,e);return}if(e!==I(this,Dr)){for(let t=I(this,Dr)+1;t<=e;t++){if(I(this,sr)==null)return;await I(this,sn).emit("block",t)}U(this,Dr,e)}}catch{}I(this,sr)!=null&&U(this,sr,I(this,sn)._setTimeout(me(this,qi,Sc).bind(this),I(this,Mn)))};var ks,_s,zn;class OnBlockSubscriber{constructor(e){re(this,ks);re(this,_s);re(this,zn);U(this,ks,e),U(this,zn,!1),U(this,_s,t=>{this._poll(t,I(this,ks))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){I(this,zn)||(U(this,zn,!0),I(this,_s).call(this,-2),I(this,ks).on("block",I(this,_s)))}stop(){I(this,zn)&&(U(this,zn,!1),I(this,ks).off("block",I(this,_s)))}pause(e){this.stop()}resume(){this.start()}}ks=new WeakMap,_s=new WeakMap,zn=new WeakMap;var Wi,on;class PollingBlockTagSubscriber extends OnBlockSubscriber{constructor(t,s){super(t);re(this,Wi);re(this,on);U(this,Wi,s),U(this,on,-2)}pause(t){t&&U(this,on,-2),super.pause(t)}async _poll(t,s){const i=await s.getBlock(I(this,Wi));i!=null&&(I(this,on)===-2?U(this,on,i.number):i.number>I(this,on)&&(s.emit(I(this,Wi),i.number),U(this,on,i.number)))}}Wi=new WeakMap,on=new WeakMap;var Pc;class PollingOrphanSubscriber extends OnBlockSubscriber{constructor(t,s){super(t);re(this,Pc);U(this,Pc,copy$2(s))}async _poll(t,s){throw new Error("@TODO")}}Pc=new WeakMap;var Ji;class PollingTransactionSubscriber extends OnBlockSubscriber{constructor(t,s){super(t);re(this,Ji);U(this,Ji,s)}async _poll(t,s){const i=await s.getTransactionReceipt(I(this,Ji));i&&s.emit(I(this,Ji),i)}}Ji=new WeakMap;var an,Qi,Ki,Hn,ir,Ic,$h;class PollingEventSubscriber{constructor(e,t){re(this,Ic);re(this,an);re(this,Qi);re(this,Ki);re(this,Hn);re(this,ir);U(this,an,e),U(this,Qi,copy$2(t)),U(this,Ki,me(this,Ic,$h).bind(this)),U(this,Hn,!1),U(this,ir,-2)}start(){I(this,Hn)||(U(this,Hn,!0),I(this,ir)===-2&&I(this,an).getBlockNumber().then(e=>{U(this,ir,e)}),I(this,an).on("block",I(this,Ki)))}stop(){I(this,Hn)&&(U(this,Hn,!1),I(this,an).off("block",I(this,Ki)))}pause(e){this.stop(),e&&U(this,ir,-2)}resume(){this.start()}}an=new WeakMap,Qi=new WeakMap,Ki=new WeakMap,Hn=new WeakMap,ir=new WeakMap,Ic=new WeakSet,$h=async function(e){if(I(this,ir)===-2)return;const t=copy$2(I(this,Qi));t.fromBlock=I(this,ir)+1,t.toBlock=e;const s=await I(this,an).getLogs(t);if(s.length===0){I(this,ir)<e-60&&U(this,ir,e-60);return}for(const i of s)I(this,an).emit(I(this,Qi),i),U(this,ir,i.blockNumber)};const BN_2=BigInt(2),MAX_CCIP_REDIRECTS=10;function isPromise(r){return r&&typeof r.then=="function"}function getTag(r,e){return r+":"+JSON.stringify(e,(t,s)=>{if(s==null)return"null";if(typeof s=="bigint")return`bigint:${s.toString()}`;if(typeof s=="string")return s.toLowerCase();if(typeof s=="object"&&!Array.isArray(s)){const i=Object.keys(s);return i.sort(),i.reduce((a,l)=>(a[l]=s[l],a),{})}return s})}class UnmanagedSubscriber{constructor(e){O(this,"name");defineProperties(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function copy$1(r){return JSON.parse(JSON.stringify(r))}function concisify(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function getSubscription(r,e){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(isHexString(r,32)){const t=r.toLowerCase();return{type:"transaction",tag:getTag("tx",{hash:t}),hash:t}}if(r.orphan){const t=r;return{type:"orphan",tag:getTag("orphan",t),filter:copy$1(t)}}if(r.address||r.topics){const t=r,s={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?concisify(i.map(a=>a.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],a=[],l=u=>{isHexString(u)?i.push(u):a.push((async()=>{i.push(await resolveAddress(u,e))})())};Array.isArray(t.address)?t.address.forEach(l):l(t.address),a.length&&await Promise.all(a),s.address=concisify(i.map(u=>u.toLowerCase()))}return{filter:s,tag:getTag("event",s),type:"event"}}assertArgument(!1,"unknown ProviderEvent","event",r)}function getTime(){return new Date().getTime()}const defaultOptions$1={cacheTimeout:250,pollingInterval:4e3};var Ct,Vn,Nt,Xi,Jt,Bs,Gn,cn,ia,ar,Yi,Zi,Oe,Vt,Nu,Tu,qo,ju,Wo,Rc;class AbstractProvider{constructor(e,t){re(this,Oe);re(this,Ct);re(this,Vn);re(this,Nt);re(this,Xi);re(this,Jt);re(this,Bs);re(this,Gn);re(this,cn);re(this,ia);re(this,ar);re(this,Yi);re(this,Zi);if(U(this,Zi,Object.assign({},defaultOptions$1,t||{})),e==="any")U(this,Bs,!0),U(this,Jt,null);else if(e){const s=Network.from(e);U(this,Bs,!1),U(this,Jt,Promise.resolve(s)),setTimeout(()=>{this.emit("network",s,null)},0)}else U(this,Bs,!1),U(this,Jt,null);U(this,cn,-1),U(this,Gn,new Map),U(this,Ct,new Map),U(this,Vn,new Map),U(this,Nt,null),U(this,Xi,!1),U(this,ia,1),U(this,ar,new Map),U(this,Yi,!1)}get pollingInterval(){return I(this,Zi).pollingInterval}get provider(){return this}get plugins(){return Array.from(I(this,Vn).values())}attachPlugin(e){if(I(this,Vn).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return I(this,Vn).set(e.name,e.connect(this)),this}getPlugin(e){return I(this,Vn).get(e)||null}get disableCcipRead(){return I(this,Yi)}set disableCcipRead(e){U(this,Yi,!!e)}async ccipReadFetch(e,t,s){if(this.disableCcipRead||s.length===0||e.to==null)return null;const i=e.to.toLowerCase(),a=t.toLowerCase(),l=[];for(let u=0;u<s.length;u++){const p=s[u],x=p.replace("{sender}",i).replace("{data}",a),w=new FetchRequest(x);p.indexOf("{data}")===-1&&(w.body={data:a,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:w,index:u,urls:s});let E="unknown error",R;try{R=await w.send()}catch(A){l.push(A.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:w,result:{error:A}});continue}try{const A=R.bodyJson;if(A.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:w,result:A}),A.data;A.message&&(E=A.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:w,result:A})}catch{}assert(R.statusCode<400||R.statusCode>=500,`response not found during CCIP fetch: ${E}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:p,errorMessage:E}}),l.push(E)}assert(!1,`error encountered during CCIP fetch: ${l.map(u=>JSON.stringify(u)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:s,errorMessages:l}})}_wrapBlock(e,t){return new Block(formatBlock(e),this)}_wrapLog(e,t){return new Log(formatLog(e),this)}_wrapTransactionReceipt(e,t){return new TransactionReceipt(formatTransactionReceipt(e),this)}_wrapTransactionResponse(e,t){return new TransactionResponse(formatTransactionResponse(e),this)}_detectNetwork(){assert(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){assert(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=getNumber(await me(this,Oe,Vt).call(this,{method:"getBlockNumber"}),"%response");return I(this,cn)>=0&&U(this,cn,e),e}_getAddress(e){return resolveAddress(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(isHexString(e))return isHexString(e,32)?e:toQuantity(e);if(typeof e=="bigint"&&(e=getNumber(e,"blockTag")),typeof e=="number")return e>=0?toQuantity(e):I(this,cn)>=0?toQuantity(I(this,cn)+e):this.getBlockNumber().then(t=>toQuantity(t+e));assertArgument(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(p=>p==null?null:Array.isArray(p)?concisify(p.map(x=>x.toLowerCase())):p.toLowerCase()),s="blockHash"in e?e.blockHash:void 0,i=(p,x,w)=>{let E;switch(p.length){case 0:break;case 1:E=p[0];break;default:p.sort(),E=p}if(s&&(x!=null||w!=null))throw new Error("invalid filter");const R={};return E&&(R.address=E),t.length&&(R.topics=t),x&&(R.fromBlock=x),w&&(R.toBlock=w),s&&(R.blockHash=s),R};let a=[];if(e.address)if(Array.isArray(e.address))for(const p of e.address)a.push(this._getAddress(p));else a.push(this._getAddress(e.address));let l;"fromBlock"in e&&(l=this._getBlockTag(e.fromBlock));let u;return"toBlock"in e&&(u=this._getBlockTag(e.toBlock)),a.filter(p=>typeof p!="string").length||l!=null&&typeof l!="string"||u!=null&&typeof u!="string"?Promise.all([Promise.all(a),l,u]).then(p=>i(p[0],p[1],p[2])):i(a,l,u)}_getTransactionRequest(e){const t=copyRequest(e),s=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const a=resolveAddress(t[i],this);isPromise(a)?s.push(async function(){t[i]=await a}()):t[i]=a}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);isPromise(i)?s.push(async function(){t.blockTag=await i}()):t.blockTag=i}return s.length?async function(){return await Promise.all(s),t}():t}async getNetwork(){if(I(this,Jt)==null){const i=(async()=>{try{const a=await this._detectNetwork();return this.emit("network",a,null),a}catch(a){throw I(this,Jt)===i&&U(this,Jt,null),a}})();return U(this,Jt,i),(await i).clone()}const e=I(this,Jt),[t,s]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==s.chainId&&(I(this,Bs)?(this.emit("network",s,t),I(this,Jt)===e&&U(this,Jt,Promise.resolve(s))):assert(!1,`network changed: ${t.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:a,priorityFee:l}=await resolveProperties({_block:me(this,Oe,ju).call(this,"latest",!1),gasPrice:(async()=>{try{const w=await me(this,Oe,Vt).call(this,{method:"getGasPrice"});return getBigInt(w,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const w=await me(this,Oe,Vt).call(this,{method:"getPriorityFee"});return getBigInt(w,"%response")}catch{}return null})()});let u=null,p=null;const x=this._wrapBlock(i,e);return x&&x.baseFeePerGas&&(p=l??BigInt("1000000000"),u=x.baseFeePerGas*BN_2+p),new FeeData(a,u,p)},s=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const i=new FetchRequest(s.url),a=await s.processFunc(t,this,i);return new FeeData(a.gasPrice,a.maxFeePerGas,a.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return isPromise(t)&&(t=await t),getBigInt(await me(this,Oe,Vt).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:s}=await resolveProperties({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await me(this,Oe,Tu).call(this,me(this,Oe,Nu).call(this,t,s,e.enableCcipRead?0:-1))}async getBalance(e,t){return getBigInt(await me(this,Oe,qo).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return getNumber(await me(this,Oe,qo).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return hexlify(await me(this,Oe,qo).call(this,{method:"getCode"},e,t))}async getStorage(e,t,s){const i=getBigInt(t,"position");return hexlify(await me(this,Oe,qo).call(this,{method:"getStorage",position:i},e,s))}async broadcastTransaction(e){const{blockNumber:t,hash:s,network:i}=await resolveProperties({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),a=Transaction.from(e);if(a.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(a,i).replaceableTransaction(t)}async getBlock(e,t){const{network:s,params:i}=await resolveProperties({network:this.getNetwork(),params:me(this,Oe,ju).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,s)}async getTransaction(e){const{network:t,params:s}=await resolveProperties({network:this.getNetwork(),params:me(this,Oe,Vt).call(this,{method:"getTransaction",hash:e})});return s==null?null:this._wrapTransactionResponse(s,t)}async getTransactionReceipt(e){const{network:t,params:s}=await resolveProperties({network:this.getNetwork(),params:me(this,Oe,Vt).call(this,{method:"getTransactionReceipt",hash:e})});if(s==null)return null;if(s.gasPrice==null&&s.effectiveGasPrice==null){const i=await me(this,Oe,Vt).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(s,t)}async getTransactionResult(e){const{result:t}=await resolveProperties({network:this.getNetwork(),result:me(this,Oe,Vt).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:hexlify(t)}async getLogs(e){let t=this._getFilter(e);isPromise(t)&&(t=await t);const{network:s,params:i}=await resolveProperties({network:this.getNetwork(),params:me(this,Oe,Vt).call(this,{method:"getLogs",filter:t})});return i.map(a=>this._wrapLog(a,s))}_getProvider(e){assert(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await EnsResolver.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=getAddress(e);const t=namehash(e.substring(2).toLowerCase()+".addr.reverse");try{const s=await EnsResolver.getEnsAddress(this),a=await new Contract(s,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(a==null||a===ZeroAddress)return null;const u=await new Contract(a,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(u)!==e?null:u}catch(s){if(isError(s,"BAD_DATA")&&s.value==="0x"||isError(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(e,t,s){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(a,l)=>{let u=null;const p=async x=>{try{const w=await this.getTransactionReceipt(e);if(w!=null&&x-w.blockNumber+1>=i){a(w),u&&(clearTimeout(u),u=null);return}}catch(w){console.log("EEE",w)}this.once("block",p)};s!=null&&(u=setTimeout(()=>{u!=null&&(u=null,this.off("block",p),l(makeError("timeout","TIMEOUT",{reason:"timeout"})))},s)),p(await this.getBlockNumber())})}async waitForBlock(e){assert(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=I(this,ar).get(e);t&&(t.timer&&clearTimeout(t.timer),I(this,ar).delete(e))}_setTimeout(e,t){t==null&&(t=0);const s=Vo(this,ia)._++,i=()=>{I(this,ar).delete(s),e()};if(this.paused)I(this,ar).set(s,{timer:null,func:i,time:t});else{const a=setTimeout(i,t);I(this,ar).set(s,{timer:a,func:i,time:getTime()})}return s}_forEachSubscriber(e){for(const t of I(this,Ct).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new UnmanagedSubscriber(e.type);case"block":{const t=new PollingBlockSubscriber(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new PollingBlockTagSubscriber(this,e.type);case"event":return new PollingEventSubscriber(this,e.filter);case"transaction":return new PollingTransactionSubscriber(this,e.hash);case"orphan":return new PollingOrphanSubscriber(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const s of I(this,Ct).values())if(s.subscriber===e){s.started&&s.subscriber.stop(),s.subscriber=t,s.started&&t.start(),I(this,Nt)!=null&&t.pause(I(this,Nt));break}}async on(e,t){const s=await me(this,Oe,Rc).call(this,e);return s.listeners.push({listener:t,once:!1}),s.started||(s.subscriber.start(),s.started=!0,I(this,Nt)!=null&&s.subscriber.pause(I(this,Nt))),this}async once(e,t){const s=await me(this,Oe,Rc).call(this,e);return s.listeners.push({listener:t,once:!0}),s.started||(s.subscriber.start(),s.started=!0,I(this,Nt)!=null&&s.subscriber.pause(I(this,Nt))),this}async emit(e,...t){const s=await me(this,Oe,Wo).call(this,e,t);if(!s||s.listeners.length===0)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:a,once:l})=>{const u=new EventPayload(this,l?null:a,e);try{a.call(this,...t,u)}catch{}return!l}),s.listeners.length===0&&(s.started&&s.subscriber.stop(),I(this,Ct).delete(s.tag)),i>0}async listenerCount(e){if(e){const s=await me(this,Oe,Wo).call(this,e);return s?s.listeners.length:0}let t=0;for(const{listeners:s}of I(this,Ct).values())t+=s.length;return t}async listeners(e){if(e){const s=await me(this,Oe,Wo).call(this,e);return s?s.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:s}of I(this,Ct).values())t=t.concat(s.map(({listener:i})=>i));return t}async off(e,t){const s=await me(this,Oe,Wo).call(this,e);if(!s)return this;if(t){const i=s.listeners.map(({listener:a})=>a).indexOf(t);i>=0&&s.listeners.splice(i,1)}return(!t||s.listeners.length===0)&&(s.started&&s.subscriber.stop(),I(this,Ct).delete(s.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:s,subscriber:i}=await me(this,Oe,Rc).call(this,e);s&&i.stop(),I(this,Ct).delete(t)}else for(const[t,{started:s,subscriber:i}]of I(this,Ct))s&&i.stop(),I(this,Ct).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return I(this,Xi)}destroy(){this.removeAllListeners();for(const e of I(this,ar).keys())this._clearTimeout(e);U(this,Xi,!0)}get paused(){return I(this,Nt)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(U(this,cn,-1),I(this,Nt)!=null){if(I(this,Nt)==!!e)return;assert(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),U(this,Nt,!!e);for(const t of I(this,ar).values())t.timer&&clearTimeout(t.timer),t.time=getTime()-t.time}resume(){if(I(this,Nt)!=null){this._forEachSubscriber(e=>e.resume()),U(this,Nt,null);for(const e of I(this,ar).values()){let t=e.time;t<0&&(t=0),e.time=getTime(),setTimeout(e.func,t)}}}}Ct=new WeakMap,Vn=new WeakMap,Nt=new WeakMap,Xi=new WeakMap,Jt=new WeakMap,Bs=new WeakMap,Gn=new WeakMap,cn=new WeakMap,ia=new WeakMap,ar=new WeakMap,Yi=new WeakMap,Zi=new WeakMap,Oe=new WeakSet,Vt=async function(e){const t=I(this,Zi).cacheTimeout;if(t<0)return await this._perform(e);const s=getTag(e.method,e);let i=I(this,Gn).get(s);return i||(i=this._perform(e),I(this,Gn).set(s,i),setTimeout(()=>{I(this,Gn).get(s)===i&&I(this,Gn).delete(s)},t)),await i},Nu=async function(e,t,s){assert(s<MAX_CCIP_REDIRECTS,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=copyRequest(e);try{return hexlify(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(a){if(!this.disableCcipRead&&isCallException(a)&&a.data&&s>=0&&t==="latest"&&i.to!=null&&dataSlice(a.data,0,4)==="0x556f1830"){const l=a.data,u=await resolveAddress(i.to,this);let p;try{p=parseOffchainLookup(dataSlice(a.data,4))}catch(E){assert(!1,E.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:l}})}assert(p.sender.toLowerCase()===u.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:l,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:p.errorArgs}});const x=await this.ccipReadFetch(i,p.calldata,p.urls);assert(x!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:a.data,errorArgs:p.errorArgs}});const w={to:u,data:concat$3([p.selector,encodeBytes$1([x,p.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:w});try{const E=await me(this,Oe,Nu).call(this,w,t,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},w),result:E}),E}catch(E){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},w),error:E}),E}}throw a}},Tu=async function(e){const{value:t}=await resolveProperties({network:this.getNetwork(),value:e});return t},qo=async function(e,t,s){let i=this._getAddress(t),a=this._getBlockTag(s);return(typeof i!="string"||typeof a!="string")&&([i,a]=await Promise.all([i,a])),await me(this,Oe,Tu).call(this,me(this,Oe,Vt).call(this,Object.assign(e,{address:i,blockTag:a})))},ju=async function(e,t){if(isHexString(e,32))return await me(this,Oe,Vt).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let s=this._getBlockTag(e);return typeof s!="string"&&(s=await s),await me(this,Oe,Vt).call(this,{method:"getBlock",blockTag:s,includeTransactions:t})},Wo=async function(e,t){let s=await getSubscription(e,this);return s.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(s=await getSubscription({orphan:"drop-log",log:t[0]},this)),I(this,Ct).get(s.tag)||null},Rc=async function(e){const t=await getSubscription(e,this),s=t.tag;let i=I(this,Ct).get(s);return i||(i={subscriber:this._getSubscriber(t),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},I(this,Ct).set(s,i)),i};function _parseString(r,e){try{const t=_parseBytes(r,e);if(t)return toUtf8String(t)}catch{}return null}function _parseBytes(r,e){if(r==="0x")return null;try{const t=getNumber(dataSlice(r,e,e+32)),s=getNumber(dataSlice(r,t,t+32));return dataSlice(r,t+32,t+32+s)}catch{}return null}function numPad(r){const e=toBeArray(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function bytesPad(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}const empty=new Uint8Array([]);function encodeBytes$1(r){const e=[];let t=0;for(let s=0;s<r.length;s++)e.push(empty),t+=32;for(let s=0;s<r.length;s++){const i=getBytes(r[s]);e[s]=numPad(t),e.push(numPad(i.length)),e.push(bytesPad(i)),t+=32+Math.ceil(i.length/32)*32}return concat$3(e)}const zeros="0x0000000000000000000000000000000000000000000000000000000000000000";function parseOffchainLookup(r){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};assert(dataLength(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=dataSlice(r,0,32);assert(dataSlice(t,0,12)===dataSlice(zeros,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=dataSlice(t,12);try{const s=[],i=getNumber(dataSlice(r,32,64)),a=getNumber(dataSlice(r,i,i+32)),l=dataSlice(r,i+32);for(let u=0;u<a;u++){const p=_parseString(l,u*32);if(p==null)throw new Error("abort");s.push(p)}e.urls=s}catch{assert(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=_parseBytes(r,64);if(s==null)throw new Error("abort");e.calldata=s}catch{assert(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}assert(dataSlice(r,100,128)===dataSlice(zeros,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=dataSlice(r,96,100);try{const s=_parseBytes(r,128);if(s==null)throw new Error("abort");e.extraData=s}catch{assert(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(s=>e[s]),e}function checkProvider(r,e){if(r.provider)return r.provider;assert(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function populate(r,e){let t=copyRequest(e);if(t.to!=null&&(t.to=resolveAddress(t.to,r)),t.from!=null){const s=t.from;t.from=Promise.all([r.getAddress(),resolveAddress(s,r)]).then(([i,a])=>(assertArgument(i.toLowerCase()===a.toLowerCase(),"transaction from mismatch","tx.from",a),i))}else t.from=r.getAddress();return await resolveProperties(t)}class AbstractSigner{constructor(e){O(this,"provider");defineProperties(this,{provider:e||null})}async getNonce(e){return checkProvider(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await populate(this,e)}async populateTransaction(e){const t=checkProvider(this,"populateTransaction"),s=await populate(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const i=await this.provider.getNetwork();if(s.chainId!=null){const l=getBigInt(s.chainId);assertArgument(l===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=i.chainId;const a=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||a)?assertArgument(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&a&&assertArgument(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const l=await t.getFeeData();assert(l.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=l.gasPrice)}else{const l=await t.getFeeData();if(s.type==null)if(l.maxFeePerGas!=null&&l.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const u=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=u,s.maxPriorityFeePerGas=u}else s.maxFeePerGas==null&&(s.maxFeePerGas=l.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=l.maxPriorityFeePerGas);else l.gasPrice!=null?(assert(!a,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=l.gasPrice),s.type=0):assert(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=l.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=l.maxPriorityFeePerGas))}return await resolveProperties(s)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await checkProvider(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return checkProvider(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return checkProvider(this,"call").call(await this.populateCall(e))}async resolveName(e){return await checkProvider(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=checkProvider(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const i=Transaction.from(s);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){assert(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function copy(r){return JSON.parse(JSON.stringify(r))}var It,Fr,Os,qn,Ds,eo,Jn,Pu,Iu;class FilterIdSubscriber{constructor(e){re(this,Jn);re(this,It);re(this,Fr);re(this,Os);re(this,qn);re(this,Ds);re(this,eo);U(this,It,e),U(this,Fr,null),U(this,Os,me(this,Jn,Pu).bind(this)),U(this,qn,!1),U(this,Ds,null),U(this,eo,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){I(this,qn)||(U(this,qn,!0),me(this,Jn,Pu).call(this,-2))}stop(){I(this,qn)&&(U(this,qn,!1),U(this,eo,!0),me(this,Jn,Iu).call(this),I(this,It).off("block",I(this,Os)))}pause(e){e&&me(this,Jn,Iu).call(this),I(this,It).off("block",I(this,Os))}resume(){this.start()}}It=new WeakMap,Fr=new WeakMap,Os=new WeakMap,qn=new WeakMap,Ds=new WeakMap,eo=new WeakMap,Jn=new WeakSet,Pu=async function(e){try{I(this,Fr)==null&&U(this,Fr,this._subscribe(I(this,It)));let t=null;try{t=await I(this,Fr)}catch(a){if(!isError(a,"UNSUPPORTED_OPERATION")||a.operation!=="eth_newFilter")throw a}if(t==null){U(this,Fr,null),I(this,It)._recoverSubscriber(this,this._recover(I(this,It)));return}const s=await I(this,It).getNetwork();if(I(this,Ds)||U(this,Ds,s),I(this,Ds).chainId!==s.chainId)throw new Error("chaid changed");if(I(this,eo))return;const i=await I(this,It).send("eth_getFilterChanges",[t]);await this._emitResults(I(this,It),i)}catch(t){console.log("@TODO",t)}I(this,It).once("block",I(this,Os))},Iu=function(){const e=I(this,Fr);e&&(U(this,Fr,null),e.then(t=>{I(this,It).destroyed||I(this,It).send("eth_uninstallFilter",[t])}))};var Fs;class FilterIdEventSubscriber extends FilterIdSubscriber{constructor(t,s){super(t);re(this,Fs);U(this,Fs,copy(s))}_recover(t){return new PollingEventSubscriber(t,I(this,Fs))}async _subscribe(t){return await t.send("eth_newFilter",[I(this,Fs)])}async _emitResults(t,s){for(const i of s)t.emit(I(this,Fs),t._wrapLog(i,t._network))}}Fs=new WeakMap;class FilterIdPendingSubscriber extends FilterIdSubscriber{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const s of t)e.emit("pending",s)}}const Primitive="bigint,boolean,function,number,string,symbol".split(/,/g);function deepCopy(r){if(r==null||Primitive.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(deepCopy);if(typeof r=="object")return Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function stall(r){return new Promise(e=>{setTimeout(e,r)})}function getLowerCase(r){return r&&r.toLowerCase()}function isPollable(r){return r&&typeof r.pollingInterval=="number"}const defaultOptions={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class JsonRpcSigner extends AbstractSigner{constructor(t,s){super(t);O(this,"address");s=getAddress(s),defineProperties(this,{address:s})}connect(t){assert(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const s=deepCopy(t),i=[];if(s.from){const l=s.from;i.push((async()=>{const u=await resolveAddress(l,this.provider);assertArgument(u!=null&&u.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),s.from=u})())}else s.from=this.address;if(s.gasLimit==null&&i.push((async()=>{s.gasLimit=await this.provider.estimateGas({...s,from:this.address})})()),s.to!=null){const l=s.to;i.push((async()=>{s.to=await resolveAddress(l,this.provider)})())}i.length&&await Promise.all(i);const a=this.provider.getRpcTransaction(s);return this.provider.send("eth_sendTransaction",[a])}async sendTransaction(t){const s=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((a,l)=>{const u=[1e3,100];let p=0;const x=async()=>{try{const w=await this.provider.getTransaction(i);if(w!=null){a(w.replaceableTransaction(s));return}}catch(w){if(isError(w,"CANCELLED")||isError(w,"BAD_DATA")||isError(w,"NETWORK_ERROR")||isError(w,"UNSUPPORTED_OPERATION")){w.info==null&&(w.info={}),w.info.sendTransactionHash=i,l(w);return}if(isError(w,"INVALID_ARGUMENT")&&(p++,w.info==null&&(w.info={}),w.info.sendTransactionHash=i,p>10)){l(w);return}this.provider.emit("error",makeError("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:w}))}this.provider._setTimeout(()=>{x()},u.pop()||4e3)};x()})}async signTransaction(t){const s=deepCopy(t);if(s.from){const a=await resolveAddress(s.from,this.provider);assertArgument(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),s.from=a}else s.from=this.address;const i=this.provider.getRpcTransaction(s);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const s=typeof t=="string"?toUtf8Bytes(t):t;return await this.provider.send("personal_sign",[hexlify(s),this.address.toLowerCase()])}async signTypedData(t,s,i){const a=deepCopy(i),l=await TypedDataEncoder.resolveNames(t,s,a,async u=>{const p=await resolveAddress(u);return assertArgument(p!=null,"TypedData does not support null address","value",u),p});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload(l.domain,s,l.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const s=typeof t=="string"?toUtf8Bytes(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),hexlify(s)])}}var Ls,to,ln,Lr,Rr,cr,Lt,oa,$u;class JsonRpcApiProvider extends AbstractProvider{constructor(t,s){super(t,s);re(this,oa);re(this,Ls);re(this,to);re(this,ln);re(this,Lr);re(this,Rr);re(this,cr);re(this,Lt);U(this,to,1),U(this,Ls,Object.assign({},defaultOptions,s||{})),U(this,ln,[]),U(this,Lr,null),U(this,cr,null),U(this,Lt,null);{let a=null;const l=new Promise(u=>{a=u});U(this,Rr,{promise:l,resolve:a})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(assertArgument(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",s),i&&t!=null&&U(this,cr,Network.from(t))):i&&(assertArgument(t==null||i.matches(t),"staticNetwork MUST match network object","options",s),U(this,cr,i))}_getOption(t){return I(this,Ls)[t]}get _network(){return assert(I(this,cr),"network is not available yet","NETWORK_ERROR"),I(this,cr)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&getBigInt(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const a=await this.getFeeData();a.maxFeePerGas==null&&a.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const s=this.getRpcRequest(t);return s!=null?await this.send(s.method,s.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(I(this,cr))return I(this,cr)}else return t;return I(this,Lt)?await I(this,Lt):this.ready?(U(this,Lt,(async()=>{try{const s=Network.from(getBigInt(await this.send("eth_chainId",[])));return U(this,Lt,null),s}catch(s){throw U(this,Lt,null),s}})()),await I(this,Lt)):(U(this,Lt,(async()=>{const s={id:Vo(this,to)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:s});let i;try{i=(await this._send(s))[0],U(this,Lt,null)}catch(a){throw U(this,Lt,null),this.emit("debug",{action:"receiveRpcError",error:a}),a}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Network.from(getBigInt(i.result));throw this.getRpcError(s,i)})()),await I(this,Lt))}_start(){I(this,Rr)==null||I(this,Rr).resolve==null||(I(this,Rr).resolve(),U(this,Rr,null),(async()=>{for(;I(this,cr)==null&&!this.destroyed;)try{U(this,cr,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",makeError("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await stall(1e3)}me(this,oa,$u).call(this)})())}async _waitUntilReady(){if(I(this,Rr)!=null)return await I(this,Rr).promise}_getSubscriber(t){return t.type==="pending"?new FilterIdPendingSubscriber(this):t.type==="event"?this._getOption("polling")?new PollingEventSubscriber(this,t.filter):new FilterIdEventSubscriber(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new UnmanagedSubscriber("orphan"):super._getSubscriber(t)}get ready(){return I(this,Rr)==null}getRpcTransaction(t){const s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let a=i;i==="gasLimit"&&(a="gas"),s[a]=toQuantity(getBigInt(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(s[i]=hexlify(t[i]))}),t.accessList&&(s.accessList=accessListify(t.accessList)),t.blobVersionedHashes&&(s.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(s.authorizationList=t.authorizationList.map(i=>{const a=authorizationify(i);return{address:a.address,nonce:toQuantity(a.nonce),chainId:toQuantity(a.chainId),yParity:toQuantity(a.signature.yParity),r:toQuantity(a.signature.r),s:toQuantity(a.signature.s)}})),s}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[getLowerCase(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[getLowerCase(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[getLowerCase(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[getLowerCase(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(getLowerCase):t.filter.address=getLowerCase(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,s){const{method:i}=t,{error:a}=s;if(i==="eth_estimateGas"&&a.message){const p=a.message;if(!p.match(/revert/i)&&p.match(/insufficient funds/i))return makeError("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:a}});if(p.match(/nonce/i)&&p.match(/too low/i))return makeError("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:a}})}if(i==="eth_call"||i==="eth_estimateGas"){const p=spelunkData(a),x=AbiCoder.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],p?p.data:null);return x.info={error:a,payload:t},x}const l=JSON.stringify(spelunkMessage(a));if(typeof a.message=="string"&&a.message.match(/user denied|ethers-user-denied/i))return makeError("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:a}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const p=t.params[0];if(l.match(/insufficient funds|base fee exceeds gas limit/i))return makeError("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:p,info:{error:a}});if(l.match(/nonce/i)&&l.match(/too low/i))return makeError("nonce has already been used","NONCE_EXPIRED",{transaction:p,info:{error:a}});if(l.match(/replacement transaction/i)&&l.match(/underpriced/i))return makeError("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:p,info:{error:a}});if(l.match(/only replay-protected/i))return makeError("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:p,info:{error:a}}})}let u=!!l.match(/the method .* does not exist/i);return u||a&&a.details&&a.details.startsWith("Unauthorized method:")&&(u=!0),u?makeError("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:a,payload:t}}):makeError("could not coalesce error","UNKNOWN_ERROR",{error:a,payload:t})}send(t,s){if(this.destroyed)return Promise.reject(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=Vo(this,to)._++,a=new Promise((l,u)=>{I(this,ln).push({resolve:l,reject:u,payload:{method:t,params:s,id:i,jsonrpc:"2.0"}})});return me(this,oa,$u).call(this),a}async getSigner(t){t==null&&(t=0);const s=this.send("eth_accounts",[]);if(typeof t=="number"){const a=await s;if(t>=a.length)throw new Error("no such account");return new JsonRpcSigner(this,a[t])}const{accounts:i}=await resolveProperties({network:this.getNetwork(),accounts:s});t=getAddress(t);for(const a of i)if(getAddress(a)===t)return new JsonRpcSigner(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(s=>new JsonRpcSigner(this,s))}destroy(){I(this,Lr)&&(clearTimeout(I(this,Lr)),U(this,Lr,null));for(const{payload:t,reject:s}of I(this,ln))s(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));U(this,ln,[]),super.destroy()}}Ls=new WeakMap,to=new WeakMap,ln=new WeakMap,Lr=new WeakMap,Rr=new WeakMap,cr=new WeakMap,Lt=new WeakMap,oa=new WeakSet,$u=function(){if(I(this,Lr))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");U(this,Lr,setTimeout(()=>{U(this,Lr,null);const s=I(this,ln);for(U(this,ln,[]);s.length;){const i=[s.shift()];for(;s.length&&i.length!==I(this,Ls).batchMaxCount;)if(i.push(s.shift()),JSON.stringify(i.map(l=>l.payload)).length>I(this,Ls).batchMaxSize){s.unshift(i.pop());break}(async()=>{const a=i.length===1?i[0].payload:i.map(l=>l.payload);this.emit("debug",{action:"sendRpcPayload",payload:a});try{const l=await this._send(a);this.emit("debug",{action:"receiveRpcResult",result:l});for(const{resolve:u,reject:p,payload:x}of i){if(this.destroyed){p(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:x.method}));continue}const w=l.filter(E=>E.id===x.id)[0];if(w==null){const E=makeError("missing response for request","BAD_DATA",{value:l,info:{payload:x}});this.emit("error",E),p(E);continue}if("error"in w){p(this.getRpcError(x,w));continue}u(w.result)}}catch(l){this.emit("debug",{action:"receiveRpcError",error:l});for(const{reject:u}of i)u(l)}})()}},t))};var Wn;class JsonRpcApiPollingProvider extends JsonRpcApiProvider{constructor(t,s){super(t,s);re(this,Wn);let i=this._getOption("pollingInterval");i==null&&(i=defaultOptions.pollingInterval),U(this,Wn,i)}_getSubscriber(t){const s=super._getSubscriber(t);return isPollable(s)&&(s.pollingInterval=I(this,Wn)),s}get pollingInterval(){return I(this,Wn)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");U(this,Wn,t),this._forEachSubscriber(s=>{isPollable(s)&&(s.pollingInterval=I(this,Wn))})}}Wn=new WeakMap;function spelunkData(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&isHexString(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const e in r){const t=spelunkData(r[e]);if(t)return t}return null}if(typeof r=="string")try{return spelunkData(JSON.parse(r))}catch{}return null}function _spelunkMessage(r,e){if(r!=null){if(typeof r.message=="string"&&e.push(r.message),typeof r=="object")for(const t in r)_spelunkMessage(r[t],e);if(typeof r=="string")try{return _spelunkMessage(JSON.parse(r),e)}catch{}}}function spelunkMessage(r){const e=[];return _spelunkMessage(r,e),e}var ro,no;const ys=class ys extends JsonRpcApiPollingProvider{constructor(t,s,i){const a=Object.assign({},i??{},{batchMaxCount:1});assertArgument(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(s,a);re(this,ro);re(this,no);U(this,no,null),i&&i.providerInfo&&U(this,no,i.providerInfo),U(this,ro,async(l,u)=>{const p={method:l,params:u};this.emit("debug",{action:"sendEip1193Request",payload:p});try{const x=await t.request(p);return this.emit("debug",{action:"receiveEip1193Result",result:x}),x}catch(x){const w=new Error(x.message);throw w.code=x.code,w.data=x.data,w.payload=p,this.emit("debug",{action:"receiveEip1193Error",error:w}),w}})}get providerInfo(){return I(this,no)}async send(t,s){return await this._start(),await super.send(t,s)}async _send(t){assertArgument(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const s=await I(this,ro).call(this,t.method,t.params||[]);return[{id:t.id,result:s}]}catch(s){return[{id:t.id,error:{code:s.code,data:s.data,message:s.message}}]}}getRpcError(t,s){switch(s=JSON.parse(JSON.stringify(s)),s.error.code||-1){case 4001:s.error.message=`ethers-user-denied: ${s.error.message}`;break;case 4200:s.error.message=`ethers-unsupported: ${s.error.message}`;break}return super.getRpcError(t,s)}async hasSigner(t){t==null&&(t=0);const s=await this.send("eth_accounts",[]);return typeof t=="number"?s.length>t:(t=t.toLowerCase(),s.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await I(this,ro).call(this,"eth_requestAccounts",[])}catch(s){const i=s.payload;throw this.getRpcError(i,{id:i.id,error:s})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new ys(t.provider);const s=t.window?t.window:typeof window<"u"?window:null;if(s==null)return null;const i=t.anyProvider;if(i&&s.ethereum)return new ys(s.ethereum);if(!("addEventListener"in s&&"dispatchEvent"in s&&"removeEventListener"in s))return null;const a=t.timeout?t.timeout:300;return a===0?null:await new Promise((l,u)=>{let p=[];const x=R=>{p.push(R.detail),i&&w()},w=()=>{if(clearTimeout(E),p.length)if(t&&t.filter){const R=t.filter(p.map(A=>Object.assign({},A.info)));if(R==null)l(null);else if(R instanceof ys)l(R);else{let A=null;if(R.uuid&&(A=p.filter(N=>R.uuid===N.info.uuid)[0]),A){const{provider:S,info:N}=A;l(new ys(S,void 0,{providerInfo:N}))}else u(makeError("filter returned unknown info","UNSUPPORTED_OPERATION",{value:R}))}}else{const{provider:R,info:A}=p[0];l(new ys(R,void 0,{providerInfo:A}))}else l(null);s.removeEventListener("eip6963:announceProvider",x)},E=setTimeout(()=>{w()},a);s.addEventListener("eip6963:announceProvider",x),s.dispatchEvent(new Event("eip6963:requestProvider"))})}};ro=new WeakMap,no=new WeakMap;let BrowserProvider=ys;const signMessage=async(r,e)=>{try{return await(await e.getSigner()).signMessage(r)}catch(t){throw console.error("Error signing message:",t),new Error("Failed to sign message")}};var Web3ErrorType=(r=>(r.WALLET_NOT_CONNECTED="WALLET_NOT_CONNECTED",r.WALLET_NOT_INSTALLED="WALLET_NOT_INSTALLED",r.NETWORK_UNSUPPORTED="NETWORK_UNSUPPORTED",r.TRANSACTION_REJECTED="TRANSACTION_REJECTED",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.CONTRACT_ERROR="CONTRACT_ERROR",r.PROVIDER_ERROR="PROVIDER_ERROR",r.CONNECTION_ERROR="CONNECTION_ERROR",r.SIGNATURE_ERROR="SIGNATURE_ERROR",r.NETWORK_SWITCH_ERROR="NETWORK_SWITCH_ERROR",r))(Web3ErrorType||{});class Web3Error extends Error{constructor(e,t,s,i){super(t),this.type=e,this.originalError=s,this.code=i,this.name="Web3Error"}static fromEthereumError(e){var t,s;return e.code===4001?new Web3Error("TRANSACTION_REJECTED","User rejected the request",e,4001):e.code===4100?new Web3Error("WALLET_NOT_CONNECTED","Wallet is not connected",e,4100):e.code===4200?new Web3Error("PROVIDER_ERROR","Unsupported method",e,4200):e.code===4900?new Web3Error("CONNECTION_ERROR","Chain is disconnected",e,4900):e.code===4902?new Web3Error("NETWORK_SWITCH_ERROR","Network not added to wallet",e,4902):e.code===-32002?new Web3Error("CONNECTION_ERROR","Request already pending. Please check your wallet.",e,-32002):(t=e.message)!=null&&t.includes("insufficient funds")?new Web3Error("INSUFFICIENT_FUNDS","Insufficient funds for transaction",e):(s=e.message)!=null&&s.includes("network")?new Web3Error("PROVIDER_ERROR","Network connection error",e):new Web3Error("PROVIDER_ERROR",e.message||"Unknown Web3 error",e)}getUserFriendlyMessage(){switch(this.type){case"WALLET_NOT_INSTALLED":return"Please install MetaMask or another Web3 wallet to continue.";case"WALLET_NOT_CONNECTED":return"Please connect your wallet to access this feature.";case"TRANSACTION_REJECTED":return"Transaction was cancelled. Please try again if you want to proceed.";case"NETWORK_UNSUPPORTED":return"This network is not supported. Please switch to a supported network.";case"INSUFFICIENT_FUNDS":return"Insufficient funds to complete this transaction.";case"CONNECTION_ERROR":return"Connection error. Please check your internet connection and try again.";case"NETWORK_SWITCH_ERROR":return"Unable to switch networks. Please manually switch in your wallet.";default:return this.message||"An unexpected error occurred. Please try again."}}}const NETWORKS=[{id:1,name:"Ethereum",symbol:"ETH",rpcUrl:"https://mainnet.infura.io/v3/${INFURA_KEY}"},{id:137,name:"Polygon",symbol:"MATIC",rpcUrl:"https://polygon-rpc.com"},{id:56,name:"BSC",symbol:"BNB",rpcUrl:"https://bsc-dataseed.binance.org"},{id:42161,name:"Arbitrum",symbol:"ETH",rpcUrl:"https://arb1.arbitrum.io/rpc"}];var AccessLevel=(r=>(r[r.PUBLIC=0]="PUBLIC",r[r.FIELD_OPERATIVE=1]="FIELD_OPERATIVE",r[r.ANALYST=2]="ANALYST",r[r.COMMANDER=3]="COMMANDER",r[r.DIRECTOR=4]="DIRECTOR",r))(AccessLevel||{});const defaultContext$1={isConnected:!1,walletAddress:"",ensName:null,networkName:"Ethereum",networkId:1,balance:"0.00",accessLevel:0,provider:null,signer:null,error:null,isLoading:!1,connectWallet:async()=>{},disconnectWallet:()=>{},switchNetwork:async()=>{},signMessage:async()=>"",clearError:()=>{}},Web3Context=reactExports.createContext(defaultContext$1),Web3Provider=({children:r})=>{const[e,t]=reactExports.useState(()=>{const se=localStorage.getItem("web3_connected");return se?JSON.parse(se):!1}),[s,i]=reactExports.useState(()=>localStorage.getItem("web3_address")||""),[a,l]=reactExports.useState(null),[u,p]=reactExports.useState(()=>{const se=localStorage.getItem("web3_network");return se?parseInt(se,10):1}),[x,w]=reactExports.useState("0.00"),[E,R]=reactExports.useState(0),[A,S]=reactExports.useState(null),[N,k]=reactExports.useState(null),[j,$]=reactExports.useState(null),[D,z]=reactExports.useState(!1);reactExports.useEffect(()=>{e?(localStorage.setItem("web3_connected",JSON.stringify(e)),localStorage.setItem("web3_address",s),localStorage.setItem("web3_network",u.toString())):(localStorage.removeItem("web3_connected"),localStorage.removeItem("web3_address"),localStorage.removeItem("web3_network"))},[e,s,u]);const L=async(se,ce)=>{try{const J=await ce.lookupAddress(se);return l(J),J}catch(J){return console.error("Error resolving ENS name:",J),l(null),null}},M=async(se,ce)=>{try{const J=await ce.getBalance(se),ie=formatEther(J);w(parseFloat(ie).toFixed(4))}catch(J){console.error("Error getting account balance:",J),w("0.00")}},G=se=>({"0x71c7656ec7ab88b098defb751b7401b5f6d8976f":4,"0x742d35cc6634c0532925a3b844bc454e4438f44e":2,"0x8626f6940e2eb28930efb4cef49b2d1f2c9c1199":1})[se.toLowerCase()]||0,W=()=>{$(null)},q=se=>{if(se instanceof Web3Error)return $(se),se;const ce=Web3Error.fromEthereumError(se);return $(ce),ce},oe=async()=>{z(!0),$(null);try{if(!window.ethereum)throw new Web3Error(Web3ErrorType.WALLET_NOT_INSTALLED,"Please install MetaMask or another Web3 wallet");const se=new BrowserProvider(window.ethereum),ce=await se.send("eth_requestAccounts",[]);if(!ce||!Array.isArray(ce)||ce.length===0)throw new Web3Error(Web3ErrorType.WALLET_NOT_CONNECTED,"No accounts available");const J=ce[0];i(J);const ie=await se.getNetwork(),Re=Number(ie.chainId);p(Re);const je=await se.getSigner();k(je),await M(J,se),await L(J,se);const Ie=G(J);R(Ie),S(se),t(!0),window.ethereum.on("accountsChanged",le),window.ethereum.on("chainChanged",Te),window.ethereum.on("disconnect",Ae)}catch(se){throw q(se)}finally{z(!1)}},le=async se=>{if(se.length===0)we();else if(se[0]!==s&&(i(se[0]),A)){await M(se[0],A),await L(se[0],A);const ce=G(se[0]);R(ce)}},Te=se=>{window.location.reload()},Ae=()=>{we()},we=()=>{window.ethereum&&(window.ethereum.removeListener("accountsChanged",le),window.ethereum.removeListener("chainChanged",Te),window.ethereum.removeListener("disconnect",Ae)),t(!1),i(""),w("0.00"),l(null),S(null),k(null),R(0)},de=async se=>{if(!window.ethereum){alert("No Ethereum provider detected");return}const ce=NETWORKS.find(J=>J.id===se);if(!ce){alert("Invalid network selection");return}try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${se.toString(16)}`}]})}catch(J){if(J.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${se.toString(16)}`,chainName:ce.name,nativeCurrency:{name:ce.symbol,symbol:ce.symbol,decimals:18},rpcUrls:[ce.rpcUrl]}]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${se.toString(16)}`}]})}catch(ie){console.error("Error adding network:",ie)}else console.error("Error switching network:",J)}},Z=async se=>{if(!N)throw new Web3Error(Web3ErrorType.WALLET_NOT_CONNECTED,"No wallet connected");try{return await signMessage(se,A)}catch(ce){throw console.error("Error signing message:",ce),q(ce)}},ae={isConnected:e,walletAddress:s,ensName:a,networkName:(()=>{const se=NETWORKS.find(ce=>ce.id===u);return se?se.name:"Unknown"})(),networkId:u,balance:x,accessLevel:E,provider:A,signer:N,error:j,isLoading:D,connectWallet:oe,disconnectWallet:we,switchNetwork:de,signMessage:Z,clearError:W};return jsxRuntimeExports.jsx(Web3Context.Provider,{value:ae,children:r})},useWeb3=()=>{const r=reactExports.useContext(Web3Context);if(r===void 0)throw new Error("useWeb3 must be used within a Web3Provider");return r},LOAD_BASE=r=>Promise.reject(new Error(`No base found for "${r}"`));class Multibases{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||LOAD_BASE;for(const t of e.bases)this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const LOAD_CODEC=r=>Promise.reject(new Error(`No codec found for "${r}"`));class Multicodecs{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||LOAD_CODEC;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t=typeof e=="string"?this._codecsByName:this._codecsByCode;if(t[e])return t[e];const s=await this._loadCodec(e);return t[e]==null&&this.addCodec(s),s}listCodecs(){return Object.values(this._codecsByName)}}const LOAD_HASHER=r=>Promise.reject(new Error(`No hasher found for "${r}"`));class Multihashes{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||LOAD_HASHER;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t=typeof e=="string"?this._hashersByName:this._hashersByCode;if(t[e])return t[e];const s=await this._loadHasher(e);return t[e]==null&&this.addHasher(s),s}listHashers(){return Object.values(this._hashersByName)}}function equals$b(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function coerce$5(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function base$5(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=i}var u=r.length,p=r.charAt(0),x=Math.log(u)/Math.log(256),w=Math.log(256)/Math.log(u);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,k=0,j=0,$=S.length;j!==$&&S[j]===0;)j++,N++;for(var D=($-j)*w+1>>>0,z=new Uint8Array(D);j!==$;){for(var L=S[j],M=0,G=D-1;(L!==0||M<k)&&G!==-1;G--,M++)L+=256*z[G]>>>0,z[G]=L%u>>>0,L=L/u>>>0;if(L!==0)throw new Error("Non-zero carry");k=M,j++}for(var W=D-k;W!==D&&z[W]===0;)W++;for(var q=p.repeat(N);W<D;++W)q+=r.charAt(z[W]);return q}function R(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var k=0,j=0;S[N]===p;)k++,N++;for(var $=(S.length-N)*x+1>>>0,D=new Uint8Array($);S[N];){var z=t[S.charCodeAt(N)];if(z===255)return;for(var L=0,M=$-1;(z!==0||L<j)&&M!==-1;M--,L++)z+=u*D[M]>>>0,D[M]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");j=L,N++}if(S[N]!==" "){for(var G=$-j;G!==$&&D[G]===0;)G++;for(var W=new Uint8Array(k+($-G)),q=k;G!==$;)W[q++]=D[G++];return W}}}function A(S){var N=R(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:R,decode:A}}var src$6=base$5,_brrp__multiformats_scope_baseX$5=src$6;let Encoder$5=class{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$5=class{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseDecode");O(this,"prefixCodePoint");this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$5(this,e)}},ComposedDecoder$5=class{constructor(e){O(this,"decoders");this.decoders=e}or(e){return or$5(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s!=null)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function or$5(r,e){return new ComposedDecoder$5({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let Codec$5=class{constructor(e,t,s,i){O(this,"name");O(this,"prefix");O(this,"baseEncode");O(this,"baseDecode");O(this,"encoder");O(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=i,this.encoder=new Encoder$5(e,t,s),this.decoder=new Decoder$5(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function from$6({name:r,prefix:e,encode:t,decode:s}){return new Codec$5(r,e,t,s)}function baseX$5({name:r,prefix:e,alphabet:t}){const{encode:s,decode:i}=_brrp__multiformats_scope_baseX$5(t,r);return from$6({prefix:e,name:r,encode:s,decode:a=>coerce$5(i(a))})}function decode$z(r,e,t,s){let i=r.length;for(;r[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let l=0,u=0,p=0;for(let x=0;x<i;++x){const w=e[r[x]];if(w===void 0)throw new SyntaxError(`Non-${s} character`);u=u<<t|w,l+=t,l>=8&&(l-=8,a[p++]=255&u>>l)}if(l>=t||(255&u<<8-l)!==0)throw new SyntaxError("Unexpected end of data");return a}function encode$o(r,e,t){const s=e[e.length-1]==="=",i=(1<<t)-1;let a="",l=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],l+=8;l>t;)l-=t,a+=e[i&u>>l];if(l!==0&&(a+=e[i&u<<t-l]),s)for(;(a.length*t&7)!==0;)a+="=";return a}function createAlphabetIdx$3(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function rfc4648$5({name:r,prefix:e,bitsPerChar:t,alphabet:s}){const i=createAlphabetIdx$3(s);return from$6({prefix:e,name:r,encode(a){return encode$o(a,s,t)},decode(a){return decode$z(a,i,t,r)}})}const base32$8=rfc4648$5({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$5({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$5({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$5({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$5({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$5({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$5({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$5({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$5({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base36$8=baseX$5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});baseX$5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const base58btc$5=baseX$5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$5=encode$n,MSB$5=128,MSBALL$4=-128,INT$4=Math.pow(2,31);function encode$n(r,e,t){e=e||[],t=t||0;for(var s=t;r>=INT$4;)e[t++]=r&255|MSB$5,r/=128;for(;r&MSBALL$4;)e[t++]=r&255|MSB$5,r>>>=7;return e[t]=r|0,encode$n.bytes=t-s+1,e}var decode$y=read$4,MSB$1$5=128,REST$1$4=127;function read$4(r,s){var t=0,s=s||0,i=0,a=s,l,u=r.length;do{if(a>=u)throw read$4.bytes=0,new RangeError("Could not decode varint");l=r[a++],t+=i<28?(l&REST$1$4)<<i:(l&REST$1$4)*Math.pow(2,i),i+=7}while(l>=MSB$1$5);return read$4.bytes=a-s,t}var N1$5=Math.pow(2,7),N2$5=Math.pow(2,14),N3$5=Math.pow(2,21),N4$5=Math.pow(2,28),N5$5=Math.pow(2,35),N6$5=Math.pow(2,42),N7$5=Math.pow(2,49),N8$4=Math.pow(2,56),N9$4=Math.pow(2,63),length$5=function(r){return r<N1$5?1:r<N2$5?2:r<N3$5?3:r<N4$5?4:r<N5$5?5:r<N6$5?6:r<N7$5?7:r<N8$4?8:r<N9$4?9:10},varint$6={encode:encode_1$5,decode:decode$y,encodingLength:length$5},_brrp_varint$4=varint$6;function decode$x(r,e=0){return[_brrp_varint$4.decode(r,e),_brrp_varint$4.decode.bytes]}function encodeTo$4(r,e,t=0){return _brrp_varint$4.encode(r,e,t),e}function encodingLength$5(r){return _brrp_varint$4.encodingLength(r)}function create$5(r,e){const t=e.byteLength,s=encodingLength$5(r),i=s+encodingLength$5(t),a=new Uint8Array(i+t);return encodeTo$4(r,a,0),encodeTo$4(t,a,s),a.set(e,i),new Digest$4(r,t,e,a)}function decode$w(r){const e=coerce$5(r),[t,s]=decode$x(e),[i,a]=decode$x(e.subarray(s)),l=e.subarray(s+a);if(l.byteLength!==i)throw new Error("Incorrect length");return new Digest$4(t,i,l,e)}function equals$a(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&equals$b(r.bytes,t.bytes)}}let Digest$4=class{constructor(e,t,s,i){O(this,"code");O(this,"size");O(this,"digest");O(this,"bytes");this.code=e,this.size=t,this.digest=s,this.bytes=i}};function format$5(r,e){const{bytes:t,version:s}=r;switch(s){case 0:return toStringV0$4(t,baseCache$4(r),e??base58btc$5.encoder);default:return toStringV1$4(t,baseCache$4(r),e??base32$8.encoder)}}const cache$4=new WeakMap;function baseCache$4(r){const e=cache$4.get(r);if(e==null){const t=new Map;return cache$4.set(r,t),t}return e}var Sh;let CID$4=class bt{constructor(e,t,s,i){O(this,"code");O(this,"version");O(this,"multihash");O(this,"bytes");O(this,"/");O(this,Sh,"CID");this.code=t,this.version=e,this.multihash=s,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE$4)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE$4)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return bt.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,s=create$5(e,t);return bt.createV1(this.code,s)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return bt.equals(this,e)}static equals(e,t){const s=t;return s!=null&&e.code===s.code&&e.version===s.version&&equals$a(e.multihash,s.multihash)}toString(e){return format$5(this,e)}toJSON(){return{"/":format$5(this)}}link(){return this}[(Sh=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof bt)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:s,code:i,multihash:a,bytes:l}=t;return new bt(s,i,a,l??encodeCID$5(s,i,a.bytes))}else if(t[cidSymbol$4]===!0){const{version:s,multihash:i,code:a}=t,l=decode$w(i);return bt.create(s,a,l)}else return null}static create(e,t,s){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(s.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==DAG_PB_CODE$4)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$4}) block encoding`);return new bt(e,t,s,s.bytes)}case 1:{const i=encodeCID$5(e,t,s.bytes);return new bt(e,t,s,i)}default:throw new Error("Invalid version")}}static createV0(e){return bt.create(0,DAG_PB_CODE$4,e)}static createV1(e,t){return bt.create(1,e,t)}static decode(e){const[t,s]=bt.decodeFirst(e);if(s.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=bt.inspectBytes(e),s=t.size-t.multihashSize,i=coerce$5(e.subarray(s,s+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const a=i.subarray(t.multihashSize-t.digestSize),l=new Digest$4(t.multihashCode,t.digestSize,a,i);return[t.version===0?bt.createV0(l):bt.createV1(t.codec,l),e.subarray(t.size)]}static inspectBytes(e){let t=0;const s=()=>{const[E,R]=decode$x(e.subarray(t));return t+=R,E};let i=s(),a=DAG_PB_CODE$4;if(i===18?(i=0,t=0):a=s(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const l=t,u=s(),p=s(),x=t+p,w=x-l;return{version:i,codec:a,multihashCode:u,digestSize:p,multihashSize:w,size:x}}static parse(e,t){const[s,i]=parseCIDtoBytes$4(e,t),a=bt.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$4(a).set(s,e),a}};function parseCIDtoBytes$4(r,e){switch(r[0]){case"Q":{const t=e??base58btc$5;return[base58btc$5.prefix,t.decode(`${base58btc$5.prefix}${r}`)]}case base58btc$5.prefix:{const t=e??base58btc$5;return[base58btc$5.prefix,t.decode(r)]}case base32$8.prefix:{const t=e??base32$8;return[base32$8.prefix,t.decode(r)]}case base36$8.prefix:{const t=e??base36$8;return[base36$8.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function toStringV0$4(r,e,t){const{prefix:s}=t;if(s!==base58btc$5.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(s);if(i==null){const a=t.encode(r).slice(1);return e.set(s,a),a}else return i}function toStringV1$4(r,e,t){const{prefix:s}=t,i=e.get(s);if(i==null){const a=t.encode(r);return e.set(s,a),a}else return i}const DAG_PB_CODE$4=112,SHA_256_CODE$4=18;function encodeCID$5(r,e,t){const s=encodingLength$5(r),i=s+encodingLength$5(e),a=new Uint8Array(i+t.byteLength);return encodeTo$4(r,a,0),encodeTo$4(e,a,s),a.set(t,i),a}const cidSymbol$4=Symbol.for("@ipld/js-cid/CID"),textDecoder$2=new TextDecoder;function decodeVarint(r,e){let t=0;for(let s=0;;s+=7){if(s>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");const i=r[e++];if(t+=s<28?(i&127)<<s:(i&127)*2**s,i<128)break}return[t,e]}function decodeBytes(r,e){let t;[t,e]=decodeVarint(r,e);const s=e+t;if(t<0||s<0)throw new Error("protobuf: invalid length");if(s>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,s),s]}function decodeKey(r,e){let t;return[t,e]=decodeVarint(r,e),[t&7,t>>3,e]}function decodeLink(r){const e={},t=r.length;let s=0;for(;s<t;){let i,a;if([i,a,s]=decodeKey(r,s),a===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,s]=decodeBytes(r,s)}else if(a===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let l;[l,s]=decodeBytes(r,s),e.Name=textDecoder$2.decode(l)}else if(a===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,s]=decodeVarint(r,s)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${a}`)}if(s>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(r){const e=r.length;let t=0,s,i=!1,a;for(;t<e;){let u,p;if([u,p,t]=decodeKey(r,t),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(p===1){if(a)throw new Error("protobuf: (PBNode) duplicate Data section");[a,t]=decodeBytes(r,t),s&&(i=!0)}else if(p===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");s||(s=[]);let x;[x,t]=decodeBytes(r,t),s.push(decodeLink(x))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${p}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");const l={};return a&&(l.Data=a),l.Links=s||[],l}const textEncoder$3=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=encodeVarint(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){const s=textEncoder$3.encode(r.Name);t-=s.length,e.set(s,t),t=encodeVarint(e,t,s.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=encodeVarint(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function encodeNode(r){const e=sizeNode(r),t=new Uint8Array(e);let s=e;if(r.Data&&(s-=r.Data.length,t.set(r.Data,s),s=encodeVarint(t,s,r.Data.length)-1,t[s]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){const a=encodeLink(r.Links[i],t.subarray(0,s));s-=a,s=encodeVarint(t,s,a)-1,t[s]=18}return t}function sizeLink(r){let e=0;if(r.Hash){const t=r.Hash.length;e+=1+t+sov(t)}if(typeof r.Name=="string"){const t=textEncoder$3.encode(r.Name).length;e+=1+t+sov(t)}return typeof r.Tsize=="number"&&(e+=1+sov(r.Tsize)),e}function sizeNode(r){let e=0;if(r.Data){const t=r.Data.length;e+=1+t+sov(t)}if(r.Links)for(const t of r.Links){const s=sizeLink(t);e+=1+s+sov(s)}return e}function encodeVarint(r,e,t){e-=sov(t);const s=e;for(;t>=maxUInt32;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,s}function sov(r){return r%2===0&&r++,Math.floor((len64(r)+6)/7)}function len64(r){let e=0;return r>=maxInt32&&(r=Math.floor(r/maxInt32),e=32),r>=65536&&(r>>>=16,e+=16),r>=256&&(r>>>=8,e+=8),e+len8tab[r]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$2=new TextEncoder;function linkComparator(r,e){if(r===e)return 0;const t=r.Name?textEncoder$2.encode(r.Name):[],s=e.Name?textEncoder$2.encode(e.Name):[];let i=t.length,a=s.length;for(let l=0,u=Math.min(i,a);l<u;++l)if(t[l]!==s[l]){i=t[l],a=s[l];break}return i<a?-1:a<i?1:0}function hasOnlyProperties(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function asLink(r){if(typeof r.asCID=="object"){const t=CID$4.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Hash){let t=CID$4.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=CID$4.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=CID$4.decode(r.Hash)))}catch(s){throw new TypeError(`Invalid DAG-PB form: ${s.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function prepare(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=textEncoder$2.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate$2(r){if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(r,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<r.Links.length;e++){const t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(t,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&linkComparator(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(r,e=[]){return prepare({Data:r,Links:e})}function createLink(r,e,t){return asLink({Hash:t,Name:r,Tsize:e})}function toByteView$2(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}const name$6="dag-pb",code$6=112;function encode$m(r){validate$2(r);const e={};return r.Links&&(e.Links=r.Links.map(t=>{const s={};return t.Hash&&(s.Hash=t.Hash.bytes),t.Name!==void 0&&(s.Name=t.Name),t.Tsize!==void 0&&(s.Tsize=t.Tsize),s})),r.Data&&(e.Data=r.Data),encodeNode(e)}function decode$v(r){const e=toByteView$2(r),t=decodeNode(e),s={};return t.Data&&(s.Data=t.Data),t.Links&&(s.Links=t.Links.map(i=>{const a={};try{a.Hash=CID$4.decode(i.Hash)}catch{}if(!a.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(a.Name=i.Name),i.Tsize!==void 0&&(a.Tsize=i.Tsize),a})),s}const dagPB=Object.freeze(Object.defineProperty({__proto__:null,code:code$6,createLink,createNode,decode:decode$v,encode:encode$m,name:name$6,prepare,validate:validate$2},Symbol.toStringTag,{value:"Module"})),typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";const e=typeof r;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(isBuffer$1(r))return"Buffer";const t=getObjectType(r);return t||"Object"}function isBuffer$1(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function getObjectType(r){const e=Object.prototype.toString.call(r).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,t,s){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=s}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,t,s){this.type=e,this.value=t,this.encodedLength=s,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$1=new TextEncoder;function isBuffer(r){return useBuffer&&globalThis.Buffer.isBuffer(r)}function asU8A(r){return r instanceof Uint8Array?isBuffer(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}const toString$6=useBuffer?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):utf8Slice(r,e,t):(r,e,t)=>t-e>64?textDecoder$1.decode(r.subarray(e,t)):utf8Slice(r,e,t),fromString$6=useBuffer?r=>r.length>64?globalThis.Buffer.from(r):utf8ToBytes(r):r=>r.length>64?textEncoder$1.encode(r):utf8ToBytes(r),fromArray=r=>Uint8Array.from(r),slice=useBuffer?(r,e,t)=>isBuffer(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),concat$2=useBuffer?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),asU8A(globalThis.Buffer.concat(r,e))):(r,e)=>{const t=new Uint8Array(e);let s=0;for(let i of r)s+i.length>t.length&&(i=i.subarray(0,t.length-s)),t.set(i,s),s+=i.length;return t},alloc=useBuffer?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function compare(r,e){if(isBuffer(r)&&isBuffer(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function utf8ToBytes(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let i=r.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e}function utf8Slice(r,e,t){const s=[];for(;e<t;){const i=r[e];let a=null,l=i>239?4:i>223?3:i>191?2:1;if(e+l<=t){let u,p,x,w;switch(l){case 1:i<128&&(a=i);break;case 2:u=r[e+1],(u&192)===128&&(w=(i&31)<<6|u&63,w>127&&(a=w));break;case 3:u=r[e+1],p=r[e+2],(u&192)===128&&(p&192)===128&&(w=(i&15)<<12|(u&63)<<6|p&63,w>2047&&(w<55296||w>57343)&&(a=w));break;case 4:u=r[e+1],p=r[e+2],x=r[e+3],(u&192)===128&&(p&192)===128&&(x&192)===128&&(w=(i&15)<<18|(u&63)<<12|(p&63)<<6|x&63,w>65535&&w<1114112&&(a=w))}}a===null?(a=65533,l=1):a>65535&&(a-=65536,s.push(a>>>10&1023|55296),a=56320|a&1023),s.push(a),e+=l}return decodeCodePointsArray(s)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(r){const e=r.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,r);let t="",s=0;for(;s<e;)t+=String.fromCharCode.apply(String,r.slice(s,s+=MAX_ARGUMENTS_LENGTH));return t}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){const i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=alloc(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){const s=this.chunks[0];e&&this.cursor>s.length/2?(t=this.cursor===s.length?s:s.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=slice(s,0,this.cursor)}else t=concat$2(this.chunks,this.cursor);return e&&this.reset(),t}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(r,e,t){if(r.length-e<t)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(r,e,t){assertEnoughData(r,e,1);const s=r[e];if(t.strict===!0&&s<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return s}function readUint16(r,e,t){assertEnoughData(r,e,2);const s=r[e]<<8|r[e+1];if(t.strict===!0&&s<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return s}function readUint32(r,e,t){assertEnoughData(r,e,4);const s=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&s<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return s}function readUint64(r,e,t){assertEnoughData(r,e,8);const s=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],a=(BigInt(s)<<BigInt(32))+BigInt(i);if(t.strict===!0&&a<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(t.allowBigInt===!0)return a;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(r,e,t,s){return new Token(Type.uint,readUint8(r,e+1,s),2)}function decodeUint16(r,e,t,s){return new Token(Type.uint,readUint16(r,e+1,s),3)}function decodeUint32(r,e,t,s){return new Token(Type.uint,readUint32(r,e+1,s),5)}function decodeUint64(r,e,t,s){return new Token(Type.uint,readUint64(r,e+1,s),9)}function encodeUint(r,e){return encodeUintValue(r,0,e.value)}function encodeUintValue(r,e,t){if(t<uintBoundaries[0]){const s=Number(t);r.push([e|s])}else if(t<uintBoundaries[1]){const s=Number(t);r.push([e|24,s])}else if(t<uintBoundaries[2]){const s=Number(t);r.push([e|25,s>>>8,s&255])}else if(t<uintBoundaries[3]){const s=Number(t);r.push([e|26,s>>>24&255,s>>>16&255,s>>>8&255,s&255])}else{const s=BigInt(t);if(s<uintBoundaries[4]){const i=[e|27,0,0,0,0,0,0,0];let a=Number(s&BigInt(4294967295)),l=Number(s>>BigInt(32)&BigInt(4294967295));i[8]=a&255,a=a>>8,i[7]=a&255,a=a>>8,i[6]=a&255,a=a>>8,i[5]=a&255,i[4]=l&255,l=l>>8,i[3]=l&255,l=l>>8,i[2]=l&255,l=l>>8,i[1]=l&255,r.push(i)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function decodeNegint8(r,e,t,s){return new Token(Type.negint,-1-readUint8(r,e+1,s),2)}function decodeNegint16(r,e,t,s){return new Token(Type.negint,-1-readUint16(r,e+1,s),3)}function decodeNegint32(r,e,t,s){return new Token(Type.negint,-1-readUint32(r,e+1,s),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(r,e,t,s){const i=readUint64(r,e+1,s);if(typeof i!="bigint"){const a=-1-i;if(a>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,a,9)}if(s.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(i),9)}function encodeNegint(r,e){const t=e.value,s=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;encodeUintValue(r,e.type.majorEncoded,s)}encodeNegint.encodedSize=function(e){const t=e.value,s=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;return s<uintBoundaries[0]?1:s<uintBoundaries[1]?2:s<uintBoundaries[2]?3:s<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function toToken$3(r,e,t,s){assertEnoughData(r,e,t+s);const i=slice(r,e+t,e+t+s);return new Token(Type.bytes,i,t+s)}function decodeBytesCompact(r,e,t,s){return toToken$3(r,e,1,t)}function decodeBytes8(r,e,t,s){return toToken$3(r,e,2,readUint8(r,e+1,s))}function decodeBytes16(r,e,t,s){return toToken$3(r,e,3,readUint16(r,e+1,s))}function decodeBytes32(r,e,t,s){return toToken$3(r,e,5,readUint32(r,e+1,s))}function decodeBytes64(r,e,t,s){const i=readUint64(r,e+1,s);if(typeof i=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(r,e,9,i)}function tokenBytes(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Type.string?fromString$6(r.value):r.value),r.encodedBytes}function encodeBytes(r,e){const t=tokenBytes(e);encodeUintValue(r,e.type.majorEncoded,t.length),r.push(t)}encodeBytes.encodedSize=function(e){const t=tokenBytes(e);return encodeUintValue.encodedSize(t.length)+t.length};encodeBytes.compareTokens=function(e,t){return compareBytes(tokenBytes(e),tokenBytes(t))};function compareBytes(r,e){return r.length<e.length?-1:r.length>e.length?1:compare(r,e)}function toToken$2(r,e,t,s,i){const a=t+s;assertEnoughData(r,e,a);const l=new Token(Type.string,toString$6(r,e+t,e+a),a);return i.retainStringBytes===!0&&(l.byteValue=slice(r,e+t,e+a)),l}function decodeStringCompact(r,e,t,s){return toToken$2(r,e,1,t,s)}function decodeString8(r,e,t,s){return toToken$2(r,e,2,readUint8(r,e+1,s),s)}function decodeString16(r,e,t,s){return toToken$2(r,e,3,readUint16(r,e+1,s),s)}function decodeString32(r,e,t,s){return toToken$2(r,e,5,readUint32(r,e+1,s),s)}function decodeString64(r,e,t,s){const i=readUint64(r,e+1,s);if(typeof i=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(r,e,9,i,s)}const encodeString=encodeBytes;function toToken$1(r,e,t,s){return new Token(Type.array,s,t)}function decodeArrayCompact(r,e,t,s){return toToken$1(r,e,1,t)}function decodeArray8(r,e,t,s){return toToken$1(r,e,2,readUint8(r,e+1,s))}function decodeArray16(r,e,t,s){return toToken$1(r,e,3,readUint16(r,e+1,s))}function decodeArray32(r,e,t,s){return toToken$1(r,e,5,readUint32(r,e+1,s))}function decodeArray64(r,e,t,s){const i=readUint64(r,e+1,s);if(typeof i=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(r,e,9,i)}function decodeArrayIndefinite(r,e,t,s){if(s.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(r,e,1,1/0)}function encodeArray(r,e){encodeUintValue(r,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(r,e,t,s){return new Token(Type.map,s,t)}function decodeMapCompact(r,e,t,s){return toToken(r,e,1,t)}function decodeMap8(r,e,t,s){return toToken(r,e,2,readUint8(r,e+1,s))}function decodeMap16(r,e,t,s){return toToken(r,e,3,readUint16(r,e+1,s))}function decodeMap32(r,e,t,s){return toToken(r,e,5,readUint32(r,e+1,s))}function decodeMap64(r,e,t,s){const i=readUint64(r,e+1,s);if(typeof i=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(r,e,9,i)}function decodeMapIndefinite(r,e,t,s){if(s.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(r,e,1,1/0)}function encodeMap(r,e){encodeUintValue(r,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(r,e,t,s){return new Token(Type.tag,t,1)}function decodeTag8(r,e,t,s){return new Token(Type.tag,readUint8(r,e+1,s),2)}function decodeTag16(r,e,t,s){return new Token(Type.tag,readUint16(r,e+1,s),3)}function decodeTag32(r,e,t,s){return new Token(Type.tag,readUint32(r,e+1,s),5)}function decodeTag64(r,e,t,s){return new Token(Type.tag,readUint64(r,e+1,s),9)}function encodeTag(r,e){encodeUintValue(r,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(r,e,t,s){if(s.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return s.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(r,e,t,s){if(s.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,r,e)}function decodeFloat16(r,e,t,s){return createToken(readFloat16(r,e+1),3,s)}function decodeFloat32(r,e,t,s){return createToken(readFloat32(r,e+1),5,s)}function decodeFloat64(r,e,t,s){return createToken(readFloat64(r,e+1),9,s)}function encodeFloat(r,e,t){const s=e.value;if(s===!1)r.push([Type.float.majorEncoded|MINOR_FALSE]);else if(s===!0)r.push([Type.float.majorEncoded|MINOR_TRUE]);else if(s===null)r.push([Type.float.majorEncoded|MINOR_NULL]);else if(s===void 0)r.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let i,a=!1;(!t||t.float64!==!0)&&(encodeFloat16(s),i=readFloat16(ui8a,1),s===i||Number.isNaN(s)?(ui8a[0]=249,r.push(ui8a.slice(0,3)),a=!0):(encodeFloat32(s),i=readFloat32(ui8a,1),s===i&&(ui8a[0]=250,r.push(ui8a.slice(0,5)),a=!0))),a||(encodeFloat64(s),i=readFloat64(ui8a,1),ui8a[0]=251,r.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,t){const s=e.value;if(s===!1||s===!0||s===null||s===void 0)return 1;if(!t||t.float64!==!0){encodeFloat16(s);let i=readFloat16(ui8a,1);if(s===i||Number.isNaN(s))return 3;if(encodeFloat32(s),i=readFloat32(ui8a,1),s===i)return 5}return 9};const buffer$1=new ArrayBuffer(9),dataView=new DataView(buffer$1,1),ui8a=new Uint8Array(buffer$1,0);function encodeFloat16(r){if(r===1/0)dataView.setUint16(0,31744,!1);else if(r===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(r))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,r);const e=dataView.getUint32(0),t=(e&2139095040)>>23,s=e&8388607;if(t===255)dataView.setUint16(0,31744,!1);else if(t===0)dataView.setUint16(0,(r&2147483648)>>16|s>>13,!1);else{const i=t-127;i<-24?dataView.setUint16(0,0):i<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):dataView.setUint16(0,(e&2147483648)>>16|i+15<<10|s>>13,!1)}}}function readFloat16(r,e){if(r.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const s=t>>10&31,i=t&1023;let a;return s===0?a=i*2**-24:s!==31?a=(i+1024)*2**(s-25):a=i===0?1/0:NaN,t&32768?-a:a}function encodeFloat32(r){dataView.setFloat32(0,r,!1)}function readFloat32(r,e){if(r.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function encodeFloat64(r){dataView.setFloat64(0,r,!1)}function readFloat64(r,e){if(r.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(r,e,t){throw new Error(`${decodeErrPrefix} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function errorer(r){return()=>{throw new Error(`${decodeErrPrefix} ${r}`)}}const jump=[];for(let r=0;r<=23;r++)jump[r]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let r=32;r<=55;r++)jump[r]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let r=64;r<=87;r++)jump[r]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)jump[r]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)jump[r]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let r=160;r<=183;r++)jump[r]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let r=192;r<=215;r++)jump[r]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let r=224;r<=243;r++)jump[r]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let r=0;r<24;r++)quick[r]=new Token(Type.uint,r,1);for(let r=-1;r>=-24;r--)quick[31-r]=new Token(Type.negint,r,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(r){switch(r.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return r.value.length?void 0:fromArray([64]);case Type.string:return r.value===""?fromArray([96]):void 0;case Type.array:return r.value===0?fromArray([128]):void 0;case Type.map:return r.value===0?fromArray([160]):void 0;case Type.uint:return r.value<24?fromArray([Number(r.value)]):void 0;case Type.negint:if(r.value>=-24)return fromArray([31-Number(r.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const r=[];return r[Type.uint.major]=encodeUint,r[Type.negint.major]=encodeNegint,r[Type.bytes.major]=encodeBytes,r[Type.string.major]=encodeString,r[Type.array.major]=encodeArray,r[Type.map.major]=encodeMap,r[Type.tag.major]=encodeTag,r[Type.float.major]=encodeFloat,r}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(t,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(r,e,t,s){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Token(Type.float,r):r>=0?new Token(Type.uint,r):new Token(Type.negint,r)},bigint(r,e,t,s){return r>=BigInt(0)?new Token(Type.uint,r):new Token(Type.negint,r)},Uint8Array(r,e,t,s){return new Token(Type.bytes,r)},string(r,e,t,s){return new Token(Type.string,r)},boolean(r,e,t,s){return r?simpleTokens.true:simpleTokens.false},null(r,e,t,s){return simpleTokens.null},undefined(r,e,t,s){return simpleTokens.undefined},ArrayBuffer(r,e,t,s){return new Token(Type.bytes,new Uint8Array(r))},DataView(r,e,t,s){return new Token(Type.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,s){if(!r.length)return t.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;s=Ref.createCheck(s,r);const i=[];let a=0;for(const l of r)i[a++]=objectToTokens(l,t,s);return t.addBreakTokens?[new Token(Type.array,r.length),i,new Token(Type.break)]:[new Token(Type.array,r.length),i]},Object(r,e,t,s){const i=e!=="Object",a=i?r.keys():Object.keys(r),l=i?r.size:a.length;if(!l)return t.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;s=Ref.createCheck(s,r);const u=[];let p=0;for(const x of a)u[p++]=[objectToTokens(x,t,s),objectToTokens(i?r.get(x):r[x],t,s)];return sortMapEntries(u,t),t.addBreakTokens?[new Token(Type.map,l),u,new Token(Type.break)]:[new Token(Type.map,l),u]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${r}Array`]=typeEncoders.DataView;function objectToTokens(r,e={},t){const s=is(r),i=e&&e.typeEncoders&&e.typeEncoders[s]||typeEncoders[s];if(typeof i=="function"){const l=i(r,s,e,t);if(l!=null)return l}const a=typeEncoders[s];if(!a)throw new Error(`${encodeErrPrefix} unsupported type: ${s}`);return a(r,s,e,t)}function sortMapEntries(r,e){e.mapSorter&&r.sort(e.mapSorter)}function mapSorter$1(r,e){const t=Array.isArray(r[0])?r[0][0]:r[0],s=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==s.type)return t.type.compare(s.type);const i=t.type.major,a=cborEncoders[i].compareTokens(t,s);return a===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),a}function tokensToEncoded(r,e,t,s){if(Array.isArray(e))for(const i of e)tokensToEncoded(r,i,t,s);else t[e.type.major](r,e,s)}function encodeCustom(r,e,t){const s=objectToTokens(r,t);if(!Array.isArray(s)&&t.quickEncodeToken){const i=t.quickEncodeToken(s);if(i)return i;const a=e[s.type.major];if(a.encodedSize){const l=a.encodedSize(s,t),u=new Bl(l);if(a(u,s,t),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${s} was wrong`);return asU8A(u.chunks[0])}}return buf.reset(),tokensToEncoded(buf,s,e,t),buf.toBytes(!0)}function encode$l(r,e){return e=Object.assign({},defaultEncodeOptions$1,e),encodeCustom(r,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let t=quick[e];if(t===void 0){const s=jump[e];if(!s)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=e&31;t=s(this.data,this._pos,i,this.options)}return this._pos+=t.encodedLength,t}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(r,e,t){const s=[];for(let i=0;i<r.value;i++){const a=tokensToObject(e,t);if(a===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(a===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${i}, expected ${r.value})`);s[i]=a}return s}function tokenToMap(r,e,t){const s=t.useMaps===!0,i=s?void 0:{},a=s?new Map:void 0;for(let l=0;l<r.value;l++){const u=tokensToObject(e,t);if(u===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(u===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${l} [no key], expected ${r.value})`);if(s!==!0&&typeof u!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof u})`);if(t.rejectDuplicateMapKeys===!0&&(s&&a.has(u)||!s&&u in i))throw new Error(`${decodeErrPrefix} found repeat map key "${u}"`);const p=tokensToObject(e,t);if(p===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${l} [no value], expected ${r.value})`);s?a.set(u,p):i[u]=p}return s?a:i}function tokensToObject(r,e){if(r.done())return DONE;const t=r.next();if(t.type===Type.break)return BREAK;if(t.type.terminal)return t.value;if(t.type===Type.array)return tokenToArray(t,r,e);if(t.type===Type.map)return tokenToMap(t,r,e);if(t.type===Type.tag){if(e.tags&&typeof e.tags[t.value]=="function"){const s=tokensToObject(r,e);return e.tags[t.value](s)}throw new Error(`${decodeErrPrefix} tag not supported (${t.value})`)}throw new Error("unsupported")}function decodeFirst(r,e){if(!(r instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const t=e.tokenizer||new Tokeniser(r,e),s=tokensToObject(t,e);if(s===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(s===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);return[s,r.subarray(t.pos())]}function decode$u(r,e){const[t,s]=decodeFirst(r,e);if(s.length>0)throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return t}function equals$9(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function coerce$4(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function base$4(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=i}var u=r.length,p=r.charAt(0),x=Math.log(u)/Math.log(256),w=Math.log(256)/Math.log(u);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,k=0,j=0,$=S.length;j!==$&&S[j]===0;)j++,N++;for(var D=($-j)*w+1>>>0,z=new Uint8Array(D);j!==$;){for(var L=S[j],M=0,G=D-1;(L!==0||M<k)&&G!==-1;G--,M++)L+=256*z[G]>>>0,z[G]=L%u>>>0,L=L/u>>>0;if(L!==0)throw new Error("Non-zero carry");k=M,j++}for(var W=D-k;W!==D&&z[W]===0;)W++;for(var q=p.repeat(N);W<D;++W)q+=r.charAt(z[W]);return q}function R(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var k=0,j=0;S[N]===p;)k++,N++;for(var $=(S.length-N)*x+1>>>0,D=new Uint8Array($);S[N];){var z=t[S.charCodeAt(N)];if(z===255)return;for(var L=0,M=$-1;(z!==0||L<j)&&M!==-1;M--,L++)z+=u*D[M]>>>0,D[M]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");j=L,N++}if(S[N]!==" "){for(var G=$-j;G!==$&&D[G]===0;)G++;for(var W=new Uint8Array(k+($-G)),q=k;G!==$;)W[q++]=D[G++];return W}}}function A(S){var N=R(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:R,decode:A}}var src$5=base$4,_brrp__multiformats_scope_baseX$4=src$5;let Encoder$4=class{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$4=class{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseDecode");O(this,"prefixCodePoint");this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$4(this,e)}},ComposedDecoder$4=class{constructor(e){O(this,"decoders");this.decoders=e}or(e){return or$4(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s!=null)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function or$4(r,e){return new ComposedDecoder$4({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let Codec$4=class{constructor(e,t,s,i){O(this,"name");O(this,"prefix");O(this,"baseEncode");O(this,"baseDecode");O(this,"encoder");O(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=i,this.encoder=new Encoder$4(e,t,s),this.decoder=new Decoder$4(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function from$5({name:r,prefix:e,encode:t,decode:s}){return new Codec$4(r,e,t,s)}function baseX$4({name:r,prefix:e,alphabet:t}){const{encode:s,decode:i}=_brrp__multiformats_scope_baseX$4(t,r);return from$5({prefix:e,name:r,encode:s,decode:a=>coerce$4(i(a))})}function decode$t(r,e,t,s){let i=r.length;for(;r[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let l=0,u=0,p=0;for(let x=0;x<i;++x){const w=e[r[x]];if(w===void 0)throw new SyntaxError(`Non-${s} character`);u=u<<t|w,l+=t,l>=8&&(l-=8,a[p++]=255&u>>l)}if(l>=t||(255&u<<8-l)!==0)throw new SyntaxError("Unexpected end of data");return a}function encode$k(r,e,t){const s=e[e.length-1]==="=",i=(1<<t)-1;let a="",l=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],l+=8;l>t;)l-=t,a+=e[i&u>>l];if(l!==0&&(a+=e[i&u<<t-l]),s)for(;(a.length*t&7)!==0;)a+="=";return a}function createAlphabetIdx$2(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function rfc4648$4({name:r,prefix:e,bitsPerChar:t,alphabet:s}){const i=createAlphabetIdx$2(s);return from$5({prefix:e,name:r,encode(a){return encode$k(a,s,t)},decode(a){return decode$t(a,i,t,r)}})}const base32$7=rfc4648$4({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$4({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$4({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$4({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$4({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$4({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$4({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$4({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$4({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base36$7=baseX$4({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});baseX$4({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const base58btc$4=baseX$4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$4=encode$j,MSB$4=128,MSBALL$3=-128,INT$3=Math.pow(2,31);function encode$j(r,e,t){e=e||[],t=t||0;for(var s=t;r>=INT$3;)e[t++]=r&255|MSB$4,r/=128;for(;r&MSBALL$3;)e[t++]=r&255|MSB$4,r>>>=7;return e[t]=r|0,encode$j.bytes=t-s+1,e}var decode$s=read$3,MSB$1$4=128,REST$1$3=127;function read$3(r,s){var t=0,s=s||0,i=0,a=s,l,u=r.length;do{if(a>=u)throw read$3.bytes=0,new RangeError("Could not decode varint");l=r[a++],t+=i<28?(l&REST$1$3)<<i:(l&REST$1$3)*Math.pow(2,i),i+=7}while(l>=MSB$1$4);return read$3.bytes=a-s,t}var N1$4=Math.pow(2,7),N2$4=Math.pow(2,14),N3$4=Math.pow(2,21),N4$4=Math.pow(2,28),N5$4=Math.pow(2,35),N6$4=Math.pow(2,42),N7$4=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$4=function(r){return r<N1$4?1:r<N2$4?2:r<N3$4?3:r<N4$4?4:r<N5$4?5:r<N6$4?6:r<N7$4?7:r<N8$3?8:r<N9$3?9:10},varint$5={encode:encode_1$4,decode:decode$s,encodingLength:length$4},_brrp_varint$3=varint$5;function decode$r(r,e=0){return[_brrp_varint$3.decode(r,e),_brrp_varint$3.decode.bytes]}function encodeTo$3(r,e,t=0){return _brrp_varint$3.encode(r,e,t),e}function encodingLength$4(r){return _brrp_varint$3.encodingLength(r)}function create$4(r,e){const t=e.byteLength,s=encodingLength$4(r),i=s+encodingLength$4(t),a=new Uint8Array(i+t);return encodeTo$3(r,a,0),encodeTo$3(t,a,s),a.set(e,i),new Digest$3(r,t,e,a)}function decode$q(r){const e=coerce$4(r),[t,s]=decode$r(e),[i,a]=decode$r(e.subarray(s)),l=e.subarray(s+a);if(l.byteLength!==i)throw new Error("Incorrect length");return new Digest$3(t,i,l,e)}function equals$8(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&equals$9(r.bytes,t.bytes)}}let Digest$3=class{constructor(e,t,s,i){O(this,"code");O(this,"size");O(this,"digest");O(this,"bytes");this.code=e,this.size=t,this.digest=s,this.bytes=i}};function format$4(r,e){const{bytes:t,version:s}=r;switch(s){case 0:return toStringV0$3(t,baseCache$3(r),e??base58btc$4.encoder);default:return toStringV1$3(t,baseCache$3(r),e??base32$7.encoder)}}const cache$3=new WeakMap;function baseCache$3(r){const e=cache$3.get(r);if(e==null){const t=new Map;return cache$3.set(r,t),t}return e}var Rh;let CID$3=class vt{constructor(e,t,s,i){O(this,"code");O(this,"version");O(this,"multihash");O(this,"bytes");O(this,"/");O(this,Rh,"CID");this.code=t,this.version=e,this.multihash=s,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE$3)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE$3)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return vt.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,s=create$4(e,t);return vt.createV1(this.code,s)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return vt.equals(this,e)}static equals(e,t){const s=t;return s!=null&&e.code===s.code&&e.version===s.version&&equals$8(e.multihash,s.multihash)}toString(e){return format$4(this,e)}toJSON(){return{"/":format$4(this)}}link(){return this}[(Rh=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof vt)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:s,code:i,multihash:a,bytes:l}=t;return new vt(s,i,a,l??encodeCID$4(s,i,a.bytes))}else if(t[cidSymbol$3]===!0){const{version:s,multihash:i,code:a}=t,l=decode$q(i);return vt.create(s,a,l)}else return null}static create(e,t,s){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(s.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==DAG_PB_CODE$3)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$3}) block encoding`);return new vt(e,t,s,s.bytes)}case 1:{const i=encodeCID$4(e,t,s.bytes);return new vt(e,t,s,i)}default:throw new Error("Invalid version")}}static createV0(e){return vt.create(0,DAG_PB_CODE$3,e)}static createV1(e,t){return vt.create(1,e,t)}static decode(e){const[t,s]=vt.decodeFirst(e);if(s.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=vt.inspectBytes(e),s=t.size-t.multihashSize,i=coerce$4(e.subarray(s,s+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const a=i.subarray(t.multihashSize-t.digestSize),l=new Digest$3(t.multihashCode,t.digestSize,a,i);return[t.version===0?vt.createV0(l):vt.createV1(t.codec,l),e.subarray(t.size)]}static inspectBytes(e){let t=0;const s=()=>{const[E,R]=decode$r(e.subarray(t));return t+=R,E};let i=s(),a=DAG_PB_CODE$3;if(i===18?(i=0,t=0):a=s(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const l=t,u=s(),p=s(),x=t+p,w=x-l;return{version:i,codec:a,multihashCode:u,digestSize:p,multihashSize:w,size:x}}static parse(e,t){const[s,i]=parseCIDtoBytes$3(e,t),a=vt.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$3(a).set(s,e),a}};function parseCIDtoBytes$3(r,e){switch(r[0]){case"Q":{const t=e??base58btc$4;return[base58btc$4.prefix,t.decode(`${base58btc$4.prefix}${r}`)]}case base58btc$4.prefix:{const t=e??base58btc$4;return[base58btc$4.prefix,t.decode(r)]}case base32$7.prefix:{const t=e??base32$7;return[base32$7.prefix,t.decode(r)]}case base36$7.prefix:{const t=e??base36$7;return[base36$7.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function toStringV0$3(r,e,t){const{prefix:s}=t;if(s!==base58btc$4.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(s);if(i==null){const a=t.encode(r).slice(1);return e.set(s,a),a}else return i}function toStringV1$3(r,e,t){const{prefix:s}=t,i=e.get(s);if(i==null){const a=t.encode(r);return e.set(s,a),a}else return i}const DAG_PB_CODE$3=112,SHA_256_CODE$3=18;function encodeCID$4(r,e,t){const s=encodingLength$4(r),i=s+encodingLength$4(e),a=new Uint8Array(i+t.byteLength);return encodeTo$3(r,a,0),encodeTo$3(e,a,s),a.set(t,i),a}const cidSymbol$3=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG=42;function toByteView$1(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}function cidEncoder$1(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;const e=CID$3.asCID(r);if(!e)return null;const t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,t)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const _encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}},encodeOptions$1={..._encodeOptions,typeEncoders:{..._encodeOptions.typeEncoders}};function cidDecoder(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$3.decode(r.subarray(1))}const _decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};_decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const decodeOptions$1={..._decodeOptions,tags:_decodeOptions.tags.slice()},name$5="dag-cbor",code$5=113,encode$i=r=>encode$l(r,_encodeOptions),decode$p=r=>decode$u(toByteView$1(r),_decodeOptions),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,code:code$5,decode:decode$p,decodeOptions:decodeOptions$1,encode:encode$i,encodeOptions:encodeOptions$1,name:name$5,toByteView:toByteView$1},Symbol.toStringTag,{value:"Module"}));class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Type.array&&(t.elements++,t.elements!==1&&e.push([44])),t.type===Type.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?e.push([44]):e.push([58]))))}[Type.uint.major](e,t){this.prefix(e);const s=String(t.value),i=[];for(let a=0;a<s.length;a++)i[a]=s.charCodeAt(a);e.push(i)}[Type.negint.major](e,t){this[Type.uint.major](e,t)}[Type.bytes.major](e,t){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,t){this.prefix(e);const s=fromString$6(JSON.stringify(t.value));e.push(s.length>32?asU8A(s):s)}[Type.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,t){}[Type.float.major](e,t){if(t.type.name==="break"){const l=this.inRecursive.pop();if(l){if(l.type===Type.array)e.push([93]);else if(l.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),t.type.name==="true"){e.push([116,114,117,101]);return}else if(t.type.name==="false"){e.push([102,97,108,115,101]);return}else if(t.type.name==="null"){e.push([110,117,108,108]);return}const s=String(t.value),i=[];let a=!1;for(let l=0;l<s.length;l++)i[l]=s.charCodeAt(l),!a&&(i[l]===46||i[l]===101||i[l]===69)&&(a=!0);a||(i.push(46),i.push(48)),e.push(i)}}function mapSorter(r,e){if(Array.isArray(r[0])||Array.isArray(e[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const t=r[0],s=e[0];if(t.type!==Type.string||s.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(t<s)return-1;if(t>s)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$h(r,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(r,new JSONEncoder,e)}class Tokenizer{constructor(e,t={}){this._pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this._pos}`);for(let t=0;t<e.length;t++)if(this.data[this._pos++]!==e[t])throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let t=!1,s=!1;const i=u=>{for(;!this.done();){const p=this.ch();if(u.includes(p))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,s=!0;else return new Token(Type.uint,0,this._pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(s)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);s=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(s=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));const a=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),l=parseFloat(a);return s?new Token(Type.float,l,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(l)?new Token(l>=0?Type.uint:Type.negint,l,this._pos-e):new Token(l>=0?Type.uint:Type.negint,BigInt(a),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let a=this._pos,l=0;a<this.data.length&&l<65536;a++,l++){const u=this.data[a];if(u===92||u<32||u>=128)break;if(u===34){const p=String.fromCharCode.apply(null,this.data.subarray(this._pos,a));return this._pos=a+1,new Token(Type.string,p,l)}}const e=this._pos,t=[],s=()=>{if(this._pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this._pos}`);let a=0;for(let l=0;l<4;l++){let u=this.ch();if(u>=48&&u<=57)u-=48;else if(u>=97&&u<=102)u=u-97+10;else if(u>=65&&u<=70)u=u-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this._pos}`);a=a*16+u,this._pos++}return a},i=()=>{const a=this.ch();let l=null,u=a>239?4:a>223?3:a>191?2:1;if(this._pos+u>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this._pos}`);let p,x,w,E;switch(u){case 1:a<128&&(l=a);break;case 2:p=this.data[this._pos+1],(p&192)===128&&(E=(a&31)<<6|p&63,E>127&&(l=E));break;case 3:p=this.data[this._pos+1],x=this.data[this._pos+2],(p&192)===128&&(x&192)===128&&(E=(a&15)<<12|(p&63)<<6|x&63,E>2047&&(E<55296||E>57343)&&(l=E));break;case 4:p=this.data[this._pos+1],x=this.data[this._pos+2],w=this.data[this._pos+3],(p&192)===128&&(x&192)===128&&(w&192)===128&&(E=(a&15)<<18|(p&63)<<12|(x&63)<<6|w&63,E>65535&&E<1114112&&(l=E))}l===null?(l=65533,u=1):l>65535&&(l-=65536,t.push(l>>>10&1023|55296),l=56320|l&1023),t.push(l),this._pos+=u};for(;!this.done();){const a=this.ch();let l;switch(a){case 92:if(this._pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this._pos}`);switch(l=this.ch(),this._pos++,l){case 34:case 39:case 92:case 47:t.push(l);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(s());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new Token(Type.string,decodeCodePointsArray(t),this._pos-e);default:if(a<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this._pos}`);a<128?(t.push(a),this._pos++):i()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function decode$o(r,e){return e=Object.assign({tokenizer:new Tokenizer(r,e)},e),decode$u(r,e)}function equals$7(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function coerce$3(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function base$3(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=i}var u=r.length,p=r.charAt(0),x=Math.log(u)/Math.log(256),w=Math.log(256)/Math.log(u);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,k=0,j=0,$=S.length;j!==$&&S[j]===0;)j++,N++;for(var D=($-j)*w+1>>>0,z=new Uint8Array(D);j!==$;){for(var L=S[j],M=0,G=D-1;(L!==0||M<k)&&G!==-1;G--,M++)L+=256*z[G]>>>0,z[G]=L%u>>>0,L=L/u>>>0;if(L!==0)throw new Error("Non-zero carry");k=M,j++}for(var W=D-k;W!==D&&z[W]===0;)W++;for(var q=p.repeat(N);W<D;++W)q+=r.charAt(z[W]);return q}function R(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var k=0,j=0;S[N]===p;)k++,N++;for(var $=(S.length-N)*x+1>>>0,D=new Uint8Array($);S[N];){var z=t[S.charCodeAt(N)];if(z===255)return;for(var L=0,M=$-1;(z!==0||L<j)&&M!==-1;M--,L++)z+=u*D[M]>>>0,D[M]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");j=L,N++}if(S[N]!==" "){for(var G=$-j;G!==$&&D[G]===0;)G++;for(var W=new Uint8Array(k+($-G)),q=k;G!==$;)W[q++]=D[G++];return W}}}function A(S){var N=R(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:R,decode:A}}var src$4=base$3,_brrp__multiformats_scope_baseX$3=src$4;let Encoder$3=class{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseDecode");O(this,"prefixCodePoint");this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$3(this,e)}},ComposedDecoder$3=class{constructor(e){O(this,"decoders");this.decoders=e}or(e){return or$3(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s!=null)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function or$3(r,e){return new ComposedDecoder$3({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let Codec$3=class{constructor(e,t,s,i){O(this,"name");O(this,"prefix");O(this,"baseEncode");O(this,"baseDecode");O(this,"encoder");O(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=i,this.encoder=new Encoder$3(e,t,s),this.decoder=new Decoder$3(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function from$4({name:r,prefix:e,encode:t,decode:s}){return new Codec$3(r,e,t,s)}function baseX$3({name:r,prefix:e,alphabet:t}){const{encode:s,decode:i}=_brrp__multiformats_scope_baseX$3(t,r);return from$4({prefix:e,name:r,encode:s,decode:a=>coerce$3(i(a))})}function decode$n(r,e,t,s){let i=r.length;for(;r[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let l=0,u=0,p=0;for(let x=0;x<i;++x){const w=e[r[x]];if(w===void 0)throw new SyntaxError(`Non-${s} character`);u=u<<t|w,l+=t,l>=8&&(l-=8,a[p++]=255&u>>l)}if(l>=t||(255&u<<8-l)!==0)throw new SyntaxError("Unexpected end of data");return a}function encode$g(r,e,t){const s=e[e.length-1]==="=",i=(1<<t)-1;let a="",l=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],l+=8;l>t;)l-=t,a+=e[i&u>>l];if(l!==0&&(a+=e[i&u<<t-l]),s)for(;(a.length*t&7)!==0;)a+="=";return a}function createAlphabetIdx$1(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function rfc4648$3({name:r,prefix:e,bitsPerChar:t,alphabet:s}){const i=createAlphabetIdx$1(s);return from$4({prefix:e,name:r,encode(a){return encode$g(a,s,t)},decode(a){return decode$n(a,i,t,r)}})}const base32$6=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base36$6=baseX$3({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});baseX$3({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$3=encode$f,MSB$3=128,MSBALL$2=-128,INT$2=Math.pow(2,31);function encode$f(r,e,t){e=e||[],t=t||0;for(var s=t;r>=INT$2;)e[t++]=r&255|MSB$3,r/=128;for(;r&MSBALL$2;)e[t++]=r&255|MSB$3,r>>>=7;return e[t]=r|0,encode$f.bytes=t-s+1,e}var decode$m=read$2,MSB$1$3=128,REST$1$2=127;function read$2(r,s){var t=0,s=s||0,i=0,a=s,l,u=r.length;do{if(a>=u)throw read$2.bytes=0,new RangeError("Could not decode varint");l=r[a++],t+=i<28?(l&REST$1$2)<<i:(l&REST$1$2)*Math.pow(2,i),i+=7}while(l>=MSB$1$3);return read$2.bytes=a-s,t}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$3=function(r){return r<N1$3?1:r<N2$3?2:r<N3$3?3:r<N4$3?4:r<N5$3?5:r<N6$3?6:r<N7$3?7:r<N8$2?8:r<N9$2?9:10},varint$4={encode:encode_1$3,decode:decode$m,encodingLength:length$3},_brrp_varint$2=varint$4;function decode$l(r,e=0){return[_brrp_varint$2.decode(r,e),_brrp_varint$2.decode.bytes]}function encodeTo$2(r,e,t=0){return _brrp_varint$2.encode(r,e,t),e}function encodingLength$3(r){return _brrp_varint$2.encodingLength(r)}function create$3(r,e){const t=e.byteLength,s=encodingLength$3(r),i=s+encodingLength$3(t),a=new Uint8Array(i+t);return encodeTo$2(r,a,0),encodeTo$2(t,a,s),a.set(e,i),new Digest$2(r,t,e,a)}function decode$k(r){const e=coerce$3(r),[t,s]=decode$l(e),[i,a]=decode$l(e.subarray(s)),l=e.subarray(s+a);if(l.byteLength!==i)throw new Error("Incorrect length");return new Digest$2(t,i,l,e)}function equals$6(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&equals$7(r.bytes,t.bytes)}}let Digest$2=class{constructor(e,t,s,i){O(this,"code");O(this,"size");O(this,"digest");O(this,"bytes");this.code=e,this.size=t,this.digest=s,this.bytes=i}};function format$3(r,e){const{bytes:t,version:s}=r;switch(s){case 0:return toStringV0$2(t,baseCache$2(r),e??base58btc$3.encoder);default:return toStringV1$2(t,baseCache$2(r),e??base32$6.encoder)}}const cache$2=new WeakMap;function baseCache$2(r){const e=cache$2.get(r);if(e==null){const t=new Map;return cache$2.set(r,t),t}return e}var Ah;let CID$2=class St{constructor(e,t,s,i){O(this,"code");O(this,"version");O(this,"multihash");O(this,"bytes");O(this,"/");O(this,Ah,"CID");this.code=t,this.version=e,this.multihash=s,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return St.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,s=create$3(e,t);return St.createV1(this.code,s)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return St.equals(this,e)}static equals(e,t){const s=t;return s!=null&&e.code===s.code&&e.version===s.version&&equals$6(e.multihash,s.multihash)}toString(e){return format$3(this,e)}toJSON(){return{"/":format$3(this)}}link(){return this}[(Ah=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof St)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:s,code:i,multihash:a,bytes:l}=t;return new St(s,i,a,l??encodeCID$3(s,i,a.bytes))}else if(t[cidSymbol$2]===!0){const{version:s,multihash:i,code:a}=t,l=decode$k(i);return St.create(s,a,l)}else return null}static create(e,t,s){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(s.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new St(e,t,s,s.bytes)}case 1:{const i=encodeCID$3(e,t,s.bytes);return new St(e,t,s,i)}default:throw new Error("Invalid version")}}static createV0(e){return St.create(0,DAG_PB_CODE$2,e)}static createV1(e,t){return St.create(1,e,t)}static decode(e){const[t,s]=St.decodeFirst(e);if(s.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=St.inspectBytes(e),s=t.size-t.multihashSize,i=coerce$3(e.subarray(s,s+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const a=i.subarray(t.multihashSize-t.digestSize),l=new Digest$2(t.multihashCode,t.digestSize,a,i);return[t.version===0?St.createV0(l):St.createV1(t.codec,l),e.subarray(t.size)]}static inspectBytes(e){let t=0;const s=()=>{const[E,R]=decode$l(e.subarray(t));return t+=R,E};let i=s(),a=DAG_PB_CODE$2;if(i===18?(i=0,t=0):a=s(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const l=t,u=s(),p=s(),x=t+p,w=x-l;return{version:i,codec:a,multihashCode:u,digestSize:p,multihashSize:w,size:x}}static parse(e,t){const[s,i]=parseCIDtoBytes$2(e,t),a=St.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$2(a).set(s,e),a}};function parseCIDtoBytes$2(r,e){switch(r[0]){case"Q":{const t=e??base58btc$3;return[base58btc$3.prefix,t.decode(`${base58btc$3.prefix}${r}`)]}case base58btc$3.prefix:{const t=e??base58btc$3;return[base58btc$3.prefix,t.decode(r)]}case base32$6.prefix:{const t=e??base32$6;return[base32$6.prefix,t.decode(r)]}case base36$6.prefix:{const t=e??base36$6;return[base36$6.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function toStringV0$2(r,e,t){const{prefix:s}=t;if(s!==base58btc$3.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(s);if(i==null){const a=t.encode(r).slice(1);return e.set(s,a),a}else return i}function toStringV1$2(r,e,t){const{prefix:s}=t,i=e.get(s);if(i==null){const a=t.encode(r);return e.set(s,a),a}else return i}const DAG_PB_CODE$2=112,SHA_256_CODE$2=18;function encodeCID$3(r,e,t){const s=encodingLength$3(r),i=s+encodingLength$3(e),a=new Uint8Array(i+t.byteLength);return encodeTo$2(r,a,0),encodeTo$2(e,a,s),a.set(t,i),a}const cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),base64$7=rfc4648$3({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648$3({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648$3({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648$3({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function toByteView(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}function cidEncoder(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;const e=CID$2.asCID(r);if(!e)return null;const t=e.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,t,t.length),new Token(Type.break,void 0,1)]}function bytesEncoder(r){const e=base64$7.encode(r).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,e,e.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function taBytesEncoder(r){return bytesEncoder(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}function abBytesEncoder(r){return bytesEncoder(new Uint8Array(r))}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Buffer:bytesEncoder,Uint8Array:bytesEncoder,Int8Array:taBytesEncoder,Uint16Array:taBytesEncoder,Int16Array:taBytesEncoder,Uint32Array:taBytesEncoder,Int32Array:taBytesEncoder,Float32Array:taBytesEncoder,Float64Array:taBytesEncoder,Uint8ClampedArray:taBytesEncoder,BigInt64Array:taBytesEncoder,BigUint64Array:taBytesEncoder,DataView:taBytesEncoder,ArrayBuffer:abBytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const t=this._next();if(t.type===Type.string&&t.value==="/"){const s=this._next();if(s.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(s),new Token(Type.tag,42,0)}if(s.type===Type.map){const i=this._next();if(i.type===Type.string&&i.value==="bytes"){const a=this._next();if(a.type===Type.string){for(let u=0;u<2;u++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const l=base64$7.decode(`m${a.value}`);return new Token(Type.bytes,l,a.value.length)}this.tokenBuffer.push(a)}this.tokenBuffer.push(i)}this.tokenBuffer.push(s)}this.tokenBuffer.push(t)}return e}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions.tags[42]=CID$2.parse;const name$4="dag-json",code$4=297,encode$e=r=>encode$h(r,encodeOptions),decode$j=r=>{const e=toByteView(r),t=Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(e,decodeOptions)});return decode$o(e,t)},format$2=r=>utf8Decoder.decode(encode$e(r)),utf8Decoder=new TextDecoder,parse$1=r=>decode$j(utf8Encoder.encode(r)),utf8Encoder=new TextEncoder,dagJSON=Object.freeze(Object.defineProperty({__proto__:null,code:code$4,decode:decode$j,encode:encode$e,format:format$2,name:name$4,parse:parse$1,stringify:format$2},Symbol.toStringTag,{value:"Module"}));function base$2(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=i}var u=r.length,p=r.charAt(0),x=Math.log(u)/Math.log(256),w=Math.log(256)/Math.log(u);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,k=0,j=0,$=S.length;j!==$&&S[j]===0;)j++,N++;for(var D=($-j)*w+1>>>0,z=new Uint8Array(D);j!==$;){for(var L=S[j],M=0,G=D-1;(L!==0||M<k)&&G!==-1;G--,M++)L+=256*z[G]>>>0,z[G]=L%u>>>0,L=L/u>>>0;if(L!==0)throw new Error("Non-zero carry");k=M,j++}for(var W=D-k;W!==D&&z[W]===0;)W++;for(var q=p.repeat(N);W<D;++W)q+=r.charAt(z[W]);return q}function R(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var k=0,j=0;S[N]===p;)k++,N++;for(var $=(S.length-N)*x+1>>>0,D=new Uint8Array($);S[N];){var z=t[S.charCodeAt(N)];if(z===255)return;for(var L=0,M=$-1;(z!==0||L<j)&&M!==-1;M--,L++)z+=u*D[M]>>>0,D[M]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");j=L,N++}if(S[N]!==" "){for(var G=$-j;G!==$&&D[G]===0;)G++;for(var W=new Uint8Array(k+($-G)),q=k;G!==$;)W[q++]=D[G++];return W}}}function A(S){var N=R(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:R,decode:A}}var src$3=base$2,_brrp__multiformats_scope_baseX$2=src$3;const equals$5=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},coerce$2=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},fromString$5=r=>new TextEncoder().encode(r),toString$5=r=>new TextDecoder().decode(r);let Encoder$2=class{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$2=class{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}},ComposedDecoder$2=class{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$2=(r,e)=>new ComposedDecoder$2({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let Codec$2=class{constructor(e,t,s,i){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=i,this.encoder=new Encoder$2(e,t,s),this.decoder=new Decoder$2(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$3=({name:r,prefix:e,encode:t,decode:s})=>new Codec$2(r,e,t,s),baseX$2=({prefix:r,name:e,alphabet:t})=>{const{encode:s,decode:i}=_brrp__multiformats_scope_baseX$2(t,e);return from$3({prefix:r,name:e,encode:s,decode:a=>coerce$2(i(a))})},decode$i=(r,e,t,s)=>{const i={};for(let w=0;w<e.length;++w)i[e[w]]=w;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*t/8|0);let u=0,p=0,x=0;for(let w=0;w<a;++w){const E=i[r[w]];if(E===void 0)throw new SyntaxError(`Non-${s} character`);p=p<<t|E,u+=t,u>=8&&(u-=8,l[x++]=255&p>>u)}if(u>=t||255&p<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode$d=(r,e,t)=>{const s=e[e.length-1]==="=",i=(1<<t)-1;let a="",l=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],l+=8;l>t;)l-=t,a+=e[i&u>>l];if(l&&(a+=e[i&u<<t-l]),s)for(;a.length*t&7;)a+="=";return a},rfc4648$2=({name:r,prefix:e,bitsPerChar:t,alphabet:s})=>from$3({prefix:e,name:r,encode(i){return encode$d(i,s,t)},decode(i){return decode$i(i,s,t,r)}}),base64$5=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$2=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$2=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$2=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$6=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$5,base64pad:base64pad$2,base64url:base64url$2,base64urlpad:base64urlpad$2},Symbol.toStringTag,{value:"Module"}));function toBase64url(r){return base64url$2.encode(r).slice(1)}function fromBase64url(r){return base64url$2.decode(`u${r}`)}var encode_1$2=encode$c,MSB$2=128,MSBALL$1=-128,INT$1=Math.pow(2,31);function encode$c(r,e,t){e=e||[],t=t||0;for(var s=t;r>=INT$1;)e[t++]=r&255|MSB$2,r/=128;for(;r&MSBALL$1;)e[t++]=r&255|MSB$2,r>>>=7;return e[t]=r|0,encode$c.bytes=t-s+1,e}var decode$h=read$1,MSB$1$2=128,REST$1$1=127;function read$1(r,s){var t=0,s=s||0,i=0,a=s,l,u=r.length;do{if(a>=u)throw read$1.bytes=0,new RangeError("Could not decode varint");l=r[a++],t+=i<28?(l&REST$1$1)<<i:(l&REST$1$1)*Math.pow(2,i),i+=7}while(l>=MSB$1$2);return read$1.bytes=a-s,t}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$2=function(r){return r<N1$2?1:r<N2$2?2:r<N3$2?3:r<N4$2?4:r<N5$2?5:r<N6$2?6:r<N7$2?7:r<N8$1?8:r<N9$1?9:10},varint$3={encode:encode_1$2,decode:decode$h,encodingLength:length$2},_brrp_varint$1=varint$3;const decode$g=(r,e=0)=>[_brrp_varint$1.decode(r,e),_brrp_varint$1.decode.bytes],encodeTo$1=(r,e,t=0)=>(_brrp_varint$1.encode(r,e,t),e),encodingLength$2=r=>_brrp_varint$1.encodingLength(r),create$2=(r,e)=>{const t=e.byteLength,s=encodingLength$2(r),i=s+encodingLength$2(t),a=new Uint8Array(i+t);return encodeTo$1(r,a,0),encodeTo$1(t,a,s),a.set(e,i),new Digest$1(r,t,e,a)},decode$f=r=>{const e=coerce$2(r),[t,s]=decode$g(e),[i,a]=decode$g(e.subarray(s)),l=e.subarray(s+a);if(l.byteLength!==i)throw new Error("Incorrect length");return new Digest$1(t,i,l,e)},equals$4=(r,e)=>{if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&equals$5(r.bytes,t.bytes)}};let Digest$1=class{constructor(e,t,s,i){this.code=e,this.size=t,this.digest=s,this.bytes=i}};const base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$2=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr:base58flickr$2},Symbol.toStringTag,{value:"Module"})),base32$4=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$2=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$2=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$2=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$2=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$2=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$2=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$2=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$5=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$4,base32hex:base32hex$2,base32hexpad:base32hexpad$2,base32hexpadupper:base32hexpadupper$2,base32hexupper:base32hexupper$2,base32pad:base32pad$2,base32padupper:base32padupper$2,base32upper:base32upper$2,base32z:base32z$2},Symbol.toStringTag,{value:"Module"})),format$1=(r,e)=>{const{bytes:t,version:s}=r;switch(s){case 0:return toStringV0$1(t,baseCache$1(r),e||base58btc$2.encoder);default:return toStringV1$1(t,baseCache$1(r),e||base32$4.encoder)}},cache$1=new WeakMap,baseCache$1=r=>{const e=cache$1.get(r);if(e==null){const t=new Map;return cache$1.set(r,t),t}return e};let CID$1=class Rt{constructor(e,t,s,i){this.code=t,this.version=e,this.multihash=s,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Rt.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,s=create$2(e,t);return Rt.createV1(this.code,s)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Rt.equals(this,e)}static equals(e,t){const s=t;return s&&e.code===s.code&&e.version===s.version&&equals$4(e.multihash,s.multihash)}toString(e){return format$1(this,e)}toJSON(){return{"/":format$1(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof Rt)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:s,code:i,multihash:a,bytes:l}=t;return new Rt(s,i,a,l||encodeCID$2(s,i,a.bytes))}else if(t[cidSymbol$1]===!0){const{version:s,multihash:i,code:a}=t,l=decode$f(i);return Rt.create(s,a,l)}else return null}static create(e,t,s){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(s.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new Rt(e,t,s,s.bytes)}case 1:{const i=encodeCID$2(e,t,s.bytes);return new Rt(e,t,s,i)}default:throw new Error("Invalid version")}}static createV0(e){return Rt.create(0,DAG_PB_CODE$1,e)}static createV1(e,t){return Rt.create(1,e,t)}static decode(e){const[t,s]=Rt.decodeFirst(e);if(s.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Rt.inspectBytes(e),s=t.size-t.multihashSize,i=coerce$2(e.subarray(s,s+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const a=i.subarray(t.multihashSize-t.digestSize),l=new Digest$1(t.multihashCode,t.digestSize,a,i);return[t.version===0?Rt.createV0(l):Rt.createV1(t.codec,l),e.subarray(t.size)]}static inspectBytes(e){let t=0;const s=()=>{const[E,R]=decode$g(e.subarray(t));return t+=R,E};let i=s(),a=DAG_PB_CODE$1;if(i===18?(i=0,t=0):a=s(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const l=t,u=s(),p=s(),x=t+p,w=x-l;return{version:i,codec:a,multihashCode:u,digestSize:p,multihashSize:w,size:x}}static parse(e,t){const[s,i]=parseCIDtoBytes$1(e,t),a=Rt.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(a).set(s,e),a}};const parseCIDtoBytes$1=(r,e)=>{switch(r[0]){case"Q":{const t=e||base58btc$2;return[base58btc$2.prefix,t.decode(`${base58btc$2.prefix}${r}`)]}case base58btc$2.prefix:{const t=e||base58btc$2;return[base58btc$2.prefix,t.decode(r)]}case base32$4.prefix:{const t=e||base32$4;return[base32$4.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},toStringV0$1=(r,e,t)=>{const{prefix:s}=t;if(s!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(s);if(i==null){const a=t.encode(r).slice(1);return e.set(s,a),a}else return i},toStringV1$1=(r,e,t)=>{const{prefix:s}=t,i=e.get(s);if(i==null){const a=t.encode(r);return e.set(s,a),a}else return i},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$2=(r,e,t)=>{const s=encodingLength$2(r),i=s+encodingLength$2(e),a=new Uint8Array(i+t.byteLength);return encodeTo$1(r,a,0),encodeTo$1(e,a,s),a.set(t,i),a},cidSymbol$1=Symbol.for("@ipld/js-cid/CID");function fromSplit$1(r){const[e,t,s]=r;return{payload:t,signatures:[{protected:e,signature:s}],link:CID$1.decode(fromBase64url(t))}}function encodeSignature(r){const e={signature:fromBase64url(r.signature)};return r.header&&(e.header=r.header),r.protected&&(e.protected=fromBase64url(r.protected)),e}function encode$b(r){const e=fromBase64url(r.payload);try{CID$1.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:r.signatures.map(encodeSignature)}}function decodeSignature(r){const e={signature:toBase64url(r.signature)};return r.header&&(e.header=r.header),r.protected&&(e.protected=toBase64url(r.protected)),e}function decode$e(r){const e={payload:toBase64url(r.payload),signatures:r.signatures.map(decodeSignature)};return e.link=CID$1.decode(new Uint8Array(r.payload)),e}function fromSplit(r){const[e,t,s,i,a]=r,l={ciphertext:i,iv:s,protected:e,tag:a};return t&&(l.recipients=[{encrypted_key:t}]),l}function encodeRecipient(r){const e={};return r.encrypted_key&&(e.encrypted_key=fromBase64url(r.encrypted_key)),r.header&&(e.header=r.header),e}function encode$a(r){const e={ciphertext:fromBase64url(r.ciphertext),protected:fromBase64url(r.protected),iv:fromBase64url(r.iv),tag:fromBase64url(r.tag)};return r.aad&&(e.aad=fromBase64url(r.aad)),r.recipients&&(e.recipients=r.recipients.map(encodeRecipient)),r.unprotected&&(e.unprotected=r.unprotected),e}function decodeRecipient(r){const e={};return r.encrypted_key&&(e.encrypted_key=toBase64url(r.encrypted_key)),r.header&&(e.header=r.header),e}function decode$d(r){const e={ciphertext:toBase64url(r.ciphertext),protected:toBase64url(r.protected),iv:toBase64url(r.iv),tag:toBase64url(r.tag)};return r.aad&&(e.aad=toBase64url(r.aad)),r.recipients&&(e.recipients=r.recipients.map(decodeRecipient)),r.unprotected&&(e.unprotected=r.unprotected),e}const name$3="dag-jose",code$3=133;function isDagJWS(r){return"payload"in r&&typeof r.payload=="string"&&"signatures"in r&&Array.isArray(r.signatures)}function isEncodedJWS(r){return"payload"in r&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures)}function isEncodedJWE(r){return"ciphertext"in r&&r.ciphertext instanceof Uint8Array&&"iv"in r&&r.iv instanceof Uint8Array&&"protected"in r&&r.protected instanceof Uint8Array&&"tag"in r&&r.tag instanceof Uint8Array}function isDagJWE(r){return"ciphertext"in r&&typeof r.ciphertext=="string"&&"iv"in r&&typeof r.iv=="string"&&"protected"in r&&typeof r.protected=="string"&&"tag"in r&&typeof r.tag=="string"}function toGeneral(r){if(typeof r=="string"){const e=r.split(".");if(e.length===3)return fromSplit$1(e);if(e.length===5)return fromSplit(e);throw new Error("Not a valid JOSE string")}if(isDagJWS(r)||isDagJWE(r))return r;throw new Error("Not a valid unencoded JOSE object")}function encode$9(r){typeof r=="string"&&(r=toGeneral(r));let e;if(isDagJWS(r))e=encode$b(r);else if(isDagJWE(r))e=encode$a(r);else throw new Error("Not a valid JOSE object");return new Uint8Array(encode$i(e))}function decode$c(r){let e;try{e=decode$p(r)}catch{throw new Error("Not a valid DAG-JOSE object")}if(isEncodedJWS(e))return decode$e(e);if(isEncodedJWE(e))return decode$d(e);throw new Error("Not a valid DAG-JOSE object")}const dagJOSE=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$c,encode:encode$9,name:name$3,toGeneral},Symbol.toStringTag,{value:"Module"})),code$2=0,name$2="identity",encode$8=coerce$2,digest=r=>create$2(code$2,encode$8(r)),identity$3={code:code$2,name:name$2,encode:encode$8,digest},identity$4=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"})),identity$2=from$3({prefix:"\0",name:"identity",encode:r=>toString$5(r),decode:r=>fromString$5(r)}),identityBase$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$2},Symbol.toStringTag,{value:"Module"})),base2$4=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$5=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$4},Symbol.toStringTag,{value:"Module"})),base8$4=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$5=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$4},Symbol.toStringTag,{value:"Module"})),base10$4=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$5=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$4},Symbol.toStringTag,{value:"Module"})),base16$4=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$2=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$5=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$4,base16upper:base16upper$2},Symbol.toStringTag,{value:"Module"})),base36$4=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$2=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$5=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$4,base36upper:base36upper$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from(""),alphabetBytesToChars$2=alphabet$2.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes$2=alphabet$2.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function encode$7(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars$2[t],e),"")}function decode$b(r){const e=[];for(const t of r){const s=alphabetCharsToBytes$2[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const base256emoji$4=from$3({prefix:"",name:"base256emoji",encode:encode$7,decode:decode$b}),base256emoji$5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$4},Symbol.toStringTag,{value:"Module"})),from$2=({name:r,code:e,encode:t})=>new Hasher(r,e,t);class Hasher{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create$2(this.code,t):t.then(s=>create$2(this.code,s))}else throw Error("Unknown type, must be binary type")}}const sha=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),sha256=from$2({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from$2({name:"sha2-512",code:19,encode:sha("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256,sha512},Symbol.toStringTag,{value:"Module"})),name$1="raw",code$1=85,encode$6=r=>coerce$2(r),decode$a=r=>coerce$2(r),raw=Object.freeze(Object.defineProperty({__proto__:null,code:code$1,decode:decode$a,encode:encode$6,name:name$1},Symbol.toStringTag,{value:"Module"})),textEncoder=new TextEncoder,textDecoder=new TextDecoder,name="json",code=512,encode$5=r=>textEncoder.encode(JSON.stringify(r)),decode$9=r=>JSON.parse(textDecoder.decode(r)),json=Object.freeze(Object.defineProperty({__proto__:null,code,decode:decode$9,encode:encode$5,name},Symbol.toStringTag,{value:"Module"})),bases$2={...identityBase$2,...base2$5,...base8$5,...base10$5,...base16$5,...base32$5,...base36$5,...base58$2,...base64$6,...base256emoji$5},hashes={...sha2,...identity$4},codecs$1={raw,json};class Parser{constructor(){O(this,"index",0);O(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const t=this.index,s=e();return s===void 0&&(this.index=t),s}parseWith(e){const t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const t=this.readChar();if(t===e)return t})}readSeparator(e,t,s){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return s()})}readNumber(e,t,s,i){return this.readAtomically(()=>{let a=0,l=0;const u=this.peekChar();if(u===void 0)return;const p=u==="0",x=2**(8*i)-1;for(;;){const w=this.readAtomically(()=>{const E=this.readChar();if(E===void 0)return;const R=Number.parseInt(E,e);if(!Number.isNaN(R))return R});if(w===void 0)break;if(a*=e,a+=w,a>x||(l+=1,t!==void 0&&l>t))return}if(l!==0)return!s&&p&&l>1?void 0:a})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let t=0;t<e.length;t++){const s=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(s===void 0)return;e[t]=s}return e})}readIPv6Addr(){const e=t=>{for(let s=0;s<t.length/2;s++){const i=s*2;if(s<t.length-3){const l=this.readSeparator(":",s,()=>this.readIPv4Addr());if(l!==void 0)return t[i]=l[0],t[i+1]=l[1],t[i+2]=l[2],t[i+3]=l[3],[i+4,!0]}const a=this.readSeparator(":",s,()=>this.readNumber(16,4,!0,2));if(a===void 0)return[i,!1];t[i]=a>>8,t[i+1]=a&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[s,i]=e(t);if(s===16)return t;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const a=new Uint8Array(14),l=16-(s+2),[u]=e(a.subarray(0,l));return t.set(a.subarray(0,u),16-u),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser=new Parser;function parseIPv4(r){if(!(r.length>MAX_IPV4_LENGTH))return parser.new(r).parseWith(()=>parser.readIPv4Addr())}function parseIPv6(r){if(r.includes("%")&&(r=r.split("%")[0]),!(r.length>MAX_IPV6_LENGTH))return parser.new(r).parseWith(()=>parser.readIPv6Addr())}function parseIP(r,e=!1){if(r.includes("%")&&(r=r.split("%")[0]),r.length>MAX_IPV6_LENGTH)return;const t=parser.new(r).parseWith(()=>parser.readIPAddr());if(t)return e&&t.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,t[0],t[1],t[2],t[3]]):t}function isIPv4(r){return!!parseIPv4(r)}function isIPv6(r){return!!parseIPv6(r)}function isIP(r){return!!parseIP(r)}function base$1(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=i}var u=r.length,p=r.charAt(0),x=Math.log(u)/Math.log(256),w=Math.log(256)/Math.log(u);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,k=0,j=0,$=S.length;j!==$&&S[j]===0;)j++,N++;for(var D=($-j)*w+1>>>0,z=new Uint8Array(D);j!==$;){for(var L=S[j],M=0,G=D-1;(L!==0||M<k)&&G!==-1;G--,M++)L+=256*z[G]>>>0,z[G]=L%u>>>0,L=L/u>>>0;if(L!==0)throw new Error("Non-zero carry");k=M,j++}for(var W=D-k;W!==D&&z[W]===0;)W++;for(var q=p.repeat(N);W<D;++W)q+=r.charAt(z[W]);return q}function R(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var k=0,j=0;S[N]===p;)k++,N++;for(var $=(S.length-N)*x+1>>>0,D=new Uint8Array($);S[N];){var z=t[S.charCodeAt(N)];if(z===255)return;for(var L=0,M=$-1;(z!==0||L<j)&&M!==-1;M--,L++)z+=u*D[M]>>>0,D[M]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");j=L,N++}if(S[N]!==" "){for(var G=$-j;G!==$&&D[G]===0;)G++;for(var W=new Uint8Array(k+($-G)),q=k;G!==$;)W[q++]=D[G++];return W}}}function A(S){var N=R(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:R,decode:A}}var src$2=base$1,_brrp__multiformats_scope_baseX$1=src$2;const coerce$1=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},fromString$4=r=>new TextEncoder().encode(r),toString$4=r=>new TextDecoder().decode(r);let Encoder$1=class{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}},ComposedDecoder$1=class{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$1=(r,e)=>new ComposedDecoder$1({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let Codec$1=class{constructor(e,t,s,i){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=i,this.encoder=new Encoder$1(e,t,s),this.decoder=new Decoder$1(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$1=({name:r,prefix:e,encode:t,decode:s})=>new Codec$1(r,e,t,s),baseX$1=({prefix:r,name:e,alphabet:t})=>{const{encode:s,decode:i}=_brrp__multiformats_scope_baseX$1(t,e);return from$1({prefix:r,name:e,encode:s,decode:a=>coerce$1(i(a))})},decode$8=(r,e,t,s)=>{const i={};for(let w=0;w<e.length;++w)i[e[w]]=w;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*t/8|0);let u=0,p=0,x=0;for(let w=0;w<a;++w){const E=i[r[w]];if(E===void 0)throw new SyntaxError(`Non-${s} character`);p=p<<t|E,u+=t,u>=8&&(u-=8,l[x++]=255&p>>u)}if(u>=t||255&p<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode$4=(r,e,t)=>{const s=e[e.length-1]==="=",i=(1<<t)-1;let a="",l=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],l+=8;l>t;)l-=t,a+=e[i&u>>l];if(l&&(a+=e[i&u<<t-l]),s)for(;a.length*t&7;)a+="=";return a},rfc4648$1=({name:r,prefix:e,bitsPerChar:t,alphabet:s})=>from$1({prefix:e,name:r,encode(i){return encode$4(i,s,t)},decode(i){return decode$8(i,s,t,r)}}),base10$2=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from(""),alphabetBytesToChars$1=alphabet$1.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes$1=alphabet$1.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function encode$3(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars$1[t],e),"")}function decode$7(r){const e=[];for(const t of r){const s=alphabetCharsToBytes$1[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const base256emoji$2=from$1({prefix:"",name:"base256emoji",encode:encode$3,decode:decode$7}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"})),base32$2=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$3=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$2,base32hex:base32hex$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32hexupper:base32hexupper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32upper:base32upper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$3=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$4=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$3,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),identity$1=from$1({prefix:"\0",name:"identity",encode:r=>toString$4(r),decode:r=>fromString$4(r)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$3,...base36$3,...base58$1,...base64$4,...base256emoji$3};function asUint8Array$1(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function allocUnsafe$1(r=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function createCodec$1(r,e,t,s){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:s}}}const string$1=createCodec$1("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ascii$1=createCodec$1("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=allocUnsafe$1(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function toString$3(r,e="utf8"){const t=BASES$1[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}const isV4=isIPv4,isV6=isIPv6,toBytes$1=function(r){let e=0;if(r=r.toString().trim(),isV4(r)){const t=new Uint8Array(e+4);return r.split(/\./g).forEach(s=>{t[e++]=parseInt(s,10)&255}),t}if(isV6(r)){const t=r.split(":",8);let s;for(s=0;s<t.length;s++){const a=isV4(t[s]);let l;a&&(l=toBytes$1(t[s]),t[s]=toString$3(l.slice(0,2),"base16")),l!=null&&++s<8&&t.splice(s,0,toString$3(l.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(s=0;s<t.length&&t[s]!=="";s++);const a=[s,1];for(s=9-t.length;s>0;s--)a.push("0");t.splice.apply(t,a)}const i=new Uint8Array(e+16);for(s=0;s<t.length;s++){const a=parseInt(t[s],16);i[e++]=a>>8&255,i[e++]=a&255}return i}throw new Error("invalid ip address")},toString$2=function(r,e=0,t){e=~~e,t=t??r.length-e;const s=new DataView(r.buffer);if(t===4){const i=[];for(let a=0;a<t;a++)i.push(r[e+a]);return i.join(".")}if(t===16){const i=[];for(let a=0;a<t;a+=2)i.push(s.getUint16(e+a).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V$1=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V$1,"ip6zone"],[43,8,"ipcidr"],[53,V$1,"dns",!0],[54,V$1,"dns4",!0],[55,V$1,"dns6",!0],[56,V$1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V$1,"unix",!1,!0],[421,V$1,"ipfs"],[421,V$1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V$1,"garlic64"],[448,0,"tls"],[449,V$1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,V$1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V$1,"memory"]];table.forEach(r=>{const e=createProtocol(...r);codes[e.code]=e,names[e.name]=e});function createProtocol(r,e,t,s,i){return{code:r,size:e,name:t,resolvable:!!s,path:!!i}}function getProtocol(r){if(typeof r=="number"){if(codes[r]!=null)return codes[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(names[r]!=null)return names[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}var encode_1$1,hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode_1$1;hasRequiredEncode=1,encode_1$1=s;var r=128,e=-128,t=Math.pow(2,31);function s(i,a,l){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");a=a||[],l=l||0;for(var u=l;i>=t;)a[l++]=i&255|r,i/=128;for(;i&e;)a[l++]=i&255|r,i>>>=7;return a[l]=i|0,s.bytes=l-u+1,a}return encode_1$1}var decode$6,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$6;hasRequiredDecode=1,decode$6=t;var r=128,e=127;function t(s,l){var a=0,l=l||0,u=0,p=l,x,w=s.length;do{if(p>=w||u>49)throw t.bytes=0,new RangeError("Could not decode varint");x=s[p++],a+=u<28?(x&e)<<u:(x&e)*Math.pow(2,u),u+=7}while(x>=r);return t.bytes=p-l,a}return decode$6}var length$1,hasRequiredLength;function requireLength(){if(hasRequiredLength)return length$1;hasRequiredLength=1;var r=Math.pow(2,7),e=Math.pow(2,14),t=Math.pow(2,21),s=Math.pow(2,28),i=Math.pow(2,35),a=Math.pow(2,42),l=Math.pow(2,49),u=Math.pow(2,56),p=Math.pow(2,63);return length$1=function(x){return x<r?1:x<e?2:x<t?3:x<s?4:x<i?5:x<a?6:x<l?7:x<u?8:x<p?9:10},length$1}var varint$2,hasRequiredVarint;function requireVarint(){return hasRequiredVarint||(hasRequiredVarint=1,varint$2={encode:requireEncode(),decode:requireDecode(),encodingLength:requireLength()}),varint$2}var varintExports=requireVarint();const varint$1=getDefaultExportFromCjs(varintExports);function fromString$3(r,e="utf8"){const t=BASES$1[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function concat$1(r,e){e==null&&(e=r.reduce((i,a)=>i+a.length,0));const t=allocUnsafe$1(e);let s=0;for(const i of r)t.set(i,s),s+=i.length;return asUint8Array$1(t)}function convertToString(r,e){switch(getProtocol(r).code){case 4:case 41:return bytes2ip(e);case 42:return bytes2str(e);case 6:case 273:case 33:case 132:return bytes2port$1(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion$1(e);case 445:return bytes2onion$1(e);case 466:return bytes2mb$1(e);default:return toString$3(e,"base16")}}function convertToBytes(r,e){switch(getProtocol(r).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 42:return str2bytes(e);case 6:case 273:case 33:case 132:return port2bytes$1(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes$1(e);case 445:return onion32bytes$1(e);case 466:return mb2bytes$1(e);default:return fromString$3(e,"base16")}}const decoders$1=Object.values(bases$2).map(r=>r.decoder),anybaseDecoder$1=function(){let r=decoders$1[0].or(decoders$1[1]);return decoders$1.slice(2).forEach(e=>r=r.or(e)),r}();function ip2bytes(r){if(!isIP(r))throw new Error("invalid ip address");return toBytes$1(r)}function bytes2ip(r){const e=toString$2(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes$1(r){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function bytes2port$1(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function str2bytes(r){const e=fromString$3(r),t=Uint8Array.from(varint$1.encode(e.length));return concat$1([t,e],t.length+e.length)}function bytes2str(r){const e=varint$1.decode(r);if(r=r.slice(varint$1.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return toString$3(r)}function mh2bytes(r){let e;r[0]==="Q"||r[0]==="1"?e=decode$f(base58btc$2.decode(`z${r}`)).bytes:e=CID$1.parse(r).multihash.bytes;const t=Uint8Array.from(varint$1.encode(e.length));return concat$1([t,e],t.length+e.length)}function mb2bytes$1(r){const e=anybaseDecoder$1.decode(r),t=Uint8Array.from(varint$1.encode(e.length));return concat$1([t,e],t.length+e.length)}function bytes2mb$1(r){const e=varint$1.decode(r),t=r.slice(varint$1.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+toString$3(t,"base64url")}function bytes2mh(r){const e=varint$1.decode(r),t=r.slice(varint$1.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return toString$3(t,"base58btc")}function onion2bytes$1(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const t=base32$4.decode("b"+e[0]),s=parseInt(e[1],10);if(s<1||s>65536)throw new Error("Port number is not in range(1, 65536)");const i=port2bytes$1(s);return concat$1([t,i],t.length+i.length)}function onion32bytes$1(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const t=base32$4.decode(`b${e[0]}`),s=parseInt(e[1],10);if(s<1||s>65536)throw new Error("Port number is not in range(1, 65536)");const i=port2bytes$1(s);return concat$1([t,i],t.length+i.length)}function bytes2onion$1(r){const e=r.slice(0,r.length-2),t=r.slice(r.length-2),s=toString$3(e,"base32"),i=bytes2port$1(t);return`${s}:${i}`}function stringToStringTuples(r){const e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let s=0;s<t.length;s++){const i=t[s],a=getProtocol(i);if(a.size===0){e.push([i]);continue}if(s++,s>=t.length)throw ParseError("invalid address: "+r);if(a.path===!0){e.push([i,cleanPath(t.slice(s).join("/"))]);break}e.push([i,t[s]])}return e}function stringTuplesToString(r){const e=[];return r.map(t=>{const s=protoFromTuple(t);return e.push(s.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(r){return r.map(e=>{Array.isArray(e)||(e=[e]);const t=protoFromTuple(e);return e.length>1?[t.code,convertToBytes(t.code,e[1])]:[t.code]})}function tuplesToStringTuples(r){return r.map(e=>{const t=protoFromTuple(e);return e[1]!=null?[t.code,convertToString(t.code,e[1])]:[t.code]})}function tuplesToBytes(r){return fromBytes(concat$1(r.map(e=>{const t=protoFromTuple(e);let s=Uint8Array.from(varint$1.encode(t.code));return e.length>1&&e[1]!=null&&(s=concat$1([s,e[1]])),s})))}function sizeForAddr$1(r,e){return r.size>0?r.size/8:r.size===0?0:varint$1.decode(e)+(varint$1.decode.bytes??0)}function bytesToTuples(r){const e=[];let t=0;for(;t<r.length;){const s=varint$1.decode(r,t),i=varint$1.decode.bytes??0,a=getProtocol(s),l=sizeForAddr$1(a,r.slice(t+i));if(l===0){e.push([s]),t+=i;continue}const u=r.slice(t+i,t+i+l);if(t+=l+i,t>r.length)throw ParseError("Invalid address Uint8Array: "+toString$3(r,"base16"));e.push([s,u])}return e}function bytesToString$1(r){const e=bytesToTuples(r),t=tuplesToStringTuples(e);return stringTuplesToString(t)}function stringToBytes$1(r){r=cleanPath(r);const e=stringToStringTuples(r),t=stringTuplesToTuples(e);return tuplesToBytes(t)}function fromString$2(r){return stringToBytes$1(r)}function fromBytes(r){const e=validateBytes(r);if(e!=null)throw e;return Uint8Array.from(r)}function validateBytes(r){try{bytesToTuples(r)}catch(e){return e}}function cleanPath(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function ParseError(r){return new Error("Error parsing address: "+r)}function protoFromTuple(r){return getProtocol(r[0])}var errCode$1,hasRequiredErrCode;function requireErrCode(){if(hasRequiredErrCode)return errCode$1;hasRequiredErrCode=1;function r(t,s){for(const i in s)Object.defineProperty(t,i,{value:s[i],enumerable:!0,configurable:!0});return t}function e(t,s,i){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof s=="object"&&(i=s,s=""),s&&(i.code=s);try{return r(t,i)}catch{i.message=t.message,i.stack=t.stack;const l=function(){};return l.prototype=Object.create(Object.getPrototypeOf(t)),r(new l,i)}}return errCode$1=e,errCode$1}var errCodeExports=requireErrCode();const errCode=getDefaultExportFromCjs(errCodeExports);function equals$3(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var __classPrivateFieldGet=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},__classPrivateFieldSet=function(r,e,t,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},_DefaultMultiaddr_string,_DefaultMultiaddr_tuples,_DefaultMultiaddr_stringTuples,_a;const inspect$2=Symbol.for("nodejs.util.inspect.custom"),DNS_CODES$1=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],resolvers$1=new Map,symbol$2=Symbol.for("@multiformats/js-multiaddr/multiaddr");function isMultiaddr$1(r){return!!(r!=null&&r[symbol$2])}class DefaultMultiaddr{constructor(e){if(_DefaultMultiaddr_string.set(this,void 0),_DefaultMultiaddr_tuples.set(this,void 0),_DefaultMultiaddr_stringTuples.set(this,void 0),this[_a]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=fromString$2(e)}else if(isMultiaddr$1(e))this.bytes=fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return __classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_string,bytesToString$1(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")}toJSON(){return this.toString()}toOptions(){let e,t,s,i,a="";const l=getProtocol("tcp"),u=getProtocol("udp"),p=getProtocol("ip4"),x=getProtocol("ip6"),w=getProtocol("dns6"),E=getProtocol("ip6zone");for(const[A,S]of this.stringTuples())A===E.code&&(a=`%${S??""}`),DNS_CODES$1.includes(A)&&(t=l.name,i=443,s=`${S??""}${a}`,e=A===w.code?6:4),(A===l.code||A===u.code)&&(t=getProtocol(A).name,i=parseInt(S??"")),(A===p.code||A===x.code)&&(t=getProtocol(A).name,s=`${S??""}${a}`,e=A===x.code?6:4);if(e==null||t==null||s==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:s,transport:t,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},getProtocol(e)))}protoCodes(){const e=[],t=this.bytes;let s=0;for(;s<t.length;){const i=varint$1.decode(t,s),a=varint$1.decode.bytes??0,l=getProtocol(i),u=sizeForAddr$1(l,t.slice(s+a));s+=u+a,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_tuples,bytesToTuples(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")}stringTuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_stringTuples,tuplesToStringTuples(this.tuples()),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")}encapsulate(e){return e=new DefaultMultiaddr(e),new DefaultMultiaddr(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),s=this.toString(),i=s.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new DefaultMultiaddr(s.slice(0,i))}decapsulateCode(e){const t=this.tuples();for(let s=t.length-1;s>=0;s--)if(t[s][0]===e)return new DefaultMultiaddr(tuplesToBytes(t.slice(0,s)));return this}getPeerId(){try{const t=this.stringTuples().filter(s=>s[0]===names.ipfs.code).pop();if((t==null?void 0:t[1])!=null){const s=t[1];return s[0]==="Q"||s[0]==="1"?toString$3(base58btc$2.decode(`z${s}`),"base58btc"):toString$3(CID$1.parse(s).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>getProtocol(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return equals$3(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find(a=>a.resolvable);if(t==null)return[this];const s=resolvers$1.get(t.name);if(s==null)throw errCode(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await s(this,e)).map(a=>new DefaultMultiaddr(a))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(_DefaultMultiaddr_string=new WeakMap,_DefaultMultiaddr_tuples=new WeakMap,_DefaultMultiaddr_stringTuples=new WeakMap,_a=symbol$2,inspect$2)](){return`Multiaddr(${bytesToString$1(this.bytes)})`}}function multiaddr$1(r){return new DefaultMultiaddr(r)}function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var isElectron_1,hasRequiredIsElectron;function requireIsElectron(){if(hasRequiredIsElectron)return isElectron_1;hasRequiredIsElectron=1;function r(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return isElectron_1=r,isElectron_1}var env,hasRequiredEnv;function requireEnv(){if(hasRequiredEnv)return env;hasRequiredEnv=1;var r={};const e=requireIsElectron(),t=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,s=e(),i=t&&!s,a=s&&!t,l=s&&t,u=typeof commonjsRequire=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!s,p=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,x=typeof process<"u"&&typeof r<"u"&&!1,w=typeof navigator<"u"&&navigator.product==="ReactNative";return env={isTest:x,isElectron:s,isElectronMain:a,isElectronRenderer:l,isNode:u,isBrowser:i,isWebWorker:p,isEnvWithDom:t,isReactNative:w},env}var envExports=requireEnv();const unit=Object.create(null),m=6e4,h=m*60,d=h*24,y=d*365.25;unit.year=unit.yr=unit.y=y;unit.month=unit.mo=unit.mth=y/12;unit.week=unit.wk=unit.w=d*7;unit.day=unit.d=d;unit.hour=unit.hr=unit.h=h;unit.minute=unit.min=unit.m=m;unit.second=unit.sec=unit.s=1e3;unit.millisecond=unit.millisec=unit.ms=1;unit.microsecond=unit.microsec=unit.us=unit.s=.001;unit.nanosecond=unit.nanosec=unit.ns=1e-6;unit.group=",";unit.decimal=".";unit.placeholder=" _";const durationRE=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;parse.unit=unit;function parse(r="",e="ms"){let t=null,s;return String(r).replace(new RegExp(`(\\d)[${parse.unit.placeholder}${parse.unit.group}](\\d)`,"g"),"$1$2").replace(parse.unit.decimal,".").replace(durationRE,(i,a,l)=>{if(l)l=l.toLowerCase();else if(s){for(const u in parse.unit)if(parse.unit[u]<s){l=u;break}}else l=e;s=l=parse.unit[l]||parse.unit[l.replace(/s$/,"")],l&&(t=(t||0)+a*l)}),t&&t/(parse.unit[e]||1)*(r[0]==="-"?-1:1)}var browser$1={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,e=r*60,t=e*60,s=t*24,i=s*7,a=s*365.25;ms=function(w,E){E=E||{};var R=typeof w;if(R==="string"&&w.length>0)return l(w);if(R==="number"&&isFinite(w))return E.long?p(w):u(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))};function l(w){if(w=String(w),!(w.length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(E){var R=parseFloat(E[1]),A=(E[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return R*a;case"weeks":case"week":case"w":return R*i;case"days":case"day":case"d":return R*s;case"hours":case"hour":case"hrs":case"hr":case"h":return R*t;case"minutes":case"minute":case"mins":case"min":case"m":return R*e;case"seconds":case"second":case"secs":case"sec":case"s":return R*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return R;default:return}}}}function u(w){var E=Math.abs(w);return E>=s?Math.round(w/s)+"d":E>=t?Math.round(w/t)+"h":E>=e?Math.round(w/e)+"m":E>=r?Math.round(w/r)+"s":w+"ms"}function p(w){var E=Math.abs(w);return E>=s?x(w,E,s,"day"):E>=t?x(w,E,t,"hour"):E>=e?x(w,E,e,"minute"):E>=r?x(w,E,r,"second"):w+" ms"}function x(w,E,R,A){var S=E>=R*1.5;return Math.round(w/R)+" "+A+(S?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function r(e){s.debug=s,s.default=s,s.coerce=x,s.disable=u,s.enable=a,s.enabled=p,s.humanize=requireMs(),s.destroy=w,Object.keys(e).forEach(E=>{s[E]=e[E]}),s.names=[],s.skips=[],s.formatters={};function t(E){let R=0;for(let A=0;A<E.length;A++)R=(R<<5)-R+E.charCodeAt(A),R|=0;return s.colors[Math.abs(R)%s.colors.length]}s.selectColor=t;function s(E){let R,A=null,S,N;function k(...j){if(!k.enabled)return;const $=k,D=Number(new Date),z=D-(R||D);$.diff=z,$.prev=R,$.curr=D,R=D,j[0]=s.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");let L=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(G,W)=>{if(G==="%%")return"%";L++;const q=s.formatters[W];if(typeof q=="function"){const oe=j[L];G=q.call($,oe),j.splice(L,1),L--}return G}),s.formatArgs.call($,j),($.log||s.log).apply($,j)}return k.namespace=E,k.useColors=s.useColors(),k.color=s.selectColor(E),k.extend=i,k.destroy=s.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>A!==null?A:(S!==s.namespaces&&(S=s.namespaces,N=s.enabled(E)),N),set:j=>{A=j}}),typeof s.init=="function"&&s.init(k),k}function i(E,R){const A=s(this.namespace+(typeof R>"u"?":":R)+E);return A.log=this.log,A}function a(E){s.save(E),s.namespaces=E,s.names=[],s.skips=[];const R=(typeof E=="string"?E:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const A of R)A[0]==="-"?s.skips.push(A.slice(1)):s.names.push(A)}function l(E,R){let A=0,S=0,N=-1,k=0;for(;A<E.length;)if(S<R.length&&(R[S]===E[A]||R[S]==="*"))R[S]==="*"?(N=S,k=A,S++):(A++,S++);else if(N!==-1)S=N+1,k++,A=k;else return!1;for(;S<R.length&&R[S]==="*";)S++;return S===R.length}function u(){const E=[...s.names,...s.skips.map(R=>"-"+R)].join(",");return s.enable(""),E}function p(E){for(const R of s.skips)if(l(E,R))return!1;for(const R of s.names)if(l(E,R))return!0;return!1}function x(E){return E instanceof Error?E.stack||E.message:E}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return common=r,common}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(r,e){var t={};e.formatArgs=i,e.save=a,e.load=l,e.useColors=s,e.storage=u(),e.destroy=(()=>{let x=!1;return()=>{x||(x=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let x;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(x=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(x[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(x){if(x[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+x[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const w="color: "+this.color;x.splice(1,0,w,"color: inherit");let E=0,R=0;x[0].replace(/%[a-zA-Z%]/g,A=>{A!=="%%"&&(E++,A==="%c"&&(R=E))}),x.splice(R,0,w)}e.log=console.debug||console.log||(()=>{});function a(x){try{x?e.storage.setItem("debug",x):e.storage.removeItem("debug")}catch{}}function l(){let x;try{x=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!x&&typeof process<"u"&&"env"in process&&(x=t.DEBUG),x}function u(){try{return localStorage}catch{}}r.exports=requireCommon()(e);const{formatters:p}=r.exports;p.j=function(x){try{return JSON.stringify(x)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}}}(browser$1,browser$1.exports)),browser$1.exports}var browserExports=requireBrowser$1();const debug=getDefaultExportFromCjs(browserExports);debug.formatters.b=r=>r==null?"undefined":base58btc$2.baseEncode(r);debug.formatters.t=r=>r==null?"undefined":base32$4.baseEncode(r);debug.formatters.m=r=>r==null?"undefined":base64$5.baseEncode(r);debug.formatters.p=r=>r==null?"undefined":r.toString();debug.formatters.c=r=>r==null?"undefined":r.toString();debug.formatters.k=r=>r==null?"undefined":r.toString();debug.formatters.a=r=>r==null?"undefined":r.toString();function createDisabledLogger(r){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=r,e.destroy=()=>!0,e.extend=()=>e,e}function logger$1(r){let e=createDisabledLogger(`${r}:trace`);return debug.enabled(`${r}:trace`)&&debug.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=debug(`${r}:trace`)),Object.assign(debug(r),{error:debug(`${r}:error`),trace:e})}var error={},hasRequiredError;function requireError(){if(hasRequiredError)return error;hasRequiredError=1;class r extends Error{constructor(i="Request timed out"){super(i),this.name="TimeoutError"}}error.TimeoutError=r;class e extends Error{constructor(i="The operation was aborted."){super(i),this.name="AbortError"}}error.AbortError=e;class t extends Error{constructor(i){super(i.statusText),this.name="HTTPError",this.response=i}}return error.HTTPError=t,error}var src$1={exports:{}},browser={exports:{}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(r,e){var t=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal;throw new Error("unable to locate global object")},s=t();r.exports=e=s.fetch,s.fetch&&(e.default=s.fetch.bind(s)),e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response}(browser,browser.exports)),browser.exports}var hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?src$1.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:src$1.exports={default:requireBrowser().default,Headers:requireBrowser().Headers,Request:requireBrowser().Request,Response:requireBrowser().Response}),src$1.exports}var fetch_browser$1,hasRequiredFetch_browser$1;function requireFetch_browser$1(){return hasRequiredFetch_browser$1||(hasRequiredFetch_browser$1=1,fetch_browser$1=requireSrc()),fetch_browser$1}var fetch_browser,hasRequiredFetch_browser;function requireFetch_browser(){if(hasRequiredFetch_browser)return fetch_browser;hasRequiredFetch_browser=1;const{TimeoutError:r,AbortError:e}=requireError(),{Response:t,Request:s,Headers:i,default:a}=requireFetch_browser$1(),l=(E,R={})=>{const A=new XMLHttpRequest;A.open(R.method||"GET",E.toString(),!0);const{timeout:S,headers:N}=R;if(S&&S>0&&S<1/0&&(A.timeout=S),R.overrideMimeType!=null&&A.overrideMimeType(R.overrideMimeType),N)for(const[k,j]of new i(N))A.setRequestHeader(k,j);return R.signal&&(R.signal.onabort=()=>A.abort()),R.onUploadProgress&&(A.upload.onprogress=R.onUploadProgress),A.responseType="arraybuffer",new Promise((k,j)=>{const $=D=>{switch(D.type){case"error":{k(t.error());break}case"load":{k(new w(A.responseURL,A.response,{status:A.status,statusText:A.statusText,headers:x(A.getAllResponseHeaders())}));break}case"timeout":{j(new r);break}case"abort":{j(new e);break}}};A.onerror=$,A.onload=$,A.ontimeout=$,A.onabort=$,A.send(R.body)})},u=a,p=(E,R={})=>R.onUploadProgress!=null?l(E,R):u(E,R),x=E=>{const R=new i;for(const A of E.trim().split(/[\r\n]+/)){const S=A.indexOf(": ");S>0&&R.set(A.slice(0,S),A.slice(S+1))}return R};class w extends t{constructor(R,A,S){super(A,S),Object.defineProperty(this,"url",{value:R})}}return fetch_browser={fetch:p,Request:s,Headers:i},fetch_browser}var isPlainObj,hasRequiredIsPlainObj;function requireIsPlainObj(){return hasRequiredIsPlainObj||(hasRequiredIsPlainObj=1,isPlainObj=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}),isPlainObj}var mergeOptions$1,hasRequiredMergeOptions;function requireMergeOptions(){if(hasRequiredMergeOptions)return mergeOptions$1;hasRequiredMergeOptions=1;const r=requireIsPlainObj(),{hasOwnProperty:e}=Object.prototype,{propertyIsEnumerable:t}=Object,s=(A,S,N)=>Object.defineProperty(A,S,{value:N,writable:!0,enumerable:!0,configurable:!0}),i=mergeOptions$1,a={concatArrays:!1,ignoreUndefined:!1},l=A=>{const S=[];for(const N in A)e.call(A,N)&&S.push(N);if(Object.getOwnPropertySymbols){const N=Object.getOwnPropertySymbols(A);for(const k of N)t.call(A,k)&&S.push(k)}return S};function u(A){return Array.isArray(A)?p(A):r(A)?x(A):A}function p(A){const S=A.slice(0,0);return l(A).forEach(N=>{s(S,N,u(A[N]))}),S}function x(A){const S=Object.getPrototypeOf(A)===null?Object.create(null):{};return l(A).forEach(N=>{s(S,N,u(A[N]))}),S}const w=(A,S,N,k)=>(N.forEach(j=>{typeof S[j]>"u"&&k.ignoreUndefined||(j in A&&A[j]!==Object.getPrototypeOf(A)?s(A,j,R(A[j],S[j],k)):s(A,j,u(S[j])))}),A),E=(A,S,N)=>{let k=A.slice(0,0),j=0;return[A,S].forEach($=>{const D=[];for(let z=0;z<$.length;z++)e.call($,z)&&(D.push(String(z)),$===A?s(k,j++,$[z]):s(k,j++,u($[z])));k=w(k,$,l($).filter(z=>!D.includes(z)),N)}),k};function R(A,S,N){return N.concatArrays&&Array.isArray(A)&&Array.isArray(S)?E(A,S,N):!r(S)||!r(A)?u(S):w(A,S,l(S),N)}return mergeOptions$1=function(...A){const S=R(u(a),this!==i&&this||{},a);let N={_:{}};for(const k of A)if(k!==void 0){if(!r(k))throw new TypeError("`"+k+"` is not an Option Object");N=R(N,{_:k},S)}return N._},mergeOptions$1}var urlBrowser,hasRequiredUrlBrowser;function requireUrlBrowser(){if(hasRequiredUrlBrowser)return urlBrowser;hasRequiredUrlBrowser=1;const r=typeof navigator<"u"&&navigator.product==="ReactNative";function e(){return r?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const t=self.URL,s=e();class i{constructor(u="",p=s){this.super=new t(u,p),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(u){this.super.hash=u}set host(u){this.super.host=u}set hostname(u){this.super.hostname=u}set href(u){this.super.href=u}set password(u){this.super.password=u}set pathname(u){this.super.pathname=u}set port(u){this.super.port=u}set protocol(u){this.super.protocol=u}set search(u){this.super.search=u}set username(u){this.super.username=u}static createObjectURL(u){return t.createObjectURL(u)}static revokeObjectURL(u){t.revokeObjectURL(u)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function a(l){if(typeof l=="string")return new t(l).toString();if(!(l instanceof t)){const u=l.username&&l.password?`${l.username}:${l.password}@`:"",p=l.auth?l.auth+"@":"",x=l.port?":"+l.port:"",w=l.protocol?l.protocol+"//":"",E=l.host||"",R=l.hostname||"",A=l.search||(l.query?"?"+l.query:""),S=l.hash||"",N=l.pathname||"",k=l.path||N+A;return`${w}${u||p}${E||R+x}${k}${S}`}}return urlBrowser={URLWithLegacySupport:i,URLSearchParams:self.URLSearchParams,defaultBase:s,format:a},urlBrowser}var relative,hasRequiredRelative;function requireRelative(){if(hasRequiredRelative)return relative;hasRequiredRelative=1;const{URLWithLegacySupport:r,format:e}=requireUrlBrowser();return relative=(t,s={},i={},a)=>{let l=s.protocol?s.protocol.replace(":",""):"http";l=(i[l]||a||l)+":";let u;try{u=new r(t)}catch{u={}}const p=Object.assign({},s,{protocol:l||u.protocol,host:s.host||u.host});return new r(t,e(p)).toString()},relative}var isoUrl,hasRequiredIsoUrl;function requireIsoUrl(){if(hasRequiredIsoUrl)return isoUrl;hasRequiredIsoUrl=1;const{URLWithLegacySupport:r,format:e,URLSearchParams:t,defaultBase:s}=requireUrlBrowser(),i=requireRelative();return isoUrl={URL:r,URLSearchParams:t,format:e,relative:i,defaultBase:s},isoUrl}var anySignal={exports:{}},hasRequiredAnySignal;function requireAnySignal(){if(hasRequiredAnySignal)return anySignal.exports;hasRequiredAnySignal=1;function r(e){const t=new globalThis.AbortController;function s(){t.abort();for(const i of e)!i||!i.removeEventListener||i.removeEventListener("abort",s)}for(const i of e)if(!(!i||!i.addEventListener)){if(i.aborted){s();break}i.addEventListener("abort",s)}return t.signal}return anySignal.exports=r,anySignal.exports.anySignal=r,anySignal.exports}var browserReadablestreamToIt,hasRequiredBrowserReadablestreamToIt;function requireBrowserReadablestreamToIt(){if(hasRequiredBrowserReadablestreamToIt)return browserReadablestreamToIt;hasRequiredBrowserReadablestreamToIt=1;async function*r(e,t={}){const s=e.getReader();try{for(;;){const i=await s.read();if(i.done)return;yield i.value}}finally{t.preventCancel!==!0&&s.cancel(),s.releaseLock()}}return browserReadablestreamToIt=r,browserReadablestreamToIt}var itAll,hasRequiredItAll;function requireItAll(){return hasRequiredItAll||(hasRequiredItAll=1,itAll=async e=>{const t=[];for await(const s of e)t.push(s);return t}),itAll}var http,hasRequiredHttp;function requireHttp(){if(hasRequiredHttp)return http;hasRequiredHttp=1;const{fetch:r,Request:e,Headers:t}=requireFetch_browser(),{TimeoutError:s,HTTPError:i}=requireError(),a=requireMergeOptions().bind({ignoreUndefined:!0}),{URL:l,URLSearchParams:u}=requireIsoUrl(),p=requireAnySignal(),x=requireBrowserReadablestreamToIt(),{isBrowser:w,isWebWorker:E}=requireEnv(),R=requireItAll(),A=(L,M,G)=>{if(M===void 0)return L;const W=Date.now(),q=()=>Date.now()-W>=M;return new Promise((oe,le)=>{const Te=setTimeout(()=>{q()&&(le(new s),G.abort())},M),Ae=we=>Z=>{if(clearTimeout(Te),q()){le(new s);return}we(Z)};L.then(Ae(oe),Ae(le))})},S={throwHttpErrors:!0,credentials:"same-origin"};class N{constructor(M={}){this.opts=a(S,M)}async fetch(M,G={}){const W=a(this.opts,G),q=new t(W.headers);if(typeof M!="string"&&!(M instanceof l||M instanceof e))throw new TypeError("`resource` must be a string, URL, or Request");const oe=new l(M.toString(),W.base),{searchParams:le,transformSearchParams:Te,json:Ae}=W;le&&(typeof Te=="function"?oe.search=Te(new u(W.searchParams)):oe.search=new u(W.searchParams)),Ae&&(W.body=JSON.stringify(W.json),q.set("content-type","application/json"));const we=new AbortController,de=p([we.signal,W.signal]);globalThis.ReadableStream!=null&&W.body instanceof globalThis.ReadableStream&&(w||E)&&(W.body=new Blob(await R(x(W.body))));const Z=await A(r(oe.toString(),{...W,signal:de,timeout:void 0,headers:q,duplex:"half"}),W.timeout,we);if(!Z.ok&&W.throwHttpErrors)throw W.handleError&&await W.handleError(Z),new i(Z);return Z.iterator=async function*(){yield*j(Z.body)},Z.ndjson=async function*(){for await(const pe of k(Z.iterator()))G.transform?yield G.transform(pe):yield pe},Z}post(M,G={}){return this.fetch(M,{...G,method:"POST"})}get(M,G={}){return this.fetch(M,{...G,method:"GET"})}put(M,G={}){return this.fetch(M,{...G,method:"PUT"})}delete(M,G={}){return this.fetch(M,{...G,method:"DELETE"})}options(M,G={}){return this.fetch(M,{...G,method:"OPTIONS"})}}const k=async function*(L){const M=new TextDecoder;let G="";for await(const W of L){G+=M.decode(W,{stream:!0});const q=G.split(/\r?\n/);for(let oe=0;oe<q.length-1;oe++){const le=q[oe].trim();le.length>0&&(yield JSON.parse(le))}G=q[q.length-1]}G+=M.decode(),G=G.trim(),G.length!==0&&(yield JSON.parse(G))},j=L=>{if($(L))return L;if(z(L)){const M=L[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:M.next.bind(M),return(G){return L.destroy(),typeof M.return=="function"?M.return():Promise.resolve({done:!0,value:G})}}}}}if(D(L)){const M=L.getReader();return async function*(){try{for(;;){const{done:G,value:W}=await M.read();if(G)return;W&&(yield W)}}finally{M.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},$=L=>typeof L=="object"&&L!==null&&typeof L[Symbol.asyncIterator]=="function",D=L=>L&&typeof L.getReader=="function",z=L=>Object.prototype.hasOwnProperty.call(L,"readable")&&Object.prototype.hasOwnProperty.call(L,"writable");return N.HTTPError=i,N.TimeoutError=s,N.streamToAsyncIterator=j,N.post=(L,M)=>new N(M).post(L,M),N.get=(L,M)=>new N(M).get(L,M),N.put=(L,M)=>new N(M).put(L,M),N.delete=(L,M)=>new N(M).delete(L,M),N.options=(L,M)=>new N(M).options(L,M),http=N,http}var httpExports=requireHttp();const HTTP=getDefaultExportFromCjs(httpExports);var mergeOptionsExports=requireMergeOptions();const mergeOptions=getDefaultExportFromCjs(mergeOptionsExports);function equals$2(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function coerce(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function fromString$1(r){return new TextEncoder().encode(r)}function toString$1(r){return new TextDecoder().decode(r)}function base(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=i}var u=r.length,p=r.charAt(0),x=Math.log(u)/Math.log(256),w=Math.log(256)/Math.log(u);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,k=0,j=0,$=S.length;j!==$&&S[j]===0;)j++,N++;for(var D=($-j)*w+1>>>0,z=new Uint8Array(D);j!==$;){for(var L=S[j],M=0,G=D-1;(L!==0||M<k)&&G!==-1;G--,M++)L+=256*z[G]>>>0,z[G]=L%u>>>0,L=L/u>>>0;if(L!==0)throw new Error("Non-zero carry");k=M,j++}for(var W=D-k;W!==D&&z[W]===0;)W++;for(var q=p.repeat(N);W<D;++W)q+=r.charAt(z[W]);return q}function R(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var k=0,j=0;S[N]===p;)k++,N++;for(var $=(S.length-N)*x+1>>>0,D=new Uint8Array($);S[N];){var z=t[S.charCodeAt(N)];if(z===255)return;for(var L=0,M=$-1;(z!==0||L<j)&&M!==-1;M--,L++)z+=u*D[M]>>>0,D[M]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");j=L,N++}if(S[N]!==" "){for(var G=$-j;G!==$&&D[G]===0;)G++;for(var W=new Uint8Array(k+($-G)),q=k;G!==$;)W[q++]=D[G++];return W}}}function A(S){var N=R(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:R,decode:A}}var src=base,_brrp__multiformats_scope_baseX=src;class Encoder{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,s){O(this,"name");O(this,"prefix");O(this,"baseDecode");O(this,"prefixCodePoint");this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){O(this,"decoders");this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s!=null)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function or(r,e){return new ComposedDecoder({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}class Codec{constructor(e,t,s,i){O(this,"name");O(this,"prefix");O(this,"baseEncode");O(this,"baseDecode");O(this,"encoder");O(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=i,this.encoder=new Encoder(e,t,s),this.decoder=new Decoder(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function from({name:r,prefix:e,encode:t,decode:s}){return new Codec(r,e,t,s)}function baseX({name:r,prefix:e,alphabet:t}){const{encode:s,decode:i}=_brrp__multiformats_scope_baseX(t,r);return from({prefix:e,name:r,encode:s,decode:a=>coerce(i(a))})}function decode$5(r,e,t,s){let i=r.length;for(;r[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let l=0,u=0,p=0;for(let x=0;x<i;++x){const w=e[r[x]];if(w===void 0)throw new SyntaxError(`Non-${s} character`);u=u<<t|w,l+=t,l>=8&&(l-=8,a[p++]=255&u>>l)}if(l>=t||(255&u<<8-l)!==0)throw new SyntaxError("Unexpected end of data");return a}function encode$2(r,e,t){const s=e[e.length-1]==="=",i=(1<<t)-1;let a="",l=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],l+=8;l>t;)l-=t,a+=e[i&u>>l];if(l!==0&&(a+=e[i&u<<t-l]),s)for(;(a.length*t&7)!==0;)a+="=";return a}function createAlphabetIdx(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function rfc4648({name:r,prefix:e,bitsPerChar:t,alphabet:s}){const i=createAlphabetIdx(s);return from({prefix:e,name:r,encode(a){return encode$2(a,s,t)},decode(a){return decode$5(a,i,t,r)}})}const base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from(""),alphabetBytesToChars=alphabet.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes=alphabet.reduce((r,e,t)=>{const s=e.codePointAt(0);if(s==null)throw new Error(`Invalid character: ${e}`);return r[s]=t,r},[]);function encode$1(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars[t],e),"")}function decode$4(r){const e=[];for(const t of r){const s=t.codePointAt(0);if(s==null)throw new Error(`Invalid character: ${t}`);const i=alphabetCharsToBytes[s];if(i==null)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const base256emoji=from({prefix:"",name:"base256emoji",encode:encode$1,decode:decode$4}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),identity=from({prefix:"\0",name:"identity",encode:r=>toString$1(r),decode:r=>fromString$1(r)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;var encode_1=encode,MSB$1=128,MSBALL=-128,INT=Math.pow(2,31);function encode(r,e,t){e=e||[],t=t||0;for(var s=t;r>=INT;)e[t++]=r&255|MSB$1,r/=128;for(;r&MSBALL;)e[t++]=r&255|MSB$1,r>>>=7;return e[t]=r|0,encode.bytes=t-s+1,e}var decode$3=read,MSB$1$1=128,REST$1=127;function read(r,s){var t=0,s=s||0,i=0,a=s,l,u=r.length;do{if(a>=u)throw read.bytes=0,new RangeError("Could not decode varint");l=r[a++],t+=i<28?(l&REST$1)<<i:(l&REST$1)*Math.pow(2,i),i+=7}while(l>=MSB$1$1);return read.bytes=a-s,t}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(r){return r<N1$1?1:r<N2$1?2:r<N3$1?3:r<N4$1?4:r<N5$1?5:r<N6$1?6:r<N7$1?7:r<N8?8:r<N9?9:10},varint={encode:encode_1,decode:decode$3,encodingLength:length},_brrp_varint=varint;function decode$2(r,e=0){return[_brrp_varint.decode(r,e),_brrp_varint.decode.bytes]}function encodeTo(r,e,t=0){return _brrp_varint.encode(r,e,t),e}function encodingLength$1(r){return _brrp_varint.encodingLength(r)}function create$1(r,e){const t=e.byteLength,s=encodingLength$1(r),i=s+encodingLength$1(t),a=new Uint8Array(i+t);return encodeTo(r,a,0),encodeTo(t,a,s),a.set(e,i),new Digest(r,t,e,a)}function decode$1(r){const e=coerce(r),[t,s]=decode$2(e),[i,a]=decode$2(e.subarray(s)),l=e.subarray(s+a);if(l.byteLength!==i)throw new Error("Incorrect length");return new Digest(t,i,l,e)}function equals$1(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&equals$2(r.bytes,t.bytes)}}class Digest{constructor(e,t,s,i){O(this,"code");O(this,"size");O(this,"digest");O(this,"bytes");this.code=e,this.size=t,this.digest=s,this.bytes=i}}function format(r,e){const{bytes:t,version:s}=r;switch(s){case 0:return toStringV0(t,baseCache(r),e??base58btc.encoder);default:return toStringV1(t,baseCache(r),e??base32.encoder)}}const cache=new WeakMap;function baseCache(r){const e=cache.get(r);if(e==null){const t=new Map;return cache.set(r,t),t}return e}var Ch;class CID{constructor(e,t,s,i){O(this,"code");O(this,"version");O(this,"multihash");O(this,"bytes");O(this,"/");O(this,Ch,"CID");this.code=t,this.version=e,this.multihash=s,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,s=create$1(e,t);return CID.createV1(this.code,s)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,t){const s=t;return s!=null&&e.code===s.code&&e.version===s.version&&equals$1(e.multihash,s.multihash)}toString(e){return format(this,e)}toJSON(){return{"/":format(this)}}link(){return this}[(Ch=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof CID)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:s,code:i,multihash:a,bytes:l}=t;return new CID(s,i,a,l??encodeCID$1(s,i,a.bytes))}else if(t[cidSymbol]===!0){const{version:s,multihash:i,code:a}=t,l=decode$1(i);return CID.create(s,a,l)}else return null}static create(e,t,s){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(s.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,t,s,s.bytes)}case 1:{const i=encodeCID$1(e,t,s.bytes);return new CID(e,t,s,i)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,s]=CID.decodeFirst(e);if(s.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID.inspectBytes(e),s=t.size-t.multihashSize,i=coerce(e.subarray(s,s+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const a=i.subarray(t.multihashSize-t.digestSize),l=new Digest(t.multihashCode,t.digestSize,a,i);return[t.version===0?CID.createV0(l):CID.createV1(t.codec,l),e.subarray(t.size)]}static inspectBytes(e){let t=0;const s=()=>{const[E,R]=decode$2(e.subarray(t));return t+=R,E};let i=s(),a=DAG_PB_CODE;if(i===18?(i=0,t=0):a=s(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const l=t,u=s(),p=s(),x=t+p,w=x-l;return{version:i,codec:a,multihashCode:u,digestSize:p,multihashSize:w,size:x}}static parse(e,t){const[s,i]=parseCIDtoBytes(e,t),a=CID.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(a).set(s,e),a}}function parseCIDtoBytes(r,e){switch(r[0]){case"Q":{const t=e??base58btc;return[base58btc.prefix,t.decode(`${base58btc.prefix}${r}`)]}case base58btc.prefix:{const t=e??base58btc;return[base58btc.prefix,t.decode(r)]}case base32.prefix:{const t=e??base32;return[base32.prefix,t.decode(r)]}case base36.prefix:{const t=e??base36;return[base36.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function toStringV0(r,e,t){const{prefix:s}=t;if(s!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(s);if(i==null){const a=t.encode(r).slice(1);return e.set(s,a),a}else return i}function toStringV1(r,e,t){const{prefix:s}=t,i=e.get(s);if(i==null){const a=t.encode(r);return e.set(s,a),a}else return i}const DAG_PB_CODE=112,SHA_256_CODE=18;function encodeCID$1(r,e,t){const s=encodingLength$1(r),i=s+encodingLength$1(e),a=new Uint8Array(i+t.byteLength);return encodeTo(r,a,0),encodeTo(e,a,s),a.set(t,i),a}const cidSymbol=Symbol.for("@ipld/js-cid/CID"),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$2,...base256emoji$1};function allocUnsafe(r=0){return new Uint8Array(r)}function createCodec(r,e,t,s){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:s}}}const string=createCodec("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ascii=createCodec("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=allocUnsafe(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString(r,e="utf8"){const t=BASES[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.encoder.encode(r).substring(1)}class InvalidMultiaddrError extends Error{constructor(){super(...arguments);O(this,"name","InvalidMultiaddrError")}}O(InvalidMultiaddrError,"name","InvalidMultiaddrError");class ValidationError extends Error{constructor(){super(...arguments);O(this,"name","ValidationError")}}O(ValidationError,"name","ValidationError");class InvalidParametersError extends Error{constructor(){super(...arguments);O(this,"name","InvalidParametersError")}}O(InvalidParametersError,"name","InvalidParametersError");class UnknownProtocolError extends Error{constructor(){super(...arguments);O(this,"name","UnknownProtocolError")}}O(UnknownProtocolError,"name","UnknownProtocolError");function equals(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function fromString(r,e="utf8"){const t=BASES[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}const N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),MSB=128,REST=127;function encodingLength(r){if(r<N1)return 1;if(r<N2)return 2;if(r<N3)return 3;if(r<N4)return 4;if(r<N5)return 5;if(r<N6)return 6;if(r<N7)return 7;if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function encodeUint8Array(r,e,t=0){switch(encodingLength(r)){case 8:e[t++]=r&255|MSB,r/=128;case 7:e[t++]=r&255|MSB,r/=128;case 6:e[t++]=r&255|MSB,r/=128;case 5:e[t++]=r&255|MSB,r/=128;case 4:e[t++]=r&255|MSB,r>>>=7;case 3:e[t++]=r&255|MSB,r>>>=7;case 2:e[t++]=r&255|MSB,r>>>=7;case 1:{e[t++]=r&255,r>>>=7;break}default:throw new Error("unreachable")}return e}function decodeUint8Array(r,e){let t=r[e],s=0;if(s+=t&REST,t<MSB||(t=r[e+1],s+=(t&REST)<<7,t<MSB)||(t=r[e+2],s+=(t&REST)<<14,t<MSB)||(t=r[e+3],s+=(t&REST)<<21,t<MSB)||(t=r[e+4],s+=(t&REST)*N4,t<MSB)||(t=r[e+5],s+=(t&REST)*N5,t<MSB)||(t=r[e+6],s+=(t&REST)*N6,t<MSB)||(t=r[e+7],s+=(t&REST)*N7,t<MSB))return s;throw new RangeError("Could not decode varint")}function decodeUint8ArrayList(r,e){let t=r.get(e),s=0;if(s+=t&REST,t<MSB||(t=r.get(e+1),s+=(t&REST)<<7,t<MSB)||(t=r.get(e+2),s+=(t&REST)<<14,t<MSB)||(t=r.get(e+3),s+=(t&REST)<<21,t<MSB)||(t=r.get(e+4),s+=(t&REST)*N4,t<MSB)||(t=r.get(e+5),s+=(t&REST)*N5,t<MSB)||(t=r.get(e+6),s+=(t&REST)*N6,t<MSB)||(t=r.get(e+7),s+=(t&REST)*N7,t<MSB))return s;throw new RangeError("Could not decode varint")}function decode(r,e=0){return r instanceof Uint8Array?decodeUint8Array(r,e):decodeUint8ArrayList(r,e)}function asUint8Array(r){return r}function concat(r,e){e==null&&(e=r.reduce((i,a)=>i+a.length,0));const t=allocUnsafe(e);let s=0;for(const i of r)t.set(i,s),s+=i.length;return t}const CODE_IP4=4,CODE_TCP=6,CODE_UDP=273,CODE_DCCP=33,CODE_IP6=41,CODE_IP6ZONE=42,CODE_IPCIDR=43,CODE_DNS=53,CODE_DNS4=54,CODE_DNS6=55,CODE_DNSADDR=56,CODE_SCTP=132,CODE_UDT=301,CODE_UTP=302,CODE_UNIX=400,CODE_P2P=421,CODE_ONION=444,CODE_ONION3=445,CODE_GARLIC64=446,CODE_GARLIC32=447,CODE_TLS=448,CODE_SNI=449,CODE_NOISE=454,CODE_QUIC=460,CODE_QUIC_V1=461,CODE_WEBTRANSPORT=465,CODE_CERTHASH=466,CODE_HTTP=480,CODE_HTTP_PATH=481,CODE_HTTPS=443,CODE_WS=477,CODE_WSS=478,CODE_P2P_WEBSOCKET_STAR=479,CODE_P2P_STARDUST=277,CODE_P2P_WEBRTC_STAR=275,CODE_P2P_WEBRTC_DIRECT=276,CODE_WEBRTC_DIRECT=280,CODE_WEBRTC=281,CODE_P2P_CIRCUIT=290,CODE_MEMORY=777;function bytesToString(r){return e=>toString(e,r)}function stringToBytes(r){return e=>fromString(e,r)}function bytes2port(r){return new DataView(r.buffer).getUint16(r.byteOffset).toString()}function port2bytes(r){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,typeof r=="string"?parseInt(r):r),new Uint8Array(e)}function onion2bytes(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const t=fromString(e[0],"base32"),s=parseInt(e[1],10);if(s<1||s>65536)throw new Error("Port number is not in range(1, 65536)");const i=port2bytes(s);return concat([t,i],t.length+i.length)}function onion32bytes(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const t=base32.decode(`b${e[0]}`),s=parseInt(e[1],10);if(s<1||s>65536)throw new Error("Port number is not in range(1, 65536)");const i=port2bytes(s);return concat([t,i],t.length+i.length)}function bytes2onion(r){const e=r.subarray(0,r.length-2),t=r.subarray(r.length-2),s=toString(e,"base32"),i=bytes2port(t);return`${s}:${i}`}const ip4ToBytes=function(r){r=r.toString().trim();const e=new Uint8Array(4);return r.split(/\./g).forEach((t,s)=>{const i=parseInt(t,10);if(isNaN(i)||i<0||i>255)throw new InvalidMultiaddrError("Invalid byte value in IP address");e[s]=i}),e},ip6ToBytes=function(r){let e=0;r=r.toString().trim();const t=r.split(":",8);let s;for(s=0;s<t.length;s++){const a=isIPv4(t[s]);let l;a&&(l=ip4ToBytes(t[s]),t[s]=toString(l.subarray(0,2),"base16")),l!=null&&++s<8&&t.splice(s,0,toString(l.subarray(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(s=0;s<t.length&&t[s]!=="";s++);const a=[s,1];for(s=9-t.length;s>0;s--)a.push("0");t.splice.apply(t,a)}const i=new Uint8Array(e+16);for(s=0;s<t.length;s++){t[s]===""&&(t[s]="0");const a=parseInt(t[s],16);if(isNaN(a)||a<0||a>65535)throw new InvalidMultiaddrError("Invalid byte value in IP address");i[e++]=a>>8&255,i[e++]=a&255}return i},ip4ToString=function(r){if(r.byteLength!==4)throw new InvalidMultiaddrError("IPv4 address was incorrect length");const e=[];for(let t=0;t<r.byteLength;t++)e.push(r[t]);return e.join(".")},ip6ToString=function(r){if(r.byteLength!==16)throw new InvalidMultiaddrError("IPv6 address was incorrect length");const e=[];for(let s=0;s<r.byteLength;s+=2){const i=r[s],a=r[s+1],l=`${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`;e.push(l)}const t=e.join(":");try{const s=new URL(`http://[${t}]`);return s.hostname.substring(1,s.hostname.length-1)}catch{throw new InvalidMultiaddrError(`Invalid IPv6 address "${t}"`)}};function ip6StringToValue(r){try{const e=new URL(`http://[${r}]`);return e.hostname.substring(1,e.hostname.length-1)}catch{throw new InvalidMultiaddrError(`Invalid IPv6 address "${r}"`)}}const decoders=Object.values(bases).map(r=>r.decoder),anybaseDecoder=function(){let r=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>r=r.or(e)),r}();function mb2bytes(r){return anybaseDecoder.decode(r)}function bytes2mb(r){return e=>r.encoder.encode(e)}function integer(r){if(parseInt(r).toString()!==r)throw new ValidationError("Value must be an integer")}function positive(r){if(r<0)throw new ValidationError("Value must be a positive integer, or zero")}function maxValue(r){return e=>{if(e>r)throw new ValidationError(`Value must be smaller than or equal to ${r}`)}}function validate$1(...r){return e=>{for(const t of r)t(e)}}const validatePort=validate$1(integer,positive,maxValue(65535)),V=-1;class Registry{constructor(){O(this,"protocolsByCode",new Map);O(this,"protocolsByName",new Map)}getProtocol(e){let t;if(typeof e=="string"?t=this.protocolsByName.get(e):t=this.protocolsByCode.get(e),t==null)throw new UnknownProtocolError(`Protocol ${e} was unknown`);return t}addProtocol(e){var t;this.protocolsByCode.set(e.code,e),this.protocolsByName.set(e.name,e),(t=e.aliases)==null||t.forEach(s=>{this.protocolsByName.set(s,e)})}removeProtocol(e){var s;const t=this.protocolsByCode.get(e);t!=null&&(this.protocolsByCode.delete(t.code),this.protocolsByName.delete(t.name),(s=t.aliases)==null||s.forEach(i=>{this.protocolsByName.delete(i)}))}}const registry=new Registry,codecs=[{code:CODE_IP4,name:"ip4",size:32,valueToBytes:ip4ToBytes,bytesToValue:ip4ToString,validate:r=>{if(!isIPv4(r))throw new ValidationError(`Invalid IPv4 address "${r}"`)}},{code:CODE_TCP,name:"tcp",size:16,valueToBytes:port2bytes,bytesToValue:bytes2port,validate:validatePort},{code:CODE_UDP,name:"udp",size:16,valueToBytes:port2bytes,bytesToValue:bytes2port,validate:validatePort},{code:CODE_DCCP,name:"dccp",size:16,valueToBytes:port2bytes,bytesToValue:bytes2port,validate:validatePort},{code:CODE_IP6,name:"ip6",size:128,valueToBytes:ip6ToBytes,bytesToValue:ip6ToString,stringToValue:ip6StringToValue,validate:r=>{if(!isIPv6(r))throw new ValidationError(`Invalid IPv6 address "${r}"`)}},{code:CODE_IP6ZONE,name:"ip6zone",size:V},{code:CODE_IPCIDR,name:"ipcidr",size:8,bytesToValue:bytesToString("base10"),valueToBytes:stringToBytes("base10")},{code:CODE_DNS,name:"dns",size:V,resolvable:!0},{code:CODE_DNS4,name:"dns4",size:V,resolvable:!0},{code:CODE_DNS6,name:"dns6",size:V,resolvable:!0},{code:CODE_DNSADDR,name:"dnsaddr",size:V,resolvable:!0},{code:CODE_SCTP,name:"sctp",size:16,valueToBytes:port2bytes,bytesToValue:bytes2port,validate:validatePort},{code:CODE_UDT,name:"udt"},{code:CODE_UTP,name:"utp"},{code:CODE_UNIX,name:"unix",size:V,path:!0,stringToValue:r=>decodeURIComponent(r),valueToString:r=>encodeURIComponent(r)},{code:CODE_P2P,name:"p2p",aliases:["ipfs"],size:V,bytesToValue:bytesToString("base58btc"),valueToBytes:r=>r.startsWith("Q")||r.startsWith("1")?stringToBytes("base58btc")(r):CID.parse(r).multihash.bytes},{code:CODE_ONION,name:"onion",size:96,bytesToValue:bytes2onion,valueToBytes:onion2bytes},{code:CODE_ONION3,name:"onion3",size:296,bytesToValue:bytes2onion,valueToBytes:onion32bytes},{code:CODE_GARLIC64,name:"garlic64",size:V},{code:CODE_GARLIC32,name:"garlic32",size:V},{code:CODE_TLS,name:"tls"},{code:CODE_SNI,name:"sni",size:V},{code:CODE_NOISE,name:"noise"},{code:CODE_QUIC,name:"quic"},{code:CODE_QUIC_V1,name:"quic-v1"},{code:CODE_WEBTRANSPORT,name:"webtransport"},{code:CODE_CERTHASH,name:"certhash",size:V,bytesToValue:bytes2mb(base64url),valueToBytes:mb2bytes},{code:CODE_HTTP,name:"http"},{code:CODE_HTTP_PATH,name:"http-path",size:V,stringToValue:r=>`/${decodeURIComponent(r)}`,valueToString:r=>encodeURIComponent(r.substring(1))},{code:CODE_HTTPS,name:"https"},{code:CODE_WS,name:"ws"},{code:CODE_WSS,name:"wss"},{code:CODE_P2P_WEBSOCKET_STAR,name:"p2p-websocket-star"},{code:CODE_P2P_STARDUST,name:"p2p-stardust"},{code:CODE_P2P_WEBRTC_STAR,name:"p2p-webrtc-star"},{code:CODE_P2P_WEBRTC_DIRECT,name:"p2p-webrtc-direct"},{code:CODE_WEBRTC_DIRECT,name:"webrtc-direct"},{code:CODE_WEBRTC,name:"webrtc"},{code:CODE_P2P_CIRCUIT,name:"p2p-circuit"},{code:CODE_MEMORY,name:"memory",size:V}];codecs.forEach(r=>{registry.addProtocol(r)});function bytesToComponents(r){var s;const e=[];let t=0;for(;t<r.length;){const i=decode(r,t),a=registry.getProtocol(i),l=encodingLength(i),u=sizeForAddr(a,r,t+l);let p=0;u>0&&a.size===V&&(p=encodingLength(u));const x=l+p+u,w={code:i,name:a.name,bytes:r.subarray(t,t+x)};if(u>0){const E=t+l+p,R=r.subarray(E,E+u);w.value=((s=a.bytesToValue)==null?void 0:s.call(a,R))??toString(R)}e.push(w),t+=x}return e}function componentsToBytes(r){var s;let e=0;const t=[];for(const i of r){if(i.bytes==null){const a=registry.getProtocol(i.code),l=encodingLength(i.code);let u,p=0,x=0;i.value!=null&&(u=((s=a.valueToBytes)==null?void 0:s.call(a,i.value))??fromString(i.value),p=u.byteLength,a.size===V&&(x=encodingLength(p)));const w=new Uint8Array(l+x+p);let E=0;encodeUint8Array(i.code,w,E),E+=l,u!=null&&(a.size===V&&(encodeUint8Array(p,w,E),E+=x),w.set(u,E)),i.bytes=w}t.push(i.bytes),e+=i.bytes.byteLength}return concat(t,e)}function stringToComponents(r){var a;if(r.charAt(0)!=="/")throw new InvalidMultiaddrError('String multiaddr must start with "/"');const e=[];let t="protocol",s="",i="";for(let l=1;l<r.length;l++){const u=r.charAt(l);u!=="/"&&(t==="protocol"?i+=r.charAt(l):s+=r.charAt(l));const p=l===r.length-1;if(u==="/"||p){const x=registry.getProtocol(i);if(t==="protocol"){if(x.size==null||x.size===0){e.push({code:x.code,name:x.name}),s="",i="",t="protocol";continue}else if(p)throw new InvalidMultiaddrError(`Component ${i} was missing value`);t="value"}else if(t==="value"){const w={code:x.code,name:x.name};if(x.size!=null&&x.size!==0){if(s==="")throw new InvalidMultiaddrError(`Component ${i} was missing value`);w.value=((a=x.stringToValue)==null?void 0:a.call(x,s))??s}e.push(w),s="",i="",t="protocol"}}}if(i!==""&&s!=="")throw new InvalidMultiaddrError("Incomplete multiaddr");return e}function componentsToString(r){return`/${r.flatMap(e=>{var s;if(e.value==null)return e.name;const t=registry.getProtocol(e.code);if(t==null)throw new InvalidMultiaddrError(`Unknown protocol code ${e.code}`);return[e.name,((s=t.valueToString)==null?void 0:s.call(t,e.value))??e.value]}).join("/")}`}function sizeForAddr(r,e,t){return r.size==null||r.size===0?0:r.size>0?r.size/8:decode(e,t)}const inspect$1=Symbol.for("nodejs.util.inspect.custom"),symbol$1=Symbol.for("@multiformats/multiaddr"),DNS_CODES=[CODE_DNS,CODE_DNS4,CODE_DNS6,CODE_DNSADDR];class NoAvailableResolverError extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}function toComponents(r){if(r==null&&(r="/"),isMultiaddr(r))return r.getComponents();if(r instanceof Uint8Array)return bytesToComponents(r);if(typeof r=="string")return r=r.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),r===""&&(r="/"),stringToComponents(r);if(Array.isArray(r))return r;throw new InvalidMultiaddrError("Must be a string, Uint8Array, Component[], or another Multiaddr")}var Nh,Xe,so,io;const yi=class yi{constructor(e="/",t={}){O(this,Nh,!0);re(this,Xe);re(this,so);re(this,io);U(this,Xe,toComponents(e)),t.validate!==!1&&validate(this)}get bytes(){return I(this,io)==null&&U(this,io,componentsToBytes(I(this,Xe))),I(this,io)}toString(){return I(this,so)==null&&U(this,so,componentsToString(I(this,Xe))),I(this,so)}toJSON(){return this.toString()}toOptions(){let e,t,s,i,a="";for(const{code:u,name:p,value:x}of I(this,Xe))u===CODE_IP6ZONE&&(a=`%${x??""}`),DNS_CODES.includes(u)&&(t="tcp",i=443,s=`${x??""}${a}`,e=u===CODE_DNS6?6:4),(u===CODE_TCP||u===CODE_UDP)&&(t=p==="tcp"?"tcp":"udp",i=parseInt(x??"")),(u===CODE_IP4||u===CODE_IP6)&&(t="tcp",s=`${x??""}${a}`,e=u===CODE_IP6?6:4);if(e==null||t==null||s==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:s,transport:t,port:i}}getComponents(){return[...I(this,Xe)]}protos(){return I(this,Xe).map(({code:e,value:t})=>{const s=registry.getProtocol(e);return{code:e,size:s.size??0,name:s.name,resolvable:!!s.resolvable,path:!!s.path}})}protoCodes(){return I(this,Xe).map(({code:e})=>e)}protoNames(){return I(this,Xe).map(({name:e})=>e)}tuples(){return I(this,Xe).map(({code:e,value:t})=>{var a;if(t==null)return[e];const s=registry.getProtocol(e),i=[e];return t!=null&&i.push(((a=s.valueToBytes)==null?void 0:a.call(s,t))??fromString(t)),i})}stringTuples(){return I(this,Xe).map(({code:e,value:t})=>t==null?[e]:[e,t])}encapsulate(e){const t=new yi(e);return new yi([...I(this,Xe),...t.getComponents()],{validate:!1})}decapsulate(e){const t=e.toString(),s=this.toString(),i=s.lastIndexOf(t);if(i<0)throw new InvalidParametersError(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new yi(s.slice(0,i),{validate:!1})}decapsulateCode(e){let t;for(let s=I(this,Xe).length-1;s>-1;s--)if(I(this,Xe)[s].code===e){t=s;break}return new yi(I(this,Xe).slice(0,t),{validate:!1})}getPeerId(){try{let e=[];I(this,Xe).forEach(({code:s,value:i})=>{s===CODE_P2P&&e.push([s,i]),s===CODE_P2P_CIRCUIT&&(e=[])});const t=e.pop();if((t==null?void 0:t[1])!=null){const s=t[1];return s[0]==="Q"||s[0]==="1"?toString(base58btc.decode(`z${s}`),"base58btc"):toString(CID.parse(s).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(const e of I(this,Xe))if(registry.getProtocol(e.code).path)return e.value??null;return null}equals(e){return equals(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find(a=>a.resolvable);if(t==null)return[this];const s=resolvers.get(t.name);if(s==null)throw new NoAvailableResolverError(`no available resolver for ${t.name}`);return(await s(this,e)).map(a=>multiaddr(a))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(){return!(I(this,Xe).length!==2||I(this,Xe)[0].code!==CODE_IP4&&I(this,Xe)[0].code!==CODE_IP6||I(this,Xe)[1].code!==CODE_TCP&&I(this,Xe)[1].code!==CODE_UDP)}[(Nh=symbol$1,inspect$1)](){return`Multiaddr(${this.toString()})`}};Xe=new WeakMap,so=new WeakMap,io=new WeakMap;let Multiaddr=yi;function validate(r){r.getComponents().forEach(e=>{var s;const t=registry.getProtocol(e.code);e.value!=null&&((s=t.validate)==null||s.call(t,e.value))})}const resolvers=new Map;function isMultiaddr(r){return!!(r!=null&&r[symbol$1])}function multiaddr(r){return new Multiaddr(r)}function protocols(r){const e=registry.getProtocol(r);return{code:e.code,size:e.size??0,name:e.name,resolvable:!!e.resolvable,path:!!e.path}}function extractSNI(r){let e;try{e=protocols("sni").code}catch{return null}for(const[t,s]of r)if(t===e&&s!==void 0)return s;return null}function hasTLS(r){return r.some(([e,t])=>e===protocols("tls").code)}function interpretNext(r,e,t){const s=interpreters[protocols(r).name];if(s===void 0)throw new Error(`Can't interpret protocol ${protocols(r).name}`);const i=s(e,t);return r===protocols("ip6").code?`[${i}]`:i}const interpreters={ip4:(r,e)=>r,ip6:(r,e)=>e.length===0?r:`[${r}]`,tcp:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`tcp://${interpretNext(t[0],t[1]??"",e)}:${r}`},udp:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`udp://${interpretNext(t[0],t[1]??"",e)}:${r}`},dnsaddr:(r,e)=>r,dns4:(r,e)=>r,dns6:(r,e)=>r,dns:(r,e)=>r,ipfs:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/ipfs/${r}`},p2p:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p/${r}`},http:(r,e)=>{const t=hasTLS(e),s=extractSNI(e);if(t&&s!==null)return`https://${s}`;const i=t?"https://":"http://",a=e.pop();if(a===void 0)throw new Error("Unexpected end of multiaddr");let l=interpretNext(a[0],a[1]??"",e);return l=l.replace("tcp://",""),`${i}${l}`},tls:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return interpretNext(t[0],t[1]??"",e)},sni:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return interpretNext(t[0],t[1]??"",e)},https:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");let s=interpretNext(t[0],t[1]??"",e);return s=s.replace("tcp://",""),`https://${s}`},ws:(r,e)=>{const t=hasTLS(e),s=extractSNI(e);if(t&&s!==null)return`wss://${s}`;const i=t?"wss://":"ws://",a=e.pop();if(a===void 0)throw new Error("Unexpected end of multiaddr");let l=interpretNext(a[0],a[1]??"",e);return l=l.replace("tcp://",""),`${i}${l}`},wss:(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");let s=interpretNext(t[0],t[1]??"",e);return s=s.replace("tcp://",""),`wss://${s}`},"p2p-websocket-star":(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(r,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p-webrtc-direct`}};function multiaddrToUri(r,e){const s=multiaddr(r).stringTuples(),i=s.pop();if(i===void 0)throw new Error("Unexpected end of multiaddr");const a=protocols(i[0]),l=interpreters[a.name];if(l==null)throw new Error(`No interpreter found for ${a.name}`);let u=l(i[1]??"",s);return i[0]===protocols("tcp").code&&(u=u.replace("tcp://","http://"),(i[1]==="443"||i[1]==="80")&&(i[1]==="443"&&(u=u.replace("http://","https://")),u=u.substring(0,u.lastIndexOf(":")))),u}function toUrlString(r){try{r=multiaddrToUri(multiaddr$1(r))}catch{}return r=r.toString(),r}const getAgent=()=>{},log$2=logger$1("ipfs-http-client:lib:error-handler"),merge=mergeOptions.bind({ignoreUndefined:!0}),DEFAULT_PROTOCOL=envExports.isBrowser||envExports.isWebWorker?location.protocol:"http",DEFAULT_HOST=envExports.isBrowser||envExports.isWebWorker?location.hostname:"localhost",DEFAULT_PORT=envExports.isBrowser||envExports.isWebWorker?location.port:"5001",normalizeOptions=(r={})=>{let e,t={},s;if(typeof r=="string"||isMultiaddr$1(r))e=new URL(toUrlString(r));else if(r instanceof URL)e=r;else if(typeof r.url=="string"||isMultiaddr$1(r.url))e=new URL(toUrlString(r.url)),t=r;else if(r.url instanceof URL)e=r.url,t=r;else{t=r||{};const i=(t.protocol||DEFAULT_PROTOCOL).replace(":",""),a=(t.host||DEFAULT_HOST).split(":")[0],l=t.port||DEFAULT_PORT;e=new URL(`${i}://${a}:${l}`)}if(t.apiPath?e.pathname=t.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),envExports.isNode){const i=getAgent();s=t.agent||new i({keepAlive:!0,maxSockets:6})}return{...t,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:s}},errorHandler=async r=>{let e;try{if((r.headers.get("Content-Type")||"").startsWith("application/json")){const s=await r.json();log$2(s),e=s.Message||s.message}else e=await r.text()}catch(s){log$2("Failed to parse error response",s),e=s.message}let t=new HTTP.HTTPError(r);throw e&&(e.includes("deadline has elapsed")&&(t=new HTTP.TimeoutError),e&&e.includes("context deadline exceeded")&&(t=new HTTP.TimeoutError)),e&&e.includes("request timed out")&&(t=new HTTP.TimeoutError),e&&(t.message=e),t},KEBAB_REGEX=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,kebabCase=r=>r.replace(KEBAB_REGEX,function(e){return"-"+e.toLowerCase()}),parseTimeout=r=>typeof r=="string"?parse(r):r;class Client extends HTTP{constructor(e={}){const t=normalizeOptions(e);super({timeout:parseTimeout(t.timeout||0)||void 0,headers:t.headers,base:`${t.url}`,handleError:errorHandler,transformSearchParams:i=>{const a=new URLSearchParams;for(const[l,u]of i)u!=="undefined"&&u!=="null"&&l!=="signal"&&a.append(kebabCase(l),u),l==="timeout"&&!isNaN(u)&&a.append(kebabCase(l),u);return a},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const s=this.fetch;this.fetch=(i,a={})=>(typeof i=="string"&&!i.startsWith("/")&&(i=`${t.url}/${i}`),s.call(this,i,merge(a,{method:"POST"})))}}HTTP.HTTPError;const configure=r=>e=>r(new Client(e),e);function modeToString$1(r){if(r!=null)return typeof r=="string"?r:r.toString(8).padStart(4,"0")}function parseMtime$1(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){const t=r.getTime(),s=Math.floor(t/1e3);e={secs:s,nsecs:(t-s*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function toUrlSearchParams({arg:r,searchParams:e,hashAlg:t,mtime:s,mode:i,...a}={}){e&&(a={...a,...e}),t&&(a.hash=t),s!=null&&(s=parseMtime$1(s),a.mtime=s.secs,a.mtimeNsecs=s.nsecs),i!=null&&(a.mode=modeToString$1(i)),a.timeout&&!isNaN(a.timeout)&&(a.timeout=`${a.timeout}ms`),r==null?r=[]:Array.isArray(r)||(r=[r]);const l=new URLSearchParams(a);return r.forEach(u=>l.append("arg",u)),l}const createWantlist=configure(r=>{async function e(t={}){return((await(await r.post("bitswap/wantlist",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()).Keys||[]).map(i=>CID$1.parse(i["/"]))}return e}),createWantlistForPeer=configure(r=>{async function e(t,s={}){return((await(await r.post("bitswap/wantlist",{signal:s.signal,searchParams:toUrlSearchParams({...s,peer:t.toString()}),headers:s.headers})).json()).Keys||[]).map(a=>CID$1.parse(a["/"]))}return e}),symbol=Symbol.for("@libp2p/peer-id"),inspect=Symbol.for("nodejs.util.inspect.custom"),baseDecoder=Object.values(bases$2).map(r=>r.decoder).reduce((r,e)=>r.or(e),bases$2.identity.decoder),LIBP2P_KEY_CODE=114,MARSHALLED_ED225519_PUBLIC_KEY_LENGTH=36,MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH=37;var Th;class PeerIdImpl{constructor(e){O(this,"type");O(this,"multihash");O(this,"privateKey");O(this,"publicKey");O(this,"string");O(this,Th,!0);this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=base58btc$2.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return CID$1.createV1(LIBP2P_KEY_CODE,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){var t;if(e instanceof Uint8Array)return equals$3(this.multihash.bytes,e);if(typeof e=="string")return peerIdFromString(e).equals(this);if(((t=e==null?void 0:e.multihash)==null?void 0:t.bytes)!=null)return equals$3(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[(Th=symbol,inspect)](){return`PeerId(${this.toString()})`}}class RSAPeerIdImpl extends PeerIdImpl{constructor(t){super({...t,type:"RSA"});O(this,"type","RSA");O(this,"publicKey");this.publicKey=t.publicKey}}class Ed25519PeerIdImpl extends PeerIdImpl{constructor(t){super({...t,type:"Ed25519"});O(this,"type","Ed25519");O(this,"publicKey");this.publicKey=t.multihash.digest}}class Secp256k1PeerIdImpl extends PeerIdImpl{constructor(t){super({...t,type:"secp256k1"});O(this,"type","secp256k1");O(this,"publicKey");this.publicKey=t.multihash.digest}}function peerIdFromString(r,e){if(r.charAt(0)==="1"||r.charAt(0)==="Q"){const t=decode$f(base58btc$2.decode(`z${r}`));return r.startsWith("12D")?new Ed25519PeerIdImpl({multihash:t}):r.startsWith("16U")?new Secp256k1PeerIdImpl({multihash:t}):new RSAPeerIdImpl({multihash:t})}return peerIdFromBytes(baseDecoder.decode(r))}function peerIdFromBytes(r){try{const e=decode$f(r);if(e.code===identity$3.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:e});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:e})}if(e.code===sha256.code)return new RSAPeerIdImpl({multihash:e})}catch{return peerIdFromCID(CID$1.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function peerIdFromCID(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==LIBP2P_KEY_CODE)throw new Error("Supplied PeerID CID is invalid");const e=r.multihash;if(e.code===sha256.code)return new RSAPeerIdImpl({multihash:r.multihash});if(e.code===identity$3.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:r.multihash});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}const createStat$4=configure(r=>{async function e(t={}){const s=await r.post("bitswap/stat",{searchParams:toUrlSearchParams(t),signal:t.signal,headers:t.headers});return toCoreInterface$4(await s.json())}return e});function toCoreInterface$4(r){return{provideBufLen:r.ProvideBufLen,wantlist:(r.Wantlist||[]).map(e=>CID$1.parse(e["/"])),peers:(r.Peers||[]).map(e=>peerIdFromString(e)),blocksReceived:BigInt(r.BlocksReceived),dataReceived:BigInt(r.DataReceived),blocksSent:BigInt(r.BlocksSent),dataSent:BigInt(r.DataSent),dupBlksReceived:BigInt(r.DupBlksReceived),dupDataReceived:BigInt(r.DupDataReceived)}}const createUnwant=configure(r=>{async function e(t,s={}){return(await r.post("bitswap/unwant",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.toString(),...s}),headers:s.headers})).json()}return e});function createBitswap(r){return{wantlist:createWantlist(r),wantlistForPeer:createWantlistForPeer(r),unwant:createUnwant(r),stat:createStat$4(r)}}const createGet$5=configure(r=>{async function e(t,s={}){const i=await r.post("block/get",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.toString(),...s}),headers:s.headers});return new Uint8Array(await i.arrayBuffer())}return e});function peekableIterator(r){const[e,t]=r[Symbol.asyncIterator]!=null?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],s=[];return{peek:()=>e.next(),push:i=>{s.push(i)},next:()=>s.length>0?{done:!1,value:s.shift()}:e.next(),[t](){return this}}}async function*browserReadableStreamToIt(r,e={}){const t=r.getReader();try{for(;;){const s=await t.read();if(s.done)return;yield s.value}}finally{e.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}async function all(r){const e=[];for await(const t of r)e.push(t);return e}function isBytes(r){return ArrayBuffer.isView(r)||r instanceof ArrayBuffer}function isBlob(r){return r.constructor&&(r.constructor.name==="Blob"||r.constructor.name==="File")&&typeof r.stream=="function"}function isFileObject(r){return typeof r=="object"&&(r.path||r.content)}const isReadableStream=r=>r&&typeof r.getReader=="function";async function normaliseContent$1(r){if(isBytes(r))return new Blob([r]);if(typeof r=="string"||r instanceof String)return new Blob([r.toString()]);if(isBlob(r))return r;if(isReadableStream(r)&&(r=browserReadableStreamToIt(r)),Symbol.iterator in r||Symbol.asyncIterator in r){const e=peekableIterator(r),{value:t,done:s}=await e.peek();if(s)return itToBlob(e);if(e.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await all(e))]);if(isBytes(t)||typeof t=="string"||t instanceof String)return itToBlob(e)}throw errCode(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT")}async function itToBlob(r){const e=[];for await(const t of r)e.push(t);return new Blob(e)}async function*map(r,e){for await(const t of r)yield e(t)}var indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=r;function r(e,t){for(var s=new Array(arguments.length-1),i=0,a=2,l=!0;a<arguments.length;)s[i++]=arguments[a++];return new Promise(function(p,x){s[i]=function(E){if(l)if(l=!1,E)x(E);else{for(var R=new Array(arguments.length-1),A=0;A<R.length;)R[A++]=arguments[A];p.apply(null,R)}};try{e.apply(t||null,s)}catch(w){l&&(l=!1,x(w))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(r){var e=r;e.length=function(u){var p=u.length;if(!p)return 0;for(var x=0;--p%4>1&&u.charAt(p)==="=";)++x;return Math.ceil(u.length*3)/4-x};for(var t=new Array(64),s=new Array(123),i=0;i<64;)s[t[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;e.encode=function(u,p,x){for(var w=null,E=[],R=0,A=0,S;p<x;){var N=u[p++];switch(A){case 0:E[R++]=t[N>>2],S=(N&3)<<4,A=1;break;case 1:E[R++]=t[S|N>>4],S=(N&15)<<2,A=2;break;case 2:E[R++]=t[S|N>>6],E[R++]=t[N&63],A=0;break}R>8191&&((w||(w=[])).push(String.fromCharCode.apply(String,E)),R=0)}return A&&(E[R++]=t[S],E[R++]=61,A===1&&(E[R++]=61)),w?(R&&w.push(String.fromCharCode.apply(String,E.slice(0,R))),w.join("")):String.fromCharCode.apply(String,E.slice(0,R))};var a="invalid encoding";e.decode=function(u,p,x){for(var w=x,E=0,R,A=0;A<u.length;){var S=u.charCodeAt(A++);if(S===61&&E>1)break;if((S=s[S])===void 0)throw Error(a);switch(E){case 0:R=S,E=1;break;case 1:p[x++]=R<<2|(S&48)>>4,R=S,E=2;break;case 2:p[x++]=(R&15)<<4|(S&60)>>2,R=S,E=3;break;case 3:p[x++]=(R&3)<<6|S,E=0;break}}if(E===1)throw Error(a);return x-w},e.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}}(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=r;function r(){this._listeners={}}return r.prototype.on=function(t,s,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:s,ctx:i||this}),this},r.prototype.off=function(t,s){if(t===void 0)this._listeners={};else if(s===void 0)this._listeners[t]=[];else for(var i=this._listeners[t],a=0;a<i.length;)i[a].fn===s?i.splice(a,1):++a;return this},r.prototype.emit=function(t){var s=this._listeners[t];if(s){for(var i=[],a=1;a<arguments.length;)i.push(arguments[a++]);for(a=0;a<s.length;)s[a].fn.apply(s[a++].ctx,i)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=r(r);function r(a){return typeof Float32Array<"u"?function(){var l=new Float32Array([-0]),u=new Uint8Array(l.buffer),p=u[3]===128;function x(A,S,N){l[0]=A,S[N]=u[0],S[N+1]=u[1],S[N+2]=u[2],S[N+3]=u[3]}function w(A,S,N){l[0]=A,S[N]=u[3],S[N+1]=u[2],S[N+2]=u[1],S[N+3]=u[0]}a.writeFloatLE=p?x:w,a.writeFloatBE=p?w:x;function E(A,S){return u[0]=A[S],u[1]=A[S+1],u[2]=A[S+2],u[3]=A[S+3],l[0]}function R(A,S){return u[3]=A[S],u[2]=A[S+1],u[1]=A[S+2],u[0]=A[S+3],l[0]}a.readFloatLE=p?E:R,a.readFloatBE=p?R:E}():function(){function l(p,x,w,E){var R=x<0?1:0;if(R&&(x=-x),x===0)p(1/x>0?0:2147483648,w,E);else if(isNaN(x))p(2143289344,w,E);else if(x>34028234663852886e22)p((R<<31|2139095040)>>>0,w,E);else if(x<11754943508222875e-54)p((R<<31|Math.round(x/1401298464324817e-60))>>>0,w,E);else{var A=Math.floor(Math.log(x)/Math.LN2),S=Math.round(x*Math.pow(2,-A)*8388608)&8388607;p((R<<31|A+127<<23|S)>>>0,w,E)}}a.writeFloatLE=l.bind(null,e),a.writeFloatBE=l.bind(null,t);function u(p,x,w){var E=p(x,w),R=(E>>31)*2+1,A=E>>>23&255,S=E&8388607;return A===255?S?NaN:R*(1/0):A===0?R*1401298464324817e-60*S:R*Math.pow(2,A-150)*(S+8388608)}a.readFloatLE=u.bind(null,s),a.readFloatBE=u.bind(null,i)}(),typeof Float64Array<"u"?function(){var l=new Float64Array([-0]),u=new Uint8Array(l.buffer),p=u[7]===128;function x(A,S,N){l[0]=A,S[N]=u[0],S[N+1]=u[1],S[N+2]=u[2],S[N+3]=u[3],S[N+4]=u[4],S[N+5]=u[5],S[N+6]=u[6],S[N+7]=u[7]}function w(A,S,N){l[0]=A,S[N]=u[7],S[N+1]=u[6],S[N+2]=u[5],S[N+3]=u[4],S[N+4]=u[3],S[N+5]=u[2],S[N+6]=u[1],S[N+7]=u[0]}a.writeDoubleLE=p?x:w,a.writeDoubleBE=p?w:x;function E(A,S){return u[0]=A[S],u[1]=A[S+1],u[2]=A[S+2],u[3]=A[S+3],u[4]=A[S+4],u[5]=A[S+5],u[6]=A[S+6],u[7]=A[S+7],l[0]}function R(A,S){return u[7]=A[S],u[6]=A[S+1],u[5]=A[S+2],u[4]=A[S+3],u[3]=A[S+4],u[2]=A[S+5],u[1]=A[S+6],u[0]=A[S+7],l[0]}a.readDoubleLE=p?E:R,a.readDoubleBE=p?R:E}():function(){function l(p,x,w,E,R,A){var S=E<0?1:0;if(S&&(E=-E),E===0)p(0,R,A+x),p(1/E>0?0:2147483648,R,A+w);else if(isNaN(E))p(0,R,A+x),p(2146959360,R,A+w);else if(E>17976931348623157e292)p(0,R,A+x),p((S<<31|2146435072)>>>0,R,A+w);else{var N;if(E<22250738585072014e-324)N=E/5e-324,p(N>>>0,R,A+x),p((S<<31|N/4294967296)>>>0,R,A+w);else{var k=Math.floor(Math.log(E)/Math.LN2);k===1024&&(k=1023),N=E*Math.pow(2,-k),p(N*4503599627370496>>>0,R,A+x),p((S<<31|k+1023<<20|N*1048576&1048575)>>>0,R,A+w)}}}a.writeDoubleLE=l.bind(null,e,0,4),a.writeDoubleBE=l.bind(null,t,4,0);function u(p,x,w,E,R){var A=p(E,R+x),S=p(E,R+w),N=(S>>31)*2+1,k=S>>>20&2047,j=4294967296*(S&1048575)+A;return k===2047?j?NaN:N*(1/0):k===0?N*5e-324*j:N*Math.pow(2,k-1075)*(j+4503599627370496)}a.readDoubleLE=u.bind(null,s,0,4),a.readDoubleBE=u.bind(null,i,4,0)}(),a}function e(a,l,u){l[u]=a&255,l[u+1]=a>>>8&255,l[u+2]=a>>>16&255,l[u+3]=a>>>24}function t(a,l,u){l[u]=a>>>24,l[u+1]=a>>>16&255,l[u+2]=a>>>8&255,l[u+3]=a&255}function s(a,l){return(a[l]|a[l+1]<<8|a[l+2]<<16|a[l+3]<<24)>>>0}function i(a,l){return(a[l]<<24|a[l+1]<<16|a[l+2]<<8|a[l+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(r){var e=r;e.length=function(s){for(var i=0,a=0,l=0;l<s.length;++l)a=s.charCodeAt(l),a<128?i+=1:a<2048?i+=2:(a&64512)===55296&&(s.charCodeAt(l+1)&64512)===56320?(++l,i+=4):i+=3;return i},e.read=function(s,i,a){var l=a-i;if(l<1)return"";for(var u=null,p=[],x=0,w;i<a;)w=s[i++],w<128?p[x++]=w:w>191&&w<224?p[x++]=(w&31)<<6|s[i++]&63:w>239&&w<365?(w=((w&7)<<18|(s[i++]&63)<<12|(s[i++]&63)<<6|s[i++]&63)-65536,p[x++]=55296+(w>>10),p[x++]=56320+(w&1023)):p[x++]=(w&15)<<12|(s[i++]&63)<<6|s[i++]&63,x>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,p)),x=0);return u?(x&&u.push(String.fromCharCode.apply(String,p.slice(0,x))),u.join("")):String.fromCharCode.apply(String,p.slice(0,x))},e.write=function(s,i,a){for(var l=a,u,p,x=0;x<s.length;++x)u=s.charCodeAt(x),u<128?i[a++]=u:u<2048?(i[a++]=u>>6|192,i[a++]=u&63|128):(u&64512)===55296&&((p=s.charCodeAt(x+1))&64512)===56320?(u=65536+((u&1023)<<10)+(p&1023),++x,i[a++]=u>>18|240,i[a++]=u>>12&63|128,i[a++]=u>>6&63|128,i[a++]=u&63|128):(i[a++]=u>>12|224,i[a++]=u>>6&63|128,i[a++]=u&63|128);return a-l}}(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=r;function r(e,t,s){var i=s||8192,a=i>>>1,l=null,u=i;return function(x){if(x<1||x>a)return e(x);u+x>i&&(l=e(i),u=0);var w=t.call(l,u,u+=x);return u&7&&(u=(u|7)+1),w}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var r=requireMinimal$1();function e(a,l){this.lo=a>>>0,this.hi=l>>>0}var t=e.zero=new e(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var s=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(l){if(l===0)return t;var u=l<0;u&&(l=-l);var p=l>>>0,x=(l-p)/4294967296>>>0;return u&&(x=~x>>>0,p=~p>>>0,++p>4294967295&&(p=0,++x>4294967295&&(x=0))),new e(p,x)},e.from=function(l){if(typeof l=="number")return e.fromNumber(l);if(r.isString(l))if(r.Long)l=r.Long.fromString(l);else return e.fromNumber(parseInt(l,10));return l.low||l.high?new e(l.low>>>0,l.high>>>0):t},e.prototype.toNumber=function(l){if(!l&&this.hi>>>31){var u=~this.lo+1>>>0,p=~this.hi>>>0;return u||(p=p+1>>>0),-(u+p*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(l){return r.Long?new r.Long(this.lo|0,this.hi|0,!!l):{low:this.lo|0,high:this.hi|0,unsigned:!!l}};var i=String.prototype.charCodeAt;return e.fromHash=function(l){return l===s?t:new e((i.call(l,0)|i.call(l,1)<<8|i.call(l,2)<<16|i.call(l,3)<<24)>>>0,(i.call(l,4)|i.call(l,5)<<8|i.call(l,6)<<16|i.call(l,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var l=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^l)>>>0,this.lo=(this.lo<<1^l)>>>0,this},e.prototype.zzDecode=function(){var l=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^l)>>>0,this.hi=(this.hi>>>1^l)>>>0,this},e.prototype.length=function(){var l=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,p=this.hi>>>24;return p===0?u===0?l<16384?l<128?1:2:l<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:p<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(r){var e=r;e.asPromise=requireAspromise(),e.base64=requireBase64(),e.EventEmitter=requireEventemitter(),e.float=requireFloat(),e.inquire=requireInquire(),e.utf8=requireUtf8(),e.pool=requirePool(),e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal$1,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},e.isString=function(a){return typeof a=="string"||a instanceof String},e.isObject=function(a){return a&&typeof a=="object"},e.isset=e.isSet=function(a,l){var u=a[l];return u!=null&&a.hasOwnProperty(l)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},e.Buffer=function(){try{var i=e.inquire("buffer").Buffer;return i.prototype.utf8Write?i:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(a){return typeof a=="number"?e.Buffer?e._Buffer_allocUnsafe(a):new e.Array(a):e.Buffer?e._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(a){return a?e.LongBits.from(a).toHash():e.LongBits.zeroHash},e.longFromHash=function(a,l){var u=e.LongBits.fromHash(a);return e.Long?e.Long.fromBits(u.lo,u.hi,l):u.toNumber(!!l)};function t(i,a,l){for(var u=Object.keys(a),p=0;p<u.length;++p)(i[u[p]]===void 0||!l)&&(i[u[p]]=a[u[p]]);return i}e.merge=t,e.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};function s(i){function a(l,u){if(!(this instanceof a))return new a(l,u);Object.defineProperty(this,"message",{get:function(){return l}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),u&&t(this,u)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return i},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}e.newError=s,e.ProtocolError=s("ProtocolError"),e.oneOfGetter=function(a){for(var l={},u=0;u<a.length;++u)l[a[u]]=1;return function(){for(var p=Object.keys(this),x=p.length-1;x>-1;--x)if(l[p[x]]===1&&this[p[x]]!==void 0&&this[p[x]]!==null)return p[x]}},e.oneOfSetter=function(a){return function(l){for(var u=0;u<a.length;++u)a[u]!==l&&delete this[a[u]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var i=e.Buffer;if(!i){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=i.from!==Uint8Array.from&&i.from||function(l,u){return new i(l,u)},e._Buffer_allocUnsafe=i.allocUnsafe||function(l){return new i(l)}}}(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=p;var r=requireMinimal$1(),e,t=r.LongBits,s=r.base64,i=r.utf8;function a(k,j,$){this.fn=k,this.len=j,this.next=void 0,this.val=$}function l(){}function u(k){this.head=k.head,this.tail=k.tail,this.len=k.len,this.next=k.states}function p(){this.len=0,this.head=new a(l,0,0),this.tail=this.head,this.states=null}var x=function(){return r.Buffer?function(){return(p.create=function(){return new e})()}:function(){return new p}};p.create=x(),p.alloc=function(j){return new r.Array(j)},r.Array!==Array&&(p.alloc=r.pool(p.alloc,r.Array.prototype.subarray)),p.prototype._push=function(j,$,D){return this.tail=this.tail.next=new a(j,$,D),this.len+=$,this};function w(k,j,$){j[$]=k&255}function E(k,j,$){for(;k>127;)j[$++]=k&127|128,k>>>=7;j[$]=k}function R(k,j){this.len=k,this.next=void 0,this.val=j}R.prototype=Object.create(a.prototype),R.prototype.fn=E,p.prototype.uint32=function(j){return this.len+=(this.tail=this.tail.next=new R((j=j>>>0)<128?1:j<16384?2:j<2097152?3:j<268435456?4:5,j)).len,this},p.prototype.int32=function(j){return j<0?this._push(A,10,t.fromNumber(j)):this.uint32(j)},p.prototype.sint32=function(j){return this.uint32((j<<1^j>>31)>>>0)};function A(k,j,$){for(;k.hi;)j[$++]=k.lo&127|128,k.lo=(k.lo>>>7|k.hi<<25)>>>0,k.hi>>>=7;for(;k.lo>127;)j[$++]=k.lo&127|128,k.lo=k.lo>>>7;j[$++]=k.lo}p.prototype.uint64=function(j){var $=t.from(j);return this._push(A,$.length(),$)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(j){var $=t.from(j).zzEncode();return this._push(A,$.length(),$)},p.prototype.bool=function(j){return this._push(w,1,j?1:0)};function S(k,j,$){j[$]=k&255,j[$+1]=k>>>8&255,j[$+2]=k>>>16&255,j[$+3]=k>>>24}p.prototype.fixed32=function(j){return this._push(S,4,j>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(j){var $=t.from(j);return this._push(S,4,$.lo)._push(S,4,$.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(j){return this._push(r.float.writeFloatLE,4,j)},p.prototype.double=function(j){return this._push(r.float.writeDoubleLE,8,j)};var N=r.Array.prototype.set?function(j,$,D){$.set(j,D)}:function(j,$,D){for(var z=0;z<j.length;++z)$[D+z]=j[z]};return p.prototype.bytes=function(j){var $=j.length>>>0;if(!$)return this._push(w,1,0);if(r.isString(j)){var D=p.alloc($=s.length(j));s.decode(j,D,0),j=D}return this.uint32($)._push(N,$,j)},p.prototype.string=function(j){var $=i.length(j);return $?this.uint32($)._push(i.write,$,j):this._push(w,1,0)},p.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new a(l,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(l,0,0),this.len=0),this},p.prototype.ldelim=function(){var j=this.head,$=this.tail,D=this.len;return this.reset().uint32(D),D&&(this.tail.next=j.next,this.tail=$,this.len+=D),this},p.prototype.finish=function(){for(var j=this.head.next,$=this.constructor.alloc(this.len),D=0;j;)j.fn(j.val,$,D),D+=j.len,j=j.next;return $},p._configure=function(k){e=k,p.create=x(),e._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=t;var r=requireWriter();(t.prototype=Object.create(r.prototype)).constructor=t;var e=requireMinimal$1();function t(){r.call(this)}t._configure=function(){t.alloc=e._Buffer_allocUnsafe,t.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&e.Buffer.prototype.set.name==="set"?function(a,l,u){l.set(a,u)}:function(a,l,u){if(a.copy)a.copy(l,u,0,a.length);else for(var p=0;p<a.length;)l[u++]=a[p++]}},t.prototype.bytes=function(a){e.isString(a)&&(a=e._Buffer_from(a,"base64"));var l=a.length>>>0;return this.uint32(l),l&&this._push(t.writeBytesBuffer,l,a),this};function s(i,a,l){i.length<40?e.utf8.write(i,a,l):a.utf8Write?a.utf8Write(i,l):a.write(i,l)}return t.prototype.string=function(a){var l=e.Buffer.byteLength(a);return this.uint32(l),l&&this._push(s,l,a),this},t._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=a;var r=requireMinimal$1(),e,t=r.LongBits,s=r.utf8;function i(E,R){return RangeError("index out of range: "+E.pos+" + "+(R||1)+" > "+E.len)}function a(E){this.buf=E,this.pos=0,this.len=E.length}var l=typeof Uint8Array<"u"?function(R){if(R instanceof Uint8Array||Array.isArray(R))return new a(R);throw Error("illegal buffer")}:function(R){if(Array.isArray(R))return new a(R);throw Error("illegal buffer")},u=function(){return r.Buffer?function(A){return(a.create=function(N){return r.Buffer.isBuffer(N)?new e(N):l(N)})(A)}:l};a.create=u(),a.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,a.prototype.uint32=function(){var R=4294967295;return function(){if(R=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(R=(R|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(R=(R|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(R=(R|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(R=(R|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return R;if((this.pos+=5)>this.len)throw this.pos=this.len,i(this,10);return R}}(),a.prototype.int32=function(){return this.uint32()|0},a.prototype.sint32=function(){var R=this.uint32();return R>>>1^-(R&1)|0};function p(){var E=new t(0,0),R=0;if(this.len-this.pos>4){for(;R<4;++R)if(E.lo=(E.lo|(this.buf[this.pos]&127)<<R*7)>>>0,this.buf[this.pos++]<128)return E;if(E.lo=(E.lo|(this.buf[this.pos]&127)<<28)>>>0,E.hi=(E.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return E;R=0}else{for(;R<3;++R){if(this.pos>=this.len)throw i(this);if(E.lo=(E.lo|(this.buf[this.pos]&127)<<R*7)>>>0,this.buf[this.pos++]<128)return E}return E.lo=(E.lo|(this.buf[this.pos++]&127)<<R*7)>>>0,E}if(this.len-this.pos>4){for(;R<5;++R)if(E.hi=(E.hi|(this.buf[this.pos]&127)<<R*7+3)>>>0,this.buf[this.pos++]<128)return E}else for(;R<5;++R){if(this.pos>=this.len)throw i(this);if(E.hi=(E.hi|(this.buf[this.pos]&127)<<R*7+3)>>>0,this.buf[this.pos++]<128)return E}throw Error("invalid varint encoding")}a.prototype.bool=function(){return this.uint32()!==0};function x(E,R){return(E[R-4]|E[R-3]<<8|E[R-2]<<16|E[R-1]<<24)>>>0}a.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return x(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return x(this.buf,this.pos+=4)|0};function w(){if(this.pos+8>this.len)throw i(this,8);return new t(x(this.buf,this.pos+=4),x(this.buf,this.pos+=4))}return a.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var R=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,R},a.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var R=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,R},a.prototype.bytes=function(){var R=this.uint32(),A=this.pos,S=this.pos+R;if(S>this.len)throw i(this,R);if(this.pos+=R,Array.isArray(this.buf))return this.buf.slice(A,S);if(A===S){var N=r.Buffer;return N?N.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,A,S)},a.prototype.string=function(){var R=this.bytes();return s.read(R,0,R.length)},a.prototype.skip=function(R){if(typeof R=="number"){if(this.pos+R>this.len)throw i(this,R);this.pos+=R}else do if(this.pos>=this.len)throw i(this);while(this.buf[this.pos++]&128);return this},a.prototype.skipType=function(E){switch(E){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(E=this.uint32()&7)!==4;)this.skipType(E);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+E+" at offset "+this.pos)}return this},a._configure=function(E){e=E,a.create=u(),e._configure();var R=r.Long?"toLong":"toNumber";r.merge(a.prototype,{int64:function(){return p.call(this)[R](!1)},uint64:function(){return p.call(this)[R](!0)},sint64:function(){return p.call(this).zzDecode()[R](!1)},fixed64:function(){return w.call(this)[R](!0)},sfixed64:function(){return w.call(this)[R](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=t;var r=requireReader();(t.prototype=Object.create(r.prototype)).constructor=t;var e=requireMinimal$1();function t(s){r.call(this,s)}return t._configure=function(){e.Buffer&&(t.prototype._slice=e.Buffer.prototype.slice)},t.prototype.string=function(){var i=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i,this.len))},t._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=e;var r=requireMinimal$1();(e.prototype=Object.create(r.EventEmitter.prototype)).constructor=e;function e(t,s,i){if(typeof t!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!s,this.responseDelimited=!!i}return e.prototype.rpcCall=function t(s,i,a,l,u){if(!l)throw TypeError("request must be specified");var p=this;if(!u)return r.asPromise(t,p,s,i,a,l);if(!p.rpcImpl){setTimeout(function(){u(Error("already ended"))},0);return}try{return p.rpcImpl(s,i[p.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(w,E){if(w)return p.emit("error",w,s),u(w);if(E===null){p.end(!0);return}if(!(E instanceof a))try{E=a[p.responseDelimited?"decodeDelimited":"decode"](E)}catch(R){return p.emit("error",R,s),u(R)}return p.emit("data",E,s),u(null,E)})}catch(x){p.emit("error",x,s),setTimeout(function(){u(x)},0);return}},e.prototype.end=function(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(r){var e=r;e.Service=requireService()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(r){var e=r;e.build="minimal",e.Writer=requireWriter(),e.BufferWriter=requireWriter_buffer(),e.Reader=requireReader(),e.BufferReader=requireReader_buffer(),e.util=requireMinimal$1(),e.rpc=requireRpc(),e.roots=requireRoots(),e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()}(indexMinimal)),indexMinimal}var minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}var minimalExports=requireMinimal();const $protobuf=getDefaultExportFromCjs(minimalExports),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots["ipfs-unixfs"]||($protobuf.roots["ipfs-unixfs"]={});$root.Data=(()=>{function r(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),s=0;s<t.length;++s)e[t[s]]!=null&&(this[t[s]]=e[t[s]])}return r.prototype.Type=0,r.prototype.Data=$util.newBuffer([]),r.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,r.prototype.blocksizes=$util.emptyArray,r.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,r.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,r.prototype.mode=0,r.prototype.mtime=null,r.encode=function(t,s){if(s||(s=$Writer.create()),s.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&s.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&s.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var i=0;i<t.blocksizes.length;++i)s.uint32(32).uint64(t.blocksizes[i]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&s.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&s.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&s.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&$root.UnixTime.encode(t.mtime,s.uint32(66).fork()).ldelim(),s},r.decode=function(t,s){t instanceof $Reader||(t=$Reader.create(t));for(var i=s===void 0?t.len:t.pos+s,a=new $root.Data;t.pos<i;){var l=t.uint32();switch(l>>>3){case 1:a.Type=t.int32();break;case 2:a.Data=t.bytes();break;case 3:a.filesize=t.uint64();break;case 4:if(a.blocksizes&&a.blocksizes.length||(a.blocksizes=[]),(l&7)===2)for(var u=t.uint32()+t.pos;t.pos<u;)a.blocksizes.push(t.uint64());else a.blocksizes.push(t.uint64());break;case 5:a.hashType=t.uint64();break;case 6:a.fanout=t.uint64();break;case 7:a.mode=t.uint32();break;case 8:a.mtime=$root.UnixTime.decode(t,t.uint32());break;default:t.skipType(l&7);break}}if(!a.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:a});return a},r.fromObject=function(t){if(t instanceof $root.Data)return t;var s=new $root.Data;switch(t.Type){case"Raw":case 0:s.Type=0;break;case"Directory":case 1:s.Type=1;break;case"File":case 2:s.Type=2;break;case"Metadata":case 3:s.Type=3;break;case"Symlink":case 4:s.Type=4;break;case"HAMTShard":case 5:s.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?$util.base64.decode(t.Data,s.Data=$util.newBuffer($util.base64.length(t.Data)),0):t.Data.length&&(s.Data=t.Data)),t.filesize!=null&&($util.Long?(s.filesize=$util.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?s.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?s.filesize=t.filesize:typeof t.filesize=="object"&&(s.filesize=new $util.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");s.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)$util.Long?(s.blocksizes[i]=$util.Long.fromValue(t.blocksizes[i])).unsigned=!0:typeof t.blocksizes[i]=="string"?s.blocksizes[i]=parseInt(t.blocksizes[i],10):typeof t.blocksizes[i]=="number"?s.blocksizes[i]=t.blocksizes[i]:typeof t.blocksizes[i]=="object"&&(s.blocksizes[i]=new $util.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0))}if(t.hashType!=null&&($util.Long?(s.hashType=$util.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?s.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?s.hashType=t.hashType:typeof t.hashType=="object"&&(s.hashType=new $util.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&($util.Long?(s.fanout=$util.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?s.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?s.fanout=t.fanout:typeof t.fanout=="object"&&(s.fanout=new $util.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(s.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");s.mtime=$root.UnixTime.fromObject(t.mtime)}return s},r.toObject=function(t,s){s||(s={});var i={};if((s.arrays||s.defaults)&&(i.blocksizes=[]),s.defaults){if(i.Type=s.enums===String?"Raw":0,s.bytes===String?i.Data="":(i.Data=[],s.bytes!==Array&&(i.Data=$util.newBuffer(i.Data))),$util.Long){var a=new $util.Long(0,0,!0);i.filesize=s.longs===String?a.toString():s.longs===Number?a.toNumber():a}else i.filesize=s.longs===String?"0":0;if($util.Long){var a=new $util.Long(0,0,!0);i.hashType=s.longs===String?a.toString():s.longs===Number?a.toNumber():a}else i.hashType=s.longs===String?"0":0;if($util.Long){var a=new $util.Long(0,0,!0);i.fanout=s.longs===String?a.toString():s.longs===Number?a.toNumber():a}else i.fanout=s.longs===String?"0":0;i.mode=0,i.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(i.Type=s.enums===String?$root.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(i.Data=s.bytes===String?$util.base64.encode(t.Data,0,t.Data.length):s.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?i.filesize=s.longs===String?String(t.filesize):t.filesize:i.filesize=s.longs===String?$util.Long.prototype.toString.call(t.filesize):s.longs===Number?new $util.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){i.blocksizes=[];for(var l=0;l<t.blocksizes.length;++l)typeof t.blocksizes[l]=="number"?i.blocksizes[l]=s.longs===String?String(t.blocksizes[l]):t.blocksizes[l]:i.blocksizes[l]=s.longs===String?$util.Long.prototype.toString.call(t.blocksizes[l]):s.longs===Number?new $util.LongBits(t.blocksizes[l].low>>>0,t.blocksizes[l].high>>>0).toNumber(!0):t.blocksizes[l]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?i.hashType=s.longs===String?String(t.hashType):t.hashType:i.hashType=s.longs===String?$util.Long.prototype.toString.call(t.hashType):s.longs===Number?new $util.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?i.fanout=s.longs===String?String(t.fanout):t.fanout:i.fanout=s.longs===String?$util.Long.prototype.toString.call(t.fanout):s.longs===Number?new $util.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(i.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(i.mtime=$root.UnixTime.toObject(t.mtime,s)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),r})();$root.UnixTime=(()=>{function r(e){if(e)for(var t=Object.keys(e),s=0;s<t.length;++s)e[t[s]]!=null&&(this[t[s]]=e[t[s]])}return r.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,r.prototype.FractionalNanoseconds=0,r.encode=function(t,s){return s||(s=$Writer.create()),s.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&s.uint32(21).fixed32(t.FractionalNanoseconds),s},r.decode=function(t,s){t instanceof $Reader||(t=$Reader.create(t));for(var i=s===void 0?t.len:t.pos+s,a=new $root.UnixTime;t.pos<i;){var l=t.uint32();switch(l>>>3){case 1:a.Seconds=t.int64();break;case 2:a.FractionalNanoseconds=t.fixed32();break;default:t.skipType(l&7);break}}if(!a.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:a});return a},r.fromObject=function(t){if(t instanceof $root.UnixTime)return t;var s=new $root.UnixTime;return t.Seconds!=null&&($util.Long?(s.Seconds=$util.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?s.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?s.Seconds=t.Seconds:typeof t.Seconds=="object"&&(s.Seconds=new $util.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(s.FractionalNanoseconds=t.FractionalNanoseconds>>>0),s},r.toObject=function(t,s){s||(s={});var i={};if(s.defaults){if($util.Long){var a=new $util.Long(0,0,!1);i.Seconds=s.longs===String?a.toString():s.longs===Number?a.toNumber():a}else i.Seconds=s.longs===String?"0":0;i.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?i.Seconds=s.longs===String?String(t.Seconds):t.Seconds:i.Seconds=s.longs===String?$util.Long.prototype.toString.call(t.Seconds):s.longs===Number?new $util.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(i.FractionalNanoseconds=t.FractionalNanoseconds),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})();$root.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),s=0;s<t.length;++s)e[t[s]]!=null&&(this[t[s]]=e[t[s]])}return r.prototype.MimeType="",r.encode=function(t,s){return s||(s=$Writer.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&s.uint32(10).string(t.MimeType),s},r.decode=function(t,s){t instanceof $Reader||(t=$Reader.create(t));for(var i=s===void 0?t.len:t.pos+s,a=new $root.Metadata;t.pos<i;){var l=t.uint32();switch(l>>>3){case 1:a.MimeType=t.string();break;default:t.skipType(l&7);break}}return a},r.fromObject=function(t){if(t instanceof $root.Metadata)return t;var s=new $root.Metadata;return t.MimeType!=null&&(s.MimeType=String(t.MimeType)),s},r.toObject=function(t,s){s||(s={});var i={};return s.defaults&&(i.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(i.MimeType=t.MimeType),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})();function parseMode(r){if(r!=null)return typeof r=="number"?r&4095:(r=r.toString(),r.substring(0,1)==="0"?parseInt(r,8)&4095:parseInt(r,10)&4095)}function parseMtime(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){const t=r.getTime(),s=Math.floor(t/1e3);e={secs:s,nsecs:(t-s*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}async function*normaliseCandidateMultiple(r,e){if(typeof r=="string"||r instanceof String||isBytes(r)||isBlob(r)||r._readableState)throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(r)&&(r=browserReadableStreamToIt(r)),Symbol.iterator in r||Symbol.asyncIterator in r){const t=peekableIterator(r),{value:s,done:i}=await t.peek();if(i){yield*[];return}if(t.push(s),Number.isInteger(s))throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(s._readableState){yield*map(t,a=>toFileObject$1({content:a},e));return}if(isBytes(s)){yield toFileObject$1({content:t},e);return}if(isFileObject(s)||s[Symbol.iterator]||s[Symbol.asyncIterator]||isReadableStream(s)||isBlob(s)){yield*map(t,a=>toFileObject$1(a,e));return}}throw isFileObject(r)?errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):errCode(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}async function toFileObject$1(r,e){const{path:t,mode:s,mtime:i,content:a}=r,l={path:t||"",mode:parseMode(s),mtime:parseMtime(i)};return a?l.content=await e(a):t||(l.content=await e(r)),l}function normaliseInput$2(r){return normaliseCandidateMultiple(r,normaliseContent$1)}function modeToString(r){if(r!=null)return typeof r=="string"?r:r.toString(8).padStart(4,"0")}async function multipartRequest(r,e,t={}){const s=[],i=new FormData;let a=0,l=0;for await(const{content:u,path:p,mode:x,mtime:w}of normaliseInput$2(r)){let E="";const R=u?"file":"dir";a>0&&(E=`-${a}`);let A=R+E;const S=[];if(x!=null&&S.push(`mode=${modeToString(x)}`),w!=null){const{secs:N,nsecs:k}=w;S.push(`mtime=${N}`),k!=null&&S.push(`mtime-nsecs=${k}`)}if(S.length&&(A=`${A}?${S.join("&")}`),u){i.set(A,u,p!=null?encodeURIComponent(p):void 0);const N=l+u.size;s.push({name:p,start:l,end:N}),l=N}else if(p!=null)i.set(A,new File([""],encodeURIComponent(p),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:l,parts:s,headers:t,body:i}}var anySignalExports=requireAnySignal();function filter(r){return r.filter(Boolean)}function abortSignal(...r){return anySignalExports.anySignal(filter(r))}const createPut$3=configure(r=>{async function e(t,s={}){const i=new AbortController,a=abortSignal(i.signal,s.signal);let l;try{l=await(await r.post("block/put",{signal:a,searchParams:toUrlSearchParams(s),...await multipartRequest([t],i,s.headers)})).json()}catch(u){if(s.format==="dag-pb")return e(t,{...s,format:"protobuf"});if(s.format==="dag-cbor")return e(t,{...s,format:"cbor"});throw u}return CID$1.parse(l.Key)}return e}),createRm$6=configure(r=>{async function*e(t,s={}){Array.isArray(t)||(t=[t]);const i=await r.post("block/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.map(a=>a.toString()),"stream-channels":!0,...s}),headers:s.headers});for await(const a of i.ndjson())yield toCoreInterface$3(a)}return e});function toCoreInterface$3(r){const e={cid:CID$1.parse(r.Hash)};return r.Error&&(e.error=new Error(r.Error)),e}const createStat$3=configure(r=>{async function e(t,s={}){const a=await(await r.post("block/stat",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.toString(),...s}),headers:s.headers})).json();return{cid:CID$1.parse(a.Key),size:a.Size}}return e});function createBlock(r){return{get:createGet$5(r),put:createPut$3(r),rm:createRm$6(r),stat:createStat$3(r)}}const createAdd$4=configure(r=>{async function e(t,s={}){const i=await r.post("bootstrap/add",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers}),{Peers:a}=await i.json();return{Peers:a.map(l=>multiaddr$1(l))}}return e}),createClear=configure(r=>{async function e(t={}){const s=await r.post("bootstrap/rm",{signal:t.signal,searchParams:toUrlSearchParams({...t,all:!0}),headers:t.headers}),{Peers:i}=await s.json();return{Peers:i.map(a=>multiaddr$1(a))}}return e}),createList$2=configure(r=>{async function e(t={}){const s=await r.post("bootstrap/list",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers}),{Peers:i}=await s.json();return{Peers:i.map(a=>multiaddr$1(a))}}return e}),createReset=configure(r=>{async function e(t={}){const s=await r.post("bootstrap/add",{signal:t.signal,searchParams:toUrlSearchParams({...t,default:!0}),headers:t.headers}),{Peers:i}=await s.json();return{Peers:i.map(a=>multiaddr$1(a))}}return e}),createRm$5=configure(r=>{async function e(t,s={}){const i=await r.post("bootstrap/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers}),{Peers:a}=await i.json();return{Peers:a.map(l=>multiaddr$1(l))}}return e});function createBootstrap(r){return{add:createAdd$4(r),clear:createClear(r),list:createList$2(r),reset:createReset(r),rm:createRm$5(r)}}const createApply=configure(r=>{async function e(t,s={}){const a=await(await r.post("config/profile/apply",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).json();return{original:a.OldCfg,updated:a.NewCfg}}return e});function objectToCamel(r){if(r==null)return r;const e=/^[A-Z]+$/,t={};return Object.keys(r).reduce((s,i)=>(e.test(i)?s[i.toLowerCase()]=r[i]:e.test(i[0])?s[i[0].toLowerCase()+i.slice(1)]=r[i]:s[i]=r[i],s),t)}const createList$1=configure(r=>{async function e(t={}){return(await(await r.post("config/profile/list",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()).map(a=>objectToCamel(a))}return e});function createProfiles(r){return{apply:createApply(r),list:createList$1(r)}}const createGet$4=configure(r=>async(t,s={})=>{if(!t)throw new Error("key argument is required");return(await(await r.post("config",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).json()).Value}),createGetAll=configure(r=>async(t={})=>await(await r.post("config/show",{signal:t.signal,searchParams:toUrlSearchParams({...t}),headers:t.headers})).json()),createReplace=configure(r=>async(t,s={})=>{const i=new AbortController,a=abortSignal(i.signal,s.signal);await(await r.post("config/replace",{signal:a,searchParams:toUrlSearchParams(s),...await multipartRequest([fromString$3(JSON.stringify(t))],i,s.headers)})).text()}),createSet=configure(r=>async(t,s,i={})=>{if(typeof t!="string")throw new Error("Invalid key type");const a={...i,...encodeParam(t,s)};await(await r.post("config",{signal:i.signal,searchParams:toUrlSearchParams(a),headers:i.headers})).text()}),encodeParam=(r,e)=>{switch(typeof e){case"boolean":return{arg:[r,e.toString()],bool:!0};case"string":return{arg:[r,e]};default:return{arg:[r,JSON.stringify(e)],json:!0}}};function createConfig(r){return{getAll:createGetAll(r),get:createGet$4(r),set:createSet(r),replace:createReplace(r),profiles:createProfiles(r)}}const createExport$1=configure(r=>{async function*e(t,s={}){yield*(await r.post("dag/export",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.toString()}),headers:s.headers})).iterator()}return e});async function*resolve(r,e,t,s,i){const a=async x=>{const w=await t.getCodec(x.code),E=await s(x,i);return w.decode(E)},l=e.split("/").filter(Boolean);let u=await a(r),p=r;for(;l.length;){const x=l.shift();if(!x)throw errCode(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(u,x))u=u[x],yield{value:u,remainderPath:l.join("/")};else throw errCode(new Error(`no link named "${x}" under ${p}`),"ERR_NO_LINK");const w=CID$1.asCID(u);w&&(p=w,u=await a(u))}yield{value:u,remainderPath:""}}async function first(r){for await(const e of r)return e}async function last(r){let e;for await(const t of r)e=t;return e}const createGet$3=(r,e)=>configure((s,i)=>{const a=createGet$5(i);return async(u,p={})=>{if(p.path){const A=p.localResolve?await first(resolve(u,p.path,r,a,p)):await last(resolve(u,p.path,r,a,p));if(!A)throw errCode(new Error("Not found"),"ERR_NOT_FOUND");return A}const x=await r.getCodec(u.code),w=await a(u,p);return{value:x.decode(w),remainderPath:""}}})(e),createImport$1=configure(r=>{async function*e(t,s={}){const i=new AbortController,a=abortSignal(i.signal,s.signal),{headers:l,body:u}=await multipartRequest(t,i,s.headers),p=await r.post("dag/import",{signal:a,headers:l,body:u,searchParams:toUrlSearchParams({"pin-roots":s.pinRoots})});for await(const{Root:x}of p.ndjson())if(x!==void 0){const{Cid:{"/":w},PinErrorMsg:E}=x;yield{root:{cid:CID$1.parse(w),pinErrorMsg:E}}}}return e}),createPut$2=(r,e)=>configure(s=>async(a,l={})=>{const u={storeCodec:"dag-cbor",hashAlg:"sha2-256",...l};let p;if(u.inputCodec){if(!(a instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");p=a}else p=(await r.getCodec(u.storeCodec)).encode(a),u.inputCodec=u.storeCodec;const x=new AbortController,w=abortSignal(x.signal,u.signal),R=await(await s.post("dag/put",{timeout:u.timeout,signal:w,searchParams:toUrlSearchParams(u),...await multipartRequest([p],x,u.headers)})).json();return CID$1.parse(R.Cid["/"])})(e),createResolve$2=configure(r=>async(t,s={})=>{const a=await(await r.post("dag/resolve",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${t}${s.path?`/${s.path}`.replace(/\/[/]+/g,"/"):""}`,...s}),headers:s.headers})).json();return{cid:CID$1.parse(a.Cid["/"]),remainderPath:a.RemPath}});function createDag(r,e){return{export:createExport$1(e),get:createGet$3(r,e),import:createImport$1(e),put:createPut$2(r,e),resolve:createResolve$2(e)}}const SendingQuery=0,PeerResponse=1,FinalPeer=2,QueryError=3,Provider=4,Value=5,AddingPeer=6,DialingPeer=7,mapEvent=r=>{if(r.Type===SendingQuery)return{name:"SENDING_QUERY",type:r.Type};if(r.Type===PeerResponse)return{from:peerIdFromString(r.ID),name:"PEER_RESPONSE",type:r.Type,messageType:0,messageName:"PUT_VALUE",closer:(r.Responses||[]).map(({ID:e,Addrs:t})=>({id:peerIdFromString(e),multiaddrs:t.map(s=>multiaddr$1(s)),protocols:[]})),providers:(r.Responses||[]).map(({ID:e,Addrs:t})=>({id:peerIdFromString(e),multiaddrs:t.map(s=>multiaddr$1(s)),protocols:[]}))};if(r.Type===FinalPeer){let e={id:r.ID??peerIdFromString(r.ID),multiaddrs:[],protocols:[]};return r.Responses&&r.Responses.length&&(e={id:peerIdFromString(r.Responses[0].ID),multiaddrs:r.Responses[0].Addrs.map(t=>multiaddr$1(t)),protocols:[]}),{name:"FINAL_PEER",type:r.Type,peer:e}}if(r.Type===QueryError)return{name:"QUERY_ERROR",type:r.Type,error:new Error(r.Extra)};if(r.Type===Provider)return{name:"PROVIDER",type:r.Type,providers:r.Responses.map(({ID:e,Addrs:t})=>({id:peerIdFromString(e),multiaddrs:t.map(s=>multiaddr$1(s)),protocols:[]}))};if(r.Type===Value)return{name:"VALUE",type:r.Type,value:fromString$3(r.Extra,"base64pad")};if(r.Type===AddingPeer){const e=r.Responses.map(({ID:t})=>peerIdFromString(t));if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:r.Type,peer:e[0]}}if(r.Type===DialingPeer)return{name:"DIALING_PEER",type:r.Type,peer:peerIdFromString(r.ID)};throw new Error("Unknown DHT event type")},createFindPeer=configure(r=>{async function*e(t,s={}){const i=await r.post("dht/findpeer",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers});for await(const a of i.ndjson())yield mapEvent(a)}return e}),createFindProvs=configure(r=>{async function*e(t,s={}){const i=await r.post("dht/findprovs",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.toString(),...s}),headers:s.headers});for await(const a of i.ndjson())yield mapEvent(a)}return e}),createGet$2=configure(r=>{async function*e(t,s={}){const i=await r.post("dht/get",{signal:s.signal,searchParams:toUrlSearchParams({arg:t instanceof Uint8Array?toString$3(t):t.toString(),...s}),headers:s.headers});for await(const a of i.ndjson())yield mapEvent(a)}return e}),createProvide=configure(r=>{async function*e(t,s={recursive:!1}){const i=Array.isArray(t)?t:[t],a=await r.post("dht/provide",{signal:s.signal,searchParams:toUrlSearchParams({arg:i.map(l=>l.toString()),...s}),headers:s.headers});for await(const l of a.ndjson())yield mapEvent(l)}return e}),createPut$1=configure(r=>{async function*e(t,s,i={}){const a=new AbortController,l=abortSignal(a.signal,i.signal),u=await r.post("dht/put",{signal:l,searchParams:toUrlSearchParams({arg:t instanceof Uint8Array?toString$3(t):t.toString(),...i}),...await multipartRequest([s],a,i.headers)});for await(const p of u.ndjson())yield mapEvent(p)}return e}),createQuery=configure(r=>{async function*e(t,s={}){const i=await r.post("dht/query",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.toString(),...s}),headers:s.headers});for await(const a of i.ndjson())yield mapEvent(a)}return e});function createDht(r){return{findPeer:createFindPeer(r),findProvs:createFindProvs(r),get:createGet$2(r),provide:createProvide(r),put:createPut$1(r),query:createQuery(r)}}const createCmds=configure(r=>{async function e(t={}){return(await r.post("diag/cmds",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()}return e}),createNet=configure(r=>{async function e(t={}){return(await r.post("diag/net",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()}return e}),createSys=configure(r=>{async function e(t={}){return(await r.post("diag/sys",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()}return e});function createDiag(r){return{cmds:createCmds(r),net:createNet(r),sys:createSys(r)}}const createChmod=configure(r=>{async function e(t,s,i={}){await(await r.post("files/chmod",{signal:i.signal,searchParams:toUrlSearchParams({arg:t,mode:s,...i}),headers:i.headers})).text()}return e}),createCp=configure(r=>{async function e(t,s,i={}){const a=Array.isArray(t)?t:[t];await(await r.post("files/cp",{signal:i.signal,searchParams:toUrlSearchParams({arg:a.concat(s).map(u=>CID$1.asCID(u)?`/ipfs/${u}`:u),...i}),headers:i.headers})).text()}return e}),createFlush=configure(r=>{async function e(t,s={}){if(!t||typeof t!="string")throw new Error("ipfs.files.flush requires a path");const a=await(await r.post("files/flush",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).json();return CID$1.parse(a.Cid)}return e});function objectToCamelWithMetadata(r){const e=objectToCamel(r);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}const createLs$6=configure(r=>{async function*e(t,s={}){if(!t)throw new Error("ipfs.files.ls requires a path");const i=await r.post("files/ls",{signal:s.signal,searchParams:toUrlSearchParams({arg:CID$1.asCID(t)?`/ipfs/${t}`:t,long:!0,...s,stream:!0}),headers:s.headers});for await(const a of i.ndjson())if("Entries"in a)for(const l of a.Entries||[])yield toCoreInterface$2(objectToCamelWithMetadata(l));else yield toCoreInterface$2(objectToCamelWithMetadata(a))}return e});function toCoreInterface$2(r){return r.hash&&(r.cid=CID$1.parse(r.hash)),delete r.hash,r.type=r.type===1?"directory":"file",r}const createMkdir=configure(r=>{async function e(t,s={}){await(await r.post("files/mkdir",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).text()}return e}),createMv=configure(r=>{async function e(t,s,i={}){Array.isArray(t)||(t=[t]),await(await r.post("files/mv",{signal:i.signal,searchParams:toUrlSearchParams({arg:t.concat(s),...i}),headers:i.headers})).text()}return e});var source,hasRequiredSource;function requireSource(){return hasRequiredSource||(hasRequiredSource=1,source=r=>{if(r[Symbol.asyncIterator])return r;if(r.getReader)return async function*(){const e=r.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)return;yield s}}finally{e.releaseLock()}}();throw new Error("unknown stream")}),source}var sourceExports=requireSource();const toIterable=getDefaultExportFromCjs(sourceExports),createRead=configure(r=>{async function*e(t,s={}){const i=await r.post("files/read",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,count:s.length,...s}),headers:s.headers});yield*toIterable(i.body)}return e}),createRm$4=configure(r=>{async function e(t,s={}){const i=await r.post("files/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers}),a=await i.text();if(a!==""){const l=new HTTP.HTTPError(i);throw l.message=a,l}}return e}),createStat$2=configure(r=>{async function e(t,s={}){const a=await(await r.post("files/stat",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).json();return a.WithLocality=a.WithLocality||!1,toCoreInterface$1(objectToCamelWithMetadata(a))}return e});function toCoreInterface$1(r){return r.cid=CID$1.parse(r.hash),delete r.hash,r}const createTouch=configure(r=>{async function e(t,s={}){await(await r.post("files/touch",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).text()}return e}),createWrite=configure(r=>{async function e(t,s,i={}){const a=new AbortController,l=abortSignal(a.signal,i.signal);await(await r.post("files/write",{signal:l,searchParams:toUrlSearchParams({arg:t,streamChannels:!0,count:i.length,...i}),...await multipartRequest([{content:s,path:"arg",mode:modeToString$1(i.mode),mtime:parseMtime$1(i.mtime)}],a,i.headers)})).text()}return e});function createFiles(r){return{chmod:createChmod(r),cp:createCp(r),flush:createFlush(r),ls:createLs$6(r),mkdir:createMkdir(r),mv:createMv(r),read:createRead(r),rm:createRm$4(r),stat:createStat$2(r),touch:createTouch(r),write:createWrite(r)}}const createExport=configure(r=>async(t,s,i={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createGen=configure(r=>{async function e(t,s){const i=s??{type:"Ed25519"},l=await(await r.post("key/gen",{signal:i.signal,searchParams:toUrlSearchParams({arg:t,...i}),headers:i.headers})).json();return objectToCamel(l)}return e}),createImport=configure(r=>{async function e(t,s,i,a={}){const u=await(await r.post("key/import",{signal:a.signal,searchParams:toUrlSearchParams({arg:t,pem:s,password:i,...a}),headers:a.headers})).json();return objectToCamel(u)}return e}),createInfo=configure(r=>async(t,s={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createList=configure(r=>{async function e(t={}){return((await(await r.post("key/list",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()).Keys||[]).map(a=>objectToCamel(a))}return e}),createRename=configure(r=>{async function e(t,s,i={}){const a=await r.post("key/rename",{signal:i.signal,searchParams:toUrlSearchParams({arg:[t,s],...i}),headers:i.headers});return objectToCamel(await a.json())}return e}),createRm$3=configure(r=>{async function e(t,s={}){const a=await(await r.post("key/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).json();return objectToCamel(a.Keys[0])}return e});function createKey(r){return{export:createExport(r),gen:createGen(r),import:createImport(r),info:createInfo(r),list:createList(r),rename:createRename(r),rm:createRm$3(r)}}const createLevel=configure(r=>{async function e(t,s,i={}){const a=await r.post("log/level",{signal:i.signal,searchParams:toUrlSearchParams({arg:[t,s],...i}),headers:i.headers});return objectToCamel(await a.json())}return e}),createLs$5=configure(r=>{async function e(t={}){return(await(await r.post("log/ls",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()).Strings}return e}),createTail=configure(r=>{async function*e(t={}){yield*(await r.post("log/tail",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).ndjson()}return e});function createLog(r){return{level:createLevel(r),ls:createLs$5(r),tail:createTail(r)}}const createPublish$1=configure(r=>{async function e(t,s={}){const i=await r.post("name/publish",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${t}`,...s}),headers:s.headers});return objectToCamel(await i.json())}return e}),createResolve$1=configure(r=>{async function*e(t,s={}){const i=await r.post("name/resolve",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,stream:!0,...s}),headers:s.headers});for await(const a of i.ndjson())yield a.Path}return e}),createCancel=configure(r=>{async function e(t,s={}){const i=await r.post("name/pubsub/cancel",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers});return objectToCamel(await i.json())}return e}),createState=configure(r=>{async function e(t={}){const s=await r.post("name/pubsub/state",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers});return objectToCamel(await s.json())}return e}),createSubs=configure(r=>{async function e(t={}){return(await(await r.post("name/pubsub/subs",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()).Strings||[]}return e});function createPubsub$1(r){return{cancel:createCancel(r),state:createState(r),subs:createSubs(r)}}function createName(r){return{publish:createPublish$1(r),resolve:createResolve$1(r),pubsub:createPubsub$1(r)}}const createData=configure(r=>{async function e(t,s={}){const a=await(await r.post("object/data",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${t instanceof Uint8Array?CID$1.decode(t):t}`,...s}),headers:s.headers})).arrayBuffer();return new Uint8Array(a,0,a.byteLength)}return e}),createGet$1=configure(r=>{async function e(t,s={}){const a=await(await r.post("object/get",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${t instanceof Uint8Array?CID$1.decode(t):t}`,dataEncoding:"base64",...s}),headers:s.headers})).json();return{Data:fromString$3(a.Data,"base64pad"),Links:(a.Links||[]).map(l=>({Name:l.Name,Hash:CID$1.parse(l.Hash),Tsize:l.Size}))}}return e}),createLinks=configure(r=>{async function e(t,s={}){return((await(await r.post("object/links",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${t instanceof Uint8Array?CID$1.decode(t):t}`,...s}),headers:s.headers})).json()).Links||[]).map(l=>({Name:l.Name,Tsize:l.Size,Hash:CID$1.parse(l.Hash)}))}return e}),createNew=configure(r=>{async function e(t={}){const s=await r.post("object/new",{signal:t.signal,searchParams:toUrlSearchParams({arg:t.template,...t}),headers:t.headers}),{Hash:i}=await s.json();return CID$1.parse(i)}return e}),createPut=(r,e)=>configure(s=>{const i=createPut$2(r,e);async function a(l,u={}){return i(l,{...u,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return a})(e),createStat$1=configure(r=>{async function e(t,s={}){const a=await(await r.post("object/stat",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${t}`,...s}),headers:s.headers})).json();return{...a,Hash:CID$1.parse(a.Hash)}}return e}),createAddLink=configure(r=>{async function e(t,s,i={}){const a=await r.post("object/patch/add-link",{signal:i.signal,searchParams:toUrlSearchParams({arg:[`${t}`,s.Name||s.name||"",(s.Hash||s.cid||"").toString()||null],...i}),headers:i.headers}),{Hash:l}=await a.json();return CID$1.parse(l)}return e}),createAppendData=configure(r=>{async function e(t,s,i={}){const a=new AbortController,l=abortSignal(a.signal,i.signal),u=await r.post("object/patch/append-data",{signal:l,searchParams:toUrlSearchParams({arg:`${t}`,...i}),...await multipartRequest([s],a,i.headers)}),{Hash:p}=await u.json();return CID$1.parse(p)}return e}),createRmLink=configure(r=>{async function e(t,s,i={}){const a=await r.post("object/patch/rm-link",{signal:i.signal,searchParams:toUrlSearchParams({arg:[`${t}`,s.Name||s.name||null],...i}),headers:i.headers}),{Hash:l}=await a.json();return CID$1.parse(l)}return e}),createSetData=configure(r=>{async function e(t,s,i={}){const a=new AbortController,l=abortSignal(a.signal,i.signal),u=await r.post("object/patch/set-data",{signal:l,searchParams:toUrlSearchParams({arg:[`${t}`],...i}),...await multipartRequest([s],a,i.headers)}),{Hash:p}=await u.json();return CID$1.parse(p)}return e});function createPatch(r){return{addLink:createAddLink(r),appendData:createAppendData(r),rmLink:createRmLink(r),setData:createSetData(r)}}function createObject(r,e){return{data:createData(e),get:createGet$1(e),links:createLinks(e),new:createNew(e),put:createPut(r,e),stat:createStat$1(e),patch:createPatch(e)}}function isIterable(r){return Symbol.iterator in r}function isAsyncIterable(r){return Symbol.asyncIterator in r}function isCID(r){return CID$1.asCID(r)!=null}async function*normaliseInput$1(r){if(r==null)throw errCode(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT");const e=CID$1.asCID(r);if(e){yield toPin$1({cid:e});return}if(r instanceof String||typeof r=="string"){yield toPin$1({path:r});return}if(r.cid!=null||r.path!=null)return yield toPin$1(r);if(isIterable(r)){const t=r[Symbol.iterator](),s=t.next();if(s.done)return t;if(isCID(s.value)){yield toPin$1({cid:s.value});for(const i of t)yield toPin$1({cid:i});return}if(s.value instanceof String||typeof s.value=="string"){yield toPin$1({path:s.value});for(const i of t)yield toPin$1({path:i});return}if(s.value.cid!=null||s.value.path!=null){yield toPin$1(s.value);for(const i of t)yield toPin$1(i);return}throw errCode(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}if(isAsyncIterable(r)){const t=r[Symbol.asyncIterator](),s=await t.next();if(s.done)return t;if(isCID(s.value)){yield toPin$1({cid:s.value});for await(const i of t)yield toPin$1({cid:i});return}if(s.value instanceof String||typeof s.value=="string"){yield toPin$1({path:s.value});for await(const i of t)yield toPin$1({path:i});return}if(s.value.cid!=null||s.value.path!=null){yield toPin$1(s.value);for await(const i of t)yield toPin$1(i);return}throw errCode(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}throw errCode(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}function toPin$1(r){const e=r.cid||`${r.path}`;if(!e)throw errCode(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const t={path:e,recursive:r.recursive!==!1};return r.metadata!=null&&(t.metadata=r.metadata),t}const createAddAll$1=configure(r=>{async function*e(t,s={}){for await(const{path:i,recursive:a,metadata:l}of normaliseInput$1(t)){const u=await r.post("pin/add",{signal:s.signal,searchParams:toUrlSearchParams({...s,arg:i,recursive:a,metadata:l?JSON.stringify(l):void 0,stream:!0}),headers:s.headers});for await(const p of u.ndjson()){if(p.Pins){for(const x of p.Pins)yield CID$1.parse(x);continue}yield CID$1.parse(p)}}}return e});function createAdd$3(r){const e=createAddAll$1(r);return configure(()=>{async function t(s,i={}){return last(e([{path:s,...i}],i))}return t})(r)}function toPin(r,e,t){const s={type:r,cid:CID$1.parse(e)};return t&&(s.metadata=t),s}const createLs$4=configure(r=>{async function*e(t={}){let s=[];t.paths&&(s=Array.isArray(t.paths)?t.paths:[t.paths]);const i=await r.post("pin/ls",{signal:t.signal,searchParams:toUrlSearchParams({...t,arg:s.map(a=>`${a}`),stream:!0}),headers:t.headers});for await(const a of i.ndjson()){if(a.Keys){for(const l of Object.keys(a.Keys))yield toPin(a.Keys[l].Type,l,a.Keys[l].Metadata);return}yield toPin(a.Type,a.Cid,a.Metadata)}}return e}),createRmAll$1=configure(r=>{async function*e(t,s={}){for await(const{path:i,recursive:a}of normaliseInput$1(t)){const l=new URLSearchParams(s.searchParams);l.append("arg",`${i}`),a!=null&&l.set("recursive",String(a));const u=await r.post("pin/rm",{signal:s.signal,headers:s.headers,searchParams:toUrlSearchParams({...s,arg:`${i}`,recursive:a})});for await(const p of u.ndjson()){if(p.Pins){yield*p.Pins.map(x=>CID$1.parse(x));continue}yield CID$1.parse(p)}}}return e}),createRm$2=r=>{const e=createRmAll$1(r);return configure(()=>{async function t(s,i={}){return last(e([{path:s,...i}],i))}return t})(r)},decodePin=({Name:r,Status:e,Cid:t})=>({cid:CID$1.parse(t),name:r,status:e}),encodeService=r=>{if(typeof r=="string"&&r!=="")return r;throw new TypeError("service name must be passed")},encodeCID=r=>{if(CID$1.asCID(r))return r.toString();throw new TypeError(`CID instance expected instead of ${typeof r}`)},encodeQuery=({service:r,cid:e,name:t,status:s,all:i})=>{const a=toUrlSearchParams({service:encodeService(r),name:t,force:i?!0:void 0});if(e)for(const l of e)a.append("cid",encodeCID(l));if(s)for(const l of s)a.append("status",l);return a},encodeAddParams=({cid:r,service:e,background:t,name:s,origins:i})=>{const a=toUrlSearchParams({arg:encodeCID(r),service:encodeService(e),name:s,background:t?!0:void 0});if(i)for(const l of i)a.append("origin",l.toString());return a};function createAdd$2(r){async function e(t,{timeout:s,signal:i,headers:a,...l}){const u=await r.post("pin/remote/add",{timeout:s,signal:i,headers:a,searchParams:encodeAddParams({cid:t,...l})});return decodePin(await u.json())}return e}function createLs$3(r){async function*e({timeout:t,signal:s,headers:i,...a}){const l=await r.post("pin/remote/ls",{timeout:t,signal:s,headers:i,searchParams:encodeQuery(a)});for await(const u of l.ndjson())yield decodePin(u)}return e}function createRm$1(r){async function e({timeout:t,signal:s,headers:i,...a}){await r.post("pin/remote/rm",{timeout:t,signal:s,headers:i,searchParams:encodeQuery({...a,all:!1})})}return e}function createRmAll(r){async function e({timeout:t,signal:s,headers:i,...a}){await r.post("pin/remote/rm",{timeout:t,signal:s,headers:i,searchParams:encodeQuery({...a,all:!0})})}return e}function encodeEndpoint(r){const e=String(r);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function decodeRemoteService(r){return{service:r.Service,endpoint:new URL(r.ApiEndpoint),...r.Stat&&{stat:decodeStat(r.Stat)}}}function decodeStat(r){switch(r.Status){case"valid":{const{Pinning:e,Pinned:t,Queued:s,Failed:i}=r.PinCount;return{status:"valid",pinCount:{queued:s,pinning:e,pinned:t,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:r.Status}}}function createAdd$1(r){async function e(t,s){const{endpoint:i,key:a,headers:l,timeout:u,signal:p}=s;await r.post("pin/remote/service/add",{timeout:u,signal:p,searchParams:toUrlSearchParams({arg:[t,encodeEndpoint(i),a]}),headers:l})}return e}function createLs$2(r){async function e(t={}){const{stat:s,headers:i,timeout:a,signal:l}=t,u=await r.post("pin/remote/service/ls",{timeout:a,signal:l,headers:i,searchParams:s===!0?toUrlSearchParams({stat:s}):void 0}),{RemoteServices:p}=await u.json();return p.map(decodeRemoteService)}return e}function createRm(r){async function e(t,s={}){await r.post("pin/remote/service/rm",{signal:s.signal,headers:s.headers,searchParams:toUrlSearchParams({arg:t})})}return e}function createService(r){const e=new Client(r);return{add:createAdd$1(e),ls:createLs$2(e),rm:createRm(e)}}function createRemote(r){const e=new Client(r);return{add:createAdd$2(e),ls:createLs$3(e),rm:createRm$1(e),rmAll:createRmAll(e),service:createService(r)}}function createPin(r){return{addAll:createAddAll$1(r),add:createAdd$3(r),ls:createLs$4(r),rmAll:createRmAll$1(r),rm:createRm$2(r),remote:createRemote(r)}}const rpcArrayToTextArray=r=>Array.isArray(r)?r.map(rpcToText):r,rpcToText=r=>toString$3(rpcToBytes(r)),rpcToBytes=r=>base64url$2.decode(r),rpcToBigInt=r=>BigInt(`0x${toString$3(base64url$2.decode(r),"base16")}`),textToUrlSafeRpc=r=>base64url$2.encode(fromString$3(r)),createLs$1=configure(r=>{async function e(t={}){const{Strings:s}=await(await r.post("pubsub/ls",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json();return rpcArrayToTextArray(s)||[]}return e}),createPeers$1=configure(r=>{async function e(t,s={}){const i=await r.post("pubsub/peers",{signal:s.signal,searchParams:toUrlSearchParams({arg:textToUrlSafeRpc(t),...s}),headers:s.headers}),{Strings:a}=await i.json();return a||[]}return e}),createPublish=configure(r=>{async function e(t,s,i={}){const a=toUrlSearchParams({arg:textToUrlSafeRpc(t),...i}),l=new AbortController,u=abortSignal(l.signal,i.signal);await(await r.post("pubsub/pub",{signal:u,searchParams:a,...await multipartRequest([s],l,i.headers)})).text()}return e}),log$1=logger$1("ipfs-http-client:pubsub:subscribe"),createSubscribe=(r,e)=>configure(t=>{async function s(i,a,l={}){l.signal=e.subscribe(i,a,l.signal);let u,p;const x=new Promise((E,R)=>{u=E,p=R}),w=setTimeout(()=>u(),1e3);return t.post("pubsub/sub",{signal:l.signal,searchParams:toUrlSearchParams({arg:textToUrlSafeRpc(i),...l}),headers:l.headers}).catch(E=>{e.unsubscribe(i,a),p(E)}).then(E=>{clearTimeout(w),E&&(readMessages(E,{onMessage:R=>{if(a){if(typeof a=="function"){a(R);return}typeof a.handleEvent=="function"&&a.handleEvent(R)}},onEnd:()=>e.unsubscribe(i,a),onError:l.onError}),u())}),x}return s})(r);async function readMessages(r,{onMessage:e,onEnd:t,onError:s}){s=s||log$1;try{for await(const i of r.ndjson())try{if(!i.from)continue;i.from!=null&&i.seqno!=null?e({type:"signed",from:peerIdFromString(i.from),data:rpcToBytes(i.data),sequenceNumber:rpcToBigInt(i.seqno),topic:rpcToText(i.topicIDs[0]),key:rpcToBytes(i.key??"u"),signature:rpcToBytes(i.signature??"u")}):e({type:"unsigned",data:rpcToBytes(i.data),topic:rpcToText(i.topicIDs[0])})}catch(a){a.message=`Failed to parse pubsub message: ${a.message}`,s(a,!1,i)}}catch(i){isAbortError(i)||s(i,!0)}finally{t()}}const isAbortError=r=>{switch(r.type){case"aborted":return!0;case"abort":return!0;default:return r.name==="AbortError"}},createUnsubscribe=(r,e)=>{async function t(s,i){e.unsubscribe(s,i)}return t};class SubscriptionTracker{constructor(){this._subs=new Map}subscribe(e,t,s){const i=this._subs.get(e)||[];if(i.find(l=>l.handler===t))throw new Error(`Already subscribed to ${e} with this handler`);const a=new AbortController;return this._subs.set(e,[{handler:t,controller:a}].concat(i)),s&&s.addEventListener("abort",()=>this.unsubscribe(e,t)),a.signal}unsubscribe(e,t){const s=this._subs.get(e)||[];let i;t?(this._subs.set(e,s.filter(a=>a.handler!==t)),i=s.filter(a=>a.handler===t)):(this._subs.set(e,[]),i=s),(this._subs.get(e)||[]).length||this._subs.delete(e),i.forEach(a=>a.controller.abort())}}function createPubsub(r){const e=new SubscriptionTracker;return{ls:createLs$1(r),peers:createPeers$1(r),publish:createPublish(r),subscribe:createSubscribe(r,e),unsubscribe:createUnsubscribe(r,e)}}const createLocal=configure(r=>{async function*e(t={}){yield*(await r.post("refs/local",{signal:t.signal,transform:objectToCamel,searchParams:toUrlSearchParams(t),headers:t.headers})).ndjson()}return e}),createRefs=configure((r,e)=>Object.assign(async function*(s,i={}){const a=Array.isArray(s)?s:[s];yield*(await r.post("refs",{signal:i.signal,searchParams:toUrlSearchParams({arg:a.map(u=>`${u instanceof Uint8Array?CID$1.decode(u):u}`),...i}),headers:i.headers,transform:objectToCamel})).ndjson()},{local:createLocal(e)})),createGc=configure(r=>{async function*e(t={}){yield*(await r.post("repo/gc",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers,transform:i=>({err:i.Error?new Error(i.Error):null,cid:(i.Key||{})["/"]?CID$1.parse(i.Key["/"]):null})})).ndjson()}return e}),createStat=configure(r=>{async function e(t={}){const i=await(await r.post("repo/stat",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json();return{numObjects:BigInt(i.NumObjects),repoSize:BigInt(i.RepoSize),repoPath:i.RepoPath,version:i.Version,storageMax:BigInt(i.StorageMax)}}return e}),createVersion$1=configure(r=>{async function e(t={}){return(await(await r.post("repo/version",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()).Version}return e});function createRepo(r){return{gc:createGc(r),stat:createStat(r),version:createVersion$1(r)}}const createBw=configure(r=>{async function*e(t={}){yield*(await r.post("stats/bw",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers,transform:i=>({totalIn:BigInt(i.TotalIn),totalOut:BigInt(i.TotalOut),rateIn:parseFloat(i.RateIn),rateOut:parseFloat(i.RateOut)})})).ndjson()}return e});function createStats(r){return{bitswap:createStat$4(r),repo:createStat(r),bw:createBw(r)}}const createAddrs=configure(r=>{async function e(t={}){const s=await r.post("swarm/addrs",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers}),{Addrs:i}=await s.json();return Object.keys(i).map(a=>({id:peerIdFromString(a),addrs:(i[a]||[]).map(l=>multiaddr$1(l))}))}return e}),createConnect=configure(r=>{async function e(t,s={}){const i=await r.post("swarm/connect",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers}),{Strings:a}=await i.json();return a||[]}return e}),createDisconnect=configure(r=>{async function e(t,s={}){const i=await r.post("swarm/disconnect",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers}),{Strings:a}=await i.json();return a||[]}return e}),createLocalAddrs=configure(r=>{async function e(t={}){const s=await r.post("swarm/addrs/local",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers}),{Strings:i}=await s.json();return(i||[]).map(a=>multiaddr$1(a))}return e}),createPeers=configure(r=>{async function e(t={}){const s=await r.post("swarm/peers",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers}),{Peers:i}=await s.json();return(i||[]).map(a=>({addr:multiaddr$1(a.Addr),peer:peerIdFromString(a.Peer),muxer:a.Muxer,latency:a.Latency,streams:a.Streams,direction:a.Direction==null?void 0:a.Direction===0?"inbound":"outbound"}))}return e});function createSwarm(r){return{addrs:createAddrs(r),connect:createConnect(r),disconnect:createDisconnect(r),localAddrs:createLocalAddrs(r),peers:createPeers(r)}}const createAddAll=configure(r=>{async function*e(t,s={}){const i=new AbortController,a=abortSignal(i.signal,s.signal),{headers:l,body:u,total:p,parts:x}=await multipartRequest(t,i,s.headers),[w,E]=typeof s.progress=="function"?createProgressHandler(p,x,s.progress):[void 0,void 0],R=await r.post("add",{searchParams:toUrlSearchParams({"stream-channels":!0,...s,progress:!!w}),onUploadProgress:E,signal:a,headers:l,body:u});for await(let A of R.ndjson())A=objectToCamel(A),A.hash!==void 0?yield toCoreInterface(A):w&&w(A.bytes||0,A.name)}return e}),createProgressHandler=(r,e,t)=>e?[void 0,createOnUploadProgress(r,e,t)]:[t,void 0],createOnUploadProgress=(r,e,t)=>{let s=0;const i=e.length;return({loaded:a,total:l})=>{const u=Math.floor(a/l*r);for(;s<i;){const{start:p,end:x,name:w}=e[s];if(u<x){t(u-p,w);break}else t(x-p,w),s+=1}}};function toCoreInterface({name:r,hash:e,size:t,mode:s,mtime:i,mtimeNsecs:a}){const l={path:r,cid:CID$1.parse(e),size:parseInt(t)};return s!=null&&(l.mode=parseInt(s,8)),i!=null&&(l.mtime={secs:i,nsecs:a||0}),l}function blobToIt(r){return typeof r.stream=="function"?browserReadableStreamToIt(r.stream()):browserReadableStreamToIt(new Response(r).body)}async function*toAsyncIterable(r){yield r}async function normaliseContent(r){if(isBytes(r))return toAsyncIterable(toBytes(r));if(typeof r=="string"||r instanceof String)return toAsyncIterable(toBytes(r.toString()));if(isBlob(r))return blobToIt(r);if(isReadableStream(r)&&(r=browserReadableStreamToIt(r)),Symbol.iterator in r||Symbol.asyncIterator in r){const e=peekableIterator(r),{value:t,done:s}=await e.peek();if(s)return toAsyncIterable(new Uint8Array(0));if(e.push(t),Number.isInteger(t))return toAsyncIterable(Uint8Array.from(await all(e)));if(isBytes(t)||typeof t=="string"||t instanceof String)return map(e,toBytes)}throw errCode(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT")}function toBytes(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new Uint8Array(r):Array.isArray(r)?Uint8Array.from(r):fromString$3(r.toString())}async function*normaliseCandidateSingle(r,e){if(r==null)throw errCode(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT");if(typeof r=="string"||r instanceof String){yield toFileObject(r.toString(),e);return}if(isBytes(r)||isBlob(r)){yield toFileObject(r,e);return}if(isReadableStream(r)&&(r=browserReadableStreamToIt(r)),Symbol.iterator in r||Symbol.asyncIterator in r){const t=peekableIterator(r),{value:s,done:i}=await t.peek();if(i){yield{content:[]};return}if(t.push(s),Number.isInteger(s)||isBytes(s)||typeof s=="string"||s instanceof String){yield toFileObject(t,e);return}throw errCode(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(r)){yield toFileObject(r,e);return}throw errCode(new Error('Unexpected input: cannot convert "'+typeof r+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject(r,e){const{path:t,mode:s,mtime:i,content:a}=r,l={path:t||"",mode:parseMode(s),mtime:parseMtime(i)};return a?l.content=await e(a):t||(l.content=await e(r)),l}function normaliseInput(r){return normaliseCandidateSingle(r,normaliseContent)}function createAdd(r){const e=createAddAll(r);return configure(()=>{async function t(s,i={}){return await last(e(normaliseInput(s),i))}return t})(r)}const createCat=configure(r=>{async function*e(t,s={}){yield*(await r.post("cat",{signal:s.signal,searchParams:toUrlSearchParams({arg:t.toString(),...s}),headers:s.headers})).iterator()}return e}),createCommands=configure(r=>async(t={})=>(await r.post("commands",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).json()),createDns=configure(r=>async(t,s={})=>(await(await r.post("dns",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers})).json()).Path),createGetEndpointConfig=configure(r=>()=>{const e=new URL(r.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}}),createGet=configure(r=>{async function*e(t,s={}){const i={arg:`${t instanceof Uint8Array?CID$1.decode(t):t}`,...s};i.compressionLevel&&(i["compression-level"]=i.compressionLevel,delete i.compressionLevel),yield*(await r.post("get",{signal:s.signal,searchParams:toUrlSearchParams(i),headers:s.headers})).iterator()}return e}),createId=configure(r=>{async function e(t={}){const i=await(await r.post("id",{signal:t.signal,searchParams:toUrlSearchParams({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),a={...objectToCamel(i)};return a.id=peerIdFromString(a.id),a.addresses&&(a.addresses=a.addresses.map(l=>multiaddr$1(l))),a}return e}),createIsOnline=r=>{const e=createId(r);async function t(s={}){const i=await e(s);return!!(i&&i.addresses&&i.addresses.length)}return t},createLs=configure((r,e)=>{async function*t(s,i={}){const a=`${s instanceof Uint8Array?CID$1.decode(s):s}`;async function l(p){let x=p.Hash;if(x.includes("/")){const E=x.startsWith("/ipfs/")?x:`/ipfs/${x}`;x=(await createStat$2(e)(E)).cid}else x=CID$1.parse(x);const w={name:p.Name,path:a+(p.Name?`/${p.Name}`:""),size:p.Size,cid:x,type:typeOf(p)};return p.Mode&&(w.mode=parseInt(p.Mode,8)),p.Mtime!==void 0&&p.Mtime!==null&&(w.mtime={secs:p.Mtime},p.MtimeNsecs!==void 0&&p.MtimeNsecs!==null&&(w.mtime.nsecs=p.MtimeNsecs)),w}const u=await r.post("ls",{signal:i.signal,searchParams:toUrlSearchParams({arg:a,...i}),headers:i.headers});for await(let p of u.ndjson()){if(p=p.Objects,!p)throw new Error("expected .Objects in results");if(p=p[0],!p)throw new Error("expected one array in results.Objects");const x=p.Links;if(!Array.isArray(x))throw new Error("expected one array in results.Objects[0].Links");if(!x.length){yield l(p);return}yield*x.map(l)}}return t});function typeOf(r){switch(r.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}const createMount=configure(r=>{async function e(t={}){const s=await r.post("dns",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers});return objectToCamel(await s.json())}return e}),createPing=configure(r=>{async function*e(t,s={}){yield*(await r.post("ping",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${t}`,...s}),headers:s.headers,transform:objectToCamel})).ndjson()}return e}),createResolve=configure(r=>{async function e(t,s={}){const i=await r.post("resolve",{signal:s.signal,searchParams:toUrlSearchParams({arg:t,...s}),headers:s.headers}),{Path:a}=await i.json();return a}return e}),createStart=configure(r=>async(t={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createStop=configure(r=>{async function e(t={}){await(await r.post("shutdown",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers})).text()}return e}),createVersion=configure(r=>{async function e(t={}){const s=await r.post("version",{signal:t.signal,searchParams:toUrlSearchParams(t),headers:t.headers});return{...objectToCamel(await s.json()),"ipfs-http-client":"1.0.0"}}return e});var urlSource_1,hasRequiredUrlSource;function requireUrlSource(){if(hasRequiredUrlSource)return urlSource_1;hasRequiredUrlSource=1;const r=requireHttp(),e=(s,i)=>({path:decodeURIComponent(new URL(s).pathname.split("/").pop()||""),content:t(s,i)});async function*t(s,i){yield*(await new r().get(s,i)).iterator()}return urlSource_1=e,urlSource_1}requireUrlSource();function create(r={}){const e={name:identity$3.name,code:identity$3.code,encode:x=>x,decode:x=>x},t=Object.values(bases$2);(r.ipld&&r.ipld.bases?r.ipld.bases:[]).forEach(x=>t.push(x));const s=new Multibases({bases:t,loadBase:r.ipld&&r.ipld.loadBase}),i=Object.values(codecs$1);[dagPB,dagCBOR,dagJSON,dagJOSE,e].concat(r.ipld&&r.ipld.codecs||[]).forEach(x=>i.push(x));const a=new Multicodecs({codecs:i,loadCodec:r.ipld&&r.ipld.loadCodec}),l=Object.values(hashes);(r.ipld&&r.ipld.hashers?r.ipld.hashers:[]).forEach(x=>l.push(x));const u=new Multihashes({hashers:l,loadHasher:r.ipld&&r.ipld.loadHasher});return{add:createAdd(r),addAll:createAddAll(r),bitswap:createBitswap(r),block:createBlock(r),bootstrap:createBootstrap(r),cat:createCat(r),commands:createCommands(r),config:createConfig(r),dag:createDag(a,r),dht:createDht(r),diag:createDiag(r),dns:createDns(r),files:createFiles(r),get:createGet(r),getEndpointConfig:createGetEndpointConfig(r),id:createId(r),isOnline:createIsOnline(r),key:createKey(r),log:createLog(r),ls:createLs(r),mount:createMount(r),name:createName(r),object:createObject(a,r),pin:createPin(r),ping:createPing(r),pubsub:createPubsub(r),refs:createRefs(r),repo:createRepo(r),resolve:createResolve(r),start:createStart(r),stats:createStats(r),stop:createStop(r),swarm:createSwarm(r),version:createVersion(r),bases:s,codecs:a,hashers:u}}var buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=u,base64Js.toByteArray=x,base64Js.fromByteArray=R;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=s.length;i<a;++i)r[i]=s[i],e[s.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(A){var S=A.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=A.indexOf("=");N===-1&&(N=S);var k=N===S?0:4-N%4;return[N,k]}function u(A){var S=l(A),N=S[0],k=S[1];return(N+k)*3/4-k}function p(A,S,N){return(S+N)*3/4-N}function x(A){var S,N=l(A),k=N[0],j=N[1],$=new t(p(A,k,j)),D=0,z=j>0?k-4:k,L;for(L=0;L<z;L+=4)S=e[A.charCodeAt(L)]<<18|e[A.charCodeAt(L+1)]<<12|e[A.charCodeAt(L+2)]<<6|e[A.charCodeAt(L+3)],$[D++]=S>>16&255,$[D++]=S>>8&255,$[D++]=S&255;return j===2&&(S=e[A.charCodeAt(L)]<<2|e[A.charCodeAt(L+1)]>>4,$[D++]=S&255),j===1&&(S=e[A.charCodeAt(L)]<<10|e[A.charCodeAt(L+1)]<<4|e[A.charCodeAt(L+2)]>>2,$[D++]=S>>8&255,$[D++]=S&255),$}function w(A){return r[A>>18&63]+r[A>>12&63]+r[A>>6&63]+r[A&63]}function E(A,S,N){for(var k,j=[],$=S;$<N;$+=3)k=(A[$]<<16&16711680)+(A[$+1]<<8&65280)+(A[$+2]&255),j.push(w(k));return j.join("")}function R(A){for(var S,N=A.length,k=N%3,j=[],$=16383,D=0,z=N-k;D<z;D+=$)j.push(E(A,D,D+$>z?z:D+$));return k===1?(S=A[N-1],j.push(r[S>>2]+r[S<<4&63]+"==")):k===2&&(S=(A[N-2]<<8)+A[N-1],j.push(r[S>>10]+r[S>>4&63]+r[S<<2&63]+"=")),j.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(r,e,t,s,i){var a,l,u=i*8-s-1,p=(1<<u)-1,x=p>>1,w=-7,E=t?i-1:0,R=t?-1:1,A=r[e+E];for(E+=R,a=A&(1<<-w)-1,A>>=-w,w+=u;w>0;a=a*256+r[e+E],E+=R,w-=8);for(l=a&(1<<-w)-1,a>>=-w,w+=s;w>0;l=l*256+r[e+E],E+=R,w-=8);if(a===0)a=1-x;else{if(a===p)return l?NaN:(A?-1:1)*(1/0);l=l+Math.pow(2,s),a=a-x}return(A?-1:1)*l*Math.pow(2,a-s)},ieee754.write=function(r,e,t,s,i,a){var l,u,p,x=a*8-i-1,w=(1<<x)-1,E=w>>1,R=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=s?0:a-1,S=s?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=w):(l=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+E>=1?e+=R/p:e+=R*Math.pow(2,1-E),e*p>=2&&(l++,p/=2),l+E>=w?(u=0,l=w):l+E>=1?(u=(e*p-1)*Math.pow(2,i),l=l+E):(u=e*Math.pow(2,E-1)*Math.pow(2,i),l=0));i>=8;r[t+A]=u&255,A+=S,u/=256,i-=8);for(l=l<<i|u,x+=i;x>0;r[t+A]=l&255,A+=S,l/=256,x-=8);r[t+A-S]|=N*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(r){const e=requireBase64Js(),t=requireIeee754(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=$,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const B=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(B,T),B.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(B){if(B>i)throw new RangeError('The value "'+B+'" is invalid for option "size"');const T=new Uint8Array(B);return Object.setPrototypeOf(T,u.prototype),T}function u(B,T,P){if(typeof B=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(B)}return p(B,T,P)}u.poolSize=8192;function p(B,T,P){if(typeof B=="string")return R(B,T);if(ArrayBuffer.isView(B))return S(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if($t(B,ArrayBuffer)||B&&$t(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($t(B,SharedArrayBuffer)||B&&$t(B.buffer,SharedArrayBuffer)))return N(B,T,P);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const F=B.valueOf&&B.valueOf();if(F!=null&&F!==B)return u.from(F,T,P);const X=k(B);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return u.from(B[Symbol.toPrimitive]("string"),T,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}u.from=function(B,T,P){return p(B,T,P)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function x(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function w(B,T,P){return x(B),B<=0?l(B):T!==void 0?typeof P=="string"?l(B).fill(T,P):l(B).fill(T):l(B)}u.alloc=function(B,T,P){return w(B,T,P)};function E(B){return x(B),l(B<0?0:j(B)|0)}u.allocUnsafe=function(B){return E(B)},u.allocUnsafeSlow=function(B){return E(B)};function R(B,T){if((typeof T!="string"||T==="")&&(T="utf8"),!u.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const P=D(B,T)|0;let F=l(P);const X=F.write(B,T);return X!==P&&(F=F.slice(0,X)),F}function A(B){const T=B.length<0?0:j(B.length)|0,P=l(T);for(let F=0;F<T;F+=1)P[F]=B[F]&255;return P}function S(B){if($t(B,Uint8Array)){const T=new Uint8Array(B);return N(T.buffer,T.byteOffset,T.byteLength)}return A(B)}function N(B,T,P){if(T<0||B.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<T+(P||0))throw new RangeError('"length" is outside of buffer bounds');let F;return T===void 0&&P===void 0?F=new Uint8Array(B):P===void 0?F=new Uint8Array(B,T):F=new Uint8Array(B,T,P),Object.setPrototypeOf(F,u.prototype),F}function k(B){if(u.isBuffer(B)){const T=j(B.length)|0,P=l(T);return P.length===0||B.copy(P,0,0,T),P}if(B.length!==void 0)return typeof B.length!="number"||Ms(B.length)?l(0):A(B);if(B.type==="Buffer"&&Array.isArray(B.data))return A(B.data)}function j(B){if(B>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return B|0}function $(B){return+B!=B&&(B=0),u.alloc(+B)}u.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==u.prototype},u.compare=function(T,P){if($t(T,Uint8Array)&&(T=u.from(T,T.offset,T.byteLength)),$t(P,Uint8Array)&&(P=u.from(P,P.offset,P.byteLength)),!u.isBuffer(T)||!u.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===P)return 0;let F=T.length,X=P.length;for(let ne=0,ue=Math.min(F,X);ne<ue;++ne)if(T[ne]!==P[ne]){F=T[ne],X=P[ne];break}return F<X?-1:X<F?1:0},u.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(T,P){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return u.alloc(0);let F;if(P===void 0)for(P=0,F=0;F<T.length;++F)P+=T[F].length;const X=u.allocUnsafe(P);let ne=0;for(F=0;F<T.length;++F){let ue=T[F];if($t(ue,Uint8Array))ne+ue.length>X.length?(u.isBuffer(ue)||(ue=u.from(ue)),ue.copy(X,ne)):Uint8Array.prototype.set.call(X,ue,ne);else if(u.isBuffer(ue))ue.copy(X,ne);else throw new TypeError('"list" argument must be an Array of Buffers');ne+=ue.length}return X};function D(B,T){if(u.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||$t(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const P=B.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&P===0)return 0;let X=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return Xn(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return un(B).length;default:if(X)return F?-1:Xn(B).length;T=(""+T).toLowerCase(),X=!0}}u.byteLength=D;function z(B,T,P){let F=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,T>>>=0,P<=T))return"";for(B||(B="utf8");;)switch(B){case"hex":return se(this,T,P);case"utf8":case"utf-8":return we(this,T,P);case"ascii":return pe(this,T,P);case"latin1":case"binary":return ae(this,T,P);case"base64":return Ae(this,T,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,T,P);default:if(F)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),F=!0}}u.prototype._isBuffer=!0;function L(B,T,P){const F=B[T];B[T]=B[P],B[P]=F}u.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<T;P+=2)L(this,P,P+1);return this},u.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<T;P+=4)L(this,P,P+3),L(this,P+1,P+2);return this},u.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<T;P+=8)L(this,P,P+7),L(this,P+1,P+6),L(this,P+2,P+5),L(this,P+3,P+4);return this},u.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?we(this,0,T):z.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(T){if(!u.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:u.compare(this,T)===0},u.prototype.inspect=function(){let T="";const P=r.INSPECT_MAX_BYTES;return T=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(T+=" ... "),"<Buffer "+T+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(T,P,F,X,ne){if($t(T,Uint8Array)&&(T=u.from(T,T.offset,T.byteLength)),!u.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(P===void 0&&(P=0),F===void 0&&(F=T?T.length:0),X===void 0&&(X=0),ne===void 0&&(ne=this.length),P<0||F>T.length||X<0||ne>this.length)throw new RangeError("out of range index");if(X>=ne&&P>=F)return 0;if(X>=ne)return-1;if(P>=F)return 1;if(P>>>=0,F>>>=0,X>>>=0,ne>>>=0,this===T)return 0;let ue=ne-X,_e=F-P;const Qe=Math.min(ue,_e),He=this.slice(X,ne),Ge=T.slice(P,F);for(let Ue=0;Ue<Qe;++Ue)if(He[Ue]!==Ge[Ue]){ue=He[Ue],_e=Ge[Ue];break}return ue<_e?-1:_e<ue?1:0};function M(B,T,P,F,X){if(B.length===0)return-1;if(typeof P=="string"?(F=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,Ms(P)&&(P=X?0:B.length-1),P<0&&(P=B.length+P),P>=B.length){if(X)return-1;P=B.length-1}else if(P<0)if(X)P=0;else return-1;if(typeof T=="string"&&(T=u.from(T,F)),u.isBuffer(T))return T.length===0?-1:G(B,T,P,F,X);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(B,T,P):Uint8Array.prototype.lastIndexOf.call(B,T,P):G(B,[T],P,F,X);throw new TypeError("val must be string, number or Buffer")}function G(B,T,P,F,X){let ne=1,ue=B.length,_e=T.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(B.length<2||T.length<2)return-1;ne=2,ue/=2,_e/=2,P/=2}function Qe(Ge,Ue){return ne===1?Ge[Ue]:Ge.readUInt16BE(Ue*ne)}let He;if(X){let Ge=-1;for(He=P;He<ue;He++)if(Qe(B,He)===Qe(T,Ge===-1?0:He-Ge)){if(Ge===-1&&(Ge=He),He-Ge+1===_e)return Ge*ne}else Ge!==-1&&(He-=He-Ge),Ge=-1}else for(P+_e>ue&&(P=ue-_e),He=P;He>=0;He--){let Ge=!0;for(let Ue=0;Ue<_e;Ue++)if(Qe(B,He+Ue)!==Qe(T,Ue)){Ge=!1;break}if(Ge)return He}return-1}u.prototype.includes=function(T,P,F){return this.indexOf(T,P,F)!==-1},u.prototype.indexOf=function(T,P,F){return M(this,T,P,F,!0)},u.prototype.lastIndexOf=function(T,P,F){return M(this,T,P,F,!1)};function W(B,T,P,F){P=Number(P)||0;const X=B.length-P;F?(F=Number(F),F>X&&(F=X)):F=X;const ne=T.length;F>ne/2&&(F=ne/2);let ue;for(ue=0;ue<F;++ue){const _e=parseInt(T.substr(ue*2,2),16);if(Ms(_e))return ue;B[P+ue]=_e}return ue}function q(B,T,P,F){return lr(Xn(T,B.length-P),B,P,F)}function oe(B,T,P,F){return lr(aa(T),B,P,F)}function le(B,T,P,F){return lr(un(T),B,P,F)}function Te(B,T,P,F){return lr(oo(T,B.length-P),B,P,F)}u.prototype.write=function(T,P,F,X){if(P===void 0)X="utf8",F=this.length,P=0;else if(F===void 0&&typeof P=="string")X=P,F=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(F)?(F=F>>>0,X===void 0&&(X="utf8")):(X=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ne=this.length-P;if((F===void 0||F>ne)&&(F=ne),T.length>0&&(F<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let ue=!1;for(;;)switch(X){case"hex":return W(this,T,P,F);case"utf8":case"utf-8":return q(this,T,P,F);case"ascii":case"latin1":case"binary":return oe(this,T,P,F);case"base64":return le(this,T,P,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,T,P,F);default:if(ue)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ue=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ae(B,T,P){return T===0&&P===B.length?e.fromByteArray(B):e.fromByteArray(B.slice(T,P))}function we(B,T,P){P=Math.min(B.length,P);const F=[];let X=T;for(;X<P;){const ne=B[X];let ue=null,_e=ne>239?4:ne>223?3:ne>191?2:1;if(X+_e<=P){let Qe,He,Ge,Ue;switch(_e){case 1:ne<128&&(ue=ne);break;case 2:Qe=B[X+1],(Qe&192)===128&&(Ue=(ne&31)<<6|Qe&63,Ue>127&&(ue=Ue));break;case 3:Qe=B[X+1],He=B[X+2],(Qe&192)===128&&(He&192)===128&&(Ue=(ne&15)<<12|(Qe&63)<<6|He&63,Ue>2047&&(Ue<55296||Ue>57343)&&(ue=Ue));break;case 4:Qe=B[X+1],He=B[X+2],Ge=B[X+3],(Qe&192)===128&&(He&192)===128&&(Ge&192)===128&&(Ue=(ne&15)<<18|(Qe&63)<<12|(He&63)<<6|Ge&63,Ue>65535&&Ue<1114112&&(ue=Ue))}}ue===null?(ue=65533,_e=1):ue>65535&&(ue-=65536,F.push(ue>>>10&1023|55296),ue=56320|ue&1023),F.push(ue),X+=_e}return Z(F)}const de=4096;function Z(B){const T=B.length;if(T<=de)return String.fromCharCode.apply(String,B);let P="",F=0;for(;F<T;)P+=String.fromCharCode.apply(String,B.slice(F,F+=de));return P}function pe(B,T,P){let F="";P=Math.min(B.length,P);for(let X=T;X<P;++X)F+=String.fromCharCode(B[X]&127);return F}function ae(B,T,P){let F="";P=Math.min(B.length,P);for(let X=T;X<P;++X)F+=String.fromCharCode(B[X]);return F}function se(B,T,P){const F=B.length;(!T||T<0)&&(T=0),(!P||P<0||P>F)&&(P=F);let X="";for(let ne=T;ne<P;++ne)X+=ca[B[ne]];return X}function ce(B,T,P){const F=B.slice(T,P);let X="";for(let ne=0;ne<F.length-1;ne+=2)X+=String.fromCharCode(F[ne]+F[ne+1]*256);return X}u.prototype.slice=function(T,P){const F=this.length;T=~~T,P=P===void 0?F:~~P,T<0?(T+=F,T<0&&(T=0)):T>F&&(T=F),P<0?(P+=F,P<0&&(P=0)):P>F&&(P=F),P<T&&(P=T);const X=this.subarray(T,P);return Object.setPrototypeOf(X,u.prototype),X};function J(B,T,P){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+T>P)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(T,P,F){T=T>>>0,P=P>>>0,F||J(T,P,this.length);let X=this[T],ne=1,ue=0;for(;++ue<P&&(ne*=256);)X+=this[T+ue]*ne;return X},u.prototype.readUintBE=u.prototype.readUIntBE=function(T,P,F){T=T>>>0,P=P>>>0,F||J(T,P,this.length);let X=this[T+--P],ne=1;for(;P>0&&(ne*=256);)X+=this[T+--P]*ne;return X},u.prototype.readUint8=u.prototype.readUInt8=function(T,P){return T=T>>>0,P||J(T,1,this.length),this[T]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(T,P){return T=T>>>0,P||J(T,2,this.length),this[T]|this[T+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(T,P){return T=T>>>0,P||J(T,2,this.length),this[T]<<8|this[T+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(T,P){return T=T>>>0,P||J(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(T,P){return T=T>>>0,P||J(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},u.prototype.readBigUInt64LE=ur(function(T){T=T>>>0,Ze(T,"offset");const P=this[T],F=this[T+7];(P===void 0||F===void 0)&&gt(T,this.length-8);const X=P+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,ne=this[++T]+this[++T]*2**8+this[++T]*2**16+F*2**24;return BigInt(X)+(BigInt(ne)<<BigInt(32))}),u.prototype.readBigUInt64BE=ur(function(T){T=T>>>0,Ze(T,"offset");const P=this[T],F=this[T+7];(P===void 0||F===void 0)&&gt(T,this.length-8);const X=P*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],ne=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+F;return(BigInt(X)<<BigInt(32))+BigInt(ne)}),u.prototype.readIntLE=function(T,P,F){T=T>>>0,P=P>>>0,F||J(T,P,this.length);let X=this[T],ne=1,ue=0;for(;++ue<P&&(ne*=256);)X+=this[T+ue]*ne;return ne*=128,X>=ne&&(X-=Math.pow(2,8*P)),X},u.prototype.readIntBE=function(T,P,F){T=T>>>0,P=P>>>0,F||J(T,P,this.length);let X=P,ne=1,ue=this[T+--X];for(;X>0&&(ne*=256);)ue+=this[T+--X]*ne;return ne*=128,ue>=ne&&(ue-=Math.pow(2,8*P)),ue},u.prototype.readInt8=function(T,P){return T=T>>>0,P||J(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},u.prototype.readInt16LE=function(T,P){T=T>>>0,P||J(T,2,this.length);const F=this[T]|this[T+1]<<8;return F&32768?F|4294901760:F},u.prototype.readInt16BE=function(T,P){T=T>>>0,P||J(T,2,this.length);const F=this[T+1]|this[T]<<8;return F&32768?F|4294901760:F},u.prototype.readInt32LE=function(T,P){return T=T>>>0,P||J(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},u.prototype.readInt32BE=function(T,P){return T=T>>>0,P||J(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},u.prototype.readBigInt64LE=ur(function(T){T=T>>>0,Ze(T,"offset");const P=this[T],F=this[T+7];(P===void 0||F===void 0)&&gt(T,this.length-8);const X=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(F<<24);return(BigInt(X)<<BigInt(32))+BigInt(P+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),u.prototype.readBigInt64BE=ur(function(T){T=T>>>0,Ze(T,"offset");const P=this[T],F=this[T+7];(P===void 0||F===void 0)&&gt(T,this.length-8);const X=(P<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(X)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+F)}),u.prototype.readFloatLE=function(T,P){return T=T>>>0,P||J(T,4,this.length),t.read(this,T,!0,23,4)},u.prototype.readFloatBE=function(T,P){return T=T>>>0,P||J(T,4,this.length),t.read(this,T,!1,23,4)},u.prototype.readDoubleLE=function(T,P){return T=T>>>0,P||J(T,8,this.length),t.read(this,T,!0,52,8)},u.prototype.readDoubleBE=function(T,P){return T=T>>>0,P||J(T,8,this.length),t.read(this,T,!1,52,8)};function ie(B,T,P,F,X,ne){if(!u.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>X||T<ne)throw new RangeError('"value" argument is out of bounds');if(P+F>B.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(T,P,F,X){if(T=+T,P=P>>>0,F=F>>>0,!X){const _e=Math.pow(2,8*F)-1;ie(this,T,P,F,_e,0)}let ne=1,ue=0;for(this[P]=T&255;++ue<F&&(ne*=256);)this[P+ue]=T/ne&255;return P+F},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(T,P,F,X){if(T=+T,P=P>>>0,F=F>>>0,!X){const _e=Math.pow(2,8*F)-1;ie(this,T,P,F,_e,0)}let ne=F-1,ue=1;for(this[P+ne]=T&255;--ne>=0&&(ue*=256);)this[P+ne]=T/ue&255;return P+F},u.prototype.writeUint8=u.prototype.writeUInt8=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,1,255,0),this[P]=T&255,P+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,2,65535,0),this[P]=T&255,this[P+1]=T>>>8,P+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,2,65535,0),this[P]=T>>>8,this[P+1]=T&255,P+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,4,4294967295,0),this[P+3]=T>>>24,this[P+2]=T>>>16,this[P+1]=T>>>8,this[P]=T&255,P+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,4,4294967295,0),this[P]=T>>>24,this[P+1]=T>>>16,this[P+2]=T>>>8,this[P+3]=T&255,P+4};function Re(B,T,P,F,X){Qt(T,F,X,B,P,7);let ne=Number(T&BigInt(4294967295));B[P++]=ne,ne=ne>>8,B[P++]=ne,ne=ne>>8,B[P++]=ne,ne=ne>>8,B[P++]=ne;let ue=Number(T>>BigInt(32)&BigInt(4294967295));return B[P++]=ue,ue=ue>>8,B[P++]=ue,ue=ue>>8,B[P++]=ue,ue=ue>>8,B[P++]=ue,P}function je(B,T,P,F,X){Qt(T,F,X,B,P,7);let ne=Number(T&BigInt(4294967295));B[P+7]=ne,ne=ne>>8,B[P+6]=ne,ne=ne>>8,B[P+5]=ne,ne=ne>>8,B[P+4]=ne;let ue=Number(T>>BigInt(32)&BigInt(4294967295));return B[P+3]=ue,ue=ue>>8,B[P+2]=ue,ue=ue>>8,B[P+1]=ue,ue=ue>>8,B[P]=ue,P+8}u.prototype.writeBigUInt64LE=ur(function(T,P=0){return Re(this,T,P,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ur(function(T,P=0){return je(this,T,P,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(T,P,F,X){if(T=+T,P=P>>>0,!X){const Qe=Math.pow(2,8*F-1);ie(this,T,P,F,Qe-1,-Qe)}let ne=0,ue=1,_e=0;for(this[P]=T&255;++ne<F&&(ue*=256);)T<0&&_e===0&&this[P+ne-1]!==0&&(_e=1),this[P+ne]=(T/ue>>0)-_e&255;return P+F},u.prototype.writeIntBE=function(T,P,F,X){if(T=+T,P=P>>>0,!X){const Qe=Math.pow(2,8*F-1);ie(this,T,P,F,Qe-1,-Qe)}let ne=F-1,ue=1,_e=0;for(this[P+ne]=T&255;--ne>=0&&(ue*=256);)T<0&&_e===0&&this[P+ne+1]!==0&&(_e=1),this[P+ne]=(T/ue>>0)-_e&255;return P+F},u.prototype.writeInt8=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,1,127,-128),T<0&&(T=255+T+1),this[P]=T&255,P+1},u.prototype.writeInt16LE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,2,32767,-32768),this[P]=T&255,this[P+1]=T>>>8,P+2},u.prototype.writeInt16BE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,2,32767,-32768),this[P]=T>>>8,this[P+1]=T&255,P+2},u.prototype.writeInt32LE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,4,2147483647,-2147483648),this[P]=T&255,this[P+1]=T>>>8,this[P+2]=T>>>16,this[P+3]=T>>>24,P+4},u.prototype.writeInt32BE=function(T,P,F){return T=+T,P=P>>>0,F||ie(this,T,P,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[P]=T>>>24,this[P+1]=T>>>16,this[P+2]=T>>>8,this[P+3]=T&255,P+4},u.prototype.writeBigInt64LE=ur(function(T,P=0){return Re(this,T,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ur(function(T,P=0){return je(this,T,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(B,T,P,F,X,ne){if(P+F>B.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function $e(B,T,P,F,X){return T=+T,P=P>>>0,X||Ie(B,T,P,4),t.write(B,T,P,F,23,4),P+4}u.prototype.writeFloatLE=function(T,P,F){return $e(this,T,P,!0,F)},u.prototype.writeFloatBE=function(T,P,F){return $e(this,T,P,!1,F)};function Be(B,T,P,F,X){return T=+T,P=P>>>0,X||Ie(B,T,P,8),t.write(B,T,P,F,52,8),P+8}u.prototype.writeDoubleLE=function(T,P,F){return Be(this,T,P,!0,F)},u.prototype.writeDoubleBE=function(T,P,F){return Be(this,T,P,!1,F)},u.prototype.copy=function(T,P,F,X){if(!u.isBuffer(T))throw new TypeError("argument should be a Buffer");if(F||(F=0),!X&&X!==0&&(X=this.length),P>=T.length&&(P=T.length),P||(P=0),X>0&&X<F&&(X=F),X===F||T.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),T.length-P<X-F&&(X=T.length-P+F);const ne=X-F;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,F,X):Uint8Array.prototype.set.call(T,this.subarray(F,X),P),ne},u.prototype.fill=function(T,P,F,X){if(typeof T=="string"){if(typeof P=="string"?(X=P,P=0,F=this.length):typeof F=="string"&&(X=F,F=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!u.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(T.length===1){const ue=T.charCodeAt(0);(X==="utf8"&&ue<128||X==="latin1")&&(T=ue)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(P<0||this.length<P||this.length<F)throw new RangeError("Out of range index");if(F<=P)return this;P=P>>>0,F=F===void 0?this.length:F>>>0,T||(T=0);let ne;if(typeof T=="number")for(ne=P;ne<F;++ne)this[ne]=T;else{const ue=u.isBuffer(T)?T:u.from(T,X),_e=ue.length;if(_e===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(ne=0;ne<F-P;++ne)this[ne+P]=ue[ne%_e]}return this};const ke={};function De(B,T,P){ke[B]=class extends P{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}De("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),De("ERR_INVALID_ARG_TYPE",function(B,T){return`The "${B}" argument must be of type number. Received type ${typeof T}`},TypeError),De("ERR_OUT_OF_RANGE",function(B,T,P){let F=`The value of "${B}" is out of range.`,X=P;return Number.isInteger(P)&&Math.abs(P)>2**32?X=Ye(String(P)):typeof P=="bigint"&&(X=String(P),(P>BigInt(2)**BigInt(32)||P<-(BigInt(2)**BigInt(32)))&&(X=Ye(X)),X+="n"),F+=` It must be ${T}. Received ${X}`,F},RangeError);function Ye(B){let T="",P=B.length;const F=B[0]==="-"?1:0;for(;P>=F+4;P-=3)T=`_${B.slice(P-3,P)}${T}`;return`${B.slice(0,P)}${T}`}function Mr(B,T,P){Ze(T,"offset"),(B[T]===void 0||B[T+P]===void 0)&&gt(T,B.length-(P+1))}function Qt(B,T,P,F,X,ne){if(B>P||B<T){const ue=typeof T=="bigint"?"n":"";let _e;throw T===0||T===BigInt(0)?_e=`>= 0${ue} and < 2${ue} ** ${(ne+1)*8}${ue}`:_e=`>= -(2${ue} ** ${(ne+1)*8-1}${ue}) and < 2 ** ${(ne+1)*8-1}${ue}`,new ke.ERR_OUT_OF_RANGE("value",_e,B)}Mr(F,X,ne)}function Ze(B,T){if(typeof B!="number")throw new ke.ERR_INVALID_ARG_TYPE(T,"number",B)}function gt(B,T,P){throw Math.floor(B)!==B?(Ze(B,P),new ke.ERR_OUT_OF_RANGE("offset","an integer",B)):T<0?new ke.ERR_BUFFER_OUT_OF_BOUNDS:new ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,B)}const Qn=/[^+/0-9A-Za-z-_]/g;function Kn(B){if(B=B.split("=")[0],B=B.trim().replace(Qn,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function Xn(B,T){T=T||1/0;let P;const F=B.length;let X=null;const ne=[];for(let ue=0;ue<F;++ue){if(P=B.charCodeAt(ue),P>55295&&P<57344){if(!X){if(P>56319){(T-=3)>-1&&ne.push(239,191,189);continue}else if(ue+1===F){(T-=3)>-1&&ne.push(239,191,189);continue}X=P;continue}if(P<56320){(T-=3)>-1&&ne.push(239,191,189),X=P;continue}P=(X-55296<<10|P-56320)+65536}else X&&(T-=3)>-1&&ne.push(239,191,189);if(X=null,P<128){if((T-=1)<0)break;ne.push(P)}else if(P<2048){if((T-=2)<0)break;ne.push(P>>6|192,P&63|128)}else if(P<65536){if((T-=3)<0)break;ne.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((T-=4)<0)break;ne.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return ne}function aa(B){const T=[];for(let P=0;P<B.length;++P)T.push(B.charCodeAt(P)&255);return T}function oo(B,T){let P,F,X;const ne=[];for(let ue=0;ue<B.length&&!((T-=2)<0);++ue)P=B.charCodeAt(ue),F=P>>8,X=P%256,ne.push(X),ne.push(F);return ne}function un(B){return e.toByteArray(Kn(B))}function lr(B,T,P,F){let X;for(X=0;X<F&&!(X+P>=T.length||X>=B.length);++X)T[X+P]=B[X];return X}function $t(B,T){return B instanceof T||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===T.name}function Ms(B){return B!==B}const ca=function(){const B="0123456789abcdef",T=new Array(256);for(let P=0;P<16;++P){const F=P*16;for(let X=0;X<16;++X)T[F+X]=B[P]+B[X]}return T}();function ur(B){return typeof BigInt>"u"?la:B}function la(){throw new Error("BigInt not supported")}}(buffer)),buffer}var bufferExports=requireBuffer(),define_process_env_default$1={VITE_INFURA_PROJECT_ID:'""',VITE_INFURA_API_SECRET:'""'};const getEnvVar=r=>typeof process<"u"&&define_process_env_default$1&&define_process_env_default$1[r]&&define_process_env_default$1[r]||"",INFURA_PROJECT_ID=getEnvVar("VITE_INFURA_PROJECT_ID"),INFURA_API_SECRET=getEnvVar("VITE_INFURA_API_SECRET"),initIPFSClient=()=>{try{return create({host:"ipfs.infura.io",port:5001,protocol:"https",headers:{authorization:"Basic "+bufferExports.Buffer.from(INFURA_PROJECT_ID+":"+INFURA_API_SECRET).toString("base64")}})}catch(r){throw console.error("Error initializing IPFS client:",r),new Error("Failed to connect to IPFS")}},uploadToIPFS=async(r,e)=>{try{return(await e.add(r)).cid.toString()}catch(t){throw console.error("Error uploading to IPFS:",t),new Error("Failed to upload content to IPFS")}},retrieveFromIPFS=async(r,e)=>{try{const t=e.cat(r),s=new TextDecoder;let i="";for await(const a of t)i+=s.decode(a);return i}catch(t){throw console.error("Error retrieving from IPFS:",t),new Error("Failed to retrieve content from IPFS")}},pinContent=async(r,e)=>{try{await e.pin.add(r),console.log(`Content with CID ${r} pinned successfully`)}catch(t){throw console.error("Error pinning content:",t),new Error("Failed to pin content to IPFS")}},defaultContext={ipfs:null,isConnected:!1,uploadContent:async()=>"",getContent:async()=>"",pinContent:async()=>{},ipfsError:null},IPFSContext=reactExports.createContext(defaultContext),IPFSProvider=({children:r})=>{const{isConnected:e}=useWeb3(),[t,s]=reactExports.useState(null),[i,a]=reactExports.useState(!1),[l,u]=reactExports.useState(null);reactExports.useEffect(()=>((async()=>{try{if(!e){u("Web3 wallet must be connected to use IPFS features");return}u(null);const A=initIPFSClient();s(A),a(!0)}catch(A){console.error("Failed to connect to IPFS:",A),u("Failed to connect to IPFS network"),a(!1)}})(),()=>{s(null),a(!1)}),[e]);const E={ipfs:t,isConnected:i,uploadContent:async R=>{if(!t)throw new Error("IPFS client not initialized");try{const A=(R instanceof ArrayBuffer,Buffer.from(R));return await uploadToIPFS(A,t)}catch(A){throw console.error("Error uploading to IPFS:",A),new Error("Failed to upload content to IPFS")}},getContent:async R=>{if(!t)throw new Error("IPFS client not initialized");try{return await retrieveFromIPFS(R,t)}catch(A){throw console.error("Error retrieving from IPFS:",A),new Error("Failed to retrieve content from IPFS")}},pinContent:async R=>{if(!t)throw new Error("IPFS client not initialized");try{await pinContent(R,t)}catch(A){throw console.error("Error pinning content:",A),new Error("Failed to pin content to IPFS")}},ipfsError:l};return jsxRuntimeExports.jsx(IPFSContext.Provider,{value:E,children:r})};class LocalStorageUtil{static getItem(e){try{const t=localStorage.getItem(e);if(!t)return null;const s=JSON.parse(t);return s.expiry&&new Date(s.expiry)<new Date?(localStorage.removeItem(e),null):s.value!==void 0?s.value:s}catch(t){return console.error(`Error getting item from localStorage: ${t}`),null}}static setItem(e,t,s){try{const i={value:t};if(s){const a=new Date;a.setMinutes(a.getMinutes()+s),i.expiry=a.toISOString()}localStorage.setItem(e,JSON.stringify(i))}catch(i){console.error(`Error setting item in localStorage: ${i}`)}}static removeItem(e){try{localStorage.removeItem(e)}catch(t){console.error(`Error removing item from localStorage: ${t}`)}}static clear(){try{localStorage.clear()}catch(e){console.error(`Error clearing localStorage: ${e}`)}}static getNamespacedKey(e,t){return`${e}:${t}`}}var define_process_env_default={},LogLevel=(r=>(r[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARN=2]="WARN",r[r.ERROR=3]="ERROR",r[r.CRITICAL=4]="CRITICAL",r))(LogLevel||{});const $c=class $c{constructor(){O(this,"logs",[]);O(this,"maxLogs",1e3);O(this,"logLevel",1);O(this,"enableConsoleOutput",typeof process<"u"&&!1);const e=typeof process<"u"&&define_process_env_default&&define_process_env_default.VITE_LOG_LEVEL||"INFO";this.logLevel=this.parseLogLevel(e)}static getInstance(){return this.instance||(this.instance=new $c),this.instance}parseLogLevel(e){switch(e.toUpperCase()){case"DEBUG":return 0;case"INFO":return 1;case"WARN":return 2;case"ERROR":return 3;case"CRITICAL":return 4;default:return 1}}log(e,t,s,i,a){if(e<this.logLevel)return;const l={timestamp:new Date,level:e,category:t,message:s,data:i,stack:a==null?void 0:a.stack};if(this.logs.push(l),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.enableConsoleOutput){const u=LogLevel[e],x=`[${l.timestamp.toISOString()}] ${u} [${t}]`;switch(e){case 0:console.debug(x,s,i);break;case 1:console.info(x,s,i);break;case 2:console.warn(x,s,i);break;case 3:case 4:console.error(x,s,i,a);break}}}debug(e,t,s){this.log(0,e,t,s)}info(e,t,s){this.log(1,e,t,s)}warn(e,t,s){this.log(2,e,t,s)}error(e,t,s,i){this.log(3,e,t,s,i)}critical(e,t,s,i){this.log(4,e,t,s,i)}getLogs(e){return e===void 0?[...this.logs]:this.logs.filter(t=>t.level>=e)}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}setLogLevel(e){this.logLevel=e}setConsoleOutput(e){this.enableConsoleOutput=e}};O($c,"instance");let LoggerService=$c;const logger=LoggerService.getInstance(),log={debug:(r,e,t)=>logger.debug(r,e,t),info:(r,e,t)=>logger.info(r,e,t),warn:(r,e,t)=>logger.warn(r,e,t),error:(r,e,t,s)=>logger.error(r,e,t,s),critical:(r,e,t,s)=>logger.critical(r,e,t,s)};class SettingsIntegrationService{static loadSettings(){if(this.settings)return this.settings;try{const e=localStorage.getItem("dashboardSettings");if(e)return this.settings=JSON.parse(e),log.debug("SettingsIntegration","Loaded settings from localStorage"),this.settings}catch(e){log.error("SettingsIntegration","Failed to load settings",e)}return{}}static getCORSStrategy(e){var s,i,a;const t=this.loadSettings();return e&&((i=(s=t.cors)==null?void 0:s.protocolStrategies)!=null&&i[e])?t.cors.protocolStrategies[e]:((a=t.cors)==null?void 0:a.defaultStrategy)||CORSStrategy.RSS2JSON}static getProxyUrl(e,t){var a,l,u;const s=this.getCORSStrategy(t),i=this.loadSettings();switch(s){case CORSStrategy.RSS2JSON:return((u=(l=(a=i.cors)==null?void 0:a.services)==null?void 0:l.rss2json)==null?void 0:u.length)>0?`${i.cors.services.rss2json[0]}?rss_url=${encodeURIComponent(e)}`:e;case CORSStrategy.DIRECT:return e;case CORSStrategy.SERVICE_WORKER:return`${window.location.origin}/sw-proxy?url=${encodeURIComponent(e)}`;case CORSStrategy.JSONP:return e;case CORSStrategy.EXTENSION:return e;default:return e}}static getCORSProxyChain(){var s;const e=this.loadSettings(),t=[];if((s=e.cors)!=null&&s.fallbackChain&&e.cors.services){for(const i of e.cors.fallbackChain)switch(i){case CORSStrategy.RSS2JSON:e.cors.services.rss2json&&t.push(...e.cors.services.rss2json.map(a=>`${a}?rss_url=`));break;case CORSStrategy.DIRECT:t.push("");break;case CORSStrategy.SERVICE_WORKER:t.push(`${window.location.origin}/sw-proxy?url=`);break;case CORSStrategy.JSONP:break;case CORSStrategy.EXTENSION:break}e.cors.services.corsProxies&&t.push(...e.cors.services.corsProxies)}return t.length>0?t:[""]}static getThemeSettings(){return this.loadSettings().display||{theme:"alliance",density:"comfortable",fontSize:14}}static applyThemeSettings(){const{theme:e,density:t,fontSize:s}=this.getThemeSettings();document.documentElement.setAttribute("data-theme",e),document.documentElement.setAttribute("data-density",t),document.documentElement.style.setProperty("--base-font-size",`${s}px`),document.documentElement.setAttribute("data-compact",t==="compact"?"true":"false"),log.debug("SettingsIntegration",`Applied theme: ${e}, density: ${t}, fontSize: ${s}`)}static getVerificationSettings(){return this.loadSettings().verification||{minimumTrustRating:60,preferredMethods:["official","community","automated"],warningThreshold:40}}static getTrustStatus(e){const{minimumTrustRating:t,warningThreshold:s}=this.getVerificationSettings(),i=e>=t,a=e<t&&e>=s;let l="untrusted";return i?l="trusted":a&&(l="warning"),{trusted:i,warning:a,status:l}}static getProtocolPriority(){var t;return((t=this.loadSettings().protocols)==null?void 0:t.priority)||["RSS","JSON","API","IPFS","MASTODON","SSB"]}static orderByProtocolPriority(e){const t=this.getProtocolPriority();return[...e].sort((s,i)=>{const a=s.protocol||"",l=i.protocol||"",u=t.indexOf(a),p=t.indexOf(l);return u===-1&&p===-1?0:u===-1?1:p===-1?-1:u-p})}static getGeneralSettings(){const e=localStorage.getItem("generalSettings"),t={autoRefresh:!1,refreshInterval:300,preserveHistory:!0,notifications:!0,notificationSound:"ping",showNotificationCount:!0,cacheDuration:1800,storageLimit:50};if(e)try{const s=JSON.parse(e);return{...t,...s}}catch(s){return console.warn("Failed to parse general settings from localStorage:",s),t}return t}static detectProtocolFromUrl(e){const t=e.toLowerCase();if(t.includes(".rss")||t.includes("/rss")||t.includes("/feed")||t.includes("/atom"))return"RSS";if(t.includes(".json")||t.includes("/json"))return"JSON";if(t.includes("api."))return"API";if(t.startsWith("ipfs://")||t.includes("ipfs/"))return"IPFS";if(t.includes("@")&&(t.includes("mastodon")||t.includes("pleroma")))return"MASTODON"}static resetCache(){this.settings=null}static applyCorsSettings(){const e=this.loadSettings();e.cors&&log.debug("SettingsIntegration","Applied CORS settings",{defaultStrategy:e.cors.defaultStrategy,protocolStrategies:e.cors.protocolStrategies})}static applyProtocolSettings(){const e=this.loadSettings();e.protocols&&log.debug("SettingsIntegration","Applied protocol settings",{priority:e.protocols.priority,autoDetect:e.protocols.autoDetect})}static applyVerificationSettings(){const e=this.loadSettings();e.verification&&log.debug("SettingsIntegration","Applied verification settings",{minimumTrustRating:e.verification.minimumTrustRating,warningThreshold:e.verification.warningThreshold,preferredMethods:e.verification.preferredMethods})}static applyGeneralSettings(){const e=this.loadSettings();e.general&&log.debug("SettingsIntegration","Applied general settings",{refreshInterval:e.general.refreshInterval,cacheSettings:e.general.cacheSettings,notifications:e.general.notifications})}static saveSettings(e){try{const t=this.loadSettings();this.settings={...t,...e},localStorage.setItem("dashboardSettings",JSON.stringify(this.settings)),log.debug("SettingsIntegration","Saved settings to localStorage")}catch(t){log.error("SettingsIntegration","Failed to save settings",t)}}static resetToDefaults(){try{localStorage.removeItem("dashboardSettings"),this.settings=null,log.debug("SettingsIntegration","Reset settings to defaults")}catch(e){log.error("SettingsIntegration","Failed to reset settings",e)}}static validateSettings(e){return!(!e||typeof e!="object")}static validateAndSanitizeSettings(e){if(!this.validateSettings(e))return{};const t={...e};return delete t.__proto__,delete t.constructor,t}static applySettings(e){const t=this.validateAndSanitizeSettings(e);this.saveSettings(t),this.applyThemeSettings(),this.applyCorsSettings(),this.applyProtocolSettings(),this.applyVerificationSettings(),this.applyGeneralSettings()}static sanitizeInput(e){return typeof e!="string"?"":e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"")}static async testCORSStrategy(e,t={}){const s=t.timeout||5e3;return new Promise(i=>{const a=setTimeout(()=>i(!1),s);setTimeout(()=>{clearTimeout(a),i(!0)},100)})}}O(SettingsIntegrationService,"settings",null);class RSS2JSONService{static async fetchFeed(e){console.log(` Fetching RSS via RSS2JSON: ${e}`);for(let t=0;t<this.APIS.length;t++)try{const s=this.buildApiUrl(this.APIS[t],e);console.log(` Trying API ${t+1}: ${this.APIS[t]}`);const i=await fetch(s,{headers:{Accept:"application/json","User-Agent":"Mozilla/5.0 (compatible; RSS-Reader/1.0)"},signal:AbortSignal.timeout(15e3)});if(!i.ok){const u=await i.text();throw new Error(`HTTP ${i.status}: ${i.statusText}. Response: ${u.substring(0,100)}`)}const a=await i.json();if(!this.validateResponse(a,this.APIS[t]))throw new Error(`Invalid response format from ${this.APIS[t]}`);const l=this.convertToFeedFormat(a,e);if(l.length===0)throw new Error("No feed items found in response");return console.log(` Successfully fetched ${l.length} items from ${this.APIS[t]}`),l}catch(s){if(console.warn(` API ${t+1} failed:`,s),t===this.APIS.length-1)throw new Error(`All RSS2JSON APIs failed. Last error: ${s}`);await new Promise(i=>setTimeout(i,1e3))}throw new Error("Unexpected error in RSS2JSON service")}static validateResponse(e,t){return e?t.includes("rss2json.vercel.app")?Array.isArray(e.items)||Array.isArray(e):t.includes("rss2json.com")?e.status==="ok"&&Array.isArray(e.items):t.includes("feed2json.org")?Array.isArray(e.items)||Array.isArray(e):e.items&&Array.isArray(e.items):!1}static buildApiUrl(e,t){const s=encodeURIComponent(t);switch(e){case"https://rss2json.vercel.app/api":return`${e}?url=${s}`;case"https://api.rss2json.com/v1/api.json":return`${e}?rss_url=${s}`;case"https://feed2json.org/convert":return`${e}?url=${s}`;default:return`${e}?url=${s}`}}static convertToFeedFormat(e,t){try{const s=e.feed||e,i=e.items||e.entries||[];if(!Array.isArray(i))throw new Error("No items array found in response");return i.map((a,l)=>{let u=a.pubDate||a.published||a.date_published||new Date().toISOString();if(u&&!u.includes("T"))try{u=new Date(u).toISOString()}catch{u=new Date().toISOString()}return{id:`${t}-${l}`,name:s.title||"Unknown Feed",url:t,title:a.title||"No Title",link:a.link||a.url||t,pubDate:u,description:this.cleanHtml(a.description||a.summary||""),content:this.cleanHtml(a.content||a.description||a.summary||""),feedListId:"1",author:a.author||s.author||"Unknown Author",categories:Array.isArray(a.categories)?a.categories:[],media:this.extractMedia(a)}})}catch(s){throw console.error("Error converting RSS2JSON data:",s),new Error("Failed to convert RSS data to feed format")}}static extractMedia(e){const t=[];return e.enclosure&&e.enclosure.link&&t.push({url:e.enclosure.link,type:e.enclosure.type||"unknown"}),e.thumbnail&&t.push({url:e.thumbnail,type:"image"}),e.image&&t.push({url:e.image,type:"image"}),t}static cleanHtml(e){return e?e.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').trim():""}}O(RSS2JSONService,"APIS",["https://rss2json.vercel.app/api","https://api.rss2json.com/v1/api.json","https://api.rss-to-json.com/v1/api.json","https://api.allorigins.win/get?url=","https://corsproxy.io/?","https://api.cors.sh/cors/?url="]);const convertFeedsToFeedItems=r=>r.map(e=>({id:e.id,title:e.title,link:e.link,pubDate:new Date(e.pubDate).toISOString(),description:e.description||"",content:e.content||"",feedListId:e.feedListId,author:e.author,categories:e.categories,media:e.media})),convertFeedItemsToFeeds=r=>r.map(e=>({id:e.id,name:e.title,url:e.link,title:e.title,link:e.link,pubDate:new Date(e.pubDate).toISOString(),description:e.description,content:e.content,feedListId:e.feedListId,author:e.author,categories:e.categories,media:e.media}));class FetchService{static async fetchFeed(e,t){log.debug("FetchService",`Starting to fetch feed from URL: ${e}`);const s=SettingsIntegrationService.getCORSStrategy(t);log.debug("FetchService",`Using CORS strategy: ${s} for ${t||"default"} protocol`);try{switch(s){case CORSStrategy.RSS2JSON:return await this.fetchWithRSS2JSON(e);case CORSStrategy.DIRECT:return await this.fetchDirect(e);case CORSStrategy.SERVICE_WORKER:return await this.fetchWithServiceWorker(e);case CORSStrategy.JSONP:return await this.fetchWithJSONP(e);case CORSStrategy.EXTENSION:return await this.fetchWithExtension(e);default:return await this.fetchWithProxyChain(e)}}catch(i){log.error("FetchService",`Failed to fetch ${e} with strategy ${s}`,i);try{return log.debug("FetchService","Attempting fallback chain"),await this.fetchWithProxyChain(e)}catch(a){throw log.error("FetchService","All fallback methods failed",a),a}}}static async fetchWithRSS2JSON(e){try{log.debug("FetchService",`Attempting RSS2JSON fetch for: ${e}`);const t=await RSS2JSONService.fetchFeed(e);if(t&&t.length>0)return log.debug("FetchService",` Successfully fetched ${t.length} items using RSS2JSON`),{feeds:convertFeedsToFeedItems(t),fetchedAt:new Date().toISOString()};throw new Error("No feed items found in RSS2JSON response")}catch(t){throw log.error("FetchService","RSS2JSON fetch failed",t),t}}static async fetchDirect(e){try{log.debug("FetchService",`Attempting direct fetch: ${e}`);const t=await fetch(e,{method:"GET",headers:{Accept:"application/xml, text/xml, application/rss+xml, application/atom+xml, application/json, text/html, */*","User-Agent":"Mozilla/5.0 (compatible; RSS-Reader/1.0)"},signal:AbortSignal.timeout(1e4)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const s=t.headers.get("Content-Type")||"",i=await t.text();return await this.parseFeedResponse(i,s,e)}catch(t){throw log.error("FetchService","Direct fetch failed",t),t}}static async fetchWithServiceWorker(e){throw log.warn("FetchService","Service Worker fetch not fully implemented"),new Error("Service Worker CORS strategy not implemented")}static async fetchWithJSONP(e){throw log.warn("FetchService","JSONP fetch not fully implemented"),new Error("JSONP CORS strategy not implemented")}static async fetchWithExtension(e){return this.fetchDirect(e)}static async fetchWithProxyChain(e){const t=SettingsIntegrationService.getCORSProxyChain();log.debug("FetchService",`Attempting proxy chain with ${t.length} proxies`);for(let s=0;s<t.length;s++)try{const i=t[s];let a=e;i&&(a=`${i}${encodeURIComponent(e)}`),log.debug("FetchService",`Trying proxy ${s+1}: ${a}`);const l=await fetch(a,{method:"GET",headers:{Accept:"application/xml, text/xml, application/rss+xml, application/atom+xml, application/json, text/html, */*","User-Agent":"Mozilla/5.0 (compatible; RSS-Reader/1.0)"},signal:AbortSignal.timeout(8e3)});if(!l.ok){log.warn("FetchService",`Proxy ${s+1} returned ${l.status}: ${l.statusText}`);continue}const u=await l.text(),{content:p,contentType:x}=this.extractContentFromProxyResponse(u,a);return await this.parseFeedResponse(p,x,e)}catch(i){log.warn("FetchService",`Proxy ${s+1} failed:`,i);continue}throw new Error(`All proxies in the chain failed for URL: ${e}`)}static extractContentFromProxyResponse(e,t){if(t.includes("allorigins.win"))try{const s=JSON.parse(e);if(s.contents)return{content:s.contents,contentType:"application/xml"}}catch{log.warn("FetchService","Failed to parse allorigins response as JSON, treating as raw content")}if(t.includes("codetabs.com")&&e.includes("Moved Permanently"))throw new Error("Codetabs proxy returned redirect - feed likely not accessible");if(e.startsWith("data:application/")&&e.includes("base64,"))try{const s=e.split("base64,")[1],i=atob(s),a=e.split(";")[0].replace("data:","");return{content:i,contentType:a}}catch(s){log.warn("FetchService","Failed to decode base64 content:",s)}return{content:e,contentType:"application/xml"}}static async parseFeedResponse(e,t,s){throw new Error("Direct parsing not implemented, falling back to RSS2JSON")}static async testCORSStrategy(e,t){var a,l;log.debug("FetchService",`Testing ${t} strategy for ${e}`);const s=new AbortController,i=setTimeout(()=>s.abort(),1e4);try{let u=e;switch(t){case CORSStrategy.RSS2JSON:const w=((l=(a=SettingsIntegrationService.loadSettings().cors)==null?void 0:a.services)==null?void 0:l.rss2json)||[];if(w.length===0)throw new Error("No RSS2JSON services configured");u=`${w[0]}?rss_url=${encodeURIComponent(e)}`;break;case CORSStrategy.SERVICE_WORKER:u=`${window.location.origin}/sw-proxy?url=${encodeURIComponent(e)}`;break;case CORSStrategy.JSONP:throw new Error("JSONP testing not implemented in test utility");case CORSStrategy.DIRECT:break;case CORSStrategy.EXTENSION:break}const p=await fetch(u,{method:"GET",headers:{Accept:"application/xml, text/xml, application/rss+xml, application/atom+xml, application/json, text/html, */*","User-Agent":"Tactical Intel Dashboard Test Utility"},signal:s.signal});if(clearTimeout(i),!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);const x=await p.text();if(!x||x.length===0)throw new Error("Empty response received");return{success:!0,data:{contentType:p.headers.get("Content-Type"),contentLength:x.length}}}catch(u){throw clearTimeout(i),log.error("FetchService",`Test failed for ${t}:`,u),u}}}const fetchFeed$1=async r=>{var e,t;log.debug("Component",`Starting to fetch feed from URL: ${r}`);try{const i=SettingsIntegrationService.getGeneralSettings().cacheDuration*1e3,a=LocalStorageUtil.getItem(`feed_${r}`);if(a){const p=JSON.parse(a),x=new Date(p.fetchedAt).getTime();if(new Date().getTime()-x<i)return log.debug("Component",`Using cached feed data for ${r}`),p}let l;((e=SettingsIntegrationService.loadSettings().protocols)==null?void 0:e.autoDetect)!==!1&&(l=SettingsIntegrationService.detectProtocolFromUrl(r),log.debug("Component",`Auto-detected protocol: ${l||"unknown"}`));let u=await FetchService.fetchFeed(r,l);if(!u&&((t=SettingsIntegrationService.loadSettings().protocols)==null?void 0:t.fallbackEnabled)!==!1){log.debug("Component",`Initial fetch failed, trying protocol fallbacks for ${r}`);const p=SettingsIntegrationService.getProtocolPriority();for(const x of p)if(x!==l&&(log.debug("Component",`Trying fallback protocol: ${x}`),u=await FetchService.fetchFeed(r,x),u)){log.debug("Component",`Fallback protocol ${x} succeeded`);break}}return u&&LocalStorageUtil.setItem(`feed_${r}`,JSON.stringify(u)),u}catch(s){log.error("Component",`Failed to fetch feed: ${s}`);try{const i=LocalStorageUtil.getItem(`feed_${r}`);if(i)return log.debug("Component",`Using expired cached feed data for ${r} due to fetch error`),JSON.parse(i)}catch(i){log.error("Component",`Failed to retrieve cached data: ${i}`)}throw s}};class FeedController{constructor(){O(this,"feedResultsCache",new Map);O(this,"cacheExpiryTime",1e3*60*5)}async fetchAndParseFeed(e){try{const t=this.getCachedFeedResults(e);if(t)return log.debug("Component",`Returning cached results for URL: ${e}`),t;log.debug("Component",`Fetching feed for URL: ${e}`);const s=await fetchFeed$1(e);if(s){const i=this.convertFeedResults(s);return this.cacheFeedResults(e,i),i}return null}catch(t){return console.error(`Failed to fetch and parse feed for URL: ${e}`,t),null}}convertFeedResults(e){return{feeds:e.feeds.map(s=>({id:s.id,title:s.title,link:s.link,pubDate:s.pubDate,description:s.description||"",content:s.content||"",feedListId:s.feedListId,author:s.author,categories:s.categories,media:s.media})),fetchedAt:new Date().toISOString()}}cacheFeedResults(e,t){this.feedResultsCache.set(e,t),log.debug("Component",`Feed fetched and cached for URL: ${e}`)}getFeedResults(e){try{const t=this.getCachedFeedResults(e);return t?(log.debug("Component",`Returning cached results for URL: ${e}`),t):(console.warn(`No cached results found for URL: ${e}`),null)}catch(t){return console.error(`Failed to get feed results for URL: ${e}`,t),null}}getCachedFeedResults(e){const t=this.feedResultsCache.get(e);if(t){if(new Date().getTime()-new Date(t.fetchedAt).getTime()<this.cacheExpiryTime)return t;log.debug("Component",`Cache expired for URL: ${e}`),this.feedResultsCache.delete(e)}return null}clearCache(){log.debug("Component","Clearing feed results cache"),this.feedResultsCache.clear()}removeCacheEntry(e){this.feedResultsCache.has(e)?(log.debug("Component",`Removing cache entry for URL: ${e}`),this.feedResultsCache.delete(e)):console.warn(`No cache entry found for URL: ${e}`)}getCacheStatus(){const e={};return this.feedResultsCache.forEach((t,s)=>{e[s]=t.fetchedAt}),e}}const FeedController$1=new FeedController,mainstreamUrls=["https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml","https://feeds.bbci.co.uk/news/rss.xml","https://www.npr.org/rss/rss.php?id=1001","https://www.reddit.com/r/news/.rss","https://www.aljazeera.com/xml/rss/all.xml","https://rss.cnn.com/rss/edition.rss","https://www.theguardian.com/world/rss","https://www.washingtonpost.com/rss/world","https://www.bloomberg.com/feed/podcast/etf-report.xml","https://www.ft.com/?format=rss"];mainstreamUrls.map((r,e)=>({id:`ms-${e+1}`,title:`Mainstream Source ${e+1}`,link:r,pubDate:`2023-01-${String(e+1).padStart(2,"0")}`,description:`Mainstream news source ${e+1}`,content:`Content from mainstream source ${e+1}`,feedListId:"1"}));const DefaultFeeds=DefaultFeeds$1,getTextContent$1=(r,e,t)=>{try{const s=r.getElementsByTagName(e)[0];return s?s.textContent||t:(["content:encoded","content","author","media:content","media:thumbnail","enclosure","dc:creator","managingEditor","webMaster","subtitle","summary","pubDate","description","published","updated"].includes(e)||console.warn(`Element with tag name '${e}' not found in element '${r.tagName}'. Returning default value.`),t)}catch(s){return console.error(`Error getting text content for tag name '${e}' in element '${r.tagName}':`,s),t}},getContentWithFallback=(r,e="")=>{var t;try{const s=["content:encoded","content","description","summary","subtitle"];for(const i of s){const a=r.getElementsByTagName(i)[0];if(a&&((t=a.textContent)!=null&&t.trim())){let l=a.textContent.trim();if(i==="description"&&l.length>100)return l;if(i!=="description"&&l.length>0)return l;i==="description"&&!e&&(e=l)}}return e}catch(s){return console.error(`Error getting content with fallback in element '${r.tagName}':`,s),e}},getAuthorWithFallback=(r,e="")=>{var t;try{const s=["dc:creator","author","managingEditor","webMaster","creator"];for(const i of s){const a=r.getElementsByTagName(i)[0];if(a&&((t=a.textContent)!=null&&t.trim()))return a.textContent.trim()}return e}catch(s){return console.error(`Error getting author with fallback in element '${r.tagName}':`,s),e}},getMediaWithFallback=r=>{try{const e=[],t=["media:content","enclosure","media:thumbnail","image"];for(const s of t){const i=r.getElementsByTagName(s);Array.from(i).forEach(a=>{var p;const l=a.getAttribute("url")||a.getAttribute("href")||((p=a.textContent)==null?void 0:p.trim()),u=a.getAttribute("type")||a.getAttribute("medium")||"unknown";l&&e.push({url:l,type:u})})}return e}catch(e){return console.error(`Error getting media with fallback in element '${r.tagName}':`,e),[]}},getAllTextContents$1=(r,e)=>{const t=r.getElementsByTagName(e),s=[];return Array.from(t).forEach(i=>{i.textContent&&s.push(i.textContent)}),s},parseFeedData$3=(r,e)=>{const t=[],s=r.getElementsByTagName("item");if(s.length>0&&Array.from(s).forEach((i,a)=>{try{const l={id:`${e}-${a}`,name:getTextContent$1(r.documentElement,"title","No title"),url:e,title:getTextContent$1(i,"title","No title"),link:getTextContent$1(i,"link",e),pubDate:getTextContent$1(i,"pubDate",new Date().toISOString()),description:getTextContent$1(i,"description",""),content:getContentWithFallback(i,getTextContent$1(i,"description","")),feedListId:"1",author:getAuthorWithFallback(i,""),categories:getAllTextContents$1(i,"category"),media:getMediaWithFallback(i)};t.push(l)}catch(l){console.warn(`Error parsing RSS item ${a} from ${e}:`,l)}}),t.length===0){const i=r.getElementsByTagName("entry");Array.from(i).forEach((a,l)=>{try{const u={id:`${e}-${l}`,name:getTextContent$1(r.documentElement,"title","No title"),url:e,title:getTextContent$1(a,"title","No title"),link:getAtomLink(a)||e,pubDate:getTextContent$1(a,"published",getTextContent$1(a,"updated",new Date().toISOString())),description:getTextContent$1(a,"summary",getTextContent$1(a,"content","")),content:getContentWithFallback(a,getTextContent$1(a,"summary","")),feedListId:"1",author:getAtomAuthor(a)||getAuthorWithFallback(a,""),categories:getAllTextContents$1(a,"category"),media:getMediaWithFallback(a)};t.push(u)}catch(u){console.warn(`Error parsing Atom entry ${l} from ${e}:`,u)}})}return t},getAtomLink=r=>{const e=r.getElementsByTagName("link");for(let t=0;t<e.length;t++){const s=e[t],i=s.getAttribute("href"),a=s.getAttribute("rel");if(i&&(!a||a==="alternate"))return i}return""},getAtomAuthor=r=>{const e=r.getElementsByTagName("author")[0];if(e){const t=getTextContent$1(e,"name",""),s=getTextContent$1(e,"email","");return t||s||""}return""},isValidXML=r=>{if(r.includes("<?xml")||r.includes("<rss")||r.includes("<feed")||r.includes("<channel"))return!0;try{return new DOMParser().parseFromString(r,"application/xml").getElementsByTagName("parsererror").length===0}catch{return!1}},getJsonValue=(r,e,t)=>{try{return r&&Object.prototype.hasOwnProperty.call(r,e)?r[e]:(console.warn(`Key '${e}' not found in JSON object. Returning default value.`),t)}catch(s){return console.error(`Error getting JSON value for key '${e}':`,s),t}},getJsonArray=(r,e)=>{try{return r&&Object.prototype.hasOwnProperty.call(r,e)&&Array.isArray(r[e])?r[e]:(console.warn(`Key '${e}' not found or is not an array in JSON object. Returning empty array.`),[])}catch(t){return console.error(`Error getting JSON array for key '${e}':`,t),[]}},parseFeedData$2=(r,e)=>{const t=getJsonArray(r,"items"),s=[];return t.forEach((i,a)=>{const l={id:`${e}-${a}`,name:"JSON Feed",url:e,title:getJsonValue(i,"title","No title"),link:getJsonValue(i,"link",e),pubDate:new Date(getJsonValue(i,"pubDate",new Date().toISOString())).toISOString(),description:getJsonValue(i,"description",""),content:getJsonValue(i,"content",""),feedListId:"1",author:getJsonValue(i,"author",""),categories:getJsonArray(i,"categories"),media:getJsonArray(i,"media").map(u=>({url:getJsonValue(u,"url",""),type:getJsonValue(u,"type","")}))};s.push(l)}),s},isValidJSON=r=>{if(r.includes("export ")||r.includes("function ")||r.includes("import ")||r.includes("const ")||!r.trim().startsWith("{")&&!r.trim().startsWith("["))return!1;try{return JSON.parse(r),!0}catch{return!1}},parseTxtContent=r=>{const e=r.split(`
`),t=[];return e.forEach(s=>{const i=s.split("|");if(i.length>=5){const a={title:i[0],link:i[1],pubDate:i[2],description:i[3],content:i[4],author:i[5]||"",categories:i[6]?i[6].split(","):[],media:i[7]?i[7].split(",").map(l=>{const[u,p]=l.split(";");return{url:u,type:p}}):[]};t.push(a)}}),t},parseFeedData$1=(r,e)=>{const t=parseTxtContent(r),s=[];return t.forEach((i,a)=>{let l;try{if(i.pubDate){const p=new Date(i.pubDate);l=isNaN(p.getTime())?new Date().toISOString():p.toISOString()}else l=new Date().toISOString()}catch(p){console.warn("Date parsing error for TXT feed item:",p),l=new Date().toISOString()}const u={id:`${e}-${a}`,name:"TXT Feed",url:e,title:i.title||"No title",link:i.link||e,pubDate:l,description:i.description||"",content:i.content||"",feedListId:"1",author:i.author||"",categories:i.categories||[],media:i.media||[]};s.push(u)}),s},isValidTXT=r=>r.includes("export ")||r.includes("function ")||r.includes("</")||r.includes("<?xml")||r.includes("<rss")||r.includes("<feed")||r.includes("<html")?!1:r.trim().length>0,getTextContent=(r,e,t)=>{try{const s=r.querySelector(e);return s?s.textContent||t:(console.warn(`Element with tag name '${e}' not found in element '${r.tagName}'. Returning default value.`),t)}catch(s){return console.error(`Error getting text content for tag name '${e}' in element '${r.tagName}':`,s),t}},getAttributeValue=(r,e,t)=>{try{const s=r.getAttribute(e);return s||(console.warn(`Attribute '${e}' not found on element '${r.tagName}'. Returning default value.`),t)}catch(s){return console.error(`Error getting attribute value for attribute '${e}' in element '${r.tagName}':`,s),t}},getAllTextContents=(r,e)=>{const t=r.querySelectorAll(e),s=[];return t.forEach(i=>{i.textContent&&s.push(i.textContent)}),s},getTextContentWithFallback=(r,e,t,s)=>{const i=getTextContent(r,e,"");return i||getTextContent(r,t,s)},getElementsByTagName=(r,e)=>r.querySelectorAll(e),parseFeedData=(r,e,t)=>{const s=getElementsByTagName(r,"item"),i=[];return s.forEach((a,l)=>{try{const u={id:`${e}-${l}`,name:"HTML Feed",url:e,title:getTextContent(a,"title","No title"),link:getTextContent(a,"link",e),pubDate:getTextContent(a,"pubDate",new Date().toISOString()),description:getTextContent(a,"description",""),content:getTextContentWithFallback(a,"content:encoded","content",""),feedListId:t,author:getTextContent(a,"author",""),categories:getAllTextContents(a,"category"),media:extractMedia(a)};i.push(u)}catch(u){console.error(`Error parsing item at index ${l}:`,u)}}),i},extractMedia=r=>{const e=getElementsByTagName(r,"media\\:content"),t=[];return e.forEach(s=>{const i=getAttributeValue(s,"url",""),a=getAttributeValue(s,"type","unknown");i&&t.push({url:i,type:a})}),t},isValidHTML=r=>!new DOMParser().parseFromString(r,"text/html").querySelector("parsererror"),handleFetchError=(r,e)=>{r.name==="AbortError"?console.warn(`Fetch aborted for URL: ${e}`):r.message.includes("PR_END_OF_FILE_ERROR")?console.error(`PR_END_OF_FILE_ERROR encountered for URL: ${e}. This might be due to a network issue or server misconfiguration.`):r.message.includes("NetworkError")?console.error(`Network error encountered for URL: ${e}. Please check your internet connection.`):r.message.includes("Failed to fetch")?console.error(`Failed to fetch URL: ${e}. This might be due to a CORS issue or the server being down.`):r.message.includes("404")?console.error(`404 Not Found error for URL: ${e}. The requested resource could not be found.`):r.message.includes("500")?console.error(`500 Internal Server Error for URL: ${e}. The server encountered an unexpected condition.`):r.message.includes("502")?console.error(`502 Bad Gateway error for URL: ${e}. The server received an invalid response from the upstream server.`):r.message.includes("503")?console.error(`503 Service Unavailable error for URL: ${e}. The server is currently unable to handle the request.`):r.message.includes("504")?console.error(`504 Gateway Timeout error for URL: ${e}. The server did not receive a timely response from the upstream server.`):r.message.includes("TypeError")?console.error(`TypeError encountered for URL: ${e}. This might be due to an invalid response or a network issue.`):console.error(`Error fetching URL: ${e}`,r)},handleXMLParsingError=(r,e,t)=>{e.message.includes("mismatched tag")?console.warn(`Mismatched tag error in XML data fetched for URL: ${r}`):e.message.includes("invalid token")?console.warn(`Invalid token error in XML data fetched for URL: ${r}`):e.message.includes("unclosed token")?console.warn(`Unclosed token error in XML data fetched for URL: ${r}`):e.message.includes("unexpected end of input")?console.warn(`Unexpected end of input error in XML data fetched for URL: ${r}`):e.message.includes("entity not defined")?console.warn(`Entity not defined error in XML data fetched for URL: ${r}`):e.message.includes("invalid character")?console.warn(`Invalid character error in XML data fetched for URL: ${r}`):e.message.includes("attribute without value")?console.warn(`Attribute without value error in XML data fetched for URL: ${r}`):e.message.includes("duplicate attribute")?console.warn(`Duplicate attribute error in XML data fetched for URL: ${r}`):e.message.includes("invalid attribute name")?console.warn(`Invalid attribute name error in XML data fetched for URL: ${r}`):e.message.includes("invalid element name")?console.warn(`Invalid element name error in XML data fetched for URL: ${r}`):e.message.includes("namespace error")?console.warn(`Namespace error in XML data fetched for URL: ${r}`):e.message.includes("parsererror")?(console.warn(`Parser error in XML data fetched for URL: ${r}`),console.warn(`XML Content: ${t}`)):(console.warn(`Unknown XML parsing error for URL: ${r}`,e),console.warn(`XML Content: ${t}`))},handleJSONParsingError=(r,e,t)=>{e.message.includes("Unexpected token")?console.warn(`Unexpected token error in JSON data fetched for URL: ${r}`):e.message.includes("Unexpected end of JSON input")?console.warn(`Unexpected end of JSON input error in JSON data fetched for URL: ${r}`):e.message.includes("Unexpected string in JSON")?console.warn(`Unexpected string error in JSON data fetched for URL: ${r}`):e.message.includes("Unexpected number in JSON")?console.warn(`Unexpected number error in JSON data fetched for URL: ${r}`):e.message.includes("Unexpected boolean in JSON")?console.warn(`Unexpected boolean error in JSON data fetched for URL: ${r}`):e.message.includes("Unexpected null in JSON")?console.warn(`Unexpected null error in JSON data fetched for URL: ${r}`):e.message.includes("Unexpected character in JSON")?console.warn(`Unexpected character error in JSON data fetched for URL: ${r}`):console.warn(`Unknown JSON parsing error for URL: ${r}`,e),console.warn(`JSON Content: ${t}`)},handleTXTParsingError=(r,e,t)=>{e.message.includes("Unexpected token")?console.warn(`Unexpected token error in TXT data fetched for URL: ${r}`):e.message.includes("Unexpected end of input")?console.warn(`Unexpected end of input error in TXT data fetched for URL: ${r}`):e.message.includes("Invalid character")?console.warn(`Invalid character error in TXT data fetched for URL: ${r}`):e.message.includes("Encoding error")?console.warn(`Encoding error in TXT data fetched for URL: ${r}`):console.warn(`Unknown TXT parsing error for URL: ${r}`,e),console.warn(`TXT Content: ${t}`)},handleHTMLParsingError=(r,e,t)=>{e.message.includes("Unexpected token")?console.warn(`Unexpected token error in HTML data fetched for URL: ${r}`):e.message.includes("Unexpected end of input")?console.warn(`Unexpected end of input error in HTML data fetched for URL: ${r}`):e.message.includes("Invalid character")?console.warn(`Invalid character error in HTML data fetched for URL: ${r}`):e.message.includes("Encoding error")?console.warn(`Encoding error in HTML data fetched for URL: ${r}`):e.message.includes("Unclosed tag")?console.warn(`Unclosed tag error in HTML data fetched for URL: ${r}`):e.message.includes("Mismatched tag")?console.warn(`Mismatched tag error in HTML data fetched for URL: ${r}`):console.warn(`Unknown HTML parsing error for URL: ${r}`,e),console.warn(`HTML Content: ${t}`)},PROXY_CONFIG={vercel:"/api/proxy-feed?url=",fallback:["https://api.allorigins.win/get?url=","https://api.codetabs.com/v1/proxy?quest=","https://cors-anywhere.herokuapp.com/"],local:"/api/proxy-feed?url="},getProxyUrl=r=>`${PROXY_CONFIG.vercel}${encodeURIComponent(r)}`,handleCORSError=(r,e)=>{console.error(`CORS error fetching feed from ${r}:`,e)},fetchWithRetry=async(r,e,t=3,s=300)=>{for(let i=1;i<=t;i++){try{const a=await fetch(r,e);if(a.ok)return a;console.warn(`Attempt ${i} failed: ${a.statusText}`)}catch(a){a instanceof TypeError&&a.message.includes("NetworkError")?handleCORSError(r,a):handleFetchError(a,r)}await new Promise(a=>setTimeout(a,s*i))}throw new Error(`Failed to fetch ${r} after ${t} attempts`)},fetchWithFallback=async(r,e)=>{const t=getProxyUrl(r);try{console.log(`Attempting to fetch via primary proxy: ${t}`);const s=await fetchWithRetry(t,e);if(s.ok)return s;throw new Error(`Primary proxy failed: ${s.status} ${s.statusText}`)}catch(s){console.warn("Primary proxy failed, trying fallbacks:",s);for(let i=0;i<PROXY_CONFIG.fallback.length;i++)try{const a=`${PROXY_CONFIG.fallback[i]}${encodeURIComponent(r)}`;console.log(`Attempting fallback proxy ${i+1}: ${a}`);const l=await fetchWithRetry(a,{...e,headers:{...e.headers,"X-Requested-With":"XMLHttpRequest"}});if(l.ok)return console.log(`Fallback proxy ${i+1} succeeded`),l}catch(a){console.warn(`Fallback proxy ${i+1} failed:`,a);continue}throw new Error(`All proxy attempts failed for URL: ${r}`)}},fetchFeed=async r=>{console.log(`Starting to fetch feed from URL: ${r}`);try{const e=await fetchWithFallback(r,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});if(!e.ok)throw new Error(`Failed to fetch feed: ${e.statusText}`);const t=e.headers.get("content-type"),s=await e.text();console.log(`Feed data fetched for URL: ${r}`,s);let i=[];if(t&&(t.includes("application/xml")||t.includes("text/xml"))){if(!isValidXML(s))return handleXMLParsingError(r,new Error("Invalid XML"),s),null;const u=new DOMParser().parseFromString(s,"application/xml");if(u.getElementsByTagName("parsererror").length>0)return handleXMLParsingError(r,new Error("Parser error"),s),null;i=parseFeedData$3(u,r)}else if(t&&t.includes("application/json")){if(!isValidJSON(s))return handleJSONParsingError(r,new Error("Invalid JSON"),s),null;const l=JSON.parse(s);i=parseFeedData$2(l,r)}else if(t&&t.includes("text/plain")){if(!isValidTXT(s))return handleTXTParsingError(r,new Error("Invalid TXT"),s),null;i=parseFeedData$1(s,r)}else if(t&&t.includes("text/html")){if(!isValidHTML(s))return handleHTMLParsingError(r,new Error("Invalid HTML"),s),null;const u=new DOMParser().parseFromString(s,"text/html");i=parseFeedData(u.documentElement,r,"1")}else throw new Error(`Unsupported content type: ${t}`);return{feeds:convertFeedsToFeedItems(i),fetchedAt:new Date().toISOString()}}catch(e){return e instanceof TypeError&&e.message.includes("NetworkError")?handleCORSError(r,e):(console.error("Error fetching feed:",e),handleFetchError(e,r)),null}};let FeedService$2=class{constructor(){O(this,"feeds",[]);O(this,"feedLists",[]);O(this,"feedsStorageKey","feeds");O(this,"feedListsStorageKey","feedLists");this.loadFeeds(),this.loadFeedLists(),this.updateFeedsFromServer()}loadFeeds(){try{log.debug("FeedService","Loading feeds from local storage");const e=LocalStorageUtil.getItem(this.feedsStorageKey);e&&e.length>0?this.feeds=e:this.feeds=this.getDefaultFeeds()}catch(e){log.error("FeedService","Failed to load feeds:",e),this.feeds=this.getDefaultFeeds(),this.saveFeeds(),log.debug("FeedService","Default feeds loaded due to error:",this.feeds)}}loadFeedLists(){try{log.debug("FeedService","Loading feed lists from local storage");const e=LocalStorageUtil.getItem(this.feedListsStorageKey);e&&e.length>0?this.feedLists=e:this.feedLists=this.getDefaultFeedLists()}catch(e){log.error("FeedService","Failed to load feed lists:",e),this.feedLists=this.getDefaultFeedLists(),this.saveFeedLists(),log.debug("FeedService","Default feed lists loaded due to error:",this.feedLists)}}saveFeeds(){try{log.debug("FeedService","Saving feeds to local storage"),LocalStorageUtil.setItem(this.feedsStorageKey,this.feeds),log.debug("FeedService","Feeds saved to local storage")}catch(e){log.error("FeedService","Failed to save feeds:",e)}}saveFeedLists(){try{log.debug("FeedService","Saving feed lists to local storage"),LocalStorageUtil.setItem(this.feedListsStorageKey,this.feedLists),log.debug("FeedService","Feed lists saved to local storage")}catch(e){log.error("FeedService","Failed to save feed lists:",e)}}getDefaultFeeds(){return convertFeedItemsToFeeds(DefaultFeeds)}resetToDefault(){log.debug("FeedService","Resetting feeds and feed lists to default"),this.feeds=this.getDefaultFeeds(),this.feedLists=this.getDefaultFeedLists(),this.saveFeeds(),this.saveFeedLists(),this.updateFeedsFromServer()}getDefaultFeedLists(){return[{id:"1",name:"Default List"}]}getFeeds(){return log.debug("FeedService","Getting all feeds"),this.feeds}getFeedLists(){log.debug("FeedService","Getting all feed lists");try{const e=this.feedLists;return log.debug("FeedService","Feed lists retrieved:",e),e}catch(e){return log.error("FeedService","Failed to get feed lists:",e),[]}}getFeedsByList(e){log.debug("FeedService",`Getting feeds for list ID: ${e}`);try{const t=this.feeds.filter(s=>s.feedListId===e);return log.debug("FeedService",`Feeds for list ID ${e}:`,t),t}catch(t){return log.error("FeedService",`Failed to get feeds for list ID ${e}:`,t),[]}}getFeedById(e){log.debug("FeedService",`Getting feed by ID: ${e}`);try{const t=this.feeds.find(s=>s.id===e);return log.debug("FeedService","Feed found:",t),t}catch(t){log.error("FeedService",`Failed to get feed by ID ${e}:`,t);return}}addFeed(e){try{log.debug("FeedService","Adding new feed:",e),this.feeds.push(e),this.saveFeeds()}catch(t){log.error("FeedService","Failed to add feed:",t)}}addFeedToList(e,t){try{log.debug("FeedService",`Adding feed to list ID: ${e}`,t),t.feedListId=e,this.addFeed(t)}catch(s){log.error("FeedService","Failed to add feed to list:",s)}}removeFeed(e){try{log.debug("FeedService",`Removing feed ID: ${e}`),this.feeds=this.feeds.filter(t=>t.id!==e),this.saveFeeds()}catch(t){log.error("FeedService","Failed to remove feed:",t)}}removeFeedFromList(e,t){try{log.debug("FeedService",`Removing feed ID: ${t} from list ID: ${e}`),this.feeds=this.feeds.filter(s=>s.id!==t||s.feedListId!==e),this.saveFeeds()}catch(s){log.error("FeedService","Failed to remove feed from list:",s)}}addFeedList(e){try{log.debug("FeedService","Adding new feed list:",e),this.feedLists.push(e),this.saveFeedLists()}catch(t){log.error("FeedService","Failed to add feed list:",t)}}removeFeedList(e){try{log.debug("FeedService",`Removing feed list ID: ${e}`),this.feedLists=this.feedLists.filter(t=>t.id!==e),this.saveFeedLists()}catch(t){log.error("FeedService","Failed to remove feed list:",t)}}async updateFeedsFromServer(){log.debug("FeedService","Updating feeds from server"),log.debug("FeedService","Current feeds:",this.feeds);const e=[];for(const t of this.feeds)try{const s=await fetchFeed(t.url);if(s){const i={...t,...s.feeds[0]};e.push(i)}else log.error("FeedService",`Failed to fetch feed from ${t.url}`),e.push(t)}catch(s){log.error("FeedService",`Error fetching feed from ${t.url}:`,s),e.push(t)}this.feeds=e,this.saveFeeds(),log.debug("FeedService","Feeds updated from server:",this.feeds)}getFeedResults(e){return FeedController$1.getFeedResults(e)}enrichFeedWithMetadata(e){return{...e,priority:this.determinePriority(e),contentType:this.determineContentType(e),region:this.determineRegion(e),tags:this.extractTags(e),timestamp:e.pubDate,source:e.name}}determinePriority(e){const t=[e.title,e.description,e.content].filter(Boolean).join(" ").toLowerCase();return t.includes("urgent")||t.includes("breaking")||t.includes("critical")||t.includes("emergency")||t.includes("immediate")?"CRITICAL":t.includes("important")||t.includes("alert")||t.includes("warning")||t.includes("security")||t.includes("threat")?"HIGH":t.includes("update")||t.includes("notice")||t.includes("announcement")||t.includes("report")?"MEDIUM":"LOW"}determineContentType(e){const t=[e.title,e.description,e.content,e.name].filter(Boolean).join(" ").toLowerCase();return t.includes("threat")||t.includes("attack")||t.includes("cyber")||t.includes("malware")||t.includes("vulnerability")||t.includes("exploit")?"THREAT":t.includes("intelligence")||t.includes("intel")||t.includes("classified")||t.includes("analysis")||t.includes("assessment")||t.includes("briefing")?"INTEL":t.includes("alert")||t.includes("warning")||t.includes("emergency")||t.includes("urgent")||t.includes("critical")?"ALERT":"NEWS"}determineRegion(e){const t=[e.title,e.description,e.content,e.name,e.url].filter(Boolean).join(" ").toLowerCase();return t.includes("usa")||t.includes("america")||t.includes("canada")||t.includes("mexico")||t.includes("brazil")||t.includes("us ")||t.includes(".us")||t.includes("washington")||t.includes("pentagon")?"AMERICAS":t.includes("europe")||t.includes("uk")||t.includes("britain")||t.includes("germany")||t.includes("france")||t.includes("nato")||t.includes("eu ")||t.includes("brexit")||t.includes("london")||t.includes("brussels")?"EUROPE":t.includes("china")||t.includes("japan")||t.includes("korea")||t.includes("india")||t.includes("asia")||t.includes("pacific")||t.includes("beijing")||t.includes("tokyo")||t.includes("seoul")||t.includes("sydney")?"ASIA_PACIFIC":"GLOBAL"}extractTags(e){const t=[];e.categories&&e.categories.length>0&&t.push(...e.categories);const s=[e.title,e.description,e.content].filter(Boolean).join(" ").toLowerCase();return["cybersecurity","malware","ransomware","phishing","breach","vulnerability","exploit","apt","nation-state","hacker","trojan","virus","backdoor","zero-day","mitigation","incident","response","forensics","detection","prevention"].forEach(a=>{s.includes(a)&&t.push(a.toUpperCase())}),[...new Set(t)]}};const FeedService$3=new FeedService$2,Skeleton=({width:r="100%",height:e="20px",borderRadius:t="4px",className:s=""})=>jsxRuntimeExports.jsx("div",{className:`skeleton ${s}`,style:{width:r,height:e,borderRadius:t}}),FeedItemSkeleton=()=>jsxRuntimeExports.jsxs("div",{className:"feed-item-skeleton",children:[jsxRuntimeExports.jsxs("div",{className:"skeleton-header",children:[jsxRuntimeExports.jsx(Skeleton,{width:"60%",height:"24px"}),jsxRuntimeExports.jsx(Skeleton,{width:"80px",height:"16px"})]}),jsxRuntimeExports.jsx(Skeleton,{width:"100%",height:"16px",className:"skeleton-description"}),jsxRuntimeExports.jsx(Skeleton,{width:"90%",height:"16px",className:"skeleton-description"}),jsxRuntimeExports.jsx(Skeleton,{width:"70%",height:"16px",className:"skeleton-description"}),jsxRuntimeExports.jsxs("div",{className:"skeleton-footer",children:[jsxRuntimeExports.jsx(Skeleton,{width:"120px",height:"14px"}),jsxRuntimeExports.jsx(Skeleton,{width:"80px",height:"14px"})]})]}),FeedListSkeleton=({count:r=5})=>jsxRuntimeExports.jsx("div",{className:"feed-list-skeleton",children:Array.from({length:r}).map((e,t)=>jsxRuntimeExports.jsx(FeedItemSkeleton,{},t))}),LoadingSpinner=({size:r="medium",color:e="#00bfff",text:t})=>jsxRuntimeExports.jsxs("div",{className:`loading-spinner ${r}`,children:[jsxRuntimeExports.jsx("div",{className:"spinner",style:{borderTopColor:e}}),t&&jsxRuntimeExports.jsx("span",{className:"spinner-text",children:t})]}),FeedVisualizerSkeleton=()=>jsxRuntimeExports.jsxs("div",{className:"feed-visualizer-skeleton",children:[jsxRuntimeExports.jsxs("div",{className:"feed-controls-skeleton",children:[jsxRuntimeExports.jsxs("div",{className:"status-bar-skeleton",children:[jsxRuntimeExports.jsx(Skeleton,{width:"120px",height:"20px"}),jsxRuntimeExports.jsx(Skeleton,{width:"140px",height:"16px"}),jsxRuntimeExports.jsx(Skeleton,{width:"160px",height:"16px"})]}),jsxRuntimeExports.jsxs("div",{className:"control-buttons-skeleton",children:[jsxRuntimeExports.jsx(Skeleton,{width:"80px",height:"32px",borderRadius:"6px"}),jsxRuntimeExports.jsx(Skeleton,{width:"100px",height:"32px",borderRadius:"6px"})]})]}),jsxRuntimeExports.jsxs("div",{className:"search-filter-skeleton",children:[jsxRuntimeExports.jsxs("div",{className:"filter-header-skeleton",children:[jsxRuntimeExports.jsx(Skeleton,{width:"150px",height:"24px"}),jsxRuntimeExports.jsx(Skeleton,{width:"60px",height:"20px"})]}),jsxRuntimeExports.jsx("div",{className:"search-section-skeleton",children:jsxRuntimeExports.jsx(Skeleton,{width:"100%",height:"40px",borderRadius:"6px"})}),jsxRuntimeExports.jsxs("div",{className:"filter-controls-skeleton",children:[jsxRuntimeExports.jsx(Skeleton,{width:"120px",height:"36px",borderRadius:"6px"}),jsxRuntimeExports.jsx(Skeleton,{width:"120px",height:"36px",borderRadius:"6px"}),jsxRuntimeExports.jsx(Skeleton,{width:"120px",height:"36px",borderRadius:"6px"})]}),jsxRuntimeExports.jsxs("div",{className:"filter-results-skeleton",children:[jsxRuntimeExports.jsx(Skeleton,{width:"100px",height:"16px"}),jsxRuntimeExports.jsx(Skeleton,{width:"80px",height:"16px"})]})]}),jsxRuntimeExports.jsx(FeedListSkeleton,{count:6})]}),ErrorOverlay=({title:r,message:e,onRetry:t,suggestions:s=[]})=>jsxRuntimeExports.jsx("div",{className:"error-overlay",children:jsxRuntimeExports.jsxs("div",{className:"error-content",children:[jsxRuntimeExports.jsx("h3",{className:"error-title",children:r}),jsxRuntimeExports.jsx("p",{className:"error-message",children:e}),s.length>0&&jsxRuntimeExports.jsxs("div",{className:"error-suggestions",children:[jsxRuntimeExports.jsx("h4",{children:" Suggestions:"}),jsxRuntimeExports.jsx("ul",{children:s.map((i,a)=>jsxRuntimeExports.jsx("li",{children:i},a))})]}),t&&jsxRuntimeExports.jsx("button",{onClick:t,className:"error-retry-btn",children:" Try Again"})]})}),IntelSources=({setSelectedFeedList:r})=>{const[e,t]=reactExports.useState([]),[s,i]=reactExports.useState(!0),[a,l]=reactExports.useState(null),[u,p]=reactExports.useState(null),[x,w]=reactExports.useState("list"),[E,R]=reactExports.useState("name"),[A,S]=reactExports.useState(!1),[N,k]=reactExports.useState(!0),[j,$]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{i(!0),l(null);try{const W=await FeedService$3.getFeedLists();t(W)}catch(W){console.error("Failed to load feed lists:",W),l("Failed to load feed lists")}finally{i(!1)}})()},[]),reactExports.useEffect(()=>{if(j){const G=setInterval(()=>{(async()=>{try{const q=await FeedService$3.getFeedLists();t(q)}catch(q){console.error("Auto-refresh failed:",q)}})()},3e4);return()=>clearInterval(G)}},[j]);const D=G=>{p(G),r(G)},z=()=>{const G=[...e].sort((W,q)=>{switch(E){case"activity":return q.lastActivity-W.lastActivity;case"priority":return q.priority-W.priority;default:return W.name.localeCompare(q.name)}});return A?G.filter(W=>W.isActive!==!1):G},L=G=>{const W=G.lastActivity||0,oe=Date.now()-W;return oe<3e5?"active":oe<18e5?"idle":"stale"},M=G=>{switch(G){case"active":return"#00ff41";case"idle":return"#ff9500";case"stale":return"#ff0040";default:return"#666666"}};return s?jsxRuntimeExports.jsxs("div",{className:"tactical-module module-intelligence animate-slide-in-left",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"INTEL SOURCES"})]}),jsxRuntimeExports.jsxs("div",{className:"header-status",children:[jsxRuntimeExports.jsx("span",{className:"status-dot scanning"}),jsxRuntimeExports.jsx("span",{className:"status-text",children:"SCANNING"})]})]}),jsxRuntimeExports.jsx("div",{className:"tactical-content",children:jsxRuntimeExports.jsxs("div",{className:"intel-loading-state",children:[jsxRuntimeExports.jsx(LoadingSpinner,{size:"medium",color:"#00ffaa"}),jsxRuntimeExports.jsx("span",{className:"loading-message",children:"ESTABLISHING CONNECTIONS..."})]})})]}):a?jsxRuntimeExports.jsxs("div",{className:"tactical-module module-intelligence animate-slide-in-left",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"INTEL SOURCES"})]}),jsxRuntimeExports.jsxs("div",{className:"header-status",children:[jsxRuntimeExports.jsx("span",{className:"status-dot error"}),jsxRuntimeExports.jsx("span",{className:"status-text",children:"ERROR"})]})]}),jsxRuntimeExports.jsx("div",{className:"tactical-content",children:jsxRuntimeExports.jsx("div",{className:"intel-error-state",children:jsxRuntimeExports.jsxs("div",{className:"error-content",children:[jsxRuntimeExports.jsx("span",{className:"error-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"error-message",children:a}),jsxRuntimeExports.jsxs("button",{className:"error-retry-btn",onClick:()=>window.location.reload(),children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"RETRY CONNECTION"})]})]})})})]}):jsxRuntimeExports.jsxs("div",{className:"tactical-module module-intelligence animate-slide-in-left",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"INTEL SOURCES"})]}),jsxRuntimeExports.jsxs("div",{className:"header-status",children:[jsxRuntimeExports.jsx("span",{className:`status-dot ${j?"active":"idle"}`}),jsxRuntimeExports.jsx("span",{className:"status-text",children:j?"LIVE":"STANDBY"})]})]}),jsxRuntimeExports.jsxs("div",{className:"tactical-content",children:[jsxRuntimeExports.jsxs("div",{className:"intel-controls-section",children:[jsxRuntimeExports.jsxs("div",{className:"controls-row",children:[jsxRuntimeExports.jsxs("div",{className:"view-controls",children:[jsxRuntimeExports.jsx("span",{className:"control-label",children:"VIEW:"}),jsxRuntimeExports.jsxs("select",{value:x,onChange:G=>w(G.target.value),className:"intel-select",title:"View Mode",children:[jsxRuntimeExports.jsx("option",{value:"list",children:"LIST"}),jsxRuntimeExports.jsx("option",{value:"grid",children:"GRID"}),jsxRuntimeExports.jsx("option",{value:"compact",children:"COMPACT"})]})]}),jsxRuntimeExports.jsxs("div",{className:"sort-controls",children:[jsxRuntimeExports.jsx("span",{className:"control-label",children:"SORT:"}),jsxRuntimeExports.jsxs("select",{value:E,onChange:G=>R(G.target.value),className:"intel-select",title:"Sort By",children:[jsxRuntimeExports.jsx("option",{value:"name",children:"NAME"}),jsxRuntimeExports.jsx("option",{value:"activity",children:"ACTIVITY"}),jsxRuntimeExports.jsx("option",{value:"priority",children:"PRIORITY"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"toggle-controls",children:[jsxRuntimeExports.jsxs("button",{className:`intel-toggle ${A?"active":""}`,onClick:()=>S(!A),title:"Filter Active Only",children:[jsxRuntimeExports.jsx("span",{className:"toggle-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"toggle-label",children:"ACTIVE"})]}),jsxRuntimeExports.jsxs("button",{className:`intel-toggle ${j?"active":""}`,onClick:()=>$(!j),title:"Auto Refresh",children:[jsxRuntimeExports.jsx("span",{className:"toggle-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"toggle-label",children:"REFRESH"})]}),jsxRuntimeExports.jsxs("button",{className:`intel-toggle ${N?"active":""}`,onClick:()=>k(!N),title:"Show Metrics",children:[jsxRuntimeExports.jsx("span",{className:"toggle-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"toggle-label",children:"METRICS"})]})]})]}),N&&jsxRuntimeExports.jsx("div",{className:"intel-metrics-panel",children:jsxRuntimeExports.jsxs("div",{className:"metrics-grid",children:[jsxRuntimeExports.jsxs("div",{className:"metric-card",children:[jsxRuntimeExports.jsx("div",{className:"metric-icon",children:""}),jsxRuntimeExports.jsxs("div",{className:"metric-info",children:[jsxRuntimeExports.jsx("div",{className:"metric-value",children:e.length}),jsxRuntimeExports.jsx("div",{className:"metric-label",children:"TOTAL SOURCES"})]})]}),jsxRuntimeExports.jsxs("div",{className:"metric-card",children:[jsxRuntimeExports.jsx("div",{className:"metric-icon",children:""}),jsxRuntimeExports.jsxs("div",{className:"metric-info",children:[jsxRuntimeExports.jsx("div",{className:"metric-value",children:e.filter(G=>L(G)==="active").length}),jsxRuntimeExports.jsx("div",{className:"metric-label",children:"ACTIVE"})]})]}),jsxRuntimeExports.jsxs("div",{className:"metric-card",children:[jsxRuntimeExports.jsx("div",{className:"metric-icon",children:""}),jsxRuntimeExports.jsxs("div",{className:"metric-info",children:[jsxRuntimeExports.jsx("div",{className:"metric-value",children:j?"ON":"OFF"}),jsxRuntimeExports.jsx("div",{className:"metric-label",children:"AUTO-REFRESH"})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"intel-sources-section",children:e.length===0?jsxRuntimeExports.jsx("div",{className:"intel-empty-state",children:jsxRuntimeExports.jsxs("div",{className:"empty-content",children:[jsxRuntimeExports.jsx("div",{className:"empty-icon",children:""}),jsxRuntimeExports.jsx("div",{className:"empty-title",children:"NO INTEL SOURCES"}),jsxRuntimeExports.jsx("div",{className:"empty-description",children:"Configure intelligence feeds to begin monitoring"}),jsxRuntimeExports.jsxs("button",{className:"empty-action-btn",children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:"+"}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"ADD SOURCE"})]})]})}):jsxRuntimeExports.jsx("div",{className:`intel-sources-list view-mode-${x}`,children:z().map((G,W)=>{const q=L(G),oe=M(q);return jsxRuntimeExports.jsxs("button",{onClick:()=>D(G.id),className:`intel-source-item ${u===G.id?"selected":""} status-${q}`,style:{animationDelay:`${W*.05}s`},children:[jsxRuntimeExports.jsxs("div",{className:"source-item-header",children:[jsxRuntimeExports.jsx("div",{className:"source-status",children:jsxRuntimeExports.jsx("span",{className:"status-dot",style:{backgroundColor:oe},title:`Status: ${q.toUpperCase()}`})}),jsxRuntimeExports.jsxs("div",{className:"source-info",children:[jsxRuntimeExports.jsx("div",{className:"source-name",children:G.name}),jsxRuntimeExports.jsxs("div",{className:"source-meta",children:[jsxRuntimeExports.jsxs("span",{className:"feed-count",children:[G.feedCount||0," feeds"]}),jsxRuntimeExports.jsxs("span",{className:"priority-badge",children:["P",G.priority||1]})]})]}),jsxRuntimeExports.jsx("div",{className:"source-controls",children:u===G.id&&jsxRuntimeExports.jsx("span",{className:"selected-arrow",children:""})})]}),x!=="compact"&&jsxRuntimeExports.jsxs("div",{className:"source-details",children:[jsxRuntimeExports.jsx("div",{className:"status-text",children:q==="active"?"LIVE FEED":q==="idle"?"IDLE":"STALE"}),x==="grid"&&jsxRuntimeExports.jsxs("div",{className:"source-stats",children:[jsxRuntimeExports.jsxs("span",{className:"stat-item",children:[jsxRuntimeExports.jsx("span",{className:"stat-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"stat-value",children:G.uptime||"99%"})]}),jsxRuntimeExports.jsxs("span",{className:"stat-item",children:[jsxRuntimeExports.jsx("span",{className:"stat-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"stat-value",children:G.bandwidth||"LOW"})]})]})]})]},G.id)})})})]})]})},LeftSidebar=({setSelectedFeedList:r})=>jsxRuntimeExports.jsx(IntelSources,{setSelectedFeedList:r});class FeedHealthService{static getFeedHealth(e){return this.getAllFeedHealth()[e]||null}static getAllFeedHealth(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{}}static updateFeedHealth(e,t,s,i,a){const l=this.getAllFeedHealth(),u=l[e],p=new Date;if(s)l[e]={feedId:e,feedUrl:t,status:i&&i>this.WARNING_THRESHOLD?"warning":"healthy",lastSuccessfulFetch:p,lastError:null,responseTime:i||null,uptime:this.calculateUptime(u,!0),errorCount:0,lastChecked:p};else{const x=((u==null?void 0:u.errorCount)||0)+1;l[e]={feedId:e,feedUrl:t,status:x>=this.ERROR_THRESHOLD?"error":"warning",lastSuccessfulFetch:(u==null?void 0:u.lastSuccessfulFetch)||null,lastError:a||"Unknown error",responseTime:(u==null?void 0:u.responseTime)||null,uptime:this.calculateUptime(u,!1),errorCount:x,lastChecked:p}}localStorage.setItem(this.STORAGE_KEY,JSON.stringify(l))}static getFeedHealthMetrics(){const e=this.getAllFeedHealth(),t=Object.values(e),s=t.length,i=t.filter(w=>w.status==="healthy").length,a=t.filter(w=>w.status==="warning").length,l=t.filter(w=>w.status==="error").length,u=t.map(w=>w.responseTime).filter(w=>w!==null),p=u.length>0?u.reduce((w,E)=>w+E,0)/u.length:0,x=t.length>0?t.reduce((w,E)=>w+E.uptime,0)/t.length:100;return{totalFeeds:s,healthyFeeds:i,warningFeeds:a,errorFeeds:l,averageResponseTime:p,overallUptime:x}}static calculateUptime(e,t){if(!e)return t?100:0;const s=10,i=t?0:e.errorCount;return Math.max(0,100-i/s*100)}static getFeedHealthIcon(e){switch(e){case"healthy":return"";case"warning":return"";case"error":return"";default:return""}}static clearHealthData(){localStorage.removeItem(this.STORAGE_KEY)}}O(FeedHealthService,"STORAGE_KEY","feed_health_data"),O(FeedHealthService,"WARNING_THRESHOLD",5e3),O(FeedHealthService,"ERROR_THRESHOLD",3);class FeedService{constructor(){O(this,"feeds",[]);O(this,"feedLists",[]);O(this,"feedsStorageKey","feeds");O(this,"feedListsStorageKey","feedLists");this.loadFeeds(),this.loadFeedLists(),this.updateFeedsFromServer()}loadFeeds(){try{log.debug("Component","Loading feeds from local storage");const e=LocalStorageUtil.getItem(this.feedsStorageKey);e&&e.length>0?this.feeds=e:this.feeds=this.getDefaultFeeds()}catch(e){console.error("Failed to load feeds:",e),this.feeds=this.getDefaultFeeds(),this.saveFeeds(),log.debug("Component","Default feeds loaded due to error:",this.feeds)}}loadFeedLists(){try{log.debug("Component","Loading feed lists from local storage");const e=LocalStorageUtil.getItem(this.feedListsStorageKey);e&&e.length>0?this.feedLists=e:this.feedLists=this.getDefaultFeedLists()}catch(e){console.error("Failed to load feed lists:",e),this.feedLists=this.getDefaultFeedLists(),this.saveFeedLists(),log.debug("Component","Default feed lists loaded due to error:",this.feedLists)}}saveFeeds(){try{log.debug("Component","Saving feeds to local storage"),LocalStorageUtil.setItem(this.feedsStorageKey,this.feeds),log.debug("Component","Feeds saved to local storage")}catch(e){console.error("Failed to save feeds:",e)}}saveFeedLists(){try{log.debug("Component","Saving feed lists to local storage"),LocalStorageUtil.setItem(this.feedListsStorageKey,this.feedLists),log.debug("Component","Feed lists saved to local storage")}catch(e){console.error("Failed to save feed lists:",e)}}getDefaultFeeds(){return convertFeedItemsToFeeds(DefaultFeeds)}resetToDefault(){log.debug("Component","Resetting feeds and feed lists to default"),this.feeds=this.getDefaultFeeds(),this.feedLists=this.getDefaultFeedLists(),this.saveFeeds(),this.saveFeedLists(),this.updateFeedsFromServer()}getDefaultFeedLists(){return[{id:"1",name:"Default List"}]}getFeeds(){return log.debug("Component","Getting all feeds"),this.feeds}getFeedLists(){log.debug("Component","Getting all feed lists");try{const e=this.feedLists;return log.debug("Component","Feed lists retrieved:",e),e}catch(e){return console.error("Failed to get feed lists:",e),[]}}getFeedsByList(e){log.debug("Component",`Getting feeds for list ID: ${e}`);try{const t=this.feeds.filter(s=>s.feedListId===e);return log.debug("Component",`Feeds for list ID ${e}:`,t),t}catch(t){return console.error(`Failed to get feeds for list ID ${e}:`,t),[]}}getFeedById(e){log.debug("Component",`Getting feed by ID: ${e}`);try{const t=this.feeds.find(s=>s.id===e);return log.debug("Component","Feed found:",t),t}catch(t){console.error(`Failed to get feed by ID ${e}:`,t);return}}addFeed(e){try{log.debug("Component","Adding new feed:",e),this.feeds.push(e),this.saveFeeds()}catch(t){console.error("Failed to add feed:",t)}}addFeedToList(e,t){try{log.debug("Component",`Adding feed to list ID: ${e}`,t),t.feedListId=e,this.addFeed(t)}catch(s){console.error("Failed to add feed to list:",s)}}removeFeed(e){try{log.debug("Component",`Removing feed ID: ${e}`),this.feeds=this.feeds.filter(t=>t.id!==e),this.saveFeeds()}catch(t){console.error("Failed to remove feed:",t)}}removeFeedFromList(e,t){try{log.debug("Component",`Removing feed ID: ${t} from list ID: ${e}`),this.feeds=this.feeds.filter(s=>s.id!==t||s.feedListId!==e),this.saveFeeds()}catch(s){console.error("Failed to remove feed from list:",s)}}addFeedList(e){try{log.debug("Component","Adding new feed list:",e),this.feedLists.push(e),this.saveFeedLists()}catch(t){console.error("Failed to add feed list:",t)}}removeFeedList(e){try{log.debug("Component",`Removing feed list ID: ${e}`),this.feedLists=this.feedLists.filter(t=>t.id!==e),this.saveFeedLists()}catch(t){console.error("Failed to remove feed list:",t)}}async updateFeedsFromServer(){log.debug("Component","Updating feeds from server"),log.debug("Component","Current feeds:",this.feeds);const e=[];for(const t of this.feeds){const s=Date.now();try{const i=await fetchFeed(t.url),a=Date.now()-s;if(i){const l={...t,...i.feeds[0]};e.push(l),FeedHealthService.updateFeedHealth(t.id,t.url,!0,a)}else console.error(`Failed to fetch feed from ${t.url}`),e.push(t),FeedHealthService.updateFeedHealth(t.id,t.url,!1,void 0,"Feed fetch returned null")}catch(i){const a=Date.now()-s;console.error(`Error fetching feed from ${t.url}:`,i),e.push(t),FeedHealthService.updateFeedHealth(t.id,t.url,!1,a,i instanceof Error?i.message:"Unknown error")}}this.feeds=e,this.saveFeeds(),log.debug("Component","Feeds updated from server:",this.feeds)}getFeedResults(e){return FeedController$1.getFeedResults(e)}}const FeedService$1=new FeedService,kc=class kc{constructor(){O(this,"settings");O(this,"STORAGE_KEY","tactical-system-settings");O(this,"listeners",[]);this.settings=this.getDefaultSettings(),this.loadSettings()}static getInstance(){return this.instance||(this.instance=new kc),this.instance}getDefaultSettings(){return{theme:"dark",compactMode:!1,realTimeUpdates:!0,healthAlerts:!0,autoExport:!1,exportFormat:"json",exportSchedule:"manual",notificationLevel:"all",autoRefreshInterval:30,maxDataRetention:30}}loadSettings(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);this.settings={...this.getDefaultSettings(),...t}}}catch(e){console.error("Failed to load settings:",e),this.settings=this.getDefaultSettings()}}saveSettings(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.settings))}catch(e){console.error("Failed to save settings:",e)}}getSettings(){return{...this.settings}}getSetting(e){return this.settings[e]}updateSetting(e,t){this.settings[e]=t,this.saveSettings()}updateSettings(e){this.settings={...this.settings,...e},this.saveSettings()}validateSettings(e){const t=[];return e.autoRefreshInterval!==void 0&&(e.autoRefreshInterval<1||e.autoRefreshInterval>3600)&&t.push("Auto refresh interval must be between 1 and 3600 seconds"),e.maxDataRetention!==void 0&&(e.maxDataRetention<1||e.maxDataRetention>365)&&t.push("Data retention must be between 1 and 365 days"),e.theme!==void 0&&(["dark","night","combat"].includes(e.theme)||t.push("Invalid theme selection")),e.exportFormat!==void 0&&(["json","csv","pdf"].includes(e.exportFormat)||t.push("Invalid export format")),e.exportSchedule!==void 0&&(["manual","hourly","daily","weekly"].includes(e.exportSchedule)||t.push("Invalid export schedule")),e.notificationLevel!==void 0&&(["all","critical","none"].includes(e.notificationLevel)||t.push("Invalid notification level")),{isValid:t.length===0,errors:t}}resetToDefaults(){this.settings=this.getDefaultSettings(),this.saveSettings()}exportSettings(){return JSON.stringify(this.settings,null,2)}importSettings(e){try{const t=JSON.parse(e),s=this.validateSettings(t);return s.isValid?(this.settings={...this.getDefaultSettings(),...t},this.saveSettings(),!0):(console.error("Invalid settings:",s.errors),!1)}catch(t){return console.error("Failed to import settings:",t),!1}}subscribe(e){return this.listeners.push(e),()=>{const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}notifyListeners(){this.listeners.forEach(e=>e(this.getSettings()))}updateSettingWithNotification(e,t){this.updateSetting(e,t),this.notifyListeners()}updateSettingsWithNotification(e){this.updateSettings(e),this.notifyListeners()}};O(kc,"instance");let SettingsService=kc;const SystemControl=reactExports.memo(({onThemeChange:r,onCompactModeChange:e,onRealTimeUpdatesChange:t,onHealthAlertsChange:s,onAutoExportChange:i})=>{const{theme:a,compactMode:l,setTheme:u,setCompactMode:p}=useTheme(),[x,w]=reactExports.useState(),[E]=reactExports.useState(()=>SettingsService.getInstance());reactExports.useEffect(()=>{const j=E.getSettings();return w(j),E.subscribe(D=>{w(D)})},[E]);const R=reactExports.useCallback(j=>{u(j),E.updateSettingWithNotification("theme",j),r==null||r(j)},[u,E,r]),A=reactExports.useCallback(()=>{const j=!l;p(j),E.updateSettingWithNotification("compactMode",j),e==null||e(j)},[l,p,E,e]),S=reactExports.useCallback(()=>{if(!x)return;const j=!x.realTimeUpdates;E.updateSettingWithNotification("realTimeUpdates",j),t==null||t(j)},[x,E,t]),N=reactExports.useCallback(()=>{if(!x)return;const j=!x.healthAlerts;E.updateSettingWithNotification("healthAlerts",j),s==null||s(j)},[x,E,s]),k=reactExports.useCallback(()=>{if(!x)return;const j=!x.autoExport;E.updateSettingWithNotification("autoExport",j),i==null||i(j)},[x,E,i]);return x?jsxRuntimeExports.jsxs("div",{className:"tactical-module module-system-control",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"SYSTEM CONTROL"})]}),jsxRuntimeExports.jsxs("div",{className:"header-controls-micro",children:[jsxRuntimeExports.jsxs("select",{value:a,onChange:j=>R(j.target.value),className:"micro-select",title:"Theme",children:[jsxRuntimeExports.jsx("option",{value:"dark",children:"DARK"}),jsxRuntimeExports.jsx("option",{value:"night",children:"NIGHT"}),jsxRuntimeExports.jsx("option",{value:"combat",children:"COMBAT"})]}),jsxRuntimeExports.jsx("button",{className:`micro-btn ${l?"active":""}`,onClick:A,title:"Compact Mode",children:""}),jsxRuntimeExports.jsx("button",{className:`micro-btn ${x.realTimeUpdates?"active":""}`,onClick:S,title:"Real-time Updates",children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"tactical-content",children:jsxRuntimeExports.jsxs("div",{className:"system-controls-grid",children:[jsxRuntimeExports.jsxs("div",{className:"control-group",children:[jsxRuntimeExports.jsx("label",{className:"control-label",children:"ALERTS"}),jsxRuntimeExports.jsx("button",{className:`control-toggle ${x.healthAlerts?"active":""}`,onClick:N,children:x.healthAlerts?"":""})]}),jsxRuntimeExports.jsxs("div",{className:"control-group",children:[jsxRuntimeExports.jsx("label",{className:"control-label",children:"AUTO-EXPORT"}),jsxRuntimeExports.jsx("button",{className:`control-toggle ${x.autoExport?"active":""}`,onClick:k,children:x.autoExport?"":""})]})]})})]}):jsxRuntimeExports.jsx("div",{className:"tactical-module module-system-control",children:"Loading..."})}),TacticalFilters=({onFiltersChange:r,onApplyFilters:e,onSavePreset:t,onTimeRangeChange:s,filterPresets:i=["CRITICAL","INTEL","THREAT"]})=>{const{filterState:a,addFilter:l,removeFilter:u,isFilterActive:p,clearAllFilters:x,hasActiveFilters:w}=useFilters(),{applyPreset:E,applyCustomRange:R}=useTimeRangePresets(),[A,S]=reactExports.useState(!1),[N,k]=reactExports.useState(""),[j,$]=reactExports.useState(""),D=[{key:"1H",label:"1H",hours:1},{key:"6H",label:"6H",hours:6},{key:"24H",label:"24H",hours:24},{key:"7D",label:"7D",hours:168},{key:"30D",label:"30D",hours:720},{key:"CUSTOM",label:"CUSTOM",hours:0}],z=le=>{p(le)?u(le):l(le),r==null||r(a.activeFilters)},L=le=>{var Te;if(le==="CUSTOM"){S(!0);return}if(S(!1),E(le),s){const Ae={start:new Date(Date.now()-(((Te=D.find(we=>we.key===le))==null?void 0:Te.hours)||24)*60*60*1e3),end:new Date,label:le};s(Ae)}},M=()=>{if(N&&j){const le=new Date(N),Te=new Date(j);R(le,Te,"CUSTOM"),S(!1),s==null||s({start:le,end:Te,label:"CUSTOM"})}},G=()=>{x(),i.forEach(le=>l(le))},W=()=>{e==null||e(a.activeFilters)},q=()=>{t==null||t(a.activeFilters)},oe=()=>a.timeRange?a.timeRange.label:"ALL";return jsxRuntimeExports.jsxs("div",{className:"tactical-module module-filters",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"TACTICAL FILTERS"})]}),jsxRuntimeExports.jsxs("div",{className:"header-status",children:[jsxRuntimeExports.jsx("span",{className:`status-dot ${w?"active":"idle"}`}),jsxRuntimeExports.jsx("span",{className:"status-text",children:w?"FILTERING":"STANDBY"})]})]}),jsxRuntimeExports.jsxs("div",{className:"tactical-content",children:[jsxRuntimeExports.jsx("div",{className:"filter-controls-section",children:jsxRuntimeExports.jsxs("div",{className:"filter-quick-actions",children:[jsxRuntimeExports.jsxs("button",{className:"filter-action-btn clear",onClick:x,title:"Clear All Filters",children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"CLEAR ALL"})]}),jsxRuntimeExports.jsxs("button",{className:"filter-action-btn preset",onClick:G,title:"Load Preset Filters",children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"PRESET"})]}),jsxRuntimeExports.jsxs("button",{className:"filter-action-btn save",onClick:q,title:"Save Current Configuration",children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"SAVE"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"filter-categories-section",children:[jsxRuntimeExports.jsxs("div",{className:"filter-category-card",children:[jsxRuntimeExports.jsxs("div",{className:"category-header",children:[jsxRuntimeExports.jsx("span",{className:"category-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"category-title",children:"PRIORITY LEVELS"})]}),jsxRuntimeExports.jsx("div",{className:"filter-grid",children:[{key:"CRITICAL",label:"CRITICAL",color:"#ff0040"},{key:"HIGH",label:"HIGH",color:"#ff9500"},{key:"MEDIUM",label:"MEDIUM",color:"#ffd700"},{key:"LOW",label:"LOW",color:"#00ff41"}].map(le=>jsxRuntimeExports.jsxs("button",{className:`filter-tag ${p(le.key)?"active":""}`,onClick:()=>z(le.key),style:{"--filter-color":le.color},children:[jsxRuntimeExports.jsx("span",{className:"filter-indicator"}),jsxRuntimeExports.jsx("span",{className:"filter-label",children:le.label})]},le.key))})]}),jsxRuntimeExports.jsxs("div",{className:"filter-category-card",children:[jsxRuntimeExports.jsxs("div",{className:"category-header",children:[jsxRuntimeExports.jsx("span",{className:"category-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"category-title",children:"CONTENT TYPE"})]}),jsxRuntimeExports.jsx("div",{className:"filter-grid",children:[{key:"INTEL",label:"INTELLIGENCE",color:"#00ffaa"},{key:"NEWS",label:"NEWS",color:"#0099ff"},{key:"ALERT",label:"ALERT",color:"#ff6600"},{key:"THREAT",label:"THREAT",color:"#ff0040"}].map(le=>jsxRuntimeExports.jsxs("button",{className:`filter-tag ${p(le.key)?"active":""}`,onClick:()=>z(le.key),style:{"--filter-color":le.color},children:[jsxRuntimeExports.jsx("span",{className:"filter-indicator"}),jsxRuntimeExports.jsx("span",{className:"filter-label",children:le.label})]},le.key))})]}),jsxRuntimeExports.jsxs("div",{className:"filter-category-card",children:[jsxRuntimeExports.jsxs("div",{className:"category-header",children:[jsxRuntimeExports.jsx("span",{className:"category-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"category-title",children:"GEOGRAPHIC REGION"})]}),jsxRuntimeExports.jsx("div",{className:"filter-grid",children:[{key:"GLOBAL",label:"GLOBAL",color:"#ffffff"},{key:"AMERICAS",label:"AMERICAS",color:"#00ffaa"},{key:"EUROPE",label:"EUROPE",color:"#0099ff"},{key:"ASIA_PACIFIC",label:"ASIA-PAC",color:"#ff9500"}].map(le=>jsxRuntimeExports.jsxs("button",{className:`filter-tag ${p(le.key)?"active":""}`,onClick:()=>z(le.key),style:{"--filter-color":le.color},children:[jsxRuntimeExports.jsx("span",{className:"filter-indicator"}),jsxRuntimeExports.jsx("span",{className:"filter-label",children:le.label})]},le.key))})]})]}),jsxRuntimeExports.jsx("div",{className:"filter-advanced-section",children:jsxRuntimeExports.jsxs("div",{className:"time-range-panel",children:[jsxRuntimeExports.jsxs("div",{className:"panel-header",children:[jsxRuntimeExports.jsx("span",{className:"panel-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"panel-title",children:"TIME RANGE"}),jsxRuntimeExports.jsx("span",{className:"active-range-indicator",children:oe()})]}),jsxRuntimeExports.jsx("div",{className:"time-range-grid",children:D.map(le=>jsxRuntimeExports.jsx("button",{className:`time-range-btn ${oe()===le.key?"active":""}`,onClick:()=>L(le.key),children:le.label},le.key))}),A&&jsxRuntimeExports.jsxs("div",{className:"custom-time-range",children:[jsxRuntimeExports.jsxs("div",{className:"custom-range-inputs",children:[jsxRuntimeExports.jsxs("div",{className:"input-group",children:[jsxRuntimeExports.jsx("label",{className:"input-label",children:"START"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:N,onChange:le=>k(le.target.value),className:"time-input"})]}),jsxRuntimeExports.jsxs("div",{className:"input-group",children:[jsxRuntimeExports.jsx("label",{className:"input-label",children:"END"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:j,onChange:le=>$(le.target.value),className:"time-input"})]})]}),jsxRuntimeExports.jsxs("div",{className:"custom-range-actions",children:[jsxRuntimeExports.jsx("button",{className:"custom-range-btn apply",onClick:M,disabled:!N||!j,children:"APPLY"}),jsxRuntimeExports.jsx("button",{className:"custom-range-btn cancel",onClick:()=>S(!1),children:"CANCEL"})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"filter-summary-section",children:[jsxRuntimeExports.jsxs("div",{className:"active-filters-display",children:[jsxRuntimeExports.jsxs("div",{className:"summary-header",children:[jsxRuntimeExports.jsx("span",{className:"summary-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"summary-title",children:"ACTIVE FILTERS"}),jsxRuntimeExports.jsx("span",{className:"filter-count",children:a.activeFilters.size})]}),a.activeFilters.size>0?jsxRuntimeExports.jsx("div",{className:"active-filters-list",children:Array.from(a.activeFilters).map(le=>jsxRuntimeExports.jsxs("span",{className:"active-filter-tag",children:[le,jsxRuntimeExports.jsx("button",{className:"remove-filter-btn",onClick:()=>z(le),children:""})]},le))}):jsxRuntimeExports.jsx("div",{className:"no-filters-message",children:"No filters active - showing all content"})]}),jsxRuntimeExports.jsxs("div",{className:"filter-execution-panel",children:[jsxRuntimeExports.jsxs("button",{className:"apply-filters-btn",onClick:W,children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"APPLY FILTERS"})]}),jsxRuntimeExports.jsxs("button",{className:"save-preset-btn",onClick:q,children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"SAVE PRESET"})]})]})]})]})]})},Export=({onAutoExportChange:r,onExportSettingsOpen:e,onFormatSelect:t,onOptionsChange:s,onExecuteExport:i,initialAutoExport:a=!1,initialOptions:l={}})=>{const[u,p]=reactExports.useState(a),[x,w]=reactExports.useState(null),[E,R]=reactExports.useState({includeMetadata:!0,compress:!1,encrypt:!0,...l}),A=()=>{const $=!u;p($),r==null||r($)},S=()=>{e==null||e()},N=$=>{w($),t==null||t($)},k=$=>{const D={...E,[$]:!E[$]};R(D),s==null||s(D)},j=()=>{i==null||i(x,E)};return jsxRuntimeExports.jsxs("div",{className:"tactical-module module-export",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"EXPORT"})]}),jsxRuntimeExports.jsxs("div",{className:"header-controls-micro",children:[jsxRuntimeExports.jsx("button",{className:`micro-btn ${u?"active":""}`,onClick:A,title:"Auto Export",children:""}),jsxRuntimeExports.jsx("button",{className:"micro-btn",onClick:S,title:"Export Settings",children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"tactical-content",children:[jsxRuntimeExports.jsxs("div",{className:"export-quick-grid",children:[jsxRuntimeExports.jsx("button",{className:`export-btn-micro json ${x==="json"?"selected":""}`,onClick:()=>N("json"),children:"JSON"}),jsxRuntimeExports.jsx("button",{className:`export-btn-micro csv ${x==="csv"?"selected":""}`,onClick:()=>N("csv"),children:"CSV"}),jsxRuntimeExports.jsx("button",{className:`export-btn-micro xml ${x==="xml"?"selected":""}`,onClick:()=>N("xml"),children:"XML"}),jsxRuntimeExports.jsx("button",{className:`export-btn-micro pdf ${x==="pdf"?"selected":""}`,onClick:()=>N("pdf"),children:"PDF"})]}),jsxRuntimeExports.jsxs("div",{className:"export-options-micro",children:[jsxRuntimeExports.jsxs("div",{className:"option-row",children:[jsxRuntimeExports.jsx("span",{className:"option-label",children:"INCLUDE METADATA"}),jsxRuntimeExports.jsx("button",{className:`option-toggle ${E.includeMetadata?"active":""}`,onClick:()=>k("includeMetadata"),children:E.includeMetadata?"":""})]}),jsxRuntimeExports.jsxs("div",{className:"option-row",children:[jsxRuntimeExports.jsx("span",{className:"option-label",children:"COMPRESS"}),jsxRuntimeExports.jsx("button",{className:`option-toggle ${E.compress?"active":""}`,onClick:()=>k("compress"),children:E.compress?"":""})]}),jsxRuntimeExports.jsxs("div",{className:"option-row",children:[jsxRuntimeExports.jsx("span",{className:"option-label",children:"ENCRYPT"}),jsxRuntimeExports.jsx("button",{className:`option-toggle ${E.encrypt?"active":""}`,onClick:()=>k("encrypt"),children:E.encrypt?"":""})]})]}),jsxRuntimeExports.jsx("button",{className:"export-execute-btn",onClick:j,disabled:!x,children:" EXECUTE EXPORT"})]})]})},Health=({feedCount:r=0,onScan:e,onClean:t,onRepair:s})=>{const{healthState:i,performScan:a,performClean:l,performRepair:u,isOperationInProgress:p}=useHealth(),[,x]=reactExports.useState(""),[w,E]=reactExports.useState(null),R=i.connectionStatus,A=i.securityStatus,S=i.overallStatus,N=i.issues,k=i.metrics,j=reactExports.useCallback(async()=>{x("scan");try{const M=await a();E(M),e==null||e()}catch(M){console.error("Scan failed:",M)}},[a,e]),$=reactExports.useCallback(async()=>{x("clean");try{const M=await l();E(M),t==null||t()}catch(M){console.error("Clean failed:",M)}},[l,t]),D=reactExports.useCallback(async()=>{x("repair");try{const M=await u();E(M),s==null||s()}catch(M){console.error("Repair failed:",M)}},[u,s]),z=M=>{switch(M){case"OPTIMAL":case"ONLINE":case"SECURE":return"#00ff41";case"WARNING":case"CONNECTING":return"#ffa500";case"CRITICAL":case"OFFLINE":case"COMPROMISED":return"#ff0000";default:return"#ffffff"}},L=M=>{switch(M){case"ONLINE":return"online";case"SECURE":return"secure";case"ACTIVE":return"active";default:return""}};return jsxRuntimeExports.jsxs("div",{className:"tactical-module module-health",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"HEALTH"})]}),jsxRuntimeExports.jsxs("div",{className:"header-status",children:[jsxRuntimeExports.jsx("span",{className:"status-dot",style:{background:z(S)}}),jsxRuntimeExports.jsx("span",{className:"status-text",children:S})]})]}),jsxRuntimeExports.jsxs("div",{className:"tactical-content",children:[jsxRuntimeExports.jsxs("div",{className:"health-indicators-micro",children:[jsxRuntimeExports.jsxs("div",{className:"health-item",children:[jsxRuntimeExports.jsx("span",{className:"health-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"health-label",children:"CONNECTIONS"}),jsxRuntimeExports.jsx("span",{className:`health-status ${L(R)}`,children:R})]}),jsxRuntimeExports.jsxs("div",{className:"health-item",children:[jsxRuntimeExports.jsx("span",{className:"health-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"health-label",children:"SECURITY"}),jsxRuntimeExports.jsx("span",{className:`health-status ${L(A)}`,children:A})]}),jsxRuntimeExports.jsxs("div",{className:"health-item",children:[jsxRuntimeExports.jsx("span",{className:"health-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"health-label",children:"FEEDS"}),jsxRuntimeExports.jsxs("span",{className:`health-status ${L("ACTIVE")}`,children:[r," ACTIVE"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"diagnostic-actions",children:[jsxRuntimeExports.jsx("button",{className:`diagnostic-btn ${i.isScanning?"scanning":""}`,onClick:j,disabled:p,children:i.isScanning?" SCANNING...":" SCAN"}),jsxRuntimeExports.jsx("button",{className:`diagnostic-btn ${i.isCleaning?"cleaning":""}`,onClick:$,disabled:p,children:i.isCleaning?" CLEANING...":" CLEAN"}),jsxRuntimeExports.jsx("button",{className:`diagnostic-btn ${i.isRepairing?"repairing":""}`,onClick:D,disabled:p,children:i.isRepairing?" REPAIRING...":" REPAIR"})]}),N.length>0&&jsxRuntimeExports.jsxs("div",{className:"health-issues",children:[jsxRuntimeExports.jsxs("div",{className:"issues-header",children:[jsxRuntimeExports.jsxs("span",{className:"issues-count",children:[N.length," Issue",N.length!==1?"s":""]}),jsxRuntimeExports.jsxs("span",{className:"issues-critical",children:[N.filter(M=>M.severity==="critical").length," Critical"]})]}),jsxRuntimeExports.jsxs("div",{className:"issues-summary",children:[N.slice(0,3).map(M=>jsxRuntimeExports.jsxs("div",{className:`issue-item ${M.severity}`,children:[jsxRuntimeExports.jsx("span",{className:"issue-severity",children:M.severity.toUpperCase()}),jsxRuntimeExports.jsx("span",{className:"issue-title",children:M.title})]},M.id)),N.length>3&&jsxRuntimeExports.jsx("div",{className:"issue-item more",children:jsxRuntimeExports.jsxs("span",{className:"more-count",children:["+",N.length-3," more"]})})]})]}),w&&jsxRuntimeExports.jsxs("div",{className:`operation-result ${w.status}`,children:[jsxRuntimeExports.jsxs("div",{className:"result-header",children:[jsxRuntimeExports.jsx("span",{className:"result-type",children:w.type.toUpperCase()}),jsxRuntimeExports.jsx("span",{className:"result-status",children:w.status.toUpperCase()})]}),jsxRuntimeExports.jsxs("div",{className:"result-details",children:[jsxRuntimeExports.jsxs("span",{className:"result-duration",children:[w.duration,"ms"]}),w.itemsFixed!==void 0&&jsxRuntimeExports.jsxs("span",{className:"result-fixed",children:[w.itemsFixed," fixed"]})]}),w.recommendations.length>0&&jsxRuntimeExports.jsx("div",{className:"result-recommendations",children:w.recommendations.slice(0,2).map((M,G)=>jsxRuntimeExports.jsx("div",{className:"recommendation",children:M},G))})]}),jsxRuntimeExports.jsxs("div",{className:"health-metrics",children:[jsxRuntimeExports.jsxs("div",{className:"metric-item",children:[jsxRuntimeExports.jsx("span",{className:"metric-label",children:"RESPONSE"}),jsxRuntimeExports.jsxs("span",{className:"metric-value",children:[k.responseTime,"ms"]})]}),jsxRuntimeExports.jsxs("div",{className:"metric-item",children:[jsxRuntimeExports.jsx("span",{className:"metric-label",children:"MEMORY"}),jsxRuntimeExports.jsxs("span",{className:"metric-value",children:[k.memoryUsage,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"metric-item",children:[jsxRuntimeExports.jsx("span",{className:"metric-label",children:"UPTIME"}),jsxRuntimeExports.jsxs("span",{className:"metric-value",children:[Math.floor(k.uptime/60),"m"]})]})]})]})]})},RightSidebar=()=>{const[r,e]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{const S=await FeedService$1.getFeeds();e(S)}catch(S){console.error("Failed to load feeds for export:",S)}})()},[]);const t=A=>{log.debug("Component","Filters changed:",A)},s=A=>{log.debug("Component","Applying filters:",A)},i=A=>{log.debug("Component","Saving preset:",A)},a=A=>{log.debug("Component","Auto export changed:",A)},l=()=>{log.debug("Component","Export settings opened")},u=A=>{log.debug("Component","Export format selected:",A)},p=A=>{log.debug("Component","Export options changed:",A)},x=(A,S)=>{log.debug("Component","Executing export:",{format:A,options:S,feedCount:r.length})},w=()=>{log.debug("Component","Health scan initiated")},E=()=>{log.debug("Component","System clean initiated")},R=()=>{log.debug("Component","System repair initiated")};return jsxRuntimeExports.jsxs("div",{className:"tactical-sidebar-container animate-slide-in-right",children:[jsxRuntimeExports.jsx(SystemControl,{}),jsxRuntimeExports.jsx(TacticalFilters,{onFiltersChange:t,onApplyFilters:s,onSavePreset:i,filterPresets:["CRITICAL","INTEL","THREAT"]}),jsxRuntimeExports.jsx(Export,{onAutoExportChange:a,onExportSettingsOpen:l,onFormatSelect:u,onOptionsChange:p,onExecuteExport:x}),jsxRuntimeExports.jsx(Health,{feedCount:r.length,onScan:w,onClean:E,onRepair:R,connectionStatus:"ONLINE",securityStatus:"SECURE",overallStatus:"OPTIMAL"})]})},FeedItem=({feed:r})=>{const[e,t]=reactExports.useState(!1),[s,i]=reactExports.useState(!1);reactExports.useEffect(()=>{const x=setTimeout(()=>i(!0),100);return()=>clearTimeout(x)},[]);const a=x=>{try{return new Date(x).toLocaleString()}catch{return x}},l=(x,w=150)=>!x||x.length<=w?x:x.substring(0,w)+"...",u=()=>{t(!e)},p=x=>{try{return new URL(x).hostname.replace("www.","").split(".")[0].toUpperCase()}catch{return"UNKNOWN"}};return jsxRuntimeExports.jsxs("div",{className:`feed-item ${e?"expanded":""} ${s?"visible":"mounting"}`,children:[jsxRuntimeExports.jsxs("div",{className:"feed-item-header",children:[jsxRuntimeExports.jsx("div",{className:"feed-source-badge",children:p(r.link)}),jsxRuntimeExports.jsx("div",{className:"feed-timestamp",children:a(r.pubDate)})]}),jsxRuntimeExports.jsx("h3",{className:"feed-title",children:jsxRuntimeExports.jsx("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"feed-link",children:r.title})}),r.description&&jsxRuntimeExports.jsxs("div",{className:"feed-description",children:[jsxRuntimeExports.jsx("p",{children:e?r.description:l(r.description)}),r.description.length>150&&jsxRuntimeExports.jsx("button",{onClick:u,className:"expand-button",children:e?" Show Less":" Read More"})]}),jsxRuntimeExports.jsxs("div",{className:"feed-actions",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open(r.link,"_blank"),className:"action-button primary",children:" Open"}),jsxRuntimeExports.jsx("button",{onClick:()=>{var x;return(x=navigator.clipboard)==null?void 0:x.writeText(r.link)},className:"action-button",children:" Copy"}),jsxRuntimeExports.jsx("button",{onClick:()=>{log.debug("Component","Bookmark:",r.title)},className:"action-button",children:" Bookmark"})]})]})},xs=class xs{constructor(){O(this,"alerts",[]);O(this,"alertHistory",[]);O(this,"isMonitoring",!1);O(this,"notificationPermission","default");O(this,"subscribers",[]);this.loadAlerts(),this.requestNotificationPermission()}static getInstance(){return xs.instance||(xs.instance=new xs),xs.instance}async initialize(){await this.requestNotificationPermission(),this.startMonitoring()}async requestNotificationPermission(){"Notification"in window&&(this.notificationPermission=await Notification.requestPermission())}loadAlerts(){try{const e=localStorage.getItem("tactical-intel-alerts");if(e){const t=JSON.parse(e);this.alerts=t.map(s=>({...s,createdAt:new Date(s.createdAt),lastTriggered:s.lastTriggered?new Date(s.lastTriggered):void 0}))}}catch(e){console.error("Failed to load alerts from localStorage:",e),this.alerts=[]}}saveAlerts(){try{localStorage.setItem("tactical-intel-alerts",JSON.stringify(this.alerts))}catch(e){console.error("Failed to save alerts to localStorage:",e)}}loadAlertHistory(){try{const e=localStorage.getItem("tactical-intel-alert-history");if(e){const t=JSON.parse(e);this.alertHistory=t.map(s=>({...s,triggeredAt:new Date(s.triggeredAt)}))}}catch(e){console.error("Failed to load alert history from localStorage:",e),this.alertHistory=[]}}saveAlertHistory(){try{const e=this.alertHistory.sort((t,s)=>s.triggeredAt.getTime()-t.triggeredAt.getTime()).slice(0,1e3);localStorage.setItem("tactical-intel-alert-history",JSON.stringify(e))}catch(e){console.error("Failed to save alert history to localStorage:",e)}}createAlert(e){const t={...e,id:this.generateAlertId(),createdAt:new Date,triggerCount:0};return this.alerts.push(t),this.saveAlerts(),t.id}updateAlert(e,t){const s=this.alerts.findIndex(i=>i.id===e);return s===-1?!1:(this.alerts[s]={...this.alerts[s],...t},this.saveAlerts(),!0)}deleteAlert(e){const t=this.alerts.findIndex(s=>s.id===e);return t===-1?!1:(this.alerts.splice(t,1),this.saveAlerts(),!0)}getAlerts(){return[...this.alerts]}getAlert(e){return this.alerts.find(t=>t.id===e)}toggleAlert(e){const t=this.alerts.find(s=>s.id===e);return t?(t.active=!t.active,this.saveAlerts(),!0):!1}checkFeedItems(e){const t=[],s=this.alerts.filter(i=>i.active);for(const i of s)if(this.isAlertScheduleActive(i))for(const a of e){const l=this.checkKeywordMatches(i.keywords,a);if(l.length>0){if(i.sources&&i.sources.length>0){const p=this.extractFeedSource(a);if(!i.sources.includes(p))continue}const u={id:this.generateTriggerId(),alertId:i.id,triggeredAt:new Date,feedItem:{title:a.title||"",description:a.description||a.summary||"",link:a.link||a.url||"",source:this.extractFeedSource(a),pubDate:a.pubDate||a.published||new Date().toISOString()},matchedKeywords:l,priority:i.priority,acknowledged:!1};t.push(u),this.updateAlertTriggerStats(i.id),this.sendNotification(i,u)}}return t.length>0&&(this.alertHistory.push(...t),this.saveAlertHistory()),t}isAlertScheduleActive(e){const t=new Date;if(e.scheduling.snoozeUntil&&t<e.scheduling.snoozeUntil)return!1;if(e.scheduling.activeDays&&e.scheduling.activeDays.length>0){const s=t.getDay();if(!e.scheduling.activeDays.includes(s))return!1}if(e.scheduling.activeHours){const s=t.getHours()*60+t.getMinutes(),[i,a]=e.scheduling.activeHours.start.split(":").map(Number),[l,u]=e.scheduling.activeHours.end.split(":").map(Number),p=i*60+a,x=l*60+u;if(p<=x){if(s<p||s>x)return!1}else if(s<p&&s>x)return!1}return!0}checkKeywordMatches(e,t){const s=[t.title||"",t.description||t.summary||"",t.content||""].join(" ").toLowerCase();return e.filter(i=>{const a=i.toLowerCase().trim();if(a.includes(" and "))return a.split(" and ").every(u=>s.includes(u.trim()));if(a.includes(" or "))return a.split(" or ").some(u=>s.includes(u.trim()));if(a.startsWith("not ")){const l=a.substring(4);return!s.includes(l)}return s.includes(a)})}extractFeedSource(e){return e.source||e.feedTitle||e.feed||"Unknown Source"}updateAlertTriggerStats(e){const t=this.alerts.find(s=>s.id===e);t&&(t.triggerCount++,t.lastTriggered=new Date,this.saveAlerts())}sendNotification(e,t){const{notifications:s}=e;if(s.browser&&this.notificationPermission==="granted"){const i=` ${e.name}`,a=s.customMessage||`Alert triggered: ${t.feedItem.title.substring(0,100)}...`,l=new Notification(i,{body:a,icon:"/favicon.ico",badge:"/favicon.ico",tag:`alert-${e.id}`,requireInteraction:e.priority==="critical",data:{alertId:e.id,triggerId:t.id,link:t.feedItem.link}});l.onclick=()=>{window.focus(),window.open(t.feedItem.link,"_blank"),l.close()}}s.sound&&this.playAlertSound(s.soundFile||this.getDefaultSoundForPriority(e.priority))}playAlertSound(e){try{const t=new Audio(e);t.volume=.5,t.play().catch(console.error)}catch(t){console.error("Failed to play alert sound:",t)}}getDefaultSoundForPriority(e){const t={low:"/sounds/alert-low.mp3",medium:"/sounds/alert-medium.mp3",high:"/sounds/alert-high.mp3",critical:"/sounds/alert-critical.mp3"};return t[e]||t.medium}startMonitoring(){this.isMonitoring=!0}stopMonitoring(){this.isMonitoring=!1}isCurrentlyMonitoring(){return this.isMonitoring}getAlertHistory(e,t){this.loadAlertHistory();let s=e?this.alertHistory.filter(i=>i.alertId===e):this.alertHistory;return s=s.sort((i,a)=>a.triggeredAt.getTime()-i.triggeredAt.getTime()),t?s.slice(0,t):s}clearAlertHistory(e){e?this.alertHistory=this.alertHistory.filter(t=>t.alertId!==e):this.alertHistory=[],this.saveAlertHistory()}snoozeAlert(e,t){const s=this.alerts.find(a=>a.id===e);if(!s)return!1;const i=new Date;return i.setMinutes(i.getMinutes()+t),s.scheduling.snoozeUntil=i,this.saveAlerts(),!0}generateAlertId(){return`alert_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateTriggerId(){return`trigger_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}addAlert(e){const t={name:e.name,keywords:e.keywords||[],priority:e.level,active:e.enabled,sources:e.feedSources,notifications:{browser:e.notificationEnabled,sound:!1},scheduling:{activeDays:e.schedule==="weekdays"?[1,2,3,4,5]:void 0,activeHours:e.schedule==="business_hours"?{start:"09:00",end:"17:00"}:void 0}},s=this.createAlert(t),i=this.getAlert(s);return{id:i.id,name:i.name,keywords:i.keywords,level:i.priority,enabled:i.active,schedule:"always",feedSources:i.sources||[],notificationEnabled:i.notifications.browser,createdAt:i.createdAt,triggeredAt:i.lastTriggered}}updateAlertLegacy(e,t){if(!this.updateAlert(e,t))return null;const i=this.getAlert(e);return i?{id:i.id,name:i.name,keywords:i.keywords,level:i.priority,enabled:i.active,schedule:"always",feedSources:i.sources||[],notificationEnabled:i.notifications.browser,createdAt:i.createdAt,triggeredAt:i.lastTriggered}:null}clearAlerts(){this.alerts=[],this.saveAlerts()}clearSubscribers(){this.subscribers=[]}subscribe(e){return this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);t>-1&&this.subscribers.splice(t,1)}}checkForMatches(e){const t=this.checkFeedItems(e),s=[];for(const i of t){const a=this.getAlert(i.alertId);if(!a)continue;const l={id:a.id,name:a.name,keywords:a.keywords,level:a.priority,enabled:a.active,schedule:"always",feedSources:a.sources||[],notificationEnabled:a.notifications.browser,createdAt:a.createdAt,triggeredAt:a.lastTriggered};s.push({alert:l,feedItem:i.feedItem,matchedKeywords:i.matchedKeywords})}return s.length>0&&this.subscribers.forEach(i=>{try{i(s)}catch(a){console.error("Error in alert subscriber callback:",a)}}),s}};O(xs,"instance");let AlertService=xs;const useAlerts=()=>{const[r,e]=reactExports.useState([]),[t,s]=reactExports.useState([]),[i,a]=reactExports.useState(!1),[l]=reactExports.useState({totalAlerts:0,activeAlerts:0,totalTriggers:0,triggersToday:0}),[u,p]=reactExports.useState(!0),[x,w]=reactExports.useState(null),E=AlertService.getInstance();reactExports.useEffect(()=>{(async()=>{try{p(!0),await E.initialize(),R(),a(E.isCurrentlyMonitoring())}catch(q){w(q instanceof Error?q.message:"Failed to initialize alerts")}finally{p(!1)}})()},[]);const R=reactExports.useCallback(()=>{try{e(E.getAlerts()),s(E.getAlertHistory()),w(null)}catch(W){w(W instanceof Error?W.message:"Failed to refresh alert data")}},[E]),A=reactExports.useCallback(W=>{try{const q=E.createAlert(W);return R(),q}catch(q){throw w(q instanceof Error?q.message:"Failed to create alert"),q}},[E,R]),S=reactExports.useCallback((W,q)=>{try{const oe=E.updateAlert(W,q);return oe&&R(),oe}catch(oe){return w(oe instanceof Error?oe.message:"Failed to update alert"),!1}},[E,R]),N=reactExports.useCallback(W=>{try{const q=E.deleteAlert(W);return q&&R(),q}catch(q){return w(q instanceof Error?q.message:"Failed to delete alert"),!1}},[E,R]),k=reactExports.useCallback(W=>{try{const q=E.toggleAlert(W);return q&&R(),q}catch(q){return w(q instanceof Error?q.message:"Failed to toggle alert"),!1}},[E,R]),j=reactExports.useCallback(()=>{try{E.startMonitoring(),a(!0)}catch(W){w(W instanceof Error?W.message:"Failed to start monitoring")}},[E]),$=reactExports.useCallback(()=>{try{E.stopMonitoring(),a(!1)}catch(W){w(W instanceof Error?W.message:"Failed to stop monitoring")}},[E]),D=reactExports.useCallback((W,q)=>{try{return E.getAlertHistory(W,q)}catch(oe){return w(oe instanceof Error?oe.message:"Failed to get alert history"),[]}},[E]),z=reactExports.useCallback(W=>{try{E.clearAlertHistory(W),R()}catch(q){w(q instanceof Error?q.message:"Failed to clear alert history")}},[E,R]),L=reactExports.useCallback((W,q)=>{try{const oe=E.snoozeAlert(W,q);return oe&&R(),oe}catch(oe){return w(oe instanceof Error?oe.message:"Failed to snooze alert"),!1}},[E,R]),M=reactExports.useCallback(W=>{try{const q=t.map(oe=>oe.id===W?{...oe,acknowledged:!0}:oe);s(q)}catch(q){w(q instanceof Error?q.message:"Failed to acknowledge alert")}},[t]),G=reactExports.useCallback(W=>{try{const q=E.checkFeedItems(W);return q.length>0&&R(),q}catch(q){return w(q instanceof Error?q.message:"Failed to check feed items"),[]}},[E,R]);return{alerts:r,createAlert:A,updateAlert:S,deleteAlert:N,toggleAlert:k,isMonitoring:i,startMonitoring:j,stopMonitoring:$,alertHistory:t,getAlertHistory:D,clearAlertHistory:z,snoozeAlert:L,acknowledgeAlert:M,alertStats:l,checkFeedItems:G,loading:u,error:x}},useLoading=(r={})=>{const{initialMessage:e="Loading...",trackProgress:t=!1,minLoadingTime:s=500,onStart:i,onComplete:a,onError:l}=r,[u,p]=reactExports.useState({isLoading:!1,progress:t?0:void 0,message:e,error:null}),x=reactExports.useRef(null),w=reactExports.useRef(null),E=reactExports.useCallback((j,$)=>{if(j)x.current=Date.now(),p(D=>({...D,isLoading:!0,message:$||e,error:null,progress:t?0:void 0})),i==null||i();else{const D=x.current?Date.now()-x.current:0,z=Math.max(0,s-D);z>0?w.current=setTimeout(()=>{p(L=>({...L,isLoading:!1,progress:t?100:void 0})),a==null||a()},z):(p(L=>({...L,isLoading:!1,progress:t?100:void 0})),a==null||a())}},[e,t,s,i,a]),R=reactExports.useCallback((j,$)=>{p(D=>({...D,progress:Math.min(100,Math.max(0,j)),message:$||D.message}))},[]),A=reactExports.useCallback(j=>{p($=>({...$,message:j}))},[]),S=reactExports.useCallback(j=>{p($=>({...$,error:j,isLoading:!1})),j&&(l==null||l(j))},[l]),N=reactExports.useCallback(async(j,$)=>{try{E(!0,$);const D=await j();return E(!1),D}catch(D){const z=D instanceof Error?D.message:"An error occurred";throw S(z),D}},[E,S]),k=reactExports.useCallback(async(j,$)=>{try{E(!0,$);const D=await j(R);return E(!1),D}catch(D){const z=D instanceof Error?D.message:"An error occurred";throw S(z),D}},[E,S,R]);return reactExports.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),{...u,setLoading:E,setProgress:R,setMessage:A,setError:S,withLoading:N,withProgressLoading:k}},ws=class ws{constructor(){O(this,"config");O(this,"refreshTimers",new Map);O(this,"cache",new Map);O(this,"isLowPowerMode",!1);O(this,"performanceObserver");O(this,"memoryMonitor");this.config=this.getOptimalConfig(),this.detectSystemCapabilities(),this.initializeMonitoring()}static getInstance(){return ws.instance||(ws.instance=new ws),ws.instance}getOptimalConfig(){const e=this.isLowEndDevice();return{refreshIntervals:{feeds:e?10*60*1e3:5*60*1e3,health:e?60*1e3:30*1e3,alerts:e?5*60*1e3:2*60*1e3,search:e?1e3:500},caching:{feedCache:!0,healthCache:!0,searchCache:!0,maxCacheSize:e?50:100,cacheExpiry:e?5*60*1e3:2*60*1e3},throttling:{searchDelay:e?800:300,scrollThrottle:e?100:50,resizeThrottle:e?250:100},batching:{feedRequests:!0,healthChecks:!0,maxBatchSize:e?3:5},monitoring:{trackMemory:!0,trackPerformance:!0,alertThreshold:e?70:85}}}isLowEndDevice(){const e=navigator.hardwareConcurrency||1,t=navigator.deviceMemory||1,s=navigator.connection;return e<=2||t<=2||s&&s.effectiveType==="slow-2g"||s&&s.effectiveType==="2g"}detectSystemCapabilities(){if("memory"in performance){const e=performance.memory,t=e.usedJSHeapSize/1024/1024,s=e.totalJSHeapSize/1024/1024;t/s>.8&&this.enableLowPowerMode()}}initializeMonitoring(){this.config.monitoring.trackPerformance&&("PerformanceObserver"in window&&(this.performanceObserver=new PerformanceObserver(e=>{for(const t of e.getEntries())t.name==="first-contentful-paint"&&t.startTime>3e3&&(console.warn("Slow FCP detected, enabling performance mode"),this.enableLowPowerMode())}),this.performanceObserver.observe({entryTypes:["paint","navigation"]})),this.config.monitoring.trackMemory&&(this.memoryMonitor=setInterval(()=>{this.checkMemoryUsage()},3e4)))}checkMemoryUsage(){if("memory"in performance){const e=performance.memory,t=e.usedJSHeapSize/1024/1024,s=e.jsHeapSizeLimit/1024/1024,i=t/s*100;i>this.config.monitoring.alertThreshold&&(console.warn(`High memory usage: ${i.toFixed(1)}%`),this.enableLowPowerMode(),this.cleanupCache())}}enableLowPowerMode(){this.isLowPowerMode||(logger.debug("Component"," Enabling low power mode for better performance"),this.isLowPowerMode=!0,this.config.refreshIntervals.feeds*=2,this.config.refreshIntervals.health*=2,this.config.refreshIntervals.alerts*=2,this.config.caching.maxCacheSize=Math.floor(this.config.caching.maxCacheSize/2),this.cleanupCache(.5),window.dispatchEvent(new CustomEvent("performance:lowPowerMode",{detail:{enabled:!0}})))}disableLowPowerMode(){this.isLowPowerMode&&(logger.debug("Component"," Disabling low power mode"),this.isLowPowerMode=!1,this.config=this.getOptimalConfig(),window.dispatchEvent(new CustomEvent("performance:lowPowerMode",{detail:{enabled:!1}})))}setCache(e,t,s){if(!this.config.caching.feedCache)return;const i=Date.now(),a=s||this.config.caching.cacheExpiry;this.cache.size>=this.config.caching.maxCacheSize&&this.cleanupCache(.2),this.cache.set(e,{data:t,timestamp:i,ttl:a})}getCache(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data:null}cleanupCache(e=1){if(e>=1){this.cache.clear();return}const t=Array.from(this.cache.entries());t.sort((i,a)=>i[1].timestamp-a[1].timestamp);const s=Math.floor(t.length*e);for(let i=0;i<s;i++)this.cache.delete(t[i][0])}createTimer(e,t,s){this.clearTimer(e);const i=setInterval(t,s);this.refreshTimers.set(e,i)}clearTimer(e){const t=this.refreshTimers.get(e);t&&(clearInterval(t),this.refreshTimers.delete(e))}clearAllTimers(){this.refreshTimers.forEach(e=>clearInterval(e)),this.refreshTimers.clear()}throttle(e,t){let s=null,i=0;return(...a)=>{const l=Date.now(),u=t-(l-i);u<=0||u>t?(s&&(clearTimeout(s),s=null),i=l,e.apply(null,a)):s||(s=setTimeout(()=>{i=Date.now(),s=null,e.apply(null,a)},u))}}debounce(e,t){let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>e.apply(null,i),t)}}getRefreshInterval(e){return this.config.refreshIntervals[e]}getThrottleDelay(e){return this.config.throttling[e]}isCachingEnabled(){return this.config.caching.feedCache}isLowPower(){return this.isLowPowerMode}cleanup(){this.clearAllTimers(),this.cleanupCache(),this.performanceObserver&&this.performanceObserver.disconnect(),this.memoryMonitor&&clearInterval(this.memoryMonitor)}getMetrics(){return{cacheSize:this.cache.size,activeTimers:this.refreshTimers.size,isLowPowerMode:this.isLowPowerMode,config:this.config,memory:"memory"in performance?performance.memory:null}}};O(ws,"instance");let PerformanceManager=ws;const PerformanceManager$1=PerformanceManager.getInstance(),FeedVisualizer=reactExports.memo(({selectedFeedList:r})=>{const[e,t]=reactExports.useState([]),[s,i]=reactExports.useState(null),[a,l]=reactExports.useState(()=>SettingsIntegrationService.getGeneralSettings().autoRefresh),[u,p]=reactExports.useState(0),{getFilteredFeeds:x}=useFilters(),w=reactExports.useMemo(()=>{const L=`filtered-feeds-${r}-${e.length}`,M=PerformanceManager$1.getCache(L);if(M)return M;const G=e.map(q=>FeedService$3.enrichFeedWithMetadata(q)),W=x(G);return PerformanceManager$1.setCache(L,W,3e4),W},[e,x,r]),{isLoading:E,error:R,setLoading:A,setError:S}=useLoading({minLoadingTime:800,initialMessage:"Loading intelligence feeds..."}),{checkFeedItems:N,isMonitoring:k,alertStats:j}=useAlerts(),$=reactExports.useCallback(async(L=!0)=>{if(!r){t([]),A(!1);return}L&&(A(!0,"Loading intelligence feeds..."),S(null));try{log.debug("Component",`Loading feeds for list: ${r}`);const M=await FeedService$3.getFeedsByList(r);if(log.debug("Component",`Loaded ${M.length} feeds`),k&&M.length>0){log.debug("Component",` Checking ${M.length} feed items for alerts...`);const G=M.map(q=>({title:q.title,description:q.description||"",content:q.content||"",link:q.link,url:q.url,source:q.name,feedTitle:q.name,pubDate:q.pubDate,author:q.author,categories:q.categories})),W=N(G);W.length>0&&(log.debug("Component",` ${W.length} alert(s) triggered!`),p(W.length),setTimeout(()=>p(0),3e4))}t(M),i(new Date)}catch(M){console.error("Failed to load feeds:",M),S(`Failed to load feeds: ${M instanceof Error?M.message:"Unknown error"}`)}finally{A(!1)}},[r,k,N,A,S]);reactExports.useEffect(()=>{if(!a||!r)return;const L=SettingsIntegrationService.getGeneralSettings(),M=L.refreshInterval*1e3,G=setInterval(()=>{log.debug("Component",`Auto-refreshing feeds every ${L.refreshInterval} seconds...`),$(!1)},M);return()=>clearInterval(G)},[a,r,$]),reactExports.useEffect(()=>{$()},[$]);const D=()=>{$(!0)},z=()=>{l(!a)};return E?jsxRuntimeExports.jsx(FeedVisualizerSkeleton,{}):R?jsxRuntimeExports.jsx("div",{className:"feed-visualizer",children:jsxRuntimeExports.jsx(ErrorOverlay,{title:" Feed Load Error",message:R,onRetry:()=>$(!0),suggestions:["Check your internet connection","Verify the feed source is available","Try selecting a different feed list"]})}):jsxRuntimeExports.jsxs("div",{className:"feed-visualizer-container",children:[jsxRuntimeExports.jsxs("div",{className:"feed-controls tactical-header",style:{borderBottom:"1px solid rgba(0, 255, 170, 0.2)"},children:[jsxRuntimeExports.jsxs("div",{className:"status-bar",children:[jsxRuntimeExports.jsxs("span",{className:"feed-count text-accent font-semibold",children:[" ",w.length>0?w.length:e.length," FEEDS LOADED"]}),s&&jsxRuntimeExports.jsxs("span",{className:"last-updated text-secondary text-sm",children:[" UPDATED: ",s.toLocaleTimeString()]}),jsxRuntimeExports.jsx("span",{className:`alert-status text-sm ${k?"text-accent":"text-muted"}`,children:k?" ALERT MONITOR: ON":" ALERT MONITOR: OFF"}),u>0&&jsxRuntimeExports.jsxs("span",{className:"recent-alerts animate-pulse text-accent font-bold",children:[" ",u," ALERT",u>1?"S":""," TRIGGERED!"]}),j.activeAlerts>0&&jsxRuntimeExports.jsxs("span",{className:"active-alerts-count text-secondary text-sm",children:[" ",j.activeAlerts," ACTIVE ALERT",j.activeAlerts>1?"S":""]})]}),jsxRuntimeExports.jsxs("div",{className:"control-buttons",children:[jsxRuntimeExports.jsxs("button",{onClick:D,className:"filter-action-btn refresh",title:"Refresh feeds",children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"REFRESH"})]}),jsxRuntimeExports.jsxs("button",{onClick:z,className:`filter-action-btn ${a?"active":""}`,title:`Auto-refresh: ${a?"ON":"OFF"}`,children:[jsxRuntimeExports.jsx("span",{className:"btn-icon",children:a?"":""}),jsxRuntimeExports.jsx("span",{className:"btn-text",children:"AUTO-REFRESH"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"feed-content",children:e.length===0?jsxRuntimeExports.jsxs("div",{className:"no-feeds empty-state",children:[jsxRuntimeExports.jsx("div",{className:"empty-icon",children:""}),jsxRuntimeExports.jsx("div",{className:"empty-title text-lg font-semibold text-muted",children:"NO INTELLIGENCE AVAILABLE"}),jsxRuntimeExports.jsx("div",{className:"empty-description text-secondary",children:"Select a feed list from the sidebar to begin monitoring intelligence sources."})]}):jsxRuntimeExports.jsx("div",{className:"feed-scroll-container",children:w.map(L=>jsxRuntimeExports.jsx(FeedItem,{feed:L},L.id))})})]})}),CentralView=({selectedFeedList:r})=>jsxRuntimeExports.jsx("div",{className:"tactical-main",children:jsxRuntimeExports.jsxs("div",{className:"tactical-module module-intelligence animate-fade-in-up",children:[jsxRuntimeExports.jsxs("div",{className:"tactical-header-enhanced",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary",children:[jsxRuntimeExports.jsx("span",{className:"module-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"INTELLIGENCE FEED"})]}),jsxRuntimeExports.jsxs("div",{className:"header-status",children:[jsxRuntimeExports.jsx("span",{className:`status-dot ${r?"active":"idle"}`}),jsxRuntimeExports.jsx("span",{className:"status-text",children:r?"ACTIVE":"STANDBY"})]})]}),jsxRuntimeExports.jsx("div",{className:"tactical-content",style:{padding:0},children:jsxRuntimeExports.jsx(FeedVisualizer,{selectedFeedList:r})})]})}),QuickActions=({selectedFeedList:r,onRefreshAll:e,onExportData:t})=>{const[s,i]=reactExports.useState(!1),x=[{icon:"",label:"Refresh All",action:e,className:"refresh-action"},{icon:"",label:"Add Feed",action:()=>{const w=prompt(" Enter RSS Feed URL:");w&&(log.debug("Component","Adding feed:",w),alert("Feed addition functionality coming soon!"))},className:"add-action"},{icon:"",label:"Export",action:()=>{t()},className:"export-action"},{icon:"",label:"Settings",action:()=>{log.debug("Component","Opening settings..."),alert("Settings page coming soon!")},className:"settings-action"},{icon:"",label:"Fullscreen",action:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(w=>{console.error("Error entering fullscreen:",w)})},className:"fullscreen-action"}];return jsxRuntimeExports.jsxs("div",{className:`quick-actions ${s?"expanded":""}`,children:[jsxRuntimeExports.jsxs("button",{className:"quick-actions-toggle",onClick:()=>i(!s),title:"Quick Actions",children:[jsxRuntimeExports.jsx("span",{className:"toggle-icon",children:""}),s?"HIDE":"ACTIONS"]}),s&&jsxRuntimeExports.jsxs("div",{className:"quick-actions-panel",children:[jsxRuntimeExports.jsxs("div",{className:"panel-header",children:[jsxRuntimeExports.jsx("h4",{children:" Mission Control"}),r&&jsxRuntimeExports.jsxs("span",{className:"active-feed-info",children:[" ",r]})]}),jsxRuntimeExports.jsx("div",{className:"actions-grid",children:x.map((w,E)=>jsxRuntimeExports.jsxs("button",{className:`action-btn ${w.className}`,onClick:w.action,title:w.label,children:[jsxRuntimeExports.jsx("span",{className:"action-icon",children:w.icon}),jsxRuntimeExports.jsx("span",{className:"action-label",children:w.label})]},E))}),jsxRuntimeExports.jsxs("div",{className:"panel-footer",children:[jsxRuntimeExports.jsxs("div",{className:"system-status",children:[jsxRuntimeExports.jsx("span",{className:"status-indicator online",children:""}),jsxRuntimeExports.jsx("span",{className:"status-text",children:"System Online"})]}),jsxRuntimeExports.jsxs("div",{className:"last-sync",children:["Last Sync: ",new Date().toLocaleTimeString()]})]})]})]})},AlertNotificationPanel=({className:r=""})=>{const[e,t]=reactExports.useState([]),[s,i]=reactExports.useState(!1),{alertHistory:a,acknowledgeAlert:l,alertStats:u}=useAlerts();reactExports.useEffect(()=>{const A=a.filter(S=>!S.acknowledged).sort((S,N)=>N.triggeredAt.getTime()-S.triggeredAt.getTime()).slice(0,5);t(A)},[a]);const p=A=>{l(A)},x=()=>{e.forEach(A=>l(A.id))},w=A=>({low:"",medium:"",high:"",critical:""})[A]||"",E=A=>`priority-${A}`,R=A=>{const N=new Date().getTime()-A.getTime(),k=Math.floor(N/6e4),j=Math.floor(k/60);return j>0?`${j}h ago`:k>0?`${k}m ago`:"Just now"};return e.length===0?null:jsxRuntimeExports.jsxs("div",{className:`alert-notification-panel ${r} ${s?"collapsed":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"panel-header",children:[jsxRuntimeExports.jsxs("div",{className:"header-content",children:[jsxRuntimeExports.jsxs("span",{className:"panel-title",children:[" Active Alerts (",e.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"header-stats",children:[jsxRuntimeExports.jsxs("span",{className:"stat",children:["Today: ",u.triggersToday]}),jsxRuntimeExports.jsxs("span",{className:"stat",children:["Total: ",u.totalTriggers]})]})]}),jsxRuntimeExports.jsxs("div",{className:"panel-controls",children:[e.length>1&&jsxRuntimeExports.jsx("button",{className:"acknowledge-all-btn",onClick:x,title:"Acknowledge all alerts",children:" All"}),jsxRuntimeExports.jsx("button",{className:"collapse-btn",onClick:()=>i(!s),title:s?"Expand alerts":"Collapse alerts",children:s?"":""})]})]}),!s&&jsxRuntimeExports.jsx("div",{className:"panel-content",children:jsxRuntimeExports.jsx("div",{className:"alert-list",children:e.map(A=>jsxRuntimeExports.jsxs("div",{className:`alert-notification ${E(A.priority)}`,children:[jsxRuntimeExports.jsxs("div",{className:"alert-header",children:[jsxRuntimeExports.jsx("span",{className:"priority-icon",children:w(A.priority)}),jsxRuntimeExports.jsx("span",{className:"alert-time",children:R(A.triggeredAt)}),jsxRuntimeExports.jsx("button",{className:"acknowledge-btn",onClick:()=>p(A.id),title:"Acknowledge this alert",children:""})]}),jsxRuntimeExports.jsxs("div",{className:"alert-content",children:[jsxRuntimeExports.jsx("h4",{className:"alert-title",children:A.feedItem.title}),jsxRuntimeExports.jsxs("p",{className:"alert-source",children:[" ",A.feedItem.source]}),jsxRuntimeExports.jsxs("div",{className:"matched-keywords",children:[jsxRuntimeExports.jsx("span",{className:"keywords-label",children:"Keywords:"}),A.matchedKeywords.map((S,N)=>jsxRuntimeExports.jsx("span",{className:"keyword-tag",children:S},N))]})]}),jsxRuntimeExports.jsx("div",{className:"alert-actions",children:jsxRuntimeExports.jsx("button",{className:"view-source-btn",onClick:()=>window.open(A.feedItem.link,"_blank"),title:"View source article",children:" View"})})]},A.id))})})]})},HomePage=()=>{const[r,e]=reactExports.useState(null),t=()=>{window.location.reload()},s=()=>{const i={timestamp:new Date().toISOString(),selectedFeedList:r,exportedAt:new Date().toLocaleString()},a=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),l=URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download=`tactical-intel-export-${Date.now()}.json`,u.click(),URL.revokeObjectURL(l)};return jsxRuntimeExports.jsxs("div",{className:"home-page-container",children:[jsxRuntimeExports.jsx("div",{className:"tactical-sidebar-left",children:jsxRuntimeExports.jsx(LeftSidebar,{setSelectedFeedList:e})}),jsxRuntimeExports.jsx("div",{className:"tactical-main",children:jsxRuntimeExports.jsx(CentralView,{selectedFeedList:r})}),jsxRuntimeExports.jsx("div",{className:"tactical-sidebar-right",children:jsxRuntimeExports.jsx(RightSidebar,{})}),jsxRuntimeExports.jsxs("div",{className:"tactical-footer",children:[jsxRuntimeExports.jsx(QuickActions,{selectedFeedList:r,onRefreshAll:t,onExportData:s}),jsxRuntimeExports.jsx(AlertNotificationPanel,{})]})]})},SettingsError=({message:r="Settings content could not be loaded",details:e,code:t})=>{const s=useLocation();return jsxRuntimeExports.jsxs("div",{className:"settings-error",children:[jsxRuntimeExports.jsxs("div",{className:"error-header",children:[jsxRuntimeExports.jsx("span",{className:"error-icon",children:""}),jsxRuntimeExports.jsx("h2",{children:r})]}),jsxRuntimeExports.jsxs("div",{className:"error-details",children:[jsxRuntimeExports.jsx("p",{children:e||"There was a problem loading the requested settings screen."}),jsxRuntimeExports.jsxs("div",{className:"technical-details",children:[jsxRuntimeExports.jsx("h3",{children:"Technical Information"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Current Path:"})," ",s.pathname]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Route Parameters:"})," ",JSON.stringify(s.state||{})]}),t&&jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Error Code:"})," ",jsxRuntimeExports.jsx("code",{children:t})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"troubleshooting",children:[jsxRuntimeExports.jsx("h3",{children:"Troubleshooting"}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsx("li",{children:"Check that the tab component for this route exists and is properly exported"}),jsxRuntimeExports.jsx("li",{children:"Verify route configuration in AppRoutes.tsx matches the SettingsTab enum values"}),jsxRuntimeExports.jsx("li",{children:"Ensure all required context providers are available"}),jsxRuntimeExports.jsx("li",{children:"Check browser console for JavaScript errors"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"error-actions",children:[jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:()=>window.location.href="/settings/general",children:"Go to General Settings"}),jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})};class SettingsErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("Settings component error:",e),console.error("Component stack:",t.componentStack),this.setState({errorInfo:t})}render(){var e,t;if(this.state.hasError){const s=((e=this.state.error)==null?void 0:e.message)||"Unknown error",i=((t=this.state.errorInfo)==null?void 0:t.componentStack)||"";return jsxRuntimeExports.jsx(SettingsError,{message:"Settings Component Error",details:s,code:i})}return this.props.children}}const SettingsDebug=()=>{const{tab:r}=useParams(),t=useLocation().pathname.split("/");return t.length>=3&&t[2],null},SettingsPage=()=>{const r=useNavigate(),e=useLocation(),{tab:t}=useParams(),{settings:s,updateSettings:i}=useSettings(),a=e.pathname.split("/"),l=a.length>=3?a[2]:null,u=t||l||SettingsTab.GENERAL;reactExports.useEffect(()=>{!t&&!l&&(console.log("[SettingsPage] No tab in URL, redirecting to general"),r("/settings/general",{replace:!0}))},[t,l,r]),reactExports.useEffect(()=>{u&&Object.values(SettingsTab).includes(u)&&s.lastTab!==u&&(console.log(`[SettingsPage] Updating last active tab to: ${u}`),i({lastTab:u}))},[u,s.lastTab,i]);const p=E=>{console.log(`[SettingsPage] Tab click: ${E}`);const R=`/settings/${E}`;r(R)},x=()=>{r("/")},w=E=>{switch(E){case SettingsTab.GENERAL:return"";case SettingsTab.CORS:return"";case SettingsTab.PROTOCOLS:return"";case SettingsTab.VERIFICATION:return"";case SettingsTab.DISPLAY:return"";case SettingsTab.ADVANCED:return"";default:return""}};return jsxRuntimeExports.jsxs("div",{className:"settings-page",children:[jsxRuntimeExports.jsx(SettingsDebug,{}),jsxRuntimeExports.jsxs("div",{className:"settings-sidebar",children:[jsxRuntimeExports.jsxs("div",{className:"sidebar-header",children:[jsxRuntimeExports.jsx("h3",{children:"Settings"}),jsxRuntimeExports.jsxs("p",{children:["v",s.version]})]}),jsxRuntimeExports.jsx("div",{className:"settings-sidebar-nav",children:Object.values(SettingsTab).map(E=>jsxRuntimeExports.jsxs("button",{className:`settings-tab ${u===E?"active":""}`,onClick:()=>p(E),children:[jsxRuntimeExports.jsx("span",{className:"tab-icon",children:w(E)}),E.charAt(0).toUpperCase()+E.slice(1)]},E))})]}),jsxRuntimeExports.jsxs("div",{className:"settings-main-content",children:[jsxRuntimeExports.jsxs("div",{className:"settings-page-header",children:[jsxRuntimeExports.jsx("button",{className:"back-button",onClick:x,children:" Back to Dashboard"}),jsxRuntimeExports.jsx("h1",{children:"Tactical Control Settings"}),jsxRuntimeExports.jsxs("p",{children:["Configure system parameters and operational preferences ",t&&` ${t.charAt(0).toUpperCase()+t.slice(1)}`]})]}),jsxRuntimeExports.jsx("div",{className:"settings-tabs",children:Object.values(SettingsTab).map(E=>jsxRuntimeExports.jsx("button",{className:`settings-tab ${u===E?"active":""}`,onClick:()=>p(E),children:E.charAt(0).toUpperCase()+E.slice(1)},E))}),jsxRuntimeExports.jsx("div",{className:"settings-content",children:jsxRuntimeExports.jsx(SettingsErrorBoundary,{children:jsxRuntimeExports.jsx(Outlet,{})})})]})]})},Web3LoginPanel=()=>{const{isConnected:r,walletAddress:e,networkName:t,balance:s,ensName:i,accessLevel:a,connectWallet:l,disconnectWallet:u,switchNetwork:p}=useWeb3(),[x,w]=reactExports.useState(!1),E=async()=>{w(!0);try{await l()}catch(N){console.error("Failed to connect wallet:",N)}finally{w(!1)}},R=()=>{u()},A=N=>{switch(N){case AccessLevel.DIRECTOR:return"Director";case AccessLevel.COMMANDER:return"Commander";case AccessLevel.ANALYST:return"Analyst";case AccessLevel.FIELD_OPERATIVE:return"Field Operative";case AccessLevel.PUBLIC:default:return"Public User"}},S=N=>{switch(N){case AccessLevel.DIRECTOR:return"#ff3333";case AccessLevel.COMMANDER:return"#ff6600";case AccessLevel.ANALYST:return"#0099ff";case AccessLevel.FIELD_OPERATIVE:return"#00ff41";case AccessLevel.PUBLIC:default:return"#666666"}};return r?jsxRuntimeExports.jsx("div",{className:"web3-login-panel",children:jsxRuntimeExports.jsxs("div",{className:"connected-card tactical-module",children:[jsxRuntimeExports.jsx("div",{className:"tactical-header",children:jsxRuntimeExports.jsxs("h3",{children:[jsxRuntimeExports.jsx("span",{className:"tactical-icon",children:""}),"Tactical Authentication"]})}),jsxRuntimeExports.jsxs("div",{className:"tactical-content",children:[jsxRuntimeExports.jsxs("div",{className:"connection-status",children:[jsxRuntimeExports.jsx("div",{className:"status-indicator"}),jsxRuntimeExports.jsx("span",{children:"Authenticated"})]}),jsxRuntimeExports.jsxs("div",{className:"wallet-info",children:[jsxRuntimeExports.jsx("div",{className:"wallet-avatar",children:i?i.charAt(0).toUpperCase():e.substring(2,4).toUpperCase()}),jsxRuntimeExports.jsxs("div",{className:"wallet-details",children:[jsxRuntimeExports.jsx("div",{className:"wallet-name",children:i||"Tactical Operator"}),jsxRuntimeExports.jsxs("div",{className:"wallet-address",children:[e.substring(0,6),"...",e.substring(-4)]}),jsxRuntimeExports.jsxs("div",{className:"wallet-network",children:[jsxRuntimeExports.jsx("span",{className:"network-dot","data-network":t.toLowerCase()}),t]})]}),jsxRuntimeExports.jsxs("div",{className:"wallet-balance",children:[jsxRuntimeExports.jsx("div",{className:"balance-value",children:s}),jsxRuntimeExports.jsx("div",{className:"balance-currency",children:t.split(" ")[0]})]})]}),jsxRuntimeExports.jsx("div",{className:"access-level-indicator",children:jsxRuntimeExports.jsxs("div",{className:"access-badge",style:{color:S(a)},children:[jsxRuntimeExports.jsx("span",{className:"access-icon",children:""}),A(a)]})}),jsxRuntimeExports.jsxs("div",{className:"wallet-actions",children:[jsxRuntimeExports.jsx("button",{className:"action-button secondary",onClick:()=>{navigator.clipboard.writeText(e)},children:" Copy Address"}),jsxRuntimeExports.jsx("button",{className:"action-button secondary",onClick:()=>{const N=t.includes("Ethereum")?`https://etherscan.io/address/${e}`:`https://polygonscan.com/address/${e}`;window.open(N,"_blank")},children:" View Explorer"}),jsxRuntimeExports.jsx("button",{className:"action-button danger",onClick:R,children:" Disconnect"})]})]})]})}):jsxRuntimeExports.jsx("div",{className:"web3-login-panel",children:jsxRuntimeExports.jsxs("div",{className:"login-card tactical-module",children:[jsxRuntimeExports.jsxs("div",{className:"login-header tactical-header",children:[jsxRuntimeExports.jsxs("h2",{children:[jsxRuntimeExports.jsx("span",{className:"tactical-icon",children:""}),"Tactical Authentication"]}),jsxRuntimeExports.jsx("p",{children:"Connect your wallet to access secure intelligence networks"})]}),jsxRuntimeExports.jsxs("div",{className:"login-content tactical-content",children:[jsxRuntimeExports.jsx("button",{className:"connect-button btn-primary",onClick:E,disabled:x,children:x?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"loading-spinner"}),"Connecting..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"wallet-icon",children:""}),"Connect Wallet"]})}),jsxRuntimeExports.jsxs("div",{className:"supported-wallets",children:[jsxRuntimeExports.jsx("p",{children:"Supported:"}),jsxRuntimeExports.jsxs("div",{className:"wallet-icons",children:[jsxRuntimeExports.jsx("span",{title:"MetaMask",children:""}),jsxRuntimeExports.jsx("span",{title:"WalletConnect",children:""}),jsxRuntimeExports.jsx("span",{title:"Trust Wallet",children:""})]})]})]})]})})},ProfilePageSimple=()=>{const r=useNavigate(),{isConnected:e,walletAddress:t,ensName:s,accessLevel:i}=useWeb3(),a=()=>{r("/")};return jsxRuntimeExports.jsxs("div",{className:"profile-page",children:[jsxRuntimeExports.jsxs("div",{className:"profile-page-header",children:[jsxRuntimeExports.jsx("button",{className:"back-button",onClick:a,children:" Back to Dashboard"}),jsxRuntimeExports.jsx("h1",{children:"Tactical Authentication"}),jsxRuntimeExports.jsx("p",{children:"Secure access to tactical intelligence networks"})]}),jsxRuntimeExports.jsxs("div",{className:"profile-content-simple",children:[jsxRuntimeExports.jsx(Web3LoginPanel,{}),e&&jsxRuntimeExports.jsxs("div",{className:"authenticated-info",children:[jsxRuntimeExports.jsxs("div",{className:"info-card tactical-module",children:[jsxRuntimeExports.jsx("h3",{children:" Authentication Status"}),jsxRuntimeExports.jsx("div",{className:"info-card-content tactical-content",children:jsxRuntimeExports.jsxs("div",{className:"status-grid",children:[jsxRuntimeExports.jsxs("div",{className:"status-item",children:[jsxRuntimeExports.jsx("span",{className:"status-label",children:"Operator ID:"}),jsxRuntimeExports.jsx("span",{className:"status-value",children:s||"Tactical Operator"})]}),jsxRuntimeExports.jsxs("div",{className:"status-item",children:[jsxRuntimeExports.jsx("span",{className:"status-label",children:"Wallet Address:"}),jsxRuntimeExports.jsxs("span",{className:"status-value monospace",children:[t.substring(0,8),"...",t.substring(-6)]})]}),jsxRuntimeExports.jsxs("div",{className:"status-item",children:[jsxRuntimeExports.jsx("span",{className:"status-label",children:"Security Clearance:"}),jsxRuntimeExports.jsxs("span",{className:`status-value clearance-${i}`,children:["Level ",i]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"capabilities-card tactical-module",children:[jsxRuntimeExports.jsx("h3",{children:" Enabled Capabilities"}),jsxRuntimeExports.jsx("div",{className:"capabilities-card-content tactical-content",children:jsxRuntimeExports.jsxs("ul",{className:"capabilities-list",children:[jsxRuntimeExports.jsx("li",{className:"capability-enabled",children:" Secure Feed Access"}),jsxRuntimeExports.jsx("li",{className:"capability-enabled",children:" Cryptographic Verification"}),jsxRuntimeExports.jsx("li",{className:"capability-enabled",children:" Decentralized Authentication"}),i>=2&&jsxRuntimeExports.jsx("li",{className:"capability-enabled",children:" Advanced Analytics"}),i>=3&&jsxRuntimeExports.jsx("li",{className:"capability-enabled",children:" Command Authority"}),i>=4&&jsxRuntimeExports.jsx("li",{className:"capability-enabled",children:" Director-Level Access"})]})})]})]})]})]})},Web3TestPageContent=()=>jsxRuntimeExports.jsxs("div",{className:"web3-test-page",children:[jsxRuntimeExports.jsxs("div",{className:"test-header",children:[jsxRuntimeExports.jsx("h1",{children:" Web3 TDD Integration Test"}),jsxRuntimeExports.jsx("p",{children:"Testing complete Web3 authentication flow with local smart contract"}),jsxRuntimeExports.jsxs("div",{className:"contract-info",children:[jsxRuntimeExports.jsxs("div",{children:[" Contract: ",jsxRuntimeExports.jsx("code",{children:"0x5FbDB2315678afecb367f032d93F642f64180aa3"})]}),jsxRuntimeExports.jsx("div",{children:" Network: Localhost (Chain ID: 1337)"}),jsxRuntimeExports.jsx("div",{children:" Status: Live & Ready"})]})]}),jsxRuntimeExports.jsxs("div",{className:"test-sections",children:[jsxRuntimeExports.jsxs("section",{className:"login-section",children:[jsxRuntimeExports.jsx("h2",{children:" Web3 Authentication"}),jsxRuntimeExports.jsx(Web3LoginPanel,{})]}),jsxRuntimeExports.jsxs("section",{className:"profile-section",children:[jsxRuntimeExports.jsx("h2",{children:" User Profile"}),jsxRuntimeExports.jsx(ProfilePageSimple,{})]})]}),jsxRuntimeExports.jsxs("div",{className:"test-instructions",children:[jsxRuntimeExports.jsx("h3",{children:" Test Instructions"}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Connect MetaMask:"})," Add localhost:8545 network if needed"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Import Test Account:"})," Use one of the Hardhat private keys"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Connect Wallet:"})," Click the connect button above"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Verify Integration:"})," Check address, balance, and access level display"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Test Contract Interaction:"})," Access level should be detected automatically"]})]}),jsxRuntimeExports.jsxs("div",{className:"test-accounts",children:[jsxRuntimeExports.jsx("h4",{children:" Test Accounts Available"}),jsxRuntimeExports.jsxs("div",{className:"account-grid",children:[jsxRuntimeExports.jsxs("div",{className:"account-card",children:[jsxRuntimeExports.jsx("div",{className:"account-label",children:"Account #0 (Owner)"}),jsxRuntimeExports.jsx("div",{className:"account-address",children:"0xf39F...2266"}),jsxRuntimeExports.jsx("div",{className:"account-key",children:"0xac097...f80"}),jsxRuntimeExports.jsx("div",{className:"account-balance",children:"10,000 ETH"}),jsxRuntimeExports.jsx("div",{className:"account-level",children:" DIRECTOR Level"})]}),jsxRuntimeExports.jsxs("div",{className:"account-card",children:[jsxRuntimeExports.jsx("div",{className:"account-label",children:"Account #1"}),jsxRuntimeExports.jsx("div",{className:"account-address",children:"0x7099...79C8"}),jsxRuntimeExports.jsx("div",{className:"account-key",children:"0x59c69...690d"}),jsxRuntimeExports.jsx("div",{className:"account-balance",children:"10,000 ETH"}),jsxRuntimeExports.jsx("div",{className:"account-level",children:" PUBLIC Level"})]})]})]})]})]}),Web3TestPage=()=>jsxRuntimeExports.jsx(Web3Provider,{children:jsxRuntimeExports.jsx(Web3TestPageContent,{})}),FeedPage=()=>{const{id:r}=useParams(),e=useNavigate(),[t,s]=reactExports.useState(null),[i,a]=reactExports.useState(!0),[l,u]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{a(!0),u(null);try{if(r){const w=await FeedService$3.getFeedById(r);w?s(w):u("Feed not found")}else u("Invalid feed ID")}catch(w){console.error("Failed to load feed:",w),u("Failed to load feed")}finally{a(!1)}})()},[r]);const p=()=>{e("/")};return i?jsxRuntimeExports.jsx("div",{className:"feed-page loading",children:"Loading..."}):l?jsxRuntimeExports.jsxs("div",{className:"feed-page error",children:[jsxRuntimeExports.jsx("div",{className:"error-message",children:l}),jsxRuntimeExports.jsx("button",{className:"back-button",onClick:p,children:"Return to Dashboard"})]}):t?jsxRuntimeExports.jsxs("div",{className:"feed-page",children:[jsxRuntimeExports.jsxs("div",{className:"feed-header",children:[jsxRuntimeExports.jsx("button",{className:"back-button",onClick:p,children:" Back to Dashboard"}),jsxRuntimeExports.jsx("h1",{children:t.title}),jsxRuntimeExports.jsx("p",{className:"feed-date",children:t.pubDate})]}),t.description&&jsxRuntimeExports.jsx("p",{className:"feed-description",children:t.description}),jsxRuntimeExports.jsx("div",{className:"feed-content",children:t.content&&jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:t.content}})})]}):jsxRuntimeExports.jsxs("div",{className:"feed-page not-found",children:[jsxRuntimeExports.jsx("div",{className:"not-found-message",children:"Feed not found"}),jsxRuntimeExports.jsx("button",{className:"back-button",onClick:p,children:"Return to Dashboard"})]})},Modal=({isOpen:r,onClose:e,title:t,children:s,size:i="large"})=>{if(!r)return null;const a=u=>{u.target===u.currentTarget&&e()},l=u=>{u.key==="Escape"&&e()};return jsxRuntimeExports.jsx("div",{className:"modal-backdrop",onClick:a,onKeyDown:l,tabIndex:-1,children:jsxRuntimeExports.jsxs("div",{className:`modal-container ${i}`,children:[jsxRuntimeExports.jsxs("div",{className:"modal-header",children:[jsxRuntimeExports.jsx("h2",{className:"modal-title",children:t}),jsxRuntimeExports.jsx("button",{className:"modal-close-button",onClick:e,"aria-label":"Close modal",children:""})]}),jsxRuntimeExports.jsx("div",{className:"modal-content",children:s})]})})},FeedHealthIndicator=({feedId:r,showDetails:e=!1})=>{const t=FeedHealthService.getFeedHealth(r);if(!t)return jsxRuntimeExports.jsxs("div",{className:"feed-health-indicator unknown",title:"Health status unknown",children:[jsxRuntimeExports.jsx("span",{className:"health-dot",children:""}),e&&jsxRuntimeExports.jsx("span",{className:"health-text",children:"Unknown"})]});const s=p=>{switch(p){case"healthy":return"#22c55e";case"warning":return"#f59e0b";case"error":return"#ef4444";default:return"#6b7280"}},i=p=>{switch(p){case"healthy":return"Healthy";case"warning":return"Warning";case"error":return"Error";default:return"Unknown"}},a=p=>`${p.toFixed(1)}%`,l=p=>p?p<1e3?`${p}ms`:`${(p/1e3).toFixed(1)}s`:"N/A",u=p=>{const w=new Date().getTime()-p.getTime(),E=Math.floor(w/(1e3*60));if(E<1)return"Just now";if(E<60)return`${E}m ago`;const R=Math.floor(E/60);return R<24?`${R}h ago`:`${Math.floor(R/24)}d ago`};return jsxRuntimeExports.jsxs("div",{className:`feed-health-indicator ${t.status}`,title:`Health: ${i(t.status)} | Uptime: ${a(t.uptime)} | Response: ${l(t.responseTime)} | Last checked: ${u(t.lastChecked)}`,children:[jsxRuntimeExports.jsx("span",{className:"health-dot",style:{color:s(t.status)},children:""}),e&&jsxRuntimeExports.jsxs("div",{className:"health-details",children:[jsxRuntimeExports.jsx("span",{className:"health-text",children:i(t.status)}),jsxRuntimeExports.jsx("span",{className:"health-uptime",children:a(t.uptime)}),t.responseTime&&jsxRuntimeExports.jsx("span",{className:"health-response-time",children:l(t.responseTime)})]})]})},FeedManager=()=>{const[r,e]=reactExports.useState([]),[t,s]=reactExports.useState([]),[i,a]=reactExports.useState(new Set),[l,u]=reactExports.useState(null),[p,x]=reactExports.useState(""),[w,E]=reactExports.useState(""),[R,A]=reactExports.useState(!1),[S,N]=reactExports.useState(!1),[k,j]=reactExports.useState(null),$=[{id:"news",name:"News & Current Events",color:"#22c55e",feeds:[]},{id:"tech",name:"Technology",color:"#3b82f6",feeds:[]},{id:"security",name:"Security Intelligence",color:"#ef4444",feeds:[]},{id:"uncategorized",name:"Uncategorized",color:"#6b7280",feeds:[]}];reactExports.useEffect(()=>{D(),z()},[]);const D=async()=>{try{const Z=await FeedService$1.getFeeds();e(Z)}catch(Z){console.error("Failed to load feeds:",Z)}},z=()=>{const Z=localStorage.getItem("feed_categories");Z?s(JSON.parse(Z)):(s($),L($))},L=Z=>{localStorage.setItem("feed_categories",JSON.stringify(Z))},M=async()=>{if(p.trim()){A(!0);try{if(new URL(p),r.find(pe=>pe.url===p)){alert("This feed is already added");return}await FeedService$1.addFeed({id:Date.now().toString(),name:"New Feed",title:"Loading...",description:"Fetching feed details...",link:p,url:p,pubDate:new Date().toISOString(),author:"",feedListId:"default"}),await D(),x("")}catch(Z){console.error("Failed to add feed:",Z),alert("Invalid URL or failed to add feed")}finally{A(!1)}}},G=async Z=>{if(confirm("Are you sure you want to remove this feed?"))try{await FeedService$1.removeFeed(Z),await D();const pe=t.map(ae=>({...ae,feeds:ae.feeds.filter(se=>se!==Z)}));s(pe),L(pe)}catch(pe){console.error("Failed to remove feed:",pe)}},W=()=>{if(!w.trim())return;const Z={id:Date.now().toString(),name:w,color:`#${Math.floor(Math.random()*16777215).toString(16)}`,feeds:[]},pe=[...t,Z];s(pe),L(pe),E(""),N(!1)},q=Z=>{if(confirm("Remove this category? Feeds will be moved to Uncategorized.")){const pe=t.find(ce=>ce.id===Z),ae=t.find(ce=>ce.id==="uncategorized");pe&&ae&&ae.feeds.push(...pe.feeds);const se=t.filter(ce=>ce.id!==Z);s(se),L(se)}},oe=Z=>{u(Z)},le=Z=>{if(!l)return;const pe=t.map(ae=>{const se=ae.feeds.filter(ce=>ce!==l);return ae.id===Z?{...ae,feeds:[...se,l]}:{...ae,feeds:se}});s(pe),L(pe),u(null)},Te=Z=>{const pe=t.find(ae=>ae.id===Z);return pe?r.filter(ae=>pe.feeds.includes(ae.id)):[]},Ae=()=>{const Z=new Set(t.flatMap(pe=>pe.feeds));return r.filter(pe=>!Z.has(pe.id))},we=Z=>{const pe=new Set(i);pe.has(Z)?pe.delete(Z):pe.add(Z),a(pe)},de=()=>{i.size!==0&&confirm(`Remove ${i.size} selected feeds?`)&&Promise.all(Array.from(i).map(Z=>FeedService$1.removeFeed(Z))).then(()=>{D(),a(new Set)}).catch(Z=>{console.error("Bulk remove failed:",Z)})};return jsxRuntimeExports.jsxs("div",{className:"feed-manager",children:[jsxRuntimeExports.jsxs("div",{className:"feed-manager-header",children:[jsxRuntimeExports.jsx("h2",{className:"manager-title",children:" Feed Manager"}),jsxRuntimeExports.jsxs("div",{className:"manager-stats",children:[r.length," feeds in ",t.length," categories"]})]}),jsxRuntimeExports.jsxs("div",{className:"add-feed-section",children:[jsxRuntimeExports.jsxs("div",{className:"add-feed-form",children:[jsxRuntimeExports.jsx("input",{type:"url",value:p,onChange:Z=>x(Z.target.value),placeholder:"Enter RSS/Atom feed URL...",className:"feed-url-input",onKeyPress:Z=>Z.key==="Enter"&&M()}),jsxRuntimeExports.jsxs("button",{onClick:M,disabled:R||!p.trim(),className:"add-feed-button",children:[R?"":""," Add Feed"]})]}),i.size>0&&jsxRuntimeExports.jsxs("div",{className:"bulk-actions",children:[jsxRuntimeExports.jsxs("span",{className:"selection-count",children:[i.size," selected"]}),jsxRuntimeExports.jsx("button",{onClick:de,className:"bulk-remove-button",children:" Remove Selected"}),jsxRuntimeExports.jsx("button",{onClick:()=>a(new Set),className:"clear-selection-button",children:" Clear Selection"})]})]}),jsxRuntimeExports.jsxs("div",{className:"categories-container",children:[t.map(Z=>{const pe=Z.id==="uncategorized"?Ae():Te(Z.id),ae=k===Z.id;return jsxRuntimeExports.jsxs("div",{className:"category-section",onDragOver:se=>se.preventDefault(),onDrop:()=>le(Z.id),children:[jsxRuntimeExports.jsxs("div",{className:"category-header",children:[jsxRuntimeExports.jsx("button",{className:"category-toggle",onClick:()=>j(ae?null:Z.id),children:ae?"":""}),jsxRuntimeExports.jsx("div",{className:"category-indicator",style:{backgroundColor:Z.color}}),jsxRuntimeExports.jsx("span",{className:"category-name",children:Z.name}),jsxRuntimeExports.jsxs("span",{className:"category-count",children:["(",pe.length,")"]}),Z.id!=="uncategorized"&&jsxRuntimeExports.jsx("button",{className:"remove-category-button",onClick:()=>q(Z.id),children:""})]}),ae&&jsxRuntimeExports.jsxs("div",{className:"category-feeds",children:[pe.map(se=>jsxRuntimeExports.jsxs("div",{className:"feed-item-manager",draggable:!0,onDragStart:()=>oe(se.id),children:[jsxRuntimeExports.jsx("label",{className:"feed-checkbox",children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:i.has(se.id),onChange:()=>we(se.id)})}),jsxRuntimeExports.jsx(FeedHealthIndicator,{feedId:se.id}),jsxRuntimeExports.jsxs("div",{className:"feed-info",children:[jsxRuntimeExports.jsx("div",{className:"feed-title-manager",children:se.title}),jsxRuntimeExports.jsx("div",{className:"feed-url",children:se.url})]}),jsxRuntimeExports.jsx("button",{className:"remove-feed-button",onClick:()=>G(se.id),children:""})]},se.id)),pe.length===0&&jsxRuntimeExports.jsx("div",{className:"empty-category",children:"Drag feeds here or they'll appear automatically"})]})]},Z.id)}),jsxRuntimeExports.jsx("div",{className:"add-category-section",children:S?jsxRuntimeExports.jsxs("div",{className:"add-category-form",children:[jsxRuntimeExports.jsx("input",{type:"text",value:w,onChange:Z=>E(Z.target.value),placeholder:"Category name...",className:"category-name-input",onKeyPress:Z=>Z.key==="Enter"&&W(),autoFocus:!0}),jsxRuntimeExports.jsx("button",{onClick:W,className:"save-category-button",children:" Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>N(!1),className:"cancel-category-button",children:" Cancel"})]}):jsxRuntimeExports.jsx("button",{onClick:()=>N(!0),className:"add-category-button",children:" Add Category"})})]})]})},WingCommanderLogo="/assets/WingCommanderLogo-288x162-Dr7UFZxN.gif",Web3Button=()=>{const r=useNavigate(),{isConnected:e,walletAddress:t,networkName:s,ensName:i}=useWeb3(),a=()=>{r("/profile")},u=i||(p=>p?`${p.substring(0,4)}...${p.substring(p.length-4)}`:"")(t);return jsxRuntimeExports.jsxs("button",{className:`control-btn-micro web3-button ${e?"connected":""}`,onClick:a,"aria-label":e?"Wallet Connected":"Connect Wallet",title:e?`Connected: ${u} on ${s}`:"User Profile",children:[e?"":"",e&&jsxRuntimeExports.jsx("span",{className:"connected-indicator","data-network":s.toLowerCase().split(" ")[0]}),e&&jsxRuntimeExports.jsx("span",{className:"wallet-preview",children:u})]})},NavigationButtons=()=>{const r=useNavigate(),e=useLocation(),t=s=>!!(s==="/"&&e.pathname==="/"||s!=="/"&&e.pathname.startsWith(s));return jsxRuntimeExports.jsxs("div",{className:"navigation-buttons",children:[jsxRuntimeExports.jsx("button",{className:`control-btn-micro ${t("/")?"active":""}`,onClick:()=>r("/"),title:"Tactical Dashboard",children:""}),jsxRuntimeExports.jsx("button",{className:`control-btn-micro ${t("/settings")?"active":""}`,onClick:()=>r("/settings"),title:"Settings",children:""})]})},Header=()=>{const r=useNavigate(),{performSearch:e,isSearching:t}=useSearch(),[s,i]=reactExports.useState(""),[a,l]=reactExports.useState(!1),[u,p]=reactExports.useState(new Date);reactExports.useEffect(()=>{const E=setInterval(()=>{p(new Date)},1e3);return()=>clearInterval(E)},[]);const x=E=>{E.preventDefault(),s.trim()&&e({query:s.trim(),operators:"AND",caseSensitive:!1})},w=E=>{i(E.target.value)};return jsxRuntimeExports.jsxs("header",{className:"tactical-header-enhanced tactical-header-compact",children:[jsxRuntimeExports.jsxs("div",{className:"header-primary-bar",children:[jsxRuntimeExports.jsxs("div",{className:"brand-micro",children:[jsxRuntimeExports.jsx("img",{src:WingCommanderLogo,alt:"TC",className:"brand-icon-micro",onClick:()=>r("/"),style:{cursor:"pointer"}}),jsxRuntimeExports.jsx("div",{className:"brand-text-micro",children:jsxRuntimeExports.jsx("span",{className:"brand-code",children:"TACTICAL INTEL DASHBOARD"})})]}),jsxRuntimeExports.jsxs("div",{className:"status-micro-grid",children:[jsxRuntimeExports.jsx("div",{className:"clock-display",title:"System Time",children:u.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),jsxRuntimeExports.jsx("div",{className:"status-indicator status-online",title:"Connection Status",children:" ONLINE"})]}),jsxRuntimeExports.jsx("div",{className:"search-micro",children:jsxRuntimeExports.jsxs("form",{onSubmit:x,className:"search-form-micro",children:[jsxRuntimeExports.jsx("input",{type:"text",value:s,onChange:w,placeholder:"SEARCH INTEL...",className:"search-input-micro",disabled:t}),jsxRuntimeExports.jsx("button",{type:"submit",className:"search-btn-micro",disabled:t||!s.trim(),title:"Search",children:t?"":""})]})}),jsxRuntimeExports.jsxs("div",{className:"controls-micro",children:[jsxRuntimeExports.jsx(NavigationButtons,{}),jsxRuntimeExports.jsx(Web3Button,{}),jsxRuntimeExports.jsx("button",{className:"control-btn-micro",onClick:()=>{document.documentElement.requestFullscreen().catch(E=>{console.error(`Error attempting to enable fullscreen: ${E.message}`)})},title:"Toggle Fullscreen",children:""})]})]}),jsxRuntimeExports.jsx(Modal,{isOpen:a,onClose:()=>l(!1),title:"FEED MANAGEMENT CONSOLE",size:"fullscreen",children:jsxRuntimeExports.jsx(FeedManager,{})})]})},MainLayout=()=>jsxRuntimeExports.jsxs("div",{className:"tactical-dashboard",children:[jsxRuntimeExports.jsx("div",{className:"tactical-header-main",children:jsxRuntimeExports.jsx(Header,{})}),jsxRuntimeExports.jsx("div",{className:"tactical-main-content",children:jsxRuntimeExports.jsx(Outlet,{})})]}),NotFoundPage=()=>{const r=useNavigate(),e=()=>{r("/")};return jsxRuntimeExports.jsx("div",{className:"not-found-page",children:jsxRuntimeExports.jsxs("div",{className:"not-found-content",children:[jsxRuntimeExports.jsx("h1",{children:"404 - Page Not Found"}),jsxRuntimeExports.jsx("p",{children:"The page you're looking for doesn't exist or has been moved."}),jsxRuntimeExports.jsx("button",{className:"tactical-button primary-button",onClick:e,children:"Return to Dashboard"})]})})},DebugInfo=({componentName:r})=>null,SettingsChangeIndicator=React.memo(({hasChanges:r,isApplying:e=!1,onApply:t,onDiscard:s,className:i=""})=>{const a=reactExports.useCallback(()=>{t&&t()},[t]),l=reactExports.useCallback(()=>{s&&s()},[s]);return!r&&!e?null:jsxRuntimeExports.jsxs("div",{className:`settings-change-indicator ${i}`,children:[jsxRuntimeExports.jsx("div",{className:"change-status",children:e?jsxRuntimeExports.jsxs("div",{className:"applying-indicator",children:[jsxRuntimeExports.jsx("span",{className:"spinner"}),jsxRuntimeExports.jsx("span",{className:"status-text",children:"Applying changes..."})]}):jsxRuntimeExports.jsxs("div",{className:"unsaved-indicator",children:[jsxRuntimeExports.jsx("span",{className:"status-icon",children:""}),jsxRuntimeExports.jsx("span",{className:"status-text",children:"You have unsaved changes"})]})}),r&&!e&&jsxRuntimeExports.jsxs("div",{className:"change-actions",children:[t&&jsxRuntimeExports.jsx("button",{className:"apply-button",onClick:a,title:"Apply changes",children:"Apply"}),s&&jsxRuntimeExports.jsx("button",{className:"discard-button",onClick:l,title:"Discard changes",children:"Discard"})]})]})}),ConfirmationDialog=React.memo(({isOpen:r,title:e,message:t,confirmText:s="Confirm",cancelText:i="Cancel",type:a="warning",onConfirm:l,onCancel:u})=>{const p=reactExports.useCallback(R=>{R.target===R.currentTarget&&u()},[u]),x=reactExports.useCallback(()=>{l()},[l]),w=reactExports.useCallback(()=>{u()},[u]);if(!r)return null;const E=()=>{switch(a){case"danger":return"";case"warning":return"";case"info":return"";default:return""}};return jsxRuntimeExports.jsx("div",{className:"confirmation-overlay",onClick:p,children:jsxRuntimeExports.jsxs("div",{className:`confirmation-dialog ${a}`,children:[jsxRuntimeExports.jsxs("div",{className:"dialog-header",children:[jsxRuntimeExports.jsx("span",{className:"dialog-icon",children:E()}),jsxRuntimeExports.jsx("h3",{className:"dialog-title",children:e})]}),jsxRuntimeExports.jsx("div",{className:"dialog-content",children:jsxRuntimeExports.jsx("p",{className:"dialog-message",children:t})}),jsxRuntimeExports.jsxs("div",{className:"dialog-actions",children:[jsxRuntimeExports.jsx("button",{className:"cancel-button",onClick:w,autoFocus:!0,children:i}),jsxRuntimeExports.jsx("button",{className:`confirm-button ${a}`,onClick:x,children:s})]})]})})}),GeneralSettings=reactExports.memo(()=>{const{settings:r,resetSettings:e}=useSettings(),[t,s]=reactExports.useState(!1),[i,a]=reactExports.useState(!0),[l,u]=reactExports.useState(300),[p,x]=reactExports.useState(!0),[w,E]=reactExports.useState(!1),[R,A]=reactExports.useState("ping"),[S,N]=reactExports.useState(!0),[k,j]=reactExports.useState(1800),[$,D]=reactExports.useState(50),[z,L]=reactExports.useState("default"),[M,G]=reactExports.useState(!1),[W,q]=reactExports.useState(!1);reactExports.useEffect(()=>{const we=SettingsIntegrationService.getGeneralSettings();a(we.autoRefresh),u(we.refreshInterval),x(we.preserveHistory),E(we.notifications),A(we.notificationSound),N(we.showNotificationCount),j(we.cacheDuration),D(we.storageLimit),"Notification"in window&&L(Notification.permission)},[]),reactExports.useEffect(()=>{if(!r)throw new Error("Settings context is not available. Make sure SettingsProvider is properly configured.")},[r]);const oe=async()=>{if("Notification"in window){const we=await Notification.requestPermission();L(we),we==="granted"&&(E(!0),s(!0))}},le=()=>{z==="granted"&&new Notification("Tactical Intel Dashboard",{body:"Test notification - your dashboard is working correctly!",icon:"/favicon.ico"})},Te=reactExports.useCallback(()=>{Object.keys(localStorage).forEach(Z=>{Z.startsWith("feed_")&&localStorage.removeItem(Z)});const de=document.querySelector(".settings-content");if(de){const Z=document.createElement("div");Z.className="settings-feedback success",Z.textContent="Cache cleared successfully!",de.appendChild(Z),setTimeout(()=>{Z.remove()},3e3)}G(!1)},[]),Ae=reactExports.useCallback(async()=>{q(!0);try{const we={autoRefresh:i,refreshInterval:l,preserveHistory:p,notifications:w,notificationSound:R,showNotificationCount:S,cacheDuration:k,storageLimit:$};localStorage.setItem("generalSettings",JSON.stringify(we)),s(!1),SettingsIntegrationService.resetCache();const de=document.querySelector(".settings-content");if(de){const Z=document.createElement("div");Z.className="settings-feedback success",Z.textContent="General settings saved successfully!",de.appendChild(Z),setTimeout(()=>{Z.remove()},3e3)}}finally{q(!1)}},[i,l,p,w,R,S,k,$]);return jsxRuntimeExports.jsxs("div",{className:"settings-form",children:[jsxRuntimeExports.jsx(DebugInfo,{componentName:"GeneralSettings"}),jsxRuntimeExports.jsx("h2",{children:"General Dashboard Configuration"}),jsxRuntimeExports.jsx(SettingsChangeIndicator,{hasChanges:t,isApplying:W,onApply:Ae,onDiscard:()=>s(!1)}),jsxRuntimeExports.jsxs("div",{className:"settings-grid",children:[jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Application Information"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Tactical Intel Dashboard Version"}),jsxRuntimeExports.jsx("div",{className:"static-field",children:r.version}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Current software version of your tactical intelligence platform."})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"System Status"}),jsxRuntimeExports.jsx("div",{className:"status-indicator online",children:" OPERATIONAL"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Notification Permission"}),jsxRuntimeExports.jsx("div",{className:`status-indicator ${z==="granted"?"online":"offline"}`,children:z==="granted"?" GRANTED":z==="denied"?" DENIED":" NOT REQUESTED"}),z!=="granted"&&jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:oe,children:"Request Permission"})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Dashboard Behavior"}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:i,onChange:we=>{a(we.target.checked),s(!0)}}),"Auto-refresh feeds in background"]})}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Refresh Interval"}),jsxRuntimeExports.jsxs("select",{className:"form-control",value:l,onChange:we=>{u(parseInt(we.target.value,10)),s(!0)},children:[jsxRuntimeExports.jsx("option",{value:30,children:"30 seconds"}),jsxRuntimeExports.jsx("option",{value:60,children:"1 minute"}),jsxRuntimeExports.jsx("option",{value:300,children:"5 minutes"}),jsxRuntimeExports.jsx("option",{value:600,children:"10 minutes"}),jsxRuntimeExports.jsx("option",{value:1800,children:"30 minutes"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:p,onChange:we=>{x(we.target.checked),s(!0)}}),"Preserve feed history"]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Keeps track of previously viewed items across sessions"})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Notifications"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:w,disabled:z!=="granted",onChange:we=>{E(we.target.checked),s(!0)}}),"Enable desktop notifications"]}),z!=="granted"&&jsxRuntimeExports.jsx("p",{className:"settings-description warning",children:"Notification permission required"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Notification Sound"}),jsxRuntimeExports.jsxs("select",{className:"form-control",value:R,onChange:we=>{A(we.target.value),s(!0)},children:[jsxRuntimeExports.jsx("option",{value:"none",children:"None"}),jsxRuntimeExports.jsx("option",{value:"ping",children:"Ping"}),jsxRuntimeExports.jsx("option",{value:"alert",children:"Alert"}),jsxRuntimeExports.jsx("option",{value:"tactical",children:"Tactical Alert"})]})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:S,onChange:we=>{N(we.target.checked),s(!0)}}),"Show notification count in title"]})}),z==="granted"&&jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:le,children:"Test Notification"})})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Data Management"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Cache Duration"}),jsxRuntimeExports.jsxs("select",{className:"form-control",value:k,onChange:we=>{j(parseInt(we.target.value,10)),s(!0)},children:[jsxRuntimeExports.jsx("option",{value:300,children:"5 minutes"}),jsxRuntimeExports.jsx("option",{value:600,children:"10 minutes"}),jsxRuntimeExports.jsx("option",{value:1800,children:"30 minutes"}),jsxRuntimeExports.jsx("option",{value:3600,children:"1 hour"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Storage Limit"}),jsxRuntimeExports.jsxs("select",{className:"form-control",value:$,onChange:we=>{D(parseInt(we.target.value,10)),s(!0)},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10 MB"}),jsxRuntimeExports.jsx("option",{value:50,children:"50 MB"}),jsxRuntimeExports.jsx("option",{value:100,children:"100 MB"}),jsxRuntimeExports.jsx("option",{value:200,children:"200 MB"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("button",{className:"btn-secondary btn-destructive",onClick:()=>G(!0),children:"Clear All Cache"}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"This will remove all cached feed data and force fresh downloads."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-actions",children:[jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:Ae,disabled:!t,children:"Apply General Settings"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:()=>e(SettingsTab.GENERAL),children:"Reset to Defaults"})]}),jsxRuntimeExports.jsx(ConfirmationDialog,{isOpen:M,title:"Clear All Cache",message:"This will permanently delete all cached feed data. Fresh data will be downloaded on the next request. This action cannot be undone.",confirmText:"Clear Cache",cancelText:"Cancel",type:"warning",onConfirm:Te,onCancel:()=>G(!1)})]})});GeneralSettings.displayName="GeneralSettings";const CORSSettings=reactExports.memo(()=>{const{settings:r,updateSettings:e,resetSettings:t}=useSettings(),[s,i]=reactExports.useState("https://rss.nytimes.com/services/xml/rss/nyt/World.xml"),[a,l]=reactExports.useState("idle"),[u,p]=reactExports.useState(""),[x,w]=reactExports.useState(!1),[E,R]=reactExports.useState(Object.values(CORSStrategy).reduce((q,oe)=>(q[oe]={status:"untested"},q),{})),[A,S]=reactExports.useState(""),[N,k]=reactExports.useState("");reactExports.useEffect(()=>{w(!0)},[r.cors]);const j=reactExports.useCallback(q=>{e({cors:{...r.cors,defaultStrategy:q.target.value}}),w(!0),SettingsIntegrationService.resetCache()},[r.cors,e]),$=reactExports.useCallback((q,oe)=>{const le={...r.cors.protocolStrategies};oe==="DEFAULT"?delete le[q]:le[q]=oe,e({cors:{...r.cors,protocolStrategies:le}}),w(!0),SettingsIntegrationService.resetCache()},[r.cors,e]),D=async q=>{try{R(Ae=>({...Ae,[q]:{status:"testing"}}));const oe=SettingsIntegrationService.getCORSStrategy();e({cors:{...r.cors,defaultStrategy:q}}),SettingsIntegrationService.resetCache();const le=performance.now();await FetchService.testCORSStrategy(s,q);const Te=Math.round(performance.now()-le);return e({cors:{...r.cors,defaultStrategy:oe}}),SettingsIntegrationService.resetCache(),R(Ae=>({...Ae,[q]:{status:"success",time:Te}})),!0}catch(oe){return R(le=>({...le,[q]:{status:"error",message:oe instanceof Error?oe.message:"Unknown error"}})),!1}},z=async()=>{l("testing"),p("Testing all CORS strategies...");const q=[];for(const oe of Object.values(CORSStrategy))q.push(await D(oe));q.some(oe=>oe)?(l("success"),p("At least one CORS strategy works for this URL")):(l("error"),p("All CORS strategies failed. Please check your network or the URL."))},L=()=>{N&&!r.cors.services.rss2json.includes(N)&&(e({cors:{...r.cors,services:{...r.cors.services,rss2json:[...r.cors.services.rss2json,N]}}}),k(""),w(!0),SettingsIntegrationService.resetCache())},M=()=>{A&&!r.cors.services.corsProxies.includes(A)&&(e({cors:{...r.cors,services:{...r.cors.services,corsProxies:[...r.cors.services.corsProxies,A]}}}),S(""),w(!0),SettingsIntegrationService.resetCache())},G=(q,oe)=>{e({cors:{...r.cors,services:{...r.cors.services,[q]:r.cors.services[q].filter(le=>le!==oe)}}}),w(!0),SettingsIntegrationService.resetCache()},W=()=>{SettingsIntegrationService.resetCache(),w(!1);const q=document.querySelector(".settings-content");if(q){const oe=document.createElement("div");oe.className="settings-feedback success",oe.textContent="CORS settings applied successfully!",q.appendChild(oe),setTimeout(()=>{oe.remove()},3e3)}};return jsxRuntimeExports.jsxs("div",{className:"settings-form",children:[jsxRuntimeExports.jsx(DebugInfo,{componentName:"CORSSettings"}),jsxRuntimeExports.jsx("h2",{children:"CORS Management"}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"CORS Strategy Selection"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:"default-cors-strategy",children:"Default CORS Strategy"}),jsxRuntimeExports.jsxs("select",{id:"default-cors-strategy",value:r.cors.defaultStrategy,onChange:j,children:[jsxRuntimeExports.jsx("option",{value:CORSStrategy.RSS2JSON,children:"RSS2JSON Services (Recommended)"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.JSONP,children:"JSONP Approach"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.SERVICE_WORKER,children:"Browser Service Worker Proxy"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.DIRECT,children:"Direct Fetch (CORS-Friendly Only)"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.EXTENSION,children:"Browser Extension"})]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"The primary method used to bypass CORS restrictions when fetching feeds."})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("h4",{children:"Protocol-Specific Strategies"}),["RSS","JSON","API","IPFS","MASTODON","SSB"].map(q=>jsxRuntimeExports.jsxs("div",{className:"protocol-strategy form-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:`${q}-strategy`,children:q}),jsxRuntimeExports.jsxs("select",{id:`${q}-strategy`,value:r.cors.protocolStrategies[q]||"DEFAULT",onChange:oe=>$(q,oe.target.value),children:[jsxRuntimeExports.jsx("option",{value:"DEFAULT",children:"Use Default Strategy"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.RSS2JSON,children:"RSS2JSON Services"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.JSONP,children:"JSONP Approach"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.SERVICE_WORKER,children:"Browser Service Worker Proxy"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.DIRECT,children:"Direct Fetch"}),jsxRuntimeExports.jsx("option",{value:CORSStrategy.EXTENSION,children:"Browser Extension"})]})]},q))]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"RSS2JSON Service Configuration"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("h4",{children:"Available Services:"}),r.cors.services.rss2json.map(q=>jsxRuntimeExports.jsxs("div",{className:"service-item",children:[jsxRuntimeExports.jsx("div",{className:"service-url",children:q}),jsxRuntimeExports.jsx("button",{className:"btn-icon remove-service",onClick:()=>G("rss2json",q),title:"Remove service",children:""})]},q)),jsxRuntimeExports.jsxs("div",{className:"add-service-form",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter new RSS2JSON service URL",value:N,onChange:q=>k(q.target.value)}),jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:L,children:"Add Service"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("h4",{children:"CORS Proxies:"}),r.cors.services.corsProxies.map(q=>jsxRuntimeExports.jsxs("div",{className:"service-item",children:[jsxRuntimeExports.jsx("div",{className:"service-url",children:q}),jsxRuntimeExports.jsx("button",{className:"btn-icon remove-service",onClick:()=>G("corsProxies",q),title:"Remove proxy",children:""})]},q)),jsxRuntimeExports.jsxs("div",{className:"add-service-form",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter new CORS proxy URL",value:A,onChange:q=>S(q.target.value)}),jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:M,children:"Add Proxy"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"CORS Test Utility"}),jsxRuntimeExports.jsxs("div",{className:"cors-test-form",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter URL to test CORS strategies",value:s,onChange:q=>i(q.target.value)}),jsxRuntimeExports.jsx("button",{className:`btn-primary ${a==="testing"?"loading":""}`,onClick:z,disabled:a==="testing",children:a==="testing"?"Testing...":"Test CORS Strategies"})]}),a!=="idle"&&jsxRuntimeExports.jsxs("div",{className:`test-results ${a}`,children:[jsxRuntimeExports.jsx("p",{className:"test-message",children:u}),jsxRuntimeExports.jsx("div",{className:"strategy-results",children:Object.entries(E).map(([q,oe])=>jsxRuntimeExports.jsxs("div",{className:`strategy-result ${oe.status}`,children:[jsxRuntimeExports.jsx("div",{className:"strategy-name",children:q}),jsxRuntimeExports.jsx("div",{className:"strategy-status",children:oe.status==="success"?` Success (${oe.time}ms)`:oe.status==="testing"?" Testing...":oe.status==="error"?` Failed${oe.message?`: ${oe.message}`:""}`:" Not tested"})]},q))})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-actions",children:[jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:W,disabled:!x,children:"Apply CORS Settings"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:()=>t(SettingsTab.CORS),children:"Reset CORS Settings"})]}),x&&jsxRuntimeExports.jsx("div",{className:"settings-feedback",children:jsxRuntimeExports.jsx("p",{children:"You have unsaved changes to your CORS settings."})})]})});CORSSettings.displayName="CORSSettings";const DraggableProtocolItem=({protocol:r,index:e,moveProtocol:t})=>{const[s,i]=reactExports.useState(!1),a=x=>{x.dataTransfer.setData("text/plain",e.toString()),i(!0)},l=x=>{x.preventDefault()},u=x=>{x.preventDefault();const w=parseInt(x.dataTransfer.getData("text/plain"));t(w,e),i(!1)},p=()=>{i(!1)};return jsxRuntimeExports.jsxs("div",{className:`protocol-item ${s?"dragging":""}`,draggable:!0,onDragStart:a,onDragOver:l,onDrop:u,onDragEnd:p,children:[jsxRuntimeExports.jsx("span",{className:"protocol-drag-handle",children:""}),jsxRuntimeExports.jsx("span",{className:"protocol-name",children:r.toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"protocol-priority-badge",children:["Priority ",e+1]})]})},ProtocolSettings=reactExports.memo(()=>{const{settings:r,updateSettings:e,resetSettings:t}=useSettings(),[s,i]=reactExports.useState(r.protocols.priority[0]),[a,l]=reactExports.useState(!1),[u,p]=reactExports.useState(r.protocols.priority),[x,w]=reactExports.useState(r.protocols.settings||{});reactExports.useEffect(()=>{const j={...x};r.protocols.priority.forEach($=>{j[$]||(j[$]={enabled:!0,fetchLimit:50,contentParsing:"full",extractMedia:!0})}),w(j)},[]),reactExports.useEffect(()=>{p(r.protocols.priority),w(r.protocols.settings||{}),l(!1)},[r]);const E=(j,$)=>{const D=u[j],z=[...u];z.splice(j,1),z.splice($,0,D),p(z),l(!0)},R=(j,$)=>{w({...x,[j]:{...x[j],enabled:$}}),l(!0)},A=(j,$)=>{w({...x,[j]:{...x[j],fetchLimit:$}}),l(!0)},S=(j,$)=>{w({...x,[j]:{...x[j],contentParsing:$}}),l(!0)},N=(j,$)=>{w({...x,[j]:{...x[j],extractMedia:$}}),l(!0)},k=()=>{e({protocols:{priority:u,settings:x,autoDetect:r.protocols.autoDetect!==!1,fallbackEnabled:r.protocols.fallbackEnabled!==!1}}),l(!1),SettingsIntegrationService.resetCache();const j=document.querySelector(".settings-content");if(j){const $=document.createElement("div");$.className="settings-feedback success",$.textContent="Protocol settings applied successfully!",j.appendChild($),setTimeout(()=>{$.remove()},3e3)}};return jsxRuntimeExports.jsxs("div",{className:"settings-form",children:[jsxRuntimeExports.jsx("h2",{children:"Protocol Configuration"}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Intelligence Protocol Priority"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Drag to reorder protocols by priority. Higher priority protocols will be used first."}),jsxRuntimeExports.jsx("div",{className:"protocol-list",children:u.map((j,$)=>jsxRuntimeExports.jsx(DraggableProtocolItem,{protocol:j,index:$,moveProtocol:E},j))})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Protocol-Specific Settings"}),jsxRuntimeExports.jsx("div",{className:"protocol-settings-tabs",children:u.map(j=>jsxRuntimeExports.jsx("button",{className:`protocol-tab ${j===s?"active":""}`,onClick:()=>i(j),children:j.toUpperCase()},j))}),jsxRuntimeExports.jsx("div",{className:"protocol-settings-content",children:u.map(j=>{var $,D,z,L;return jsxRuntimeExports.jsxs("div",{className:`protocol-settings-panel ${j===s?"active":"hidden"}`,children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Protocol Status"}),jsxRuntimeExports.jsxs("select",{className:"form-control",value:($=x[j])!=null&&$.enabled?"enabled":"disabled",onChange:M=>R(j,M.target.value==="enabled"),children:[jsxRuntimeExports.jsx("option",{value:"enabled",children:"Enabled"}),jsxRuntimeExports.jsx("option",{value:"disabled",children:"Disabled"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Fetch Limit"}),jsxRuntimeExports.jsx("input",{type:"number",className:"form-control",value:((D=x[j])==null?void 0:D.fetchLimit)||50,min:"1",max:"100",onChange:M=>A(j,parseInt(M.target.value,10))}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Maximum number of items to fetch per feed"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Content Parsing"}),jsxRuntimeExports.jsxs("select",{className:"form-control",value:((z=x[j])==null?void 0:z.contentParsing)||"full",onChange:M=>S(j,M.target.value),children:[jsxRuntimeExports.jsx("option",{value:"full",children:"Full Content"}),jsxRuntimeExports.jsx("option",{value:"summary",children:"Summary Only"}),jsxRuntimeExports.jsx("option",{value:"metadata",children:"Metadata Only"})]})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((L=x[j])==null?void 0:L.extractMedia)||!1,onChange:M=>N(j,M.target.checked)}),"Enable content media extraction"]})})]},j)})})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Protocol Auto-Detection"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:r.protocols.autoDetect!==!1,onChange:j=>{e({protocols:{...r.protocols,autoDetect:j.target.checked}}),l(!0)}}),"Automatically detect and use optimal protocol for feeds"]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"When enabled, the system will attempt to determine the best protocol for each feed"})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:r.protocols.fallbackEnabled!==!1,onChange:j=>{e({protocols:{...r.protocols,fallbackEnabled:j.target.checked}}),l(!0)}}),"Fallback to alternative protocols on failure"]})})]}),jsxRuntimeExports.jsxs("div",{className:"settings-actions",children:[jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:k,disabled:!a,children:"Apply Protocol Settings"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:()=>t(SettingsTab.PROTOCOLS),children:"Reset to Defaults"})]}),a&&jsxRuntimeExports.jsx("div",{className:"settings-feedback",children:jsxRuntimeExports.jsx("p",{children:"You have unsaved changes to your protocol settings."})})]})}),VerificationIndicator=({trustRating:r=0,source:e,compact:t=!1,showLabel:s=!0})=>{const{trusted:i,warning:a,status:l}=SettingsIntegrationService.getTrustStatus(r),u=SettingsIntegrationService.getVerificationSettings().preferredMethods,p=()=>i?"Verified":a?"Low Trust":"Unverified",x=()=>{let w=`Trust rating: ${r}%`;return e&&(w+=` | Source: ${e}`),u.length>0&&(w+=` | Verification: ${u.join(", ")}`),w};return jsxRuntimeExports.jsxs("div",{className:`verification-indicator ${l} ${t?"compact":""}`,title:x(),children:[jsxRuntimeExports.jsx("span",{className:"indicator-icon",children:l==="trusted"?"":l==="warning"?"!":"?"}),s&&jsxRuntimeExports.jsx("span",{className:"indicator-label",children:p()})]})},VerificationSettings=React.memo(()=>{const{settings:r,updateSettings:e,resetSettings:t}=useSettings(),[s,i]=reactExports.useState(!1),[a,l]=reactExports.useState(75),[u,p]=reactExports.useState(r.verification.preferredMethods),[x,w]=reactExports.useState(2),[E,R]=reactExports.useState({crossReference:!0,machineLearning:!0,highlightUnverified:!0});reactExports.useEffect(()=>{p(r.verification.preferredMethods),i(!1)},[r]);const A=reactExports.useCallback($=>{e({verification:{...r.verification,minimumTrustRating:parseInt($.target.value,10)}}),i(!0),SettingsIntegrationService.resetCache()},[r.verification,e]),S=reactExports.useCallback($=>{e({verification:{...r.verification,warningThreshold:parseInt($.target.value,10)}}),i(!0),SettingsIntegrationService.resetCache()},[r.verification,e]),N=reactExports.useCallback($=>{const D=[...u],z=D.indexOf($);z>=0?D.splice(z,1):D.push($),p(D),e({verification:{...r.verification,preferredMethods:D}}),i(!0),SettingsIntegrationService.resetCache()},[u,r.verification,e]),k=($,D)=>{const z=[...u],L=z.indexOf($);L<0||(D==="up"&&L>0?[z[L-1],z[L]]=[z[L],z[L-1]]:D==="down"&&L<z.length-1&&([z[L],z[L+1]]=[z[L+1],z[L]]),p(z),e({verification:{...r.verification,preferredMethods:z}}),i(!0),SettingsIntegrationService.resetCache())},j=()=>{e({verification:{...r.verification,advancedSettings:{crossReference:E.crossReference,machineLearning:E.machineLearning,highlightUnverified:E.highlightUnverified,crossReferenceCount:x}}}),i(!1),SettingsIntegrationService.resetCache();const $=document.querySelector(".settings-content");if($){const D=document.createElement("div");D.className="settings-feedback success",D.textContent="Verification settings applied successfully!",$.appendChild(D),setTimeout(()=>{D.remove()},3e3)}};return jsxRuntimeExports.jsxs("div",{className:"settings-form",children:[jsxRuntimeExports.jsx("h2",{children:"Intelligence Verification Parameters"}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Trust Rating Configuration"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"min-trust-rating",children:["Minimum Trust Rating: ",r.verification.minimumTrustRating,"%"]}),jsxRuntimeExports.jsx("input",{id:"min-trust-rating",type:"range",min:"0",max:"100",step:"5",value:r.verification.minimumTrustRating,onChange:A}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Intelligence sources below this rating will be flagged as potentially unreliable"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"warning-threshold",children:["Warning Threshold: ",r.verification.warningThreshold,"%"]}),jsxRuntimeExports.jsx("input",{id:"warning-threshold",type:"range",min:"0",max:"100",step:"5",value:r.verification.warningThreshold,onChange:S}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Sources between minimum trust and this value will show warnings"})]}),jsxRuntimeExports.jsxs("div",{className:"verification-preview",children:[jsxRuntimeExports.jsx("h4",{children:"Verification Preview"}),jsxRuntimeExports.jsxs("div",{className:"preview-controls",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"preview-trust-rating",children:["Preview Trust Rating: ",a,"%"]}),jsxRuntimeExports.jsx("input",{id:"preview-trust-rating",type:"range",min:"0",max:"100",step:"5",value:a,onChange:$=>l(parseInt($.target.value,10))})]}),jsxRuntimeExports.jsxs("div",{className:"preview-indicators",children:[jsxRuntimeExports.jsxs("div",{className:"preview-item",children:[jsxRuntimeExports.jsx(VerificationIndicator,{trustRating:a,source:"Example Source"}),jsxRuntimeExports.jsx("span",{className:"preview-label",children:"Standard Indicator"})]}),jsxRuntimeExports.jsxs("div",{className:"preview-item",children:[jsxRuntimeExports.jsx(VerificationIndicator,{trustRating:a,source:"Example Source",compact:!0}),jsxRuntimeExports.jsx("span",{className:"preview-label",children:"Compact Indicator"})]}),jsxRuntimeExports.jsxs("div",{className:"preview-item",children:[jsxRuntimeExports.jsx(VerificationIndicator,{trustRating:a,source:"Example Source",showLabel:!1}),jsxRuntimeExports.jsx("span",{className:"preview-label",children:"Icon Only"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Verification Methods"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Select and prioritize verification methods to validate intelligence sources"}),jsxRuntimeExports.jsx("div",{className:"verification-methods-list",children:["official","community","automated","alliance","independent"].map($=>jsxRuntimeExports.jsxs("div",{className:"verification-method",children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:u.includes($),onChange:()=>N($)}),$.charAt(0).toUpperCase()+$.slice(1)]}),jsxRuntimeExports.jsxs("div",{className:"method-controls",children:[jsxRuntimeExports.jsxs("span",{className:"method-priority",children:["Priority: ",u.indexOf($)+1]}),jsxRuntimeExports.jsx("button",{className:"method-move-up",onClick:()=>k($,"up"),disabled:!u.includes($)||u.indexOf($)===0,children:""}),jsxRuntimeExports.jsx("button",{className:"method-move-down",onClick:()=>k($,"down"),disabled:!u.includes($)||u.indexOf($)===u.length-1,children:""})]})]},$))})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Advanced Verification"}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:E.crossReference,onChange:$=>R({...E,crossReference:$.target.checked})}),"Cross-reference intelligence against multiple sources"]})}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:E.machineLearning,onChange:$=>R({...E,machineLearning:$.target.checked})}),"Apply machine learning verification algorithms"]})}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:E.highlightUnverified,onChange:$=>R({...E,highlightUnverified:$.target.checked})}),"Highlight unverified intelligence in dashboard"]})}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Minimum Cross-References"}),jsxRuntimeExports.jsxs("select",{className:"form-control",value:x,onChange:$=>w(parseInt($.target.value,10)),children:[jsxRuntimeExports.jsx("option",{value:1,children:"1 (Minimal)"}),jsxRuntimeExports.jsx("option",{value:2,children:"2 (Standard)"}),jsxRuntimeExports.jsx("option",{value:3,children:"3 (Enhanced)"}),jsxRuntimeExports.jsx("option",{value:5,children:"5 (Maximum)"})]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Number of independent sources required to mark intelligence as verified"})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-actions",children:[jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:j,disabled:!s,children:"Apply Verification Settings"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:()=>t(SettingsTab.VERIFICATION),children:"Reset to Defaults"})]}),s&&jsxRuntimeExports.jsx("div",{className:"settings-feedback",children:jsxRuntimeExports.jsx("p",{children:"You have unsaved changes to your verification settings."})})]})}),CSS_VARS={FONT_SIZE:"--base-font-size",DENSITY:"--ui-density",PRIMARY_COLOR:"--primary-color",SECONDARY_COLOR:"--secondary-color",BACKGROUND_COLOR:"--background-color",TEXT_COLOR:"--text-color",ACCENT_COLOR:"--accent-color"},THEME_COLORS={dark:{primary:"#1a1a1a",secondary:"#292929",background:"#141414",text:"#e0e0e0",accent:"#007acc"},night:{primary:"#101823",secondary:"#1c2636",background:"#0a121f",text:"#d0d7e2",accent:"#5277b4"},combat:{primary:"#2a2118",secondary:"#352a1e",background:"#1e1813",text:"#e5d6c5",accent:"#bf5b30"},alliance:{primary:"#1a2a42",secondary:"#27395e",background:"#131f30",text:"#d0dff0",accent:"#50b4e0"},light:{primary:"#f5f5f5",secondary:"#e0e0e0",background:"#ffffff",text:"#333333",accent:"#0066cc"},system:{primary:"var(--dynamic-primary)",secondary:"var(--dynamic-secondary)",background:"var(--dynamic-background)",text:"var(--dynamic-text)",accent:"var(--dynamic-accent)"}},DENSITY_VALUES={comfortable:{spacing:"1",padding:"16px",borderRadius:"8px"},compact:{spacing:"0.85",padding:"8px",borderRadius:"4px"},spacious:{spacing:"1.2",padding:"24px",borderRadius:"12px"}};class DisplaySettingsManager{static applyAllDisplaySettings(){this.applyTheme(),this.applyFontSize(),this.applyDensity()}static applyTheme(){const{theme:e}=SettingsIntegrationService.getThemeSettings(),t=document.documentElement;t.setAttribute("data-theme",e);const s=THEME_COLORS[e]||THEME_COLORS.alliance;t.style.setProperty(CSS_VARS.PRIMARY_COLOR,s.primary),t.style.setProperty(CSS_VARS.SECONDARY_COLOR,s.secondary),t.style.setProperty(CSS_VARS.BACKGROUND_COLOR,s.background),t.style.setProperty(CSS_VARS.TEXT_COLOR,s.text),t.style.setProperty(CSS_VARS.ACCENT_COLOR,s.accent),t.style.setProperty("--secondary-bg",s.secondary),t.style.setProperty("--tertiary-bg",s.primary),t.style.setProperty("--border-color",s.secondary),t.style.setProperty("--input-bg",s.secondary),t.style.setProperty("--hover-bg",s.accent+"20"),e==="system"&&this.setupSystemThemeListener(),console.log(`Applied theme: ${e}`)}static applyFontSize(){const{fontSize:e}=SettingsIntegrationService.getThemeSettings();document.documentElement.style.setProperty(CSS_VARS.FONT_SIZE,`${e}px`),console.log(`Applied font size: ${e}px`)}static applyDensity(){const{density:e}=SettingsIntegrationService.getThemeSettings(),t=document.documentElement;t.setAttribute("data-density",e);const s=DENSITY_VALUES[e]||DENSITY_VALUES.comfortable;t.style.setProperty(CSS_VARS.DENSITY,s.spacing),t.style.setProperty("--padding-base",s.padding),t.style.setProperty("--border-radius",s.borderRadius),t.setAttribute("data-compact",e==="compact"?"true":"false"),console.log(`Applied density: ${e}`)}static setupSystemThemeListener(){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=s=>{const i=document.documentElement,a=s.matches;a?(i.style.setProperty("--dynamic-primary",THEME_COLORS.dark.primary),i.style.setProperty("--dynamic-secondary",THEME_COLORS.dark.secondary),i.style.setProperty("--dynamic-background",THEME_COLORS.dark.background),i.style.setProperty("--dynamic-text",THEME_COLORS.dark.text),i.style.setProperty("--dynamic-accent",THEME_COLORS.dark.accent)):(i.style.setProperty("--dynamic-primary",THEME_COLORS.light.primary),i.style.setProperty("--dynamic-secondary",THEME_COLORS.light.secondary),i.style.setProperty("--dynamic-background",THEME_COLORS.light.background),i.style.setProperty("--dynamic-text",THEME_COLORS.light.text),i.style.setProperty("--dynamic-accent",THEME_COLORS.light.accent)),console.log(`Applied system theme: ${a?"dark":"light"}`)};t(e),e.addEventListener("change",t)}}const displaySettings={apply:()=>DisplaySettingsManager.applyAllDisplaySettings(),applyTheme:()=>DisplaySettingsManager.applyTheme(),applyFontSize:()=>DisplaySettingsManager.applyFontSize(),applyDensity:()=>DisplaySettingsManager.applyDensity()},DisplaySettings=React.memo(()=>{const{settings:r,updateSettings:e,resetSettings:t}=useSettings(),[s,i]=reactExports.useState(!1),a=reactExports.useCallback(w=>{e({display:{...r.display,theme:w.target.value}}),i(!0)},[r.display,e]),l=reactExports.useCallback(w=>{e({display:{...r.display,density:w.target.value}}),i(!0)},[r.display,e]),u=w=>{e({display:{...r.display,fontSize:parseInt(w.target.value,10)}}),i(!0)};reactExports.useEffect(()=>{s&&displaySettings.apply()},[r.display,s]);const p=()=>{displaySettings.apply(),i(!1);const w=document.querySelector(".settings-content");if(w){const E=document.createElement("div");E.className="settings-feedback success",E.textContent="Display settings applied successfully!",w.appendChild(E),setTimeout(()=>{E.remove()},3e3)}},x=()=>{t(SettingsTab.DISPLAY),i(!0)};return jsxRuntimeExports.jsxs("div",{className:"settings-form",children:[jsxRuntimeExports.jsx("h2",{children:"Tactical Display Configuration"}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Visual Theme"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:"theme-select",children:"Interface Theme"}),jsxRuntimeExports.jsxs("select",{id:"theme-select",value:r.display.theme,onChange:a,children:[jsxRuntimeExports.jsx("option",{value:"dark",children:"Dark Ops (Default)"}),jsxRuntimeExports.jsx("option",{value:"night",children:"Night Operations"}),jsxRuntimeExports.jsx("option",{value:"combat",children:"Combat Mode"}),jsxRuntimeExports.jsx("option",{value:"light",children:"Daylight Operations"}),jsxRuntimeExports.jsx("option",{value:"system",children:"System-Matched"}),jsxRuntimeExports.jsx("option",{value:"alliance",children:"Earth Alliance Standard"})]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Select the visual theme for your tactical interface."})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:"density-select",children:"Information Density"}),jsxRuntimeExports.jsxs("select",{id:"density-select",value:r.display.density,onChange:l,children:[jsxRuntimeExports.jsx("option",{value:"compact",children:"Compact (Maximum Intel)"}),jsxRuntimeExports.jsx("option",{value:"comfortable",children:"Comfortable (Balanced)"}),jsxRuntimeExports.jsx("option",{value:"spacious",children:"Spacious (Enhanced Readability)"})]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Controls how densely information is displayed on your dashboard."})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Text Configuration"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"font-size-slider",children:["Base Font Size: ",r.display.fontSize,"px"]}),jsxRuntimeExports.jsx("input",{id:"font-size-slider",type:"range",min:"10",max:"20",step:"1",value:r.display.fontSize,onChange:u}),jsxRuntimeExports.jsx("div",{className:"font-size-example",style:{fontSize:`${r.display.fontSize}px`},children:"Sample text at current size"})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",defaultChecked:!0}),"Use high-contrast text for critical data"]})})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Dashboard Layout"}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",defaultChecked:!0}),"Show timestamp for all intelligence items"]})}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",defaultChecked:!0}),"Show source indicator badges"]})}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",defaultChecked:!0}),"Enable tactical animations"]})})]}),jsxRuntimeExports.jsxs("div",{className:"settings-actions",children:[jsxRuntimeExports.jsx("button",{className:"btn-primary",onClick:p,children:"Apply Display Settings"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:x,children:"Reset Display"})]}),s&&jsxRuntimeExports.jsx("div",{className:"settings-feedback",children:jsxRuntimeExports.jsx("p",{children:"You have unsaved changes to your display settings."})})]})}),AdvancedSettings=()=>{const{resetSettings:r}=useSettings();return jsxRuntimeExports.jsxs("div",{className:"settings-form",children:[jsxRuntimeExports.jsx("h2",{children:"Advanced System Configuration"}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Performance Optimization"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",defaultChecked:!0}),"Enable hardware acceleration"]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Uses GPU for rendering when available (recommended for complex visualizations)"})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",defaultChecked:!0}),"Background processing for intelligence analysis"]})}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Worker Threads"}),jsxRuntimeExports.jsxs("select",{className:"form-control",children:[jsxRuntimeExports.jsx("option",{value:"1",children:"1 (Minimal)"}),jsxRuntimeExports.jsx("option",{value:"2",selected:!0,children:"2 (Balanced)"}),jsxRuntimeExports.jsx("option",{value:"4",children:"4 (Performance)"}),jsxRuntimeExports.jsx("option",{value:"8",children:"8 (Maximum)"})]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Number of parallel processing threads for background operations"})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"Advanced Data Management"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Indexing Strategy"}),jsxRuntimeExports.jsxs("select",{className:"form-control",children:[jsxRuntimeExports.jsx("option",{value:"standard",selected:!0,children:"Standard (Balanced)"}),jsxRuntimeExports.jsx("option",{value:"aggressive",children:"Aggressive (Faster Search)"}),jsxRuntimeExports.jsx("option",{value:"minimal",children:"Minimal (Lower Resource Usage)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",defaultChecked:!0}),"Enable enhanced content extraction"]}),jsxRuntimeExports.jsx("p",{className:"settings-description",children:"Deeper analysis of feed content (uses more processing power)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-section",children:[jsxRuntimeExports.jsx("h3",{children:"System Operations"}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{children:"Log Level"}),jsxRuntimeExports.jsxs("select",{className:"form-control",children:[jsxRuntimeExports.jsx("option",{value:"error",children:"Error Only"}),jsxRuntimeExports.jsx("option",{value:"warn",selected:!0,children:"Warning"}),jsxRuntimeExports.jsx("option",{value:"info",children:"Information"}),jsxRuntimeExports.jsx("option",{value:"debug",children:"Debug"}),jsxRuntimeExports.jsx("option",{value:"trace",children:"Trace (Verbose)"})]})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox"}),"Enable telemetry (anonymous usage statistics)"]})}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsx("button",{className:"btn-secondary",children:"Export Diagnostic Data"})}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("button",{className:"btn-danger",children:"Clear All Application Data"}),jsxRuntimeExports.jsx("p",{className:"settings-description warning-text",children:"Warning: This will reset all settings and clear cached intelligence data"})]})]}),jsxRuntimeExports.jsxs("div",{className:"settings-actions",children:[jsxRuntimeExports.jsx("button",{className:"btn-primary",children:"Save Advanced Settings"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary",onClick:()=>r(SettingsTab.ADVANCED),children:"Reset to Defaults"})]})]})},SettingsTabContent=()=>{const{tab:r}=useParams();if(!r)return console.log("[SettingsTabContent] No tab specified, redirecting to general"),jsxRuntimeExports.jsx(Navigate,{to:"/settings/general",replace:!0});switch(console.log(`[SettingsTabContent] Rendering tab: ${r}`),r){case SettingsTab.GENERAL:return jsxRuntimeExports.jsx(GeneralSettings,{});case SettingsTab.CORS:return jsxRuntimeExports.jsx(CORSSettings,{});case SettingsTab.PROTOCOLS:return jsxRuntimeExports.jsx(ProtocolSettings,{});case SettingsTab.VERIFICATION:return jsxRuntimeExports.jsx(VerificationSettings,{});case SettingsTab.DISPLAY:return jsxRuntimeExports.jsx(DisplaySettings,{});case SettingsTab.ADVANCED:return jsxRuntimeExports.jsx(AdvancedSettings,{});default:return console.error(`[SettingsTabContent] Invalid tab: ${r}`),jsxRuntimeExports.jsx(SettingsError,{message:"Invalid Settings Tab",details:`The requested tab "${r}" does not exist.`,code:`Expected one of: ${Object.values(SettingsTab).join(", ")}`})}},AppRoutes=()=>jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(MainLayout,{}),children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/feed/:id",element:jsxRuntimeExports.jsx(FeedPage,{})}),jsxRuntimeExports.jsxs(Route,{path:"/settings",element:jsxRuntimeExports.jsx(SettingsPage,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Navigate,{to:"/settings/general",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:":tab",element:jsxRuntimeExports.jsx(SettingsTabContent,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(SettingsError,{message:"Invalid Settings Route",details:"The requested settings section does not exist.",code:"No matching route found for the current URL."})})]}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(ProfilePageSimple,{})}),jsxRuntimeExports.jsx(Route,{path:"/web3-test",element:jsxRuntimeExports.jsx(Web3TestPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/web3login",element:jsxRuntimeExports.jsx(Navigate,{to:"/profile",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFoundPage,{})})]})}),SearchResults=()=>{const{searchResults:r,isSearching:e,searchQuery:t,clearSearch:s}=useSearch();return!r&&!e?null:jsxRuntimeExports.jsx("div",{className:"search-results-overlay",children:jsxRuntimeExports.jsxs("div",{className:"search-results-container",children:[jsxRuntimeExports.jsxs("div",{className:"search-results-header",children:[jsxRuntimeExports.jsx("div",{className:"search-results-title",children:e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"search-loading",children:""}),'Searching for "',t,'"...']}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:['Search Results for "',t,'"',r&&jsxRuntimeExports.jsxs("span",{className:"search-stats",children:[r.totalCount," results in ",r.searchTime,"ms"]})]})}),jsxRuntimeExports.jsx("button",{className:"search-close-button",onClick:s,"aria-label":"Close search results",children:""})]}),jsxRuntimeExports.jsx("div",{className:"search-results-content",children:e?jsxRuntimeExports.jsxs("div",{className:"search-loading-state",children:[jsxRuntimeExports.jsx("div",{className:"loading-spinner"}),jsxRuntimeExports.jsx("p",{children:"Searching across all feeds..."})]}):(r==null?void 0:r.results.length)===0?jsxRuntimeExports.jsxs("div",{className:"search-no-results",children:[jsxRuntimeExports.jsx("div",{className:"no-results-icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"No results found"}),jsxRuntimeExports.jsx("p",{children:"Try different keywords or check your spelling"}),r.suggestions.length>0&&jsxRuntimeExports.jsxs("div",{className:"search-suggestions",children:[jsxRuntimeExports.jsx("p",{children:"Suggestions:"}),jsxRuntimeExports.jsx("div",{className:"suggestion-tags",children:r.suggestions.map((i,a)=>jsxRuntimeExports.jsx("span",{className:"suggestion-tag",children:i},a))})]})]}):jsxRuntimeExports.jsx("div",{className:"search-results-list",children:r==null?void 0:r.results.map((i,a)=>jsxRuntimeExports.jsxs("div",{className:"search-result-item",children:[jsxRuntimeExports.jsxs("div",{className:"result-header",children:[jsxRuntimeExports.jsx("h3",{className:"result-title",children:jsxRuntimeExports.jsx("a",{href:i.feed.link,target:"_blank",rel:"noopener noreferrer",className:"result-link",children:i.feed.title})}),jsxRuntimeExports.jsxs("div",{className:"result-meta",children:[jsxRuntimeExports.jsx("span",{className:"result-source",children:i.feed.name}),jsxRuntimeExports.jsx("span",{className:"result-date",children:new Date(i.feed.pubDate).toLocaleDateString()}),jsxRuntimeExports.jsxs("span",{className:"result-score",children:["Relevance: ",Math.round(i.relevanceScore*10)/10]})]})]}),jsxRuntimeExports.jsx("div",{className:"result-snippet",children:i.snippet}),jsxRuntimeExports.jsxs("div",{className:"result-matched-fields",children:[jsxRuntimeExports.jsx("span",{className:"matched-label",children:"Found in:"}),i.matchedFields.map((l,u)=>jsxRuntimeExports.jsx("span",{className:"matched-field",children:l},u))]}),i.feed.author&&jsxRuntimeExports.jsxs("div",{className:"result-author",children:["By: ",i.feed.author]}),i.feed.categories&&i.feed.categories.length>0&&jsxRuntimeExports.jsx("div",{className:"result-categories",children:i.feed.categories.map((l,u)=>jsxRuntimeExports.jsx("span",{className:"result-category",children:l},u))})]},`${i.feed.id}-${a}`))})}),r&&r.results.length>0&&jsxRuntimeExports.jsx("div",{className:"search-results-footer",children:jsxRuntimeExports.jsxs("div",{className:"search-actions",children:[jsxRuntimeExports.jsx("button",{className:"search-action-button",onClick:()=>window.print(),children:" Print Results"}),jsxRuntimeExports.jsx("button",{className:"search-action-button",onClick:()=>{const i=JSON.stringify(r,null,2),a=new Blob([i],{type:"application/json"}),l=URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download=`search-results-${t}-${new Date().toISOString().split("T")[0]}.json`,u.click(),URL.revokeObjectURL(l)},children:" Export Results"})]})})]})})},DevelopmentNotice=()=>{const[r,e]=reactExports.useState(!1),[t,s]=reactExports.useState(!1);return reactExports.useEffect(()=>{s(!1)},[]),!t||!r?null:jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#1e40af",color:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",maxWidth:"400px",zIndex:1e3,fontSize:"14px",lineHeight:"1.5"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:" Development Mode"}),jsxRuntimeExports.jsx("div",{children:"RSS feeds are using validated sources from the Earth Alliance roster. All feeds have been tested and confirmed working."})]}),jsxRuntimeExports.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"18px",padding:"0",marginLeft:"12px"},"aria-label":"Close",children:""})]})})},RouteValidator=()=>{const r=useNavigate(),e=useLocation();return reactExports.useEffect(()=>{console.log("Route changed:",{pathname:e.pathname,search:e.search,hash:e.hash,state:e.state,key:e.key}),e.pathname.includes("/settings")&&!e.pathname.includes("/settings/")&&(console.warn("Incomplete settings route detected, redirecting to general"),r("/settings/general",{replace:!0}))},[e,r]),null},App=()=>(reactExports.useEffect(()=>()=>{PerformanceManager$1.cleanup()},[]),jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(SettingsProvider,{children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(Web3Provider,{children:jsxRuntimeExports.jsx(IPFSProvider,{children:jsxRuntimeExports.jsx(SearchProvider,{children:jsxRuntimeExports.jsx(FilterProvider,{children:jsxRuntimeExports.jsx(HealthProvider,{children:jsxRuntimeExports.jsx(FeedModeProvider,{children:jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsx(DevelopmentNotice,{}),jsxRuntimeExports.jsx(RouteValidator,{}),jsxRuntimeExports.jsx(AppRoutes,{}),jsxRuntimeExports.jsx(SearchResults,{})]})})})})})})})})})})),rootElement=document.getElementById("root");rootElement?ReactDOM.createRoot(rootElement).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})})):console.error("Failed to find the root element");
//# sourceMappingURL=index-B5ey9LS8.js.map

/* Intelligence Feed Layout Improvements CSS */

/* CRITICAL: Fix scrolling by ensuring proper height constraints */
.feed-visualizer-container {
  height: 100% !important;
  max-height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
  /* Prevent content expansion issues */
  position: relative !important;
  flex-shrink: 0 !important;
}

.feed-content {
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
  min-height: 0 !important; /* Critical for flex child to allow overflow */
  max-height: 100% !important;
  /* Prevent auto-expansion */
  position: relative !important;
  flex-shrink: 0 !important;
}

/* CRITICAL: Prevent auto-expansion of child elements that cause scrollbar clipping */
.feed-content, 
.feed-content > *,
.feed-scroll-container > * {
  max-height: none !important;
  min-height: auto !important;
  height: auto !important;
}

/* Ensure scroll container has stable dimensions */
.feed-scroll-container {
  flex: 1 !important;
  overflow-y: scroll !important; /* Always show scrollbar */
  overflow-x: hidden !important;
  height: 100% !important;
  max-height: 100% !important;
  padding: 8px !important;
  /* Enhanced scrollbar styling */
  scrollbar-width: thin !important;
  scrollbar-color: rgba(0, 255, 127, 0.8) rgba(0, 0, 0, 0.2) !important;
  /* Prevent content reflow issues */
  position: relative !important;
  flex-shrink: 0 !important;
  /* Stable dimensions */
  min-height: 200px !important;
  box-sizing: border-box !important;
}

/* Force stable layout for parent containers */
.tactical-main {
  height: 100vh !important;
  max-height: 100vh !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
}

.tactical-module {
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
  min-height: 0 !important;
}

.tactical-content {
  flex: 1 !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
  min-height: 0 !important;
}

/* Enhanced WebKit scrollbar styling */
.feed-scroll-container::-webkit-scrollbar {
  width: 12px !important;
  background: rgba(0, 0, 0, 0.2) !important;
}

.feed-scroll-container::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3) !important;
  border-radius: 6px !important;
  border: 1px solid rgba(0, 255, 127, 0.1) !important;
}

.feed-scroll-container::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(0, 255, 127, 0.8), rgba(0, 255, 127, 0.6)) !important;
  border-radius: 6px !important;
  border: 1px solid rgba(0, 255, 127, 0.3) !important;
}

.feed-scroll-container::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, rgba(0, 255, 127, 1), rgba(0, 255, 127, 0.8)) !important;
}

.feed-scroll-container::-webkit-scrollbar-thumb:active {
  background: rgba(0, 255, 127, 1) !important;
}

/* Reduce spacing and corner rounding for feed items */
.feed-item {
  padding: 8px 12px !important;
  margin-bottom: 8px !important;
  border-radius: 4px !important;
  /* Prevent expansion and reflow issues */
  box-sizing: border-box !important;
  max-width: 100% !important;
  overflow: hidden !important;
  flex-shrink: 0 !important;
  /* Stable height to prevent layout shifts */
  min-height: 80px !important;
}

/* Prevent animations from causing layout reflow */
.feed-item.mounting,
.feed-item.visible {
  animation: none !important;
  transform: none !important;
  transition: none !important;
}

/* Disable problematic animations that cause reflow */
.feed-item:hover {
  transform: none !important; /* Disable transform on hover that might cause reflow */
}

/* Ensure no content causes auto-expansion */
.feed-item-header,
.feed-header-left,
.feed-header-right,
.feed-title,
.feed-bottom-row {
  max-width: 100% !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

.feed-title {
  white-space: normal !important; /* Allow title to wrap but control it */
  line-height: 1.2 !important;
  max-height: 2.4em !important; /* Max 2 lines */
  overflow: hidden !important;
}

/* Reduce margin and padding for action buttons row */
.feed-bottom-row {
  margin-top: 6px !important;
  padding-top: 6px !important;
}

/* Override specific feed-actions rules to work with new layout */
.feed-actions {
  display: flex !important;
  gap: 8px !important;
  margin-top: 0 !important;
  padding-top: 0 !important;
  border-top: none !important;
}

/* Ensure tag styling is consistent */
.tag-badge {
  background: linear-gradient(135deg, #00bfff20, #00bfff40) !important;
  color: #00bfff !important;
  border: 1px solid rgba(0, 191, 255, 0.3) !important;
  padding: 3px 8px !important;
  border-radius: 12px !important;
  font-size: 10px !important;
  font-weight: 600 !important;
  letter-spacing: 0.5px !important;
  text-transform: uppercase !important;
  white-space: nowrap !important;
  transition: all 0.3s ease !important;
  box-shadow: 0 2px 4px rgba(0, 191, 255, 0.1) !important;
}

.reddit-comments-badge {
  background: rgba(0, 123, 255, 0.2) !important;
  color: #007bff !important;
  padding: 2px 6px !important;
  border-radius: 3px !important;
  font-size: 10px !important;
  font-weight: bold !important;
  border: 1px solid rgba(0, 123, 255, 0.3) !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 2px !important;
  transition: all 0.3s ease !important;
}

.reddit-comments-badge.clickable {
  cursor: pointer !important;
  background: none !important;
  border: 1px solid rgba(0, 123, 255, 0.3) !important;
}

.reddit-comments-badge.clickable:hover {
  background: rgba(0, 123, 255, 0.3) !important;
  border-color: rgba(0, 123, 255, 0.5) !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2) !important;
}

.reddit-comments-badge.clickable:active {
  transform: translateY(0) !important;
  box-shadow: 0 1px 2px rgba(0, 123, 255, 0.3) !important;
}

.comments-badge {
  background: rgba(108, 117, 125, 0.2) !important;
  color: #6c757d !important;
  padding: 2px 6px !important;
  border-radius: 3px !important;
  font-size: 10px !important;
  font-weight: bold !important;
  border: 1px solid rgba(108, 117, 125, 0.3) !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 2px !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
}

.comments-badge:hover {
  background: rgba(108, 117, 125, 0.4) !important;
  border-color: rgba(108, 117, 125, 0.5) !important;
  transform: translateY(-1px) !important;
}

/* Enhanced scrollbar visibility for feed scroll container */
.feed-scroll-container {
  scrollbar-width: auto !important; /* Change from thin to auto for better visibility */
  scrollbar-color: #00ff7f #1a233a !important; /* More visible colors */
  border: 1px solid rgba(0, 255, 127, 0.2) !important;
  border-radius: 4px !important;
  /* REMOVED: min-height that was causing auto-expansion issues */
}

.feed-scroll-container::-webkit-scrollbar {
  width: 8px !important;
}

.feed-scroll-container::-webkit-scrollbar-track {
  background: rgba(0, 255, 127, 0.1) !important;
  border-radius: 4px !important;
}

.feed-scroll-container::-webkit-scrollbar-thumb {
  background: rgba(0, 255, 127, 0.6) !important;
  border-radius: 4px !important;
  border: 1px solid rgba(0, 255, 127, 0.2) !important;
}

.feed-scroll-container::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 255, 127, 0.8) !important;
}

.feed-scroll-container::-webkit-scrollbar-thumb:active {
  background: rgba(0, 255, 127, 1) !important;
}

/* FIXED: Remove conflicting overflow rules that cause auto-expansion */
/* These rules were duplicates and conflicting with the main rules above */

/* Clickable source badge styling */
.feed-source-badge.clickable {
  cursor: pointer !important;
  background: none !important;
  border: 1px solid rgba(0, 255, 127, 0.3) !important;
  transition: all 0.3s ease !important;
}

.feed-source-badge.clickable:hover {
  background: rgba(0, 255, 127, 0.3) !important;
  border-color: rgba(0, 255, 127, 0.5) !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 2px 4px rgba(0, 255, 127, 0.2) !important;
}

.feed-source-badge.clickable:active {
  transform: translateY(0) !important;
  box-shadow: 0 1px 2px rgba(0, 255, 127, 0.3) !important;
}

/* Prevent any animations or transitions from affecting scrollbar */
.feed-scroll-container,
.feed-scroll-container > *,
.feed-item {
  will-change: auto !important; /* Disable problematic will-change properties */
}

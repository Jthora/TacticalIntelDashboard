<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/app-icon-192.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/app-icon-192.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#1a202c" />
    <title>Tactical Intel Dashboard</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      const SOURCE_FLAG_PREFIXES = ['VITE_SOURCE_', 'VITE_ENABLE_SOURCE_EXPANSION_2025'];
      const ALLOWLIST_KEY = 'VITE_SOURCE_ROLLOUT_ALLOWLIST';

      const selectedEntries = Object.entries(import.meta.env).filter(([key]) => {
        if (key === ALLOWLIST_KEY) return true;
        return SOURCE_FLAG_PREFIXES.some(prefix => key.startsWith(prefix));
      });

      window.__SOURCE_FLAG_OVERRIDES__ = selectedEntries.reduce((acc, [key, value]) => {
        acc[key] = value;
        return acc;
      }, {});
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
